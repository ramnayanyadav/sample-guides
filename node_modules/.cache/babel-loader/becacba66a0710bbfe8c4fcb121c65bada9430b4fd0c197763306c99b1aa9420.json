{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatConversationList = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _controller = require(\"./controller\");\nvar _hooks = require(\"./hooks\");\nvar styles = _interopRequireWildcard(require(\"./style\"));\nvar _spinner = _interopRequireDefault(require(\"./resources/spinner.svg\"));\nvar _Shared = require(\"../../Shared\");\nvar _ = require(\"../\");\nvar _Chats = require(\"../../Chats\");\nvar _ConversationListCustomView = require(\"../ConversationListCustomView\");\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj[\"default\"] = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2[\"default\"])(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n/**\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @description CometChatConversationList component retrieves the latest conversations that a CometChat logged-in user has been a part of.\n * The state of the component is communicated via 3 states i.e empty, loading and error.\n *\n */\nvar ConversationList = /*#__PURE__*/_react[\"default\"].forwardRef(function (props, ref) {\n  var _theme$palette, _theme$palette2;\n  /**\n   * Props destructuring \n   */\n  var activeConversation = props.activeConversation,\n    emptyText = props.emptyText,\n    errorText = props.errorText,\n    conversationType = props.conversationType,\n    limit = props.limit,\n    hideError = props.hideError,\n    tags = props.tags,\n    userAndGroupTags = props.userAndGroupTags,\n    loadingIconURL = props.loadingIconURL,\n    style = props.style,\n    enableSoundForMessages = props.enableSoundForMessages,\n    customIncomingMessageSound = props.customIncomingMessageSound,\n    customView = props.customView,\n    conversationListItemConfiguration = props.conversationListItemConfiguration,\n    theme = props.theme;\n\n  /**\n   * Component internal state\n   */\n  var loggedInUser = (0, _react.useRef)(null);\n  var conversationListManager = (0, _react.useRef)(new _controller.ConversationListManager({\n    conversationType: conversationType,\n    limit: limit,\n    tags: tags,\n    userAndGroupTags: userAndGroupTags\n  }));\n  var _useState = (0, _react.useState)([]),\n    _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n    conversationList = _useState2[0],\n    setConversationList = _useState2[1];\n  var _useState3 = (0, _react.useState)(null),\n    _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n    callbackData = _useState4[0],\n    setCallbackData = _useState4[1];\n  var _useState5 = (0, _react.useState)((0, _Shared.localize)(\"LOADING\")),\n    _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n    message = _useState6[0],\n    setMessage = _useState6[1];\n  var _useState7 = (0, _react.useState)({\n      show: false,\n      message: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n      confirmButtonText: (0, _Shared.localize)(\"DELETE\"),\n      conversation: null,\n      onCancel: function onCancel() {}\n    }),\n    _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n    showConfirm = _useState8[0],\n    setShowConfirm = _useState8[1];\n\n  /**\n   * Component private scoping\n   */\n  var _conversationListItemConfiguration = new _Shared.ConversationListItemConfiguration(conversationListItemConfiguration !== null && conversationListItemConfiguration !== void 0 ? conversationListItemConfiguration : {});\n  var _theme = new _Shared.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n\n  /**\n   * Component internal handlers/methods \n   */\n\n  var conversationCallback = function conversationCallback(listenerName) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    setCallbackData({\n      name: listenerName,\n      args: [].concat(args)\n    });\n  };\n\n  /**\n   * Mark the incoming message as delivered\n   */\n  var markMessageAsDelivered = function markMessageAsDelivered(message) {\n    if (message.hasOwnProperty(\"deliveredAt\") === false) {\n      _chat.CometChat.markAsDelivered(message);\n    }\n  };\n\n  /**\n   *\n   * If the incoming message is 1-1 conversation, and the conversation type filter is set to groups return false\n   * If the incoming message is group conversation, and the conversation type filter is set to users return false\n   * else return true\n   *\n   */\n  _react[\"default\"].useImperativeHandle(ref, function () {\n    return {\n      resetUnreadCount: resetUnreadCount,\n      updateLastMessage: updateLastMessage,\n      removeConversation: removeConversation,\n      deleteConversation: deleteConversation,\n      updateConversation: updateConversation\n    };\n  });\n  var filterByConversationType = function filterByConversationType(message) {\n    if (conversationType !== _Shared.ConversationTypeConstants.both) {\n      if (conversationType === _Shared.ConversationTypeConstants.users && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.group || conversationType === _Shared.ConversationTypeConstants.groups && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.user) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  /**\n   *\n   * Converting message object received in the listener callback to conversation object\n   */\n  var getConversationFromMessage = function getConversationFromMessage(message) {\n    return new Promise(function (resolve, reject) {\n      _chat.CometChat.CometChatHelper.getConversationFromMessage(message).then(function (conversation) {\n        var conversationKey = conversationList.findIndex(function (c) {\n          return c.conversationId === conversation.conversationId;\n        });\n        if (conversationKey > -1) {\n          resolve({\n            conversationKey: conversationKey,\n            conversationId: conversation.conversationId,\n            conversationType: conversation.conversationType,\n            conversationWith: conversation.conversationWith,\n            conversation: conversationList[conversationKey],\n            conversations: (0, _toConsumableArray2[\"default\"])(conversationList)\n          });\n        }\n        resolve({\n          conversationKey: conversationKey,\n          conversationId: conversation.conversationId,\n          conversationType: conversation.conversationType,\n          conversationWith: conversation.conversationWith,\n          conversation: conversation,\n          conversations: (0, _toConsumableArray2[\"default\"])(conversationList)\n        });\n      })[\"catch\"](function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var getUnreadMessageCount = function getUnreadMessageCount(message) {\n    var conversation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var unreadMessageCount = conversation !== null && conversation !== void 0 && conversation.unreadMessageCount ? Number(conversation === null || conversation === void 0 ? void 0 : conversation.unreadMessageCount) : 0;\n    unreadMessageCount = shouldIncrementCount(message) ? ++unreadMessageCount : unreadMessageCount;\n    return unreadMessageCount;\n  };\n\n  /**\n   *\n   * If the message is sent by the logged in user, return false\n   * If the message has category message or has incrementUnreadCount key in the metadata with value set to true, return true else return false\n   *\n   */\n  var shouldIncrementCount = function shouldIncrementCount(message) {\n    var _message$sender, _loggedInUser$current, _message$metadata;\n    if ((message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.uid) === (loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current = loggedInUser.current) === null || _loggedInUser$current === void 0 ? void 0 : _loggedInUser$current.uid)) {\n      return false;\n    }\n    if ((message === null || message === void 0 ? void 0 : message.category) === _Shared.MessageCategoryConstants.message || (message === null || message === void 0 ? void 0 : (_message$metadata = message.metadata) === null || _message$metadata === void 0 ? void 0 : _message$metadata.incrementUnreadCount) === true) {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * play notification sound for incoming messages\n   */\n  var playNotificationSound = function playNotificationSound(message) {\n    /**\n     * If unreadcount is not incremented, don't play notification sound\n     */\n    if (!shouldIncrementCount(message)) {\n      return false;\n    }\n    /**\n    * If customIncomingMessageSound url is present then CometChatSoundManager will play this sound \n    else play the default sound\n    */\n    if (enableSoundForMessages && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationType && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationWith) {\n      var _message$getSender, _activeConversation$c, _activeConversation$c2;\n      var receiverType = message.getReceiverType();\n      var receiverId = receiverType === _Shared.ReceiverTypeConstants.user ? message === null || message === void 0 ? void 0 : (_message$getSender = message.getSender()) === null || _message$getSender === void 0 ? void 0 : _message$getSender.getUid() : message === null || message === void 0 ? void 0 : message.getReceiverId();\n      if (receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c = activeConversation.conversationWith) === null || _activeConversation$c === void 0 ? void 0 : _activeConversation$c.uid) && receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c2 = activeConversation.conversationWith) === null || _activeConversation$c2 === void 0 ? void 0 : _activeConversation$c2.guid)) {\n        if (customIncomingMessageSound) {\n          _Shared.CometChatSoundManager.play(customIncomingMessageSound);\n        } else {\n          _Shared.CometChatSoundManager.play(_Shared.CometChatSoundManager.Sound.incomingMessageFromOther);\n        }\n      }\n    }\n  };\n\n  /**\n   *\n   * When a user goes online/ offline\n   */\n  var handleUsers = function handleUsers(user) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      return eachConversation.conversationType && eachConversation.conversationType === _Shared.ReceiverTypeConstants.user && eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === user.uid;\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2[\"default\"])(conversationList);\n      var conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread(_objectSpread({}, conversation.conversationWith), {}, {\n        status: user.getStatus()\n      });\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * When a text message / media message / custom message is received\n   */\n  var handleMessages = function handleMessages() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    /**\n     * marking the incoming messages as read\n     */\n    markMessageAsDelivered(message);\n    /**\n     * If the incoming message is 1-1 and the conversation type filter is set to group, return false\n     * OR\n     * If the incoming message is group and the conversation type filter is set to \"users\", return false\n     * ELSE\n     * return true\n     */\n    if (filterByConversationType() === false) {\n      return false;\n    }\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      var lastMessage = _objectSpread(_objectSpread({}, conversation === null || conversation === void 0 ? void 0 : conversation.lastMessage), message);\n      if (conversationKey > -1) {\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1);\n        conversations.unshift(newConversation);\n        setConversationList(conversations);\n\n        //play notification sound\n        playNotificationSound(message);\n      } else {\n        var _unreadMessageCount = getUnreadMessageCount(message);\n        var _newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, _unreadMessageCount);\n        conversations.unshift(_newConversation);\n        setConversationList(conversations);\n\n        //play notification sound\n        playNotificationSound(message);\n      }\n    });\n  };\n\n  /**\n   * Listener callback when a message is edited, deleted or updated\n   */\n  var handleMessageActions = function handleMessageActions() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1 && conversation.lastMessage.id === message.id) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a message is read\n   */\n  var handleMessageReadActions = function handleMessageReadActions() {\n    var messageReceipt = arguments.length <= 0 ? undefined : arguments[0];\n    var conversationKey = conversationList.findIndex(function (conversation) {\n      var _conversation$convers, _conversation$convers2;\n      return (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiverType) === (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) && ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers = conversation.conversationWith) === null || _conversation$convers === void 0 ? void 0 : _conversation$convers.uid) || (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers2 = conversation.conversationWith) === null || _conversation$convers2 === void 0 ? void 0 : _conversation$convers2.guid));\n    });\n    if (conversationKey > -1) {\n      var _conversation$lastMes;\n      var conversations = _objectSpread({}, conversationList);\n      var conversation = conversations[conversationKey];\n      var unreadMessageCount = getUnreadMessageCount(message, conversation);\n\n      /**\n       * If the message id in the read receipt is greater than or equal to the lastmessage id, set unreadmessagecount to 0\n       */\n      if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.messageId) >= (conversation === null || conversation === void 0 ? void 0 : (_conversation$lastMes = conversation.lastMessage) === null || _conversation$lastMes === void 0 ? void 0 : _conversation$lastMes.id)) {\n        unreadMessageCount = 0;\n      }\n      var newConversation = new _chat.CometChat.Conversation(conversation.conversationId, conversation.conversationType, conversation.lastMessage, conversation.conversationWith, unreadMessageCount);\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * Listener callback when a user joins/added to the group\n   */\n  var handleGroupMemberAddition = function handleGroupMemberAddition() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var newUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var _loggedInUser$current2;\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      } else if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current2 = loggedInUser.current) === null || _loggedInUser$current2 === void 0 ? void 0 : _loggedInUser$current2.uid) === newUser.uid) {\n        /**\n         * If the loggedin user is added to the group, add the conversation to the chats list\n         */\n        var _lastMessage = _objectSpread({}, message);\n        var _newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n          hasJoined: true\n        });\n        var _unreadMessageCount2 = getUnreadMessageCount(message, conversation);\n        var _newConversation2 = new _chat.CometChat.Conversation(conversationId, conversationType, _lastMessage, _newConversationWith, _unreadMessageCount2);\n        conversations.unshift(_newConversation2);\n        setConversationList(conversations);\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a member is kicked from / has left the group\n   */\n  var handleGroupMemberRemoval = function handleGroupMemberRemoval() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current3;\n        /**\n         * If the loggedin user is removed from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current3 = loggedInUser.current) === null || _loggedInUser$current3 === void 0 ? void 0 : _loggedInUser$current3.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a member is banned from the group\n   */\n  var handleGroupMemberBan = function handleGroupMemberBan() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current4;\n        /**\n         * If the loggedin user is banned from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current4 = loggedInUser.current) === null || _loggedInUser$current4 === void 0 ? void 0 : _loggedInUser$current4.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a group member scope is updated\n   */\n  var handleGroupMemberScopeChange = function handleGroupMemberScopeChange() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var user = arguments.length <= 1 ? undefined : arguments[1];\n    var newScope = arguments.length <= 2 ? undefined : arguments[2];\n    var group = arguments.length <= 4 ? undefined : arguments[4];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current5;\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current5 = loggedInUser.current) === null || _loggedInUser$current5 === void 0 ? void 0 : _loggedInUser$current5.uid) === user.uid) {\n          var newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n            scope: newScope\n          });\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1);\n          conversations.unshift(newConversation);\n          setConversationList(conversations);\n        } else {\n          var _newConversationWith2 = _objectSpread(_objectSpread({}, conversationWith), group);\n          var _newConversation3 = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, _newConversationWith2, unreadMessageCount);\n          conversations.splice(conversationKey, 1, _newConversation3);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback for typing events\n   */\n  var handleTyping = function handleTyping() {\n    var typingData = arguments.length <= 0 ? undefined : arguments[0];\n    var typingStarted = arguments.length <= 1 ? undefined : arguments[1];\n    var conversations = (0, _toConsumableArray2[\"default\"])(conversationList);\n    var conversationKey = conversations.findIndex(function (conversation) {\n      var _conversation$convers3, _typingData$sender, _conversation$convers4;\n      return (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) && ((conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === _Shared.ReceiverTypeConstants.user && ((_conversation$convers3 = conversation.conversationWith) === null || _conversation$convers3 === void 0 ? void 0 : _conversation$convers3.uid) === (typingData === null || typingData === void 0 ? void 0 : (_typingData$sender = typingData.sender) === null || _typingData$sender === void 0 ? void 0 : _typingData$sender.uid) || conversation.conversationType === _Shared.ReceiverTypeConstants.group && ((_conversation$convers4 = conversation.conversationWith) === null || _conversation$convers4 === void 0 ? void 0 : _conversation$convers4.guid) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverId));\n    });\n    if (conversationKey > -1) {\n      var typingIndicatorText = \"\";\n      if (typingStarted) {\n        var _typingData$sender2;\n        typingIndicatorText = (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) === _Shared.ReceiverTypeConstants.group ? \"\".concat(typingData === null || typingData === void 0 ? void 0 : (_typingData$sender2 = typingData.sender) === null || _typingData$sender2 === void 0 ? void 0 : _typingData$sender2.name, \" \").concat((0, _Shared.localize)(\"IS_TYPING\")) : (0, _Shared.localize)(\"IS_TYPING\");\n      }\n      var conversation = conversationList[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        showTypingIndicator: typingStarted,\n        typingIndicatorText: typingIndicatorText\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   * \n   * @param {Object} conversation\n   * Public method to update the conversation list programmatically  \n   */\n  var updateConversation = function updateConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      var _conversation$convers5;\n      return eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers5 = conversation.conversationWith) === null || _conversation$convers5 === void 0 ? void 0 : _conversation$convers5.uid);\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2[\"default\"])(conversationList);\n      var _conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread({}, _conversation.conversationWith);\n      var newConversation = _objectSpread(_objectSpread({}, _conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  var handlers = {\n    onUserOnline: handleUsers,\n    onUserOffline: handleUsers,\n    onTextMessageReceived: handleMessages,\n    onMediaMessageReceived: handleMessages,\n    onCustomMessageReceived: handleMessages,\n    onIncomingCallReceived: handleMessages,\n    onIncomingCallCancelled: handleMessages,\n    messageEdited: handleMessageActions,\n    onMessageDeleted: handleMessageActions,\n    messageRead: handleMessageReadActions,\n    onMemberAddedToGroup: handleGroupMemberAddition,\n    onGroupMemberJoined: handleGroupMemberAddition,\n    onGroupMemberKicked: handleGroupMemberRemoval,\n    onGroupMemberLeft: handleGroupMemberRemoval,\n    onGroupMemberBanned: handleGroupMemberBan,\n    onGroupMemberScopeChanged: handleGroupMemberScopeChange,\n    onTypingStarted: handleTyping,\n    onTypingEnded: handleTyping\n  };\n  var handleConversations = function handleConversations() {\n    getConversations().then(function (conversations) {\n      if (conversationList.length === 0 && conversations.length === 0) {\n        setMessage(\"NO_CHATS_FOUND\");\n      } else {\n        setMessage(\"\");\n      }\n      setConversationList(function (conversationList) {\n        return [].concat((0, _toConsumableArray2[\"default\"])(conversationList), (0, _toConsumableArray2[\"default\"])(conversations));\n      });\n    })[\"catch\"](function (error) {\n      _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n      setMessage(\"SOMETHING_WENT_WRONG\");\n    });\n  };\n  var getConversations = function getConversations() {\n    return new Promise(function (resolve, reject) {\n      conversationListManager === null || conversationListManager === void 0 ? void 0 : conversationListManager.current.fetchNextConversation().then(function (conversations) {\n        return resolve(conversations);\n      })[\"catch\"](function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var handleScroll = function handleScroll(event) {\n    var bottom = Math.round(event.currentTarget.scrollHeight - event.currentTarget.scrollTop) === Math.round(event.currentTarget.clientHeight);\n    if (bottom) {\n      handleConversations();\n    }\n  };\n\n  /**\n   * reset un read count\n   */\n  var resetUnreadCount = function resetUnreadCount(conversation) {\n    var conversations = (0, _toConsumableArray2[\"default\"])(conversationList);\n    var conversationKey = conversations.findIndex(function (conversationObject) {\n      return conversationObject.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var _conversation2 = conversations[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, _conversation2), {}, {\n        unreadMessageCount: 0\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   * update last message\n   */\n  var updateLastMessage = function updateLastMessage(message) {\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversations = response.conversations,\n        conversation = response.conversation;\n      var lastMessage = _objectSpread({}, conversation.lastMessage);\n      if (conversationKey > -1) {\n        var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n          lastMessage: lastMessage\n        });\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      }\n    });\n  };\n\n  /**\n   * Remove conversation from the conversationlist upon delete\n   */\n  var removeConversation = function removeConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (c) {\n      return c.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var newConversationList = (0, _toConsumableArray2[\"default\"])(conversationList);\n      newConversationList.splice(conversationKey, 1);\n      setConversationList(newConversationList);\n    }\n  };\n  var deleteConversation = function deleteConversation(conversationToBeDeleted) {\n    return new Promise(function (resolve, reject) {\n      var _conversationToBeDele, _conversationToBeDele2;\n      var conversationWith = (conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType) === _Shared.ReceiverTypeConstants.group ? conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele === void 0 ? void 0 : _conversationToBeDele.guid : conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele2 = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele2 === void 0 ? void 0 : _conversationToBeDele2.uid;\n      _chat.CometChat.deleteConversation(conversationWith, conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType).then(function (deletedConversation) {\n        setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n          show: false\n        }));\n        removeConversation(conversationToBeDeleted);\n        resolve(deletedConversation);\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onDeleteConversation, conversationToBeDeleted);\n      })[\"catch\"](function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, conversationToBeDeleted);\n        reject(error);\n      });\n    });\n  };\n  var cancelDelete = function cancelDelete() {\n    return setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: false\n    }));\n  };\n  var confirmDelete = function confirmDelete(conversation) {\n    setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: true,\n      conversation: conversation,\n      onCancel: cancelDelete\n    }));\n  };\n  var itemClickhandler = function itemClickhandler(e) {\n    _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onItemClick, e);\n  };\n\n  /**\n   * Component hooks\n   */\n\n  (0, _hooks.Hooks)(conversationType, limit, tags, userAndGroupTags, setConversationList, conversationCallback, conversationListManager, handlers, callbackData, loggedInUser, handleConversations, confirmDelete);\n\n  /**\n   * Component template scoping\n   */\n\n  var getCustomView = function getCustomView(customView, props) {\n    return /*#__PURE__*/_react[\"default\"].createElement(customView, props);\n  };\n  var getMessageContainer = function getMessageContainer() {\n    var messageContainer = null;\n    if (conversationList.length === 0 && message.toLowerCase() === (0, _Shared.localize)(\"LOADING\")) {\n      /**Loading custom view */\n      messageContainer = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.loading ? getCustomView(customView.loading, props) : /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageImgStyle(style, _theme, loadingIconURL),\n        className: \"message\"\n      }));\n    } else if (conversationList.length === 0 && message.toLowerCase() === 'no chats found') {\n      /**Empty custom view */\n      messageContainer = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.empty ? getCustomView(customView.empty, props) : /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, emptyText));\n    } else if (!hideError && message.toLowerCase() === 'something went wrong') {\n      /**Error custom view */\n      messageContainer = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.error ? getCustomView(customView.error, props) : /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, errorText));\n    }\n    return messageContainer;\n  };\n  var renderItems = conversationList.map(function (conversation) {\n    var _conversationOptions;\n    var typingIndicatorText = conversation !== null && conversation !== void 0 && conversation.typingIndicatorText ? conversation === null || conversation === void 0 ? void 0 : conversation.typingIndicatorText : \"\";\n    var isActive = (conversation === null || conversation === void 0 ? void 0 : conversation.conversationId) === (activeConversation === null || activeConversation === void 0 ? void 0 : activeConversation.conversationId) ? true : false;\n\n    /**\n     * Calculate conversations options for child component\n     */\n    var conversationOptions = _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationOptions;\n    if (((_conversationOptions = conversationOptions) === null || _conversationOptions === void 0 ? void 0 : _conversationOptions.length) == 0) {\n      conversationOptions = [new _Chats.CometChatConversationOptions({\n        id: _Shared.ConversationOptionConstants[\"delete\"],\n        title: (0, _Shared.localize)(\"DELETE\"),\n        iconURL: _delete[\"default\"],\n        onClick: function onClick() {\n          return confirmDelete(conversation);\n        }\n      })];\n    }\n    return /*#__PURE__*/_react[\"default\"].createElement(_Shared.CometChatConversationListItem, {\n      key: conversation.conversationId,\n      conversationObject: conversation,\n      isActive: isActive,\n      conversationInputData: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationInputData,\n      conversationOptions: conversationOptions,\n      style: new _Shared.ConversationListItemStyles(_objectSpread({}, styles.listItemStyle(style, _theme))),\n      hideDeletedMessages: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideDeletedMessages,\n      hideGroupActions: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideGroupActions,\n      showTypingIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.showTypingIndicator,\n      typingIndicatorText: typingIndicatorText,\n      hideThreadIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideThreadIndicator,\n      threadIndicatorText: (0, _Shared.localize)(\"IN_A_THREAD\"),\n      theme: _theme,\n      onClick: itemClickhandler.bind(_this),\n      avatarConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.avatarConfiguration,\n      statusIndicatorConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.statusIndicatorConfiguration,\n      badgeCountConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.badgeCountConfiguration,\n      messageReceiptConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.messageReceiptConfiguration,\n      loggedInUser: loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.current\n    });\n  });\n\n  /**\n   * Component template\n   */\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, getMessageContainer(), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: styles.chatsListStyle(style, _theme),\n    className: \"conversation__list\",\n    onScroll: handleScroll\n  }, renderItems), /*#__PURE__*/_react[\"default\"].createElement(_Shared.CometChatBackdrop, {\n    isOpen: showConfirm.show,\n    onClick: showConfirm.onCancel,\n    background: _theme === null || _theme === void 0 ? void 0 : (_theme$palette = _theme.palette) === null || _theme$palette === void 0 ? void 0 : _theme$palette.accent200[_theme === null || _theme === void 0 ? void 0 : (_theme$palette2 = _theme.palette) === null || _theme$palette2 === void 0 ? void 0 : _theme$palette2.mode]\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Shared.CometChatConfirmDialog, {\n    isOpen: showConfirm.show,\n    onConfirm: deleteConversation.bind(_this, showConfirm.conversation),\n    onCancel: showConfirm.onCancel,\n    style: styles.DialogStyle(_theme),\n    title: (0, _Shared.localize)(\"DELETE_CONVERSATION\"),\n    messageText: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n    confirmButtonText: (0, _Shared.localize)(\"CONFIRM_BUTTON_TEXT\"),\n    cancelButtonText: (0, _Shared.localize)(\"CANCEL_BUTTON_TEXT\")\n  })));\n});\n\n/**\n * Component default props\n */\nConversationList.defaultProps = {\n  loadingIconURL: _spinner[\"default\"]\n};\n\n/**\n * Component default props types\n */\nConversationList.propTypes = {\n  conversationType: _propTypes[\"default\"].oneOf([\"users\", \"groups\", \"both\"]),\n  limit: _propTypes[\"default\"].number,\n  hideError: _propTypes[\"default\"].bool,\n  tags: _propTypes[\"default\"].array,\n  userAndGroupTags: _propTypes[\"default\"].bool,\n  emptyText: _propTypes[\"default\"].string,\n  errorText: _propTypes[\"default\"].string,\n  loadingIconURL: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  activeConversation: _propTypes[\"default\"].object,\n  enableSoundForMessages: _propTypes[\"default\"].bool,\n  customIncomingMessageSound: _propTypes[\"default\"].string,\n  customView: _propTypes[\"default\"].object,\n  conversationListItemConfiguration: _propTypes[\"default\"].object,\n  theme: _propTypes[\"default\"].object\n};\nvar CometChatConversationList = /*#__PURE__*/_react[\"default\"].memo(ConversationList);\nexports.CometChatConversationList = CometChatConversationList;","map":{"version":3,"names":["_interopRequireDefault","require","_typeof","Object","defineProperty","exports","value","CometChatConversationList","_defineProperty2","_toConsumableArray2","_slicedToArray2","_react","_interopRequireWildcard","_chat","_propTypes","_controller","_hooks","styles","_spinner","_Shared","_","_Chats","_ConversationListCustomView","_delete","_this","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","ConversationList","forwardRef","props","ref","_theme$palette","_theme$palette2","activeConversation","emptyText","errorText","conversationType","limit","hideError","tags","userAndGroupTags","loadingIconURL","style","enableSoundForMessages","customIncomingMessageSound","customView","conversationListItemConfiguration","theme","loggedInUser","useRef","conversationListManager","ConversationListManager","_useState","useState","_useState2","conversationList","setConversationList","_useState3","_useState4","callbackData","setCallbackData","_useState5","localize","_useState6","message","setMessage","_useState7","show","confirmButtonText","conversation","onCancel","_useState8","showConfirm","setShowConfirm","_conversationListItemConfiguration","ConversationListItemConfiguration","_theme","CometChatTheme","conversationCallback","listenerName","_len","args","Array","_key","name","concat","markMessageAsDelivered","CometChat","markAsDelivered","useImperativeHandle","resetUnreadCount","updateLastMessage","removeConversation","deleteConversation","updateConversation","filterByConversationType","ConversationTypeConstants","both","users","receiverType","ReceiverTypeConstants","group","groups","user","getConversationFromMessage","Promise","resolve","reject","CometChatHelper","then","conversationKey","findIndex","c","conversationId","conversationWith","conversations","error","CometChatConversationEvents","emit","onError","getUnreadMessageCount","undefined","unreadMessageCount","Number","shouldIncrementCount","_message$sender","_loggedInUser$current","_message$metadata","sender","uid","current","category","MessageCategoryConstants","metadata","incrementUnreadCount","playNotificationSound","_message$getSender","_activeConversation$c","_activeConversation$c2","getReceiverType","receiverId","getSender","getUid","getReceiverId","guid","CometChatSoundManager","play","Sound","incomingMessageFromOther","handleUsers","eachConversation","status","getStatus","newConversation","splice","handleMessages","response","lastMessage","Conversation","unshift","_unreadMessageCount","_newConversation","handleMessageActions","id","handleMessageReadActions","messageReceipt","_conversation$convers","_conversation$convers2","receiver","_conversation$lastMes","messageId","handleGroupMemberAddition","newUser","_loggedInUser$current2","newConversationWith","_lastMessage","_newConversationWith","hasJoined","_unreadMessageCount2","_newConversation2","handleGroupMemberRemoval","removedUser","_loggedInUser$current3","handleGroupMemberBan","_loggedInUser$current4","handleGroupMemberScopeChange","newScope","_loggedInUser$current5","scope","_newConversationWith2","_newConversation3","handleTyping","typingData","typingStarted","_conversation$convers3","_typingData$sender","_conversation$convers4","typingIndicatorText","_typingData$sender2","showTypingIndicator","_conversation$convers5","_conversation","handlers","onUserOnline","onUserOffline","onTextMessageReceived","onMediaMessageReceived","onCustomMessageReceived","onIncomingCallReceived","onIncomingCallCancelled","messageEdited","onMessageDeleted","messageRead","onMemberAddedToGroup","onGroupMemberJoined","onGroupMemberKicked","onGroupMemberLeft","onGroupMemberBanned","onGroupMemberScopeChanged","onTypingStarted","onTypingEnded","handleConversations","getConversations","fetchNextConversation","handleScroll","event","bottom","Math","round","currentTarget","scrollHeight","scrollTop","clientHeight","conversationObject","_conversation2","newConversationList","conversationToBeDeleted","_conversationToBeDele","_conversationToBeDele2","deletedConversation","onDeleteConversation","cancelDelete","confirmDelete","itemClickhandler","e","onItemClick","Hooks","getCustomView","createElement","getMessageContainer","messageContainer","toLowerCase","messageContainerStyle","className","loading","messageImgStyle","empty","messageTextStyle","renderItems","map","_conversationOptions","isActive","conversationOptions","CometChatConversationOptions","ConversationOptionConstants","title","iconURL","onClick","CometChatConversationListItem","conversationInputData","ConversationListItemStyles","listItemStyle","hideDeletedMessages","hideGroupActions","hideThreadIndicator","threadIndicatorText","bind","avatarConfiguration","statusIndicatorConfiguration","badgeCountConfiguration","messageReceiptConfiguration","Fragment","chatsListStyle","onScroll","CometChatBackdrop","isOpen","background","palette","accent200","mode","CometChatConfirmDialog","onConfirm","DialogStyle","messageText","cancelButtonText","defaultProps","propTypes","oneOf","number","bool","array","string","memo"],"sources":["/home/admin1/dev/react/sample-react-guides/node_modules/@cometchat-pro/react-ui-kit/dist/Chats/CometChatConversationList/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatConversationList = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _controller = require(\"./controller\");\nvar _hooks = require(\"./hooks\");\nvar styles = _interopRequireWildcard(require(\"./style\"));\nvar _spinner = _interopRequireDefault(require(\"./resources/spinner.svg\"));\nvar _Shared = require(\"../../Shared\");\nvar _ = require(\"../\");\nvar _Chats = require(\"../../Chats\");\nvar _ConversationListCustomView = require(\"../ConversationListCustomView\");\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n/**\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @description CometChatConversationList component retrieves the latest conversations that a CometChat logged-in user has been a part of.\n * The state of the component is communicated via 3 states i.e empty, loading and error.\n *\n */\nvar ConversationList = /*#__PURE__*/_react[\"default\"].forwardRef(function (props, ref) {\n  var _theme$palette, _theme$palette2;\n  /**\n   * Props destructuring \n   */\n  var activeConversation = props.activeConversation,\n    emptyText = props.emptyText,\n    errorText = props.errorText,\n    conversationType = props.conversationType,\n    limit = props.limit,\n    hideError = props.hideError,\n    tags = props.tags,\n    userAndGroupTags = props.userAndGroupTags,\n    loadingIconURL = props.loadingIconURL,\n    style = props.style,\n    enableSoundForMessages = props.enableSoundForMessages,\n    customIncomingMessageSound = props.customIncomingMessageSound,\n    customView = props.customView,\n    conversationListItemConfiguration = props.conversationListItemConfiguration,\n    theme = props.theme;\n\n  /**\n   * Component internal state\n   */\n  var loggedInUser = (0, _react.useRef)(null);\n  var conversationListManager = (0, _react.useRef)(new _controller.ConversationListManager({\n    conversationType: conversationType,\n    limit: limit,\n    tags: tags,\n    userAndGroupTags: userAndGroupTags\n  }));\n  var _useState = (0, _react.useState)([]),\n    _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n    conversationList = _useState2[0],\n    setConversationList = _useState2[1];\n  var _useState3 = (0, _react.useState)(null),\n    _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n    callbackData = _useState4[0],\n    setCallbackData = _useState4[1];\n  var _useState5 = (0, _react.useState)((0, _Shared.localize)(\"LOADING\")),\n    _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n    message = _useState6[0],\n    setMessage = _useState6[1];\n  var _useState7 = (0, _react.useState)({\n      show: false,\n      message: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n      confirmButtonText: (0, _Shared.localize)(\"DELETE\"),\n      conversation: null,\n      onCancel: function onCancel() {}\n    }),\n    _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n    showConfirm = _useState8[0],\n    setShowConfirm = _useState8[1];\n\n  /**\n   * Component private scoping\n   */\n  var _conversationListItemConfiguration = new _Shared.ConversationListItemConfiguration(conversationListItemConfiguration !== null && conversationListItemConfiguration !== void 0 ? conversationListItemConfiguration : {});\n  var _theme = new _Shared.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n\n  /**\n   * Component internal handlers/methods \n   */\n\n  var conversationCallback = function conversationCallback(listenerName) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    setCallbackData({\n      name: listenerName,\n      args: [].concat(args)\n    });\n  };\n\n  /**\n   * Mark the incoming message as delivered\n   */\n  var markMessageAsDelivered = function markMessageAsDelivered(message) {\n    if (message.hasOwnProperty(\"deliveredAt\") === false) {\n      _chat.CometChat.markAsDelivered(message);\n    }\n  };\n\n  /**\n   *\n   * If the incoming message is 1-1 conversation, and the conversation type filter is set to groups return false\n   * If the incoming message is group conversation, and the conversation type filter is set to users return false\n   * else return true\n   *\n   */\n  _react[\"default\"].useImperativeHandle(ref, function () {\n    return {\n      resetUnreadCount: resetUnreadCount,\n      updateLastMessage: updateLastMessage,\n      removeConversation: removeConversation,\n      deleteConversation: deleteConversation,\n      updateConversation: updateConversation\n    };\n  });\n  var filterByConversationType = function filterByConversationType(message) {\n    if (conversationType !== _Shared.ConversationTypeConstants.both) {\n      if (conversationType === _Shared.ConversationTypeConstants.users && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.group || conversationType === _Shared.ConversationTypeConstants.groups && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.user) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  /**\n   *\n   * Converting message object received in the listener callback to conversation object\n   */\n  var getConversationFromMessage = function getConversationFromMessage(message) {\n    return new Promise(function (resolve, reject) {\n      _chat.CometChat.CometChatHelper.getConversationFromMessage(message).then(function (conversation) {\n        var conversationKey = conversationList.findIndex(function (c) {\n          return c.conversationId === conversation.conversationId;\n        });\n        if (conversationKey > -1) {\n          resolve({\n            conversationKey: conversationKey,\n            conversationId: conversation.conversationId,\n            conversationType: conversation.conversationType,\n            conversationWith: conversation.conversationWith,\n            conversation: conversationList[conversationKey],\n            conversations: (0, _toConsumableArray2[\"default\"])(conversationList)\n          });\n        }\n        resolve({\n          conversationKey: conversationKey,\n          conversationId: conversation.conversationId,\n          conversationType: conversation.conversationType,\n          conversationWith: conversation.conversationWith,\n          conversation: conversation,\n          conversations: (0, _toConsumableArray2[\"default\"])(conversationList)\n        });\n      })[\"catch\"](function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var getUnreadMessageCount = function getUnreadMessageCount(message) {\n    var conversation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var unreadMessageCount = conversation !== null && conversation !== void 0 && conversation.unreadMessageCount ? Number(conversation === null || conversation === void 0 ? void 0 : conversation.unreadMessageCount) : 0;\n    unreadMessageCount = shouldIncrementCount(message) ? ++unreadMessageCount : unreadMessageCount;\n    return unreadMessageCount;\n  };\n\n  /**\n   *\n   * If the message is sent by the logged in user, return false\n   * If the message has category message or has incrementUnreadCount key in the metadata with value set to true, return true else return false\n   *\n   */\n  var shouldIncrementCount = function shouldIncrementCount(message) {\n    var _message$sender, _loggedInUser$current, _message$metadata;\n    if ((message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.uid) === (loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current = loggedInUser.current) === null || _loggedInUser$current === void 0 ? void 0 : _loggedInUser$current.uid)) {\n      return false;\n    }\n    if ((message === null || message === void 0 ? void 0 : message.category) === _Shared.MessageCategoryConstants.message || (message === null || message === void 0 ? void 0 : (_message$metadata = message.metadata) === null || _message$metadata === void 0 ? void 0 : _message$metadata.incrementUnreadCount) === true) {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * play notification sound for incoming messages\n   */\n  var playNotificationSound = function playNotificationSound(message) {\n    /**\n     * If unreadcount is not incremented, don't play notification sound\n     */\n    if (!shouldIncrementCount(message)) {\n      return false;\n    }\n    /**\n    * If customIncomingMessageSound url is present then CometChatSoundManager will play this sound \n    else play the default sound\n    */\n    if (enableSoundForMessages && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationType && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationWith) {\n      var _message$getSender, _activeConversation$c, _activeConversation$c2;\n      var receiverType = message.getReceiverType();\n      var receiverId = receiverType === _Shared.ReceiverTypeConstants.user ? message === null || message === void 0 ? void 0 : (_message$getSender = message.getSender()) === null || _message$getSender === void 0 ? void 0 : _message$getSender.getUid() : message === null || message === void 0 ? void 0 : message.getReceiverId();\n      if (receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c = activeConversation.conversationWith) === null || _activeConversation$c === void 0 ? void 0 : _activeConversation$c.uid) && receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c2 = activeConversation.conversationWith) === null || _activeConversation$c2 === void 0 ? void 0 : _activeConversation$c2.guid)) {\n        if (customIncomingMessageSound) {\n          _Shared.CometChatSoundManager.play(customIncomingMessageSound);\n        } else {\n          _Shared.CometChatSoundManager.play(_Shared.CometChatSoundManager.Sound.incomingMessageFromOther);\n        }\n      }\n    }\n  };\n\n  /**\n   *\n   * When a user goes online/ offline\n   */\n  var handleUsers = function handleUsers(user) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      return eachConversation.conversationType && eachConversation.conversationType === _Shared.ReceiverTypeConstants.user && eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === user.uid;\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2[\"default\"])(conversationList);\n      var conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread(_objectSpread({}, conversation.conversationWith), {}, {\n        status: user.getStatus()\n      });\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * When a text message / media message / custom message is received\n   */\n  var handleMessages = function handleMessages() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    /**\n     * marking the incoming messages as read\n     */\n    markMessageAsDelivered(message);\n    /**\n     * If the incoming message is 1-1 and the conversation type filter is set to group, return false\n     * OR\n     * If the incoming message is group and the conversation type filter is set to \"users\", return false\n     * ELSE\n     * return true\n     */\n    if (filterByConversationType() === false) {\n      return false;\n    }\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      var lastMessage = _objectSpread(_objectSpread({}, conversation === null || conversation === void 0 ? void 0 : conversation.lastMessage), message);\n      if (conversationKey > -1) {\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1);\n        conversations.unshift(newConversation);\n        setConversationList(conversations);\n\n        //play notification sound\n        playNotificationSound(message);\n      } else {\n        var _unreadMessageCount = getUnreadMessageCount(message);\n        var _newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, _unreadMessageCount);\n        conversations.unshift(_newConversation);\n        setConversationList(conversations);\n\n        //play notification sound\n        playNotificationSound(message);\n      }\n    });\n  };\n\n  /**\n   * Listener callback when a message is edited, deleted or updated\n   */\n  var handleMessageActions = function handleMessageActions() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1 && conversation.lastMessage.id === message.id) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a message is read\n   */\n  var handleMessageReadActions = function handleMessageReadActions() {\n    var messageReceipt = arguments.length <= 0 ? undefined : arguments[0];\n    var conversationKey = conversationList.findIndex(function (conversation) {\n      var _conversation$convers, _conversation$convers2;\n      return (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiverType) === (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) && ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers = conversation.conversationWith) === null || _conversation$convers === void 0 ? void 0 : _conversation$convers.uid) || (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers2 = conversation.conversationWith) === null || _conversation$convers2 === void 0 ? void 0 : _conversation$convers2.guid));\n    });\n    if (conversationKey > -1) {\n      var _conversation$lastMes;\n      var conversations = _objectSpread({}, conversationList);\n      var conversation = conversations[conversationKey];\n      var unreadMessageCount = getUnreadMessageCount(message, conversation);\n\n      /**\n       * If the message id in the read receipt is greater than or equal to the lastmessage id, set unreadmessagecount to 0\n       */\n      if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.messageId) >= (conversation === null || conversation === void 0 ? void 0 : (_conversation$lastMes = conversation.lastMessage) === null || _conversation$lastMes === void 0 ? void 0 : _conversation$lastMes.id)) {\n        unreadMessageCount = 0;\n      }\n      var newConversation = new _chat.CometChat.Conversation(conversation.conversationId, conversation.conversationType, conversation.lastMessage, conversation.conversationWith, unreadMessageCount);\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * Listener callback when a user joins/added to the group\n   */\n  var handleGroupMemberAddition = function handleGroupMemberAddition() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var newUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var _loggedInUser$current2;\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      } else if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current2 = loggedInUser.current) === null || _loggedInUser$current2 === void 0 ? void 0 : _loggedInUser$current2.uid) === newUser.uid) {\n        /**\n         * If the loggedin user is added to the group, add the conversation to the chats list\n         */\n        var _lastMessage = _objectSpread({}, message);\n        var _newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n          hasJoined: true\n        });\n        var _unreadMessageCount2 = getUnreadMessageCount(message, conversation);\n        var _newConversation2 = new _chat.CometChat.Conversation(conversationId, conversationType, _lastMessage, _newConversationWith, _unreadMessageCount2);\n        conversations.unshift(_newConversation2);\n        setConversationList(conversations);\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a member is kicked from / has left the group\n   */\n  var handleGroupMemberRemoval = function handleGroupMemberRemoval() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current3;\n        /**\n         * If the loggedin user is removed from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current3 = loggedInUser.current) === null || _loggedInUser$current3 === void 0 ? void 0 : _loggedInUser$current3.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a member is banned from the group\n   */\n  var handleGroupMemberBan = function handleGroupMemberBan() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current4;\n        /**\n         * If the loggedin user is banned from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current4 = loggedInUser.current) === null || _loggedInUser$current4 === void 0 ? void 0 : _loggedInUser$current4.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a group member scope is updated\n   */\n  var handleGroupMemberScopeChange = function handleGroupMemberScopeChange() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var user = arguments.length <= 1 ? undefined : arguments[1];\n    var newScope = arguments.length <= 2 ? undefined : arguments[2];\n    var group = arguments.length <= 4 ? undefined : arguments[4];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current5;\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current5 = loggedInUser.current) === null || _loggedInUser$current5 === void 0 ? void 0 : _loggedInUser$current5.uid) === user.uid) {\n          var newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n            scope: newScope\n          });\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1);\n          conversations.unshift(newConversation);\n          setConversationList(conversations);\n        } else {\n          var _newConversationWith2 = _objectSpread(_objectSpread({}, conversationWith), group);\n          var _newConversation3 = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, _newConversationWith2, unreadMessageCount);\n          conversations.splice(conversationKey, 1, _newConversation3);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback for typing events\n   */\n  var handleTyping = function handleTyping() {\n    var typingData = arguments.length <= 0 ? undefined : arguments[0];\n    var typingStarted = arguments.length <= 1 ? undefined : arguments[1];\n    var conversations = (0, _toConsumableArray2[\"default\"])(conversationList);\n    var conversationKey = conversations.findIndex(function (conversation) {\n      var _conversation$convers3, _typingData$sender, _conversation$convers4;\n      return (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) && ((conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === _Shared.ReceiverTypeConstants.user && ((_conversation$convers3 = conversation.conversationWith) === null || _conversation$convers3 === void 0 ? void 0 : _conversation$convers3.uid) === (typingData === null || typingData === void 0 ? void 0 : (_typingData$sender = typingData.sender) === null || _typingData$sender === void 0 ? void 0 : _typingData$sender.uid) || conversation.conversationType === _Shared.ReceiverTypeConstants.group && ((_conversation$convers4 = conversation.conversationWith) === null || _conversation$convers4 === void 0 ? void 0 : _conversation$convers4.guid) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverId));\n    });\n    if (conversationKey > -1) {\n      var typingIndicatorText = \"\";\n      if (typingStarted) {\n        var _typingData$sender2;\n        typingIndicatorText = (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) === _Shared.ReceiverTypeConstants.group ? \"\".concat(typingData === null || typingData === void 0 ? void 0 : (_typingData$sender2 = typingData.sender) === null || _typingData$sender2 === void 0 ? void 0 : _typingData$sender2.name, \" \").concat((0, _Shared.localize)(\"IS_TYPING\")) : (0, _Shared.localize)(\"IS_TYPING\");\n      }\n      var conversation = conversationList[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        showTypingIndicator: typingStarted,\n        typingIndicatorText: typingIndicatorText\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   * \n   * @param {Object} conversation\n   * Public method to update the conversation list programmatically  \n   */\n  var updateConversation = function updateConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      var _conversation$convers5;\n      return eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers5 = conversation.conversationWith) === null || _conversation$convers5 === void 0 ? void 0 : _conversation$convers5.uid);\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2[\"default\"])(conversationList);\n      var _conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread({}, _conversation.conversationWith);\n      var newConversation = _objectSpread(_objectSpread({}, _conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  var handlers = {\n    onUserOnline: handleUsers,\n    onUserOffline: handleUsers,\n    onTextMessageReceived: handleMessages,\n    onMediaMessageReceived: handleMessages,\n    onCustomMessageReceived: handleMessages,\n    onIncomingCallReceived: handleMessages,\n    onIncomingCallCancelled: handleMessages,\n    messageEdited: handleMessageActions,\n    onMessageDeleted: handleMessageActions,\n    messageRead: handleMessageReadActions,\n    onMemberAddedToGroup: handleGroupMemberAddition,\n    onGroupMemberJoined: handleGroupMemberAddition,\n    onGroupMemberKicked: handleGroupMemberRemoval,\n    onGroupMemberLeft: handleGroupMemberRemoval,\n    onGroupMemberBanned: handleGroupMemberBan,\n    onGroupMemberScopeChanged: handleGroupMemberScopeChange,\n    onTypingStarted: handleTyping,\n    onTypingEnded: handleTyping\n  };\n  var handleConversations = function handleConversations() {\n    getConversations().then(function (conversations) {\n      if (conversationList.length === 0 && conversations.length === 0) {\n        setMessage(\"NO_CHATS_FOUND\");\n      } else {\n        setMessage(\"\");\n      }\n      setConversationList(function (conversationList) {\n        return [].concat((0, _toConsumableArray2[\"default\"])(conversationList), (0, _toConsumableArray2[\"default\"])(conversations));\n      });\n    })[\"catch\"](function (error) {\n      _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n      setMessage(\"SOMETHING_WENT_WRONG\");\n    });\n  };\n  var getConversations = function getConversations() {\n    return new Promise(function (resolve, reject) {\n      conversationListManager === null || conversationListManager === void 0 ? void 0 : conversationListManager.current.fetchNextConversation().then(function (conversations) {\n        return resolve(conversations);\n      })[\"catch\"](function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var handleScroll = function handleScroll(event) {\n    var bottom = Math.round(event.currentTarget.scrollHeight - event.currentTarget.scrollTop) === Math.round(event.currentTarget.clientHeight);\n    if (bottom) {\n      handleConversations();\n    }\n  };\n\n  /**\n   * reset un read count\n   */\n  var resetUnreadCount = function resetUnreadCount(conversation) {\n    var conversations = (0, _toConsumableArray2[\"default\"])(conversationList);\n    var conversationKey = conversations.findIndex(function (conversationObject) {\n      return conversationObject.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var _conversation2 = conversations[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, _conversation2), {}, {\n        unreadMessageCount: 0\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   * update last message\n   */\n  var updateLastMessage = function updateLastMessage(message) {\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversations = response.conversations,\n        conversation = response.conversation;\n      var lastMessage = _objectSpread({}, conversation.lastMessage);\n      if (conversationKey > -1) {\n        var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n          lastMessage: lastMessage\n        });\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      }\n    });\n  };\n\n  /**\n   * Remove conversation from the conversationlist upon delete\n   */\n  var removeConversation = function removeConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (c) {\n      return c.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var newConversationList = (0, _toConsumableArray2[\"default\"])(conversationList);\n      newConversationList.splice(conversationKey, 1);\n      setConversationList(newConversationList);\n    }\n  };\n  var deleteConversation = function deleteConversation(conversationToBeDeleted) {\n    return new Promise(function (resolve, reject) {\n      var _conversationToBeDele, _conversationToBeDele2;\n      var conversationWith = (conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType) === _Shared.ReceiverTypeConstants.group ? conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele === void 0 ? void 0 : _conversationToBeDele.guid : conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele2 = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele2 === void 0 ? void 0 : _conversationToBeDele2.uid;\n      _chat.CometChat.deleteConversation(conversationWith, conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType).then(function (deletedConversation) {\n        setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n          show: false\n        }));\n        removeConversation(conversationToBeDeleted);\n        resolve(deletedConversation);\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onDeleteConversation, conversationToBeDeleted);\n      })[\"catch\"](function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, conversationToBeDeleted);\n        reject(error);\n      });\n    });\n  };\n  var cancelDelete = function cancelDelete() {\n    return setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: false\n    }));\n  };\n  var confirmDelete = function confirmDelete(conversation) {\n    setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: true,\n      conversation: conversation,\n      onCancel: cancelDelete\n    }));\n  };\n  var itemClickhandler = function itemClickhandler(e) {\n    _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onItemClick, e);\n  };\n\n  /**\n   * Component hooks\n   */\n\n  (0, _hooks.Hooks)(conversationType, limit, tags, userAndGroupTags, setConversationList, conversationCallback, conversationListManager, handlers, callbackData, loggedInUser, handleConversations, confirmDelete);\n\n  /**\n   * Component template scoping\n   */\n\n  var getCustomView = function getCustomView(customView, props) {\n    return /*#__PURE__*/_react[\"default\"].createElement(customView, props);\n  };\n  var getMessageContainer = function getMessageContainer() {\n    var messageContainer = null;\n    if (conversationList.length === 0 && message.toLowerCase() === (0, _Shared.localize)(\"LOADING\")) {\n      /**Loading custom view */\n      messageContainer = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.loading ? getCustomView(customView.loading, props) : /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageImgStyle(style, _theme, loadingIconURL),\n        className: \"message\"\n      }));\n    } else if (conversationList.length === 0 && message.toLowerCase() === 'no chats found') {\n      /**Empty custom view */\n      messageContainer = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.empty ? getCustomView(customView.empty, props) : /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, emptyText));\n    } else if (!hideError && message.toLowerCase() === 'something went wrong') {\n      /**Error custom view */\n      messageContainer = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.error ? getCustomView(customView.error, props) : /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, errorText));\n    }\n    return messageContainer;\n  };\n  var renderItems = conversationList.map(function (conversation) {\n    var _conversationOptions;\n    var typingIndicatorText = conversation !== null && conversation !== void 0 && conversation.typingIndicatorText ? conversation === null || conversation === void 0 ? void 0 : conversation.typingIndicatorText : \"\";\n    var isActive = (conversation === null || conversation === void 0 ? void 0 : conversation.conversationId) === (activeConversation === null || activeConversation === void 0 ? void 0 : activeConversation.conversationId) ? true : false;\n\n    /**\n     * Calculate conversations options for child component\n     */\n    var conversationOptions = _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationOptions;\n    if (((_conversationOptions = conversationOptions) === null || _conversationOptions === void 0 ? void 0 : _conversationOptions.length) == 0) {\n      conversationOptions = [new _Chats.CometChatConversationOptions({\n        id: _Shared.ConversationOptionConstants[\"delete\"],\n        title: (0, _Shared.localize)(\"DELETE\"),\n        iconURL: _delete[\"default\"],\n        onClick: function onClick() {\n          return confirmDelete(conversation);\n        }\n      })];\n    }\n    return /*#__PURE__*/_react[\"default\"].createElement(_Shared.CometChatConversationListItem, {\n      key: conversation.conversationId,\n      conversationObject: conversation,\n      isActive: isActive,\n      conversationInputData: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationInputData,\n      conversationOptions: conversationOptions,\n      style: new _Shared.ConversationListItemStyles(_objectSpread({}, styles.listItemStyle(style, _theme))),\n      hideDeletedMessages: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideDeletedMessages,\n      hideGroupActions: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideGroupActions,\n      showTypingIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.showTypingIndicator,\n      typingIndicatorText: typingIndicatorText,\n      hideThreadIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideThreadIndicator,\n      threadIndicatorText: (0, _Shared.localize)(\"IN_A_THREAD\"),\n      theme: _theme,\n      onClick: itemClickhandler.bind(_this),\n      avatarConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.avatarConfiguration,\n      statusIndicatorConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.statusIndicatorConfiguration,\n      badgeCountConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.badgeCountConfiguration,\n      messageReceiptConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.messageReceiptConfiguration,\n      loggedInUser: loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.current\n    });\n  });\n\n  /**\n   * Component template\n   */\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, getMessageContainer(), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: styles.chatsListStyle(style, _theme),\n    className: \"conversation__list\",\n    onScroll: handleScroll\n  }, renderItems), /*#__PURE__*/_react[\"default\"].createElement(_Shared.CometChatBackdrop, {\n    isOpen: showConfirm.show,\n    onClick: showConfirm.onCancel,\n    background: _theme === null || _theme === void 0 ? void 0 : (_theme$palette = _theme.palette) === null || _theme$palette === void 0 ? void 0 : _theme$palette.accent200[_theme === null || _theme === void 0 ? void 0 : (_theme$palette2 = _theme.palette) === null || _theme$palette2 === void 0 ? void 0 : _theme$palette2.mode]\n  }, /*#__PURE__*/_react[\"default\"].createElement(_Shared.CometChatConfirmDialog, {\n    isOpen: showConfirm.show,\n    onConfirm: deleteConversation.bind(_this, showConfirm.conversation),\n    onCancel: showConfirm.onCancel,\n    style: styles.DialogStyle(_theme),\n    title: (0, _Shared.localize)(\"DELETE_CONVERSATION\"),\n    messageText: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n    confirmButtonText: (0, _Shared.localize)(\"CONFIRM_BUTTON_TEXT\"),\n    cancelButtonText: (0, _Shared.localize)(\"CANCEL_BUTTON_TEXT\")\n  })));\n});\n\n/**\n * Component default props\n */\nConversationList.defaultProps = {\n  loadingIconURL: _spinner[\"default\"]\n};\n\n/**\n * Component default props types\n */\nConversationList.propTypes = {\n  conversationType: _propTypes[\"default\"].oneOf([\"users\", \"groups\", \"both\"]),\n  limit: _propTypes[\"default\"].number,\n  hideError: _propTypes[\"default\"].bool,\n  tags: _propTypes[\"default\"].array,\n  userAndGroupTags: _propTypes[\"default\"].bool,\n  emptyText: _propTypes[\"default\"].string,\n  errorText: _propTypes[\"default\"].string,\n  loadingIconURL: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  activeConversation: _propTypes[\"default\"].object,\n  enableSoundForMessages: _propTypes[\"default\"].bool,\n  customIncomingMessageSound: _propTypes[\"default\"].string,\n  customView: _propTypes[\"default\"].object,\n  conversationListItemConfiguration: _propTypes[\"default\"].object,\n  theme: _propTypes[\"default\"].object\n};\nvar CometChatConversationList = /*#__PURE__*/_react[\"default\"].memo(ConversationList);\nexports.CometChatConversationList = CometChatConversationList;"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAA8C,CAAC;AACpF,IAAIC,OAAO,GAAGD,OAAO,CAAC,+BAA+B,CAAC;AACtDE,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,yBAAyB,GAAG,KAAK,CAAC;AAC1C,IAAIC,gBAAgB,GAAGR,sBAAsB,CAACC,OAAO,CAAC,uCAAuC,CAAC,CAAC;AAC/F,IAAIQ,mBAAmB,GAAGT,sBAAsB,CAACC,OAAO,CAAC,0CAA0C,CAAC,CAAC;AACrG,IAAIS,eAAe,GAAGV,sBAAsB,CAACC,OAAO,CAAC,sCAAsC,CAAC,CAAC;AAC7F,IAAIU,MAAM,GAAGC,uBAAuB,CAACX,OAAO,CAAC,OAAO,CAAC,CAAC;AACtD,IAAIY,KAAK,GAAGZ,OAAO,CAAC,qBAAqB,CAAC;AAC1C,IAAIa,UAAU,GAAGd,sBAAsB,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC;AAC9D,IAAIc,WAAW,GAAGd,OAAO,CAAC,cAAc,CAAC;AACzC,IAAIe,MAAM,GAAGf,OAAO,CAAC,SAAS,CAAC;AAC/B,IAAIgB,MAAM,GAAGL,uBAAuB,CAACX,OAAO,CAAC,SAAS,CAAC,CAAC;AACxD,IAAIiB,QAAQ,GAAGlB,sBAAsB,CAACC,OAAO,CAAC,yBAAyB,CAAC,CAAC;AACzE,IAAIkB,OAAO,GAAGlB,OAAO,CAAC,cAAc,CAAC;AACrC,IAAImB,CAAC,GAAGnB,OAAO,CAAC,KAAK,CAAC;AACtB,IAAIoB,MAAM,GAAGpB,OAAO,CAAC,aAAa,CAAC;AACnC,IAAIqB,2BAA2B,GAAGrB,OAAO,CAAC,+BAA+B,CAAC;AAC1E,IAAIsB,OAAO,GAAGvB,sBAAsB,CAACC,OAAO,CAAC,wBAAwB,CAAC,CAAC;AACvE,IAAIuB,KAAK,GAAG,KAAK,CAAC;AAClB,SAASC,wBAAwB,CAACC,WAAW,EAAE;EAAE,IAAI,OAAOC,OAAO,KAAK,UAAU,EAAE,OAAO,IAAI;EAAE,IAAIC,iBAAiB,GAAG,IAAID,OAAO,EAAE;EAAE,IAAIE,gBAAgB,GAAG,IAAIF,OAAO,EAAE;EAAE,OAAO,CAACF,wBAAwB,GAAG,SAASA,wBAAwB,CAACC,WAAW,EAAE;IAAE,OAAOA,WAAW,GAAGG,gBAAgB,GAAGD,iBAAiB;EAAE,CAAC,EAAEF,WAAW,CAAC;AAAE;AAC9U,SAASd,uBAAuB,CAACkB,GAAG,EAAEJ,WAAW,EAAE;EAAE,IAAI,CAACA,WAAW,IAAII,GAAG,IAAIA,GAAG,CAACC,UAAU,EAAE;IAAE,OAAOD,GAAG;EAAE;EAAE,IAAIA,GAAG,KAAK,IAAI,IAAI5B,OAAO,CAAC4B,GAAG,CAAC,KAAK,QAAQ,IAAI,OAAOA,GAAG,KAAK,UAAU,EAAE;IAAE,OAAO;MAAE,SAAS,EAAEA;IAAI,CAAC;EAAE;EAAE,IAAIE,KAAK,GAAGP,wBAAwB,CAACC,WAAW,CAAC;EAAE,IAAIM,KAAK,IAAIA,KAAK,CAACC,GAAG,CAACH,GAAG,CAAC,EAAE;IAAE,OAAOE,KAAK,CAACE,GAAG,CAACJ,GAAG,CAAC;EAAE;EAAE,IAAIK,MAAM,GAAG,CAAC,CAAC;EAAE,IAAIC,qBAAqB,GAAGjC,MAAM,CAACC,cAAc,IAAID,MAAM,CAACkC,wBAAwB;EAAE,KAAK,IAAIC,GAAG,IAAIR,GAAG,EAAE;IAAE,IAAIQ,GAAG,KAAK,SAAS,IAAInC,MAAM,CAACoC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACX,GAAG,EAAEQ,GAAG,CAAC,EAAE;MAAE,IAAII,IAAI,GAAGN,qBAAqB,GAAGjC,MAAM,CAACkC,wBAAwB,CAACP,GAAG,EAAEQ,GAAG,CAAC,GAAG,IAAI;MAAE,IAAII,IAAI,KAAKA,IAAI,CAACR,GAAG,IAAIQ,IAAI,CAACC,GAAG,CAAC,EAAE;QAAExC,MAAM,CAACC,cAAc,CAAC+B,MAAM,EAAEG,GAAG,EAAEI,IAAI,CAAC;MAAE,CAAC,MAAM;QAAEP,MAAM,CAACG,GAAG,CAAC,GAAGR,GAAG,CAACQ,GAAG,CAAC;MAAE;IAAE;EAAE;EAAEH,MAAM,CAAC,SAAS,CAAC,GAAGL,GAAG;EAAE,IAAIE,KAAK,EAAE;IAAEA,KAAK,CAACW,GAAG,CAACb,GAAG,EAAEK,MAAM,CAAC;EAAE;EAAE,OAAOA,MAAM;AAAE;AAC1yB,SAASS,OAAO,CAACC,MAAM,EAAEC,cAAc,EAAE;EAAE,IAAIC,IAAI,GAAG5C,MAAM,CAAC4C,IAAI,CAACF,MAAM,CAAC;EAAE,IAAI1C,MAAM,CAAC6C,qBAAqB,EAAE;IAAE,IAAIC,OAAO,GAAG9C,MAAM,CAAC6C,qBAAqB,CAACH,MAAM,CAAC;IAAEC,cAAc,KAAKG,OAAO,GAAGA,OAAO,CAACC,MAAM,CAAC,UAAUC,GAAG,EAAE;MAAE,OAAOhD,MAAM,CAACkC,wBAAwB,CAACQ,MAAM,EAAEM,GAAG,CAAC,CAACC,UAAU;IAAE,CAAC,CAAC,CAAC,EAAEL,IAAI,CAACM,IAAI,CAACC,KAAK,CAACP,IAAI,EAAEE,OAAO,CAAC;EAAE;EAAE,OAAOF,IAAI;AAAE;AACpV,SAASQ,aAAa,CAACC,MAAM,EAAE;EAAE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;IAAE,IAAIG,MAAM,GAAG,IAAI,IAAIF,SAAS,CAACD,CAAC,CAAC,GAAGC,SAAS,CAACD,CAAC,CAAC,GAAG,CAAC,CAAC;IAAEA,CAAC,GAAG,CAAC,GAAGb,OAAO,CAACzC,MAAM,CAACyD,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,UAAUvB,GAAG,EAAE;MAAE,CAAC,CAAC,EAAE9B,gBAAgB,CAAC,SAAS,CAAC,EAAEgD,MAAM,EAAElB,GAAG,EAAEsB,MAAM,CAACtB,GAAG,CAAC,CAAC;IAAE,CAAC,CAAC,GAAGnC,MAAM,CAAC2D,yBAAyB,GAAG3D,MAAM,CAAC4D,gBAAgB,CAACP,MAAM,EAAErD,MAAM,CAAC2D,yBAAyB,CAACF,MAAM,CAAC,CAAC,GAAGhB,OAAO,CAACzC,MAAM,CAACyD,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,UAAUvB,GAAG,EAAE;MAAEnC,MAAM,CAACC,cAAc,CAACoD,MAAM,EAAElB,GAAG,EAAEnC,MAAM,CAACkC,wBAAwB,CAACuB,MAAM,EAAEtB,GAAG,CAAC,CAAC;IAAE,CAAC,CAAC;EAAE;EAAE,OAAOkB,MAAM;AAAE;AAC1gB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIQ,gBAAgB,GAAG,aAAarD,MAAM,CAAC,SAAS,CAAC,CAACsD,UAAU,CAAC,UAAUC,KAAK,EAAEC,GAAG,EAAE;EACrF,IAAIC,cAAc,EAAEC,eAAe;EACnC;AACF;AACA;EACE,IAAIC,kBAAkB,GAAGJ,KAAK,CAACI,kBAAkB;IAC/CC,SAAS,GAAGL,KAAK,CAACK,SAAS;IAC3BC,SAAS,GAAGN,KAAK,CAACM,SAAS;IAC3BC,gBAAgB,GAAGP,KAAK,CAACO,gBAAgB;IACzCC,KAAK,GAAGR,KAAK,CAACQ,KAAK;IACnBC,SAAS,GAAGT,KAAK,CAACS,SAAS;IAC3BC,IAAI,GAAGV,KAAK,CAACU,IAAI;IACjBC,gBAAgB,GAAGX,KAAK,CAACW,gBAAgB;IACzCC,cAAc,GAAGZ,KAAK,CAACY,cAAc;IACrCC,KAAK,GAAGb,KAAK,CAACa,KAAK;IACnBC,sBAAsB,GAAGd,KAAK,CAACc,sBAAsB;IACrDC,0BAA0B,GAAGf,KAAK,CAACe,0BAA0B;IAC7DC,UAAU,GAAGhB,KAAK,CAACgB,UAAU;IAC7BC,iCAAiC,GAAGjB,KAAK,CAACiB,iCAAiC;IAC3EC,KAAK,GAAGlB,KAAK,CAACkB,KAAK;;EAErB;AACF;AACA;EACE,IAAIC,YAAY,GAAG,CAAC,CAAC,EAAE1E,MAAM,CAAC2E,MAAM,EAAE,IAAI,CAAC;EAC3C,IAAIC,uBAAuB,GAAG,CAAC,CAAC,EAAE5E,MAAM,CAAC2E,MAAM,EAAE,IAAIvE,WAAW,CAACyE,uBAAuB,CAAC;IACvFf,gBAAgB,EAAEA,gBAAgB;IAClCC,KAAK,EAAEA,KAAK;IACZE,IAAI,EAAEA,IAAI;IACVC,gBAAgB,EAAEA;EACpB,CAAC,CAAC,CAAC;EACH,IAAIY,SAAS,GAAG,CAAC,CAAC,EAAE9E,MAAM,CAAC+E,QAAQ,EAAE,EAAE,CAAC;IACtCC,UAAU,GAAG,CAAC,CAAC,EAAEjF,eAAe,CAAC,SAAS,CAAC,EAAE+E,SAAS,EAAE,CAAC,CAAC;IAC1DG,gBAAgB,GAAGD,UAAU,CAAC,CAAC,CAAC;IAChCE,mBAAmB,GAAGF,UAAU,CAAC,CAAC,CAAC;EACrC,IAAIG,UAAU,GAAG,CAAC,CAAC,EAAEnF,MAAM,CAAC+E,QAAQ,EAAE,IAAI,CAAC;IACzCK,UAAU,GAAG,CAAC,CAAC,EAAErF,eAAe,CAAC,SAAS,CAAC,EAAEoF,UAAU,EAAE,CAAC,CAAC;IAC3DE,YAAY,GAAGD,UAAU,CAAC,CAAC,CAAC;IAC5BE,eAAe,GAAGF,UAAU,CAAC,CAAC,CAAC;EACjC,IAAIG,UAAU,GAAG,CAAC,CAAC,EAAEvF,MAAM,CAAC+E,QAAQ,EAAE,CAAC,CAAC,EAAEvE,OAAO,CAACgF,QAAQ,EAAE,SAAS,CAAC,CAAC;IACrEC,UAAU,GAAG,CAAC,CAAC,EAAE1F,eAAe,CAAC,SAAS,CAAC,EAAEwF,UAAU,EAAE,CAAC,CAAC;IAC3DG,OAAO,GAAGD,UAAU,CAAC,CAAC,CAAC;IACvBE,UAAU,GAAGF,UAAU,CAAC,CAAC,CAAC;EAC5B,IAAIG,UAAU,GAAG,CAAC,CAAC,EAAE5F,MAAM,CAAC+E,QAAQ,EAAE;MAClCc,IAAI,EAAE,KAAK;MACXH,OAAO,EAAE,CAAC,CAAC,EAAElF,OAAO,CAACgF,QAAQ,EAAE,6BAA6B,CAAC;MAC7DM,iBAAiB,EAAE,CAAC,CAAC,EAAEtF,OAAO,CAACgF,QAAQ,EAAE,QAAQ,CAAC;MAClDO,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,SAASA,QAAQ,GAAG,CAAC;IACjC,CAAC,CAAC;IACFC,UAAU,GAAG,CAAC,CAAC,EAAElG,eAAe,CAAC,SAAS,CAAC,EAAE6F,UAAU,EAAE,CAAC,CAAC;IAC3DM,WAAW,GAAGD,UAAU,CAAC,CAAC,CAAC;IAC3BE,cAAc,GAAGF,UAAU,CAAC,CAAC,CAAC;;EAEhC;AACF;AACA;EACE,IAAIG,kCAAkC,GAAG,IAAI5F,OAAO,CAAC6F,iCAAiC,CAAC7B,iCAAiC,KAAK,IAAI,IAAIA,iCAAiC,KAAK,KAAK,CAAC,GAAGA,iCAAiC,GAAG,CAAC,CAAC,CAAC;EAC3N,IAAI8B,MAAM,GAAG,IAAI9F,OAAO,CAAC+F,cAAc,CAAC9B,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAGA,KAAK,GAAG,CAAC,CAAC,CAAC;;EAExF;AACF;AACA;;EAEE,IAAI+B,oBAAoB,GAAG,SAASA,oBAAoB,CAACC,YAAY,EAAE;IACrE,KAAK,IAAIC,IAAI,GAAG3D,SAAS,CAACC,MAAM,EAAE2D,IAAI,GAAG,IAAIC,KAAK,CAACF,IAAI,GAAG,CAAC,GAAGA,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,EAAEG,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGH,IAAI,EAAEG,IAAI,EAAE,EAAE;MAC1GF,IAAI,CAACE,IAAI,GAAG,CAAC,CAAC,GAAG9D,SAAS,CAAC8D,IAAI,CAAC;IAClC;IACAvB,eAAe,CAAC;MACdwB,IAAI,EAAEL,YAAY;MAClBE,IAAI,EAAE,EAAE,CAACI,MAAM,CAACJ,IAAI;IACtB,CAAC,CAAC;EACJ,CAAC;;EAED;AACF;AACA;EACE,IAAIK,sBAAsB,GAAG,SAASA,sBAAsB,CAACtB,OAAO,EAAE;IACpE,IAAIA,OAAO,CAAC7D,cAAc,CAAC,aAAa,CAAC,KAAK,KAAK,EAAE;MACnD3B,KAAK,CAAC+G,SAAS,CAACC,eAAe,CAACxB,OAAO,CAAC;IAC1C;EACF,CAAC;;EAED;AACF;AACA;AACA;AACA;AACA;AACA;EACE1F,MAAM,CAAC,SAAS,CAAC,CAACmH,mBAAmB,CAAC3D,GAAG,EAAE,YAAY;IACrD,OAAO;MACL4D,gBAAgB,EAAEA,gBAAgB;MAClCC,iBAAiB,EAAEA,iBAAiB;MACpCC,kBAAkB,EAAEA,kBAAkB;MACtCC,kBAAkB,EAAEA,kBAAkB;MACtCC,kBAAkB,EAAEA;IACtB,CAAC;EACH,CAAC,CAAC;EACF,IAAIC,wBAAwB,GAAG,SAASA,wBAAwB,CAAC/B,OAAO,EAAE;IACxE,IAAI5B,gBAAgB,KAAKtD,OAAO,CAACkH,yBAAyB,CAACC,IAAI,EAAE;MAC/D,IAAI7D,gBAAgB,KAAKtD,OAAO,CAACkH,yBAAyB,CAACE,KAAK,IAAI,CAAClC,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACmC,YAAY,MAAMrH,OAAO,CAACsH,qBAAqB,CAACC,KAAK,IAAIjE,gBAAgB,KAAKtD,OAAO,CAACkH,yBAAyB,CAACM,MAAM,IAAI,CAACtC,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACmC,YAAY,MAAMrH,OAAO,CAACsH,qBAAqB,CAACG,IAAI,EAAE;QACxW,OAAO,KAAK;MACd;IACF;IACA,OAAO,IAAI;EACb,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAIC,0BAA0B,GAAG,SAASA,0BAA0B,CAACxC,OAAO,EAAE;IAC5E,OAAO,IAAIyC,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;MAC5CnI,KAAK,CAAC+G,SAAS,CAACqB,eAAe,CAACJ,0BAA0B,CAACxC,OAAO,CAAC,CAAC6C,IAAI,CAAC,UAAUxC,YAAY,EAAE;QAC/F,IAAIyC,eAAe,GAAGvD,gBAAgB,CAACwD,SAAS,CAAC,UAAUC,CAAC,EAAE;UAC5D,OAAOA,CAAC,CAACC,cAAc,KAAK5C,YAAY,CAAC4C,cAAc;QACzD,CAAC,CAAC;QACF,IAAIH,eAAe,GAAG,CAAC,CAAC,EAAE;UACxBJ,OAAO,CAAC;YACNI,eAAe,EAAEA,eAAe;YAChCG,cAAc,EAAE5C,YAAY,CAAC4C,cAAc;YAC3C7E,gBAAgB,EAAEiC,YAAY,CAACjC,gBAAgB;YAC/C8E,gBAAgB,EAAE7C,YAAY,CAAC6C,gBAAgB;YAC/C7C,YAAY,EAAEd,gBAAgB,CAACuD,eAAe,CAAC;YAC/CK,aAAa,EAAE,CAAC,CAAC,EAAE/I,mBAAmB,CAAC,SAAS,CAAC,EAAEmF,gBAAgB;UACrE,CAAC,CAAC;QACJ;QACAmD,OAAO,CAAC;UACNI,eAAe,EAAEA,eAAe;UAChCG,cAAc,EAAE5C,YAAY,CAAC4C,cAAc;UAC3C7E,gBAAgB,EAAEiC,YAAY,CAACjC,gBAAgB;UAC/C8E,gBAAgB,EAAE7C,YAAY,CAAC6C,gBAAgB;UAC/C7C,YAAY,EAAEA,YAAY;UAC1B8C,aAAa,EAAE,CAAC,CAAC,EAAE/I,mBAAmB,CAAC,SAAS,CAAC,EAAEmF,gBAAgB;QACrE,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,UAAU6D,KAAK,EAAE;QAC3BrI,CAAC,CAACsI,2BAA2B,CAACC,IAAI,CAACvI,CAAC,CAACsI,2BAA2B,CAACE,OAAO,EAAEH,KAAK,CAAC;QAChFT,MAAM,CAACS,KAAK,CAAC;MACf,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD,IAAII,qBAAqB,GAAG,SAASA,qBAAqB,CAACxD,OAAO,EAAE;IAClE,IAAIK,YAAY,GAAGhD,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKoG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACzF,IAAIqG,kBAAkB,GAAGrD,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,IAAIA,YAAY,CAACqD,kBAAkB,GAAGC,MAAM,CAACtD,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACqD,kBAAkB,CAAC,GAAG,CAAC;IACtNA,kBAAkB,GAAGE,oBAAoB,CAAC5D,OAAO,CAAC,GAAG,EAAE0D,kBAAkB,GAAGA,kBAAkB;IAC9F,OAAOA,kBAAkB;EAC3B,CAAC;;EAED;AACF;AACA;AACA;AACA;AACA;EACE,IAAIE,oBAAoB,GAAG,SAASA,oBAAoB,CAAC5D,OAAO,EAAE;IAChE,IAAI6D,eAAe,EAAEC,qBAAqB,EAAEC,iBAAiB;IAC7D,IAAI,CAAC/D,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC6D,eAAe,GAAG7D,OAAO,CAACgE,MAAM,MAAM,IAAI,IAAIH,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,eAAe,CAACI,GAAG,OAAOjF,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC8E,qBAAqB,GAAG9E,YAAY,CAACkF,OAAO,MAAM,IAAI,IAAIJ,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACG,GAAG,CAAC,EAAE;MACnW,OAAO,KAAK;IACd;IACA,IAAI,CAACjE,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACmE,QAAQ,MAAMrJ,OAAO,CAACsJ,wBAAwB,CAACpE,OAAO,IAAI,CAACA,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC+D,iBAAiB,GAAG/D,OAAO,CAACqE,QAAQ,MAAM,IAAI,IAAIN,iBAAiB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,iBAAiB,CAACO,oBAAoB,MAAM,IAAI,EAAE;MACvT,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd,CAAC;;EAED;AACF;AACA;EACE,IAAIC,qBAAqB,GAAG,SAASA,qBAAqB,CAACvE,OAAO,EAAE;IAClE;AACJ;AACA;IACI,IAAI,CAAC4D,oBAAoB,CAAC5D,OAAO,CAAC,EAAE;MAClC,OAAO,KAAK;IACd;IACA;AACJ;AACA;AACA;IACI,IAAIrB,sBAAsB,IAAIV,kBAAkB,KAAK,IAAI,IAAIA,kBAAkB,KAAK,KAAK,CAAC,IAAIA,kBAAkB,CAACG,gBAAgB,IAAIH,kBAAkB,KAAK,IAAI,IAAIA,kBAAkB,KAAK,KAAK,CAAC,IAAIA,kBAAkB,CAACiF,gBAAgB,EAAE;MACxO,IAAIsB,kBAAkB,EAAEC,qBAAqB,EAAEC,sBAAsB;MACrE,IAAIvC,YAAY,GAAGnC,OAAO,CAAC2E,eAAe,EAAE;MAC5C,IAAIC,UAAU,GAAGzC,YAAY,KAAKrH,OAAO,CAACsH,qBAAqB,CAACG,IAAI,GAAGvC,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACwE,kBAAkB,GAAGxE,OAAO,CAAC6E,SAAS,EAAE,MAAM,IAAI,IAAIL,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kBAAkB,CAACM,MAAM,EAAE,GAAG9E,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAAC+E,aAAa,EAAE;MAChU,IAAIH,UAAU,MAAM3G,kBAAkB,KAAK,IAAI,IAAIA,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACwG,qBAAqB,GAAGxG,kBAAkB,CAACiF,gBAAgB,MAAM,IAAI,IAAIuB,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACR,GAAG,CAAC,IAAIW,UAAU,MAAM3G,kBAAkB,KAAK,IAAI,IAAIA,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACyG,sBAAsB,GAAGzG,kBAAkB,CAACiF,gBAAgB,MAAM,IAAI,IAAIwB,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAACM,IAAI,CAAC,EAAE;QAC5d,IAAIpG,0BAA0B,EAAE;UAC9B9D,OAAO,CAACmK,qBAAqB,CAACC,IAAI,CAACtG,0BAA0B,CAAC;QAChE,CAAC,MAAM;UACL9D,OAAO,CAACmK,qBAAqB,CAACC,IAAI,CAACpK,OAAO,CAACmK,qBAAqB,CAACE,KAAK,CAACC,wBAAwB,CAAC;QAClG;MACF;IACF;EACF,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAIC,WAAW,GAAG,SAASA,WAAW,CAAC9C,IAAI,EAAE;IAC3C,IAAIO,eAAe,GAAGvD,gBAAgB,CAACwD,SAAS,CAAC,UAAUuC,gBAAgB,EAAE;MAC3E,OAAOA,gBAAgB,CAAClH,gBAAgB,IAAIkH,gBAAgB,CAAClH,gBAAgB,KAAKtD,OAAO,CAACsH,qBAAqB,CAACG,IAAI,IAAI+C,gBAAgB,CAACpC,gBAAgB,IAAIoC,gBAAgB,CAACpC,gBAAgB,CAACe,GAAG,IAAIqB,gBAAgB,CAACpC,gBAAgB,CAACe,GAAG,KAAK1B,IAAI,CAAC0B,GAAG;IAC1P,CAAC,CAAC;IACF,IAAInB,eAAe,GAAG,CAAC,CAAC,EAAE;MACxB,IAAIK,aAAa,GAAG,CAAC,CAAC,EAAE/I,mBAAmB,CAAC,SAAS,CAAC,EAAEmF,gBAAgB,CAAC;MACzE,IAAIc,YAAY,GAAG8C,aAAa,CAACL,eAAe,CAAC;MACjD,IAAII,gBAAgB,GAAGhG,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAAC6C,gBAAgB,CAAC,EAAE,CAAC,CAAC,EAAE;QACzFqC,MAAM,EAAEhD,IAAI,CAACiD,SAAS;MACxB,CAAC,CAAC;MACF,IAAIC,eAAe,GAAGvI,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAAC,EAAE,CAAC,CAAC,EAAE;QACvE6C,gBAAgB,EAAEA;MACpB,CAAC,CAAC;MACFC,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;MACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;IACpC;EACF,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAIwC,cAAc,GAAG,SAASA,cAAc,GAAG;IAC7C,IAAI3F,OAAO,GAAG3C,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC9D;AACJ;AACA;IACIiE,sBAAsB,CAACtB,OAAO,CAAC;IAC/B;AACJ;AACA;AACA;AACA;AACA;AACA;IACI,IAAI+B,wBAAwB,EAAE,KAAK,KAAK,EAAE;MACxC,OAAO,KAAK;IACd;IACAS,0BAA0B,CAACxC,OAAO,CAAC,CAAC6C,IAAI,CAAC,UAAU+C,QAAQ,EAAE;MAC3D,IAAI9C,eAAe,GAAG8C,QAAQ,CAAC9C,eAAe;QAC5CG,cAAc,GAAG2C,QAAQ,CAAC3C,cAAc;QACxC7E,gBAAgB,GAAGwH,QAAQ,CAACxH,gBAAgB;QAC5C8E,gBAAgB,GAAG0C,QAAQ,CAAC1C,gBAAgB;QAC5C7C,YAAY,GAAGuF,QAAQ,CAACvF,YAAY;QACpC8C,aAAa,GAAGyC,QAAQ,CAACzC,aAAa;MACxC,IAAI0C,WAAW,GAAG3I,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACwF,WAAW,CAAC,EAAE7F,OAAO,CAAC;MACjJ,IAAI8C,eAAe,GAAG,CAAC,CAAC,EAAE;QACxB,IAAIY,kBAAkB,GAAGF,qBAAqB,CAACxD,OAAO,EAAEK,YAAY,CAAC;QACrE,IAAIoF,eAAe,GAAG,IAAIjL,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAAC7C,cAAc,EAAE7E,gBAAgB,EAAEyH,WAAW,EAAE3C,gBAAgB,EAAEQ,kBAAkB,CAAC;QAC3IP,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,CAAC;QACxCK,aAAa,CAAC4C,OAAO,CAACN,eAAe,CAAC;QACtCjG,mBAAmB,CAAC2D,aAAa,CAAC;;QAElC;QACAoB,qBAAqB,CAACvE,OAAO,CAAC;MAChC,CAAC,MAAM;QACL,IAAIgG,mBAAmB,GAAGxC,qBAAqB,CAACxD,OAAO,CAAC;QACxD,IAAIiG,gBAAgB,GAAG,IAAIzL,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAAC7C,cAAc,EAAE7E,gBAAgB,EAAEyH,WAAW,EAAE3C,gBAAgB,EAAE8C,mBAAmB,CAAC;QAC7I7C,aAAa,CAAC4C,OAAO,CAACE,gBAAgB,CAAC;QACvCzG,mBAAmB,CAAC2D,aAAa,CAAC;;QAElC;QACAoB,qBAAqB,CAACvE,OAAO,CAAC;MAChC;IACF,CAAC,CAAC;EACJ,CAAC;;EAED;AACF;AACA;EACE,IAAIkG,oBAAoB,GAAG,SAASA,oBAAoB,GAAG;IACzD,IAAIlG,OAAO,GAAG3C,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC9DmF,0BAA0B,CAACxC,OAAO,CAAC,CAAC6C,IAAI,CAAC,UAAU+C,QAAQ,EAAE;MAC3D,IAAI9C,eAAe,GAAG8C,QAAQ,CAAC9C,eAAe;QAC5CG,cAAc,GAAG2C,QAAQ,CAAC3C,cAAc;QACxC7E,gBAAgB,GAAGwH,QAAQ,CAACxH,gBAAgB;QAC5C8E,gBAAgB,GAAG0C,QAAQ,CAAC1C,gBAAgB;QAC5C7C,YAAY,GAAGuF,QAAQ,CAACvF,YAAY;QACpC8C,aAAa,GAAGyC,QAAQ,CAACzC,aAAa;MACxC,IAAIL,eAAe,GAAG,CAAC,CAAC,IAAIzC,YAAY,CAACwF,WAAW,CAACM,EAAE,KAAKnG,OAAO,CAACmG,EAAE,EAAE;QACtE,IAAIN,WAAW,GAAG3I,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAACwF,WAAW,CAAC,EAAE7F,OAAO,CAAC;QACrF,IAAI0D,kBAAkB,GAAGF,qBAAqB,CAACxD,OAAO,EAAEK,YAAY,CAAC;QACrE,IAAIoF,eAAe,GAAG,IAAIjL,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAAC7C,cAAc,EAAE7E,gBAAgB,EAAEyH,WAAW,EAAE3C,gBAAgB,EAAEQ,kBAAkB,CAAC;QAC3IP,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;QACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;MACpC;IACF,CAAC,CAAC;EACJ,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAIiD,wBAAwB,GAAG,SAASA,wBAAwB,GAAG;IACjE,IAAIC,cAAc,GAAGhJ,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IACrE,IAAIyF,eAAe,GAAGvD,gBAAgB,CAACwD,SAAS,CAAC,UAAU1C,YAAY,EAAE;MACvE,IAAIiG,qBAAqB,EAAEC,sBAAsB;MACjD,OAAO,CAACF,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAAClE,YAAY,OAAO9B,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACjC,gBAAgB,CAAC,KAAK,CAACiI,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACG,QAAQ,OAAOnG,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACiG,qBAAqB,GAAGjG,YAAY,CAAC6C,gBAAgB,MAAM,IAAI,IAAIoD,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACrC,GAAG,CAAC,IAAI,CAACoC,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACG,QAAQ,OAAOnG,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACkG,sBAAsB,GAAGlG,YAAY,CAAC6C,gBAAgB,MAAM,IAAI,IAAIqD,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAACvB,IAAI,CAAC,CAAC;IAC9xB,CAAC,CAAC;IACF,IAAIlC,eAAe,GAAG,CAAC,CAAC,EAAE;MACxB,IAAI2D,qBAAqB;MACzB,IAAItD,aAAa,GAAGjG,aAAa,CAAC,CAAC,CAAC,EAAEqC,gBAAgB,CAAC;MACvD,IAAIc,YAAY,GAAG8C,aAAa,CAACL,eAAe,CAAC;MACjD,IAAIY,kBAAkB,GAAGF,qBAAqB,CAACxD,OAAO,EAAEK,YAAY,CAAC;;MAErE;AACN;AACA;MACM,IAAI,CAACgG,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACK,SAAS,MAAMrG,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACoG,qBAAqB,GAAGpG,YAAY,CAACwF,WAAW,MAAM,IAAI,IAAIY,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACN,EAAE,CAAC,EAAE;QACnSzC,kBAAkB,GAAG,CAAC;MACxB;MACA,IAAI+B,eAAe,GAAG,IAAIjL,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAACzF,YAAY,CAAC4C,cAAc,EAAE5C,YAAY,CAACjC,gBAAgB,EAAEiC,YAAY,CAACwF,WAAW,EAAExF,YAAY,CAAC6C,gBAAgB,EAAEQ,kBAAkB,CAAC;MAC/LP,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;MACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;IACpC;EACF,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAIwD,yBAAyB,GAAG,SAASA,yBAAyB,GAAG;IACnE,IAAI3G,OAAO,GAAG3C,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC9D,IAAIuJ,OAAO,GAAGvJ,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC9D,IAAIgF,KAAK,GAAGhF,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC5DmF,0BAA0B,CAACxC,OAAO,CAAC,CAAC6C,IAAI,CAAC,UAAU+C,QAAQ,EAAE;MAC3D,IAAIiB,sBAAsB;MAC1B,IAAI/D,eAAe,GAAG8C,QAAQ,CAAC9C,eAAe;QAC5CG,cAAc,GAAG2C,QAAQ,CAAC3C,cAAc;QACxC7E,gBAAgB,GAAGwH,QAAQ,CAACxH,gBAAgB;QAC5C8E,gBAAgB,GAAG0C,QAAQ,CAAC1C,gBAAgB;QAC5C7C,YAAY,GAAGuF,QAAQ,CAACvF,YAAY;QACpC8C,aAAa,GAAGyC,QAAQ,CAACzC,aAAa;MACxC,IAAIL,eAAe,GAAG,CAAC,CAAC,EAAE;QACxB,IAAI+C,WAAW,GAAG3I,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAACwF,WAAW,CAAC,EAAE7F,OAAO,CAAC;QACrF,IAAI8G,mBAAmB,GAAG5J,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEgG,gBAAgB,CAAC,EAAEb,KAAK,CAAC;QACnF,IAAIqB,kBAAkB,GAAGF,qBAAqB,CAACxD,OAAO,EAAEK,YAAY,CAAC;QACrE,IAAIoF,eAAe,GAAG,IAAIjL,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAAC7C,cAAc,EAAE7E,gBAAgB,EAAEyH,WAAW,EAAEiB,mBAAmB,EAAEpD,kBAAkB,CAAC;QAC9IP,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;QACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;MACpC,CAAC,MAAM,IAAI,CAACnE,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC6H,sBAAsB,GAAG7H,YAAY,CAACkF,OAAO,MAAM,IAAI,IAAI2C,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAAC5C,GAAG,MAAM2C,OAAO,CAAC3C,GAAG,EAAE;QAC5N;AACR;AACA;QACQ,IAAI8C,YAAY,GAAG7J,aAAa,CAAC,CAAC,CAAC,EAAE8C,OAAO,CAAC;QAC7C,IAAIgH,oBAAoB,GAAG9J,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEgG,gBAAgB,CAAC,EAAEb,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE;UACtG4E,SAAS,EAAE;QACb,CAAC,CAAC;QACF,IAAIC,oBAAoB,GAAG1D,qBAAqB,CAACxD,OAAO,EAAEK,YAAY,CAAC;QACvE,IAAI8G,iBAAiB,GAAG,IAAI3M,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAAC7C,cAAc,EAAE7E,gBAAgB,EAAE2I,YAAY,EAAEC,oBAAoB,EAAEE,oBAAoB,CAAC;QACpJ/D,aAAa,CAAC4C,OAAO,CAACoB,iBAAiB,CAAC;QACxC3H,mBAAmB,CAAC2D,aAAa,CAAC;MACpC;IACF,CAAC,CAAC;EACJ,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAIiE,wBAAwB,GAAG,SAASA,wBAAwB,GAAG;IACjE,IAAIpH,OAAO,GAAG3C,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC9D,IAAIgK,WAAW,GAAGhK,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAClE,IAAIgF,KAAK,GAAGhF,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC5DmF,0BAA0B,CAACxC,OAAO,CAAC,CAAC6C,IAAI,CAAC,UAAU+C,QAAQ,EAAE;MAC3D,IAAI9C,eAAe,GAAG8C,QAAQ,CAAC9C,eAAe;QAC5CG,cAAc,GAAG2C,QAAQ,CAAC3C,cAAc;QACxC7E,gBAAgB,GAAGwH,QAAQ,CAACxH,gBAAgB;QAC5C8E,gBAAgB,GAAG0C,QAAQ,CAAC1C,gBAAgB;QAC5C7C,YAAY,GAAGuF,QAAQ,CAACvF,YAAY;QACpC8C,aAAa,GAAGyC,QAAQ,CAACzC,aAAa;MACxC,IAAIL,eAAe,GAAG,CAAC,CAAC,EAAE;QACxB,IAAIwE,sBAAsB;QAC1B;AACR;AACA;QACQ,IAAI,CAACtI,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACsI,sBAAsB,GAAGtI,YAAY,CAACkF,OAAO,MAAM,IAAI,IAAIoD,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAACrD,GAAG,MAAMoD,WAAW,CAACpD,GAAG,EAAE;UACzNd,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,CAAC;UACxCtD,mBAAmB,CAAC2D,aAAa,CAAC;QACpC,CAAC,MAAM;UACL,IAAI0C,WAAW,GAAG3I,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAACwF,WAAW,CAAC,EAAE7F,OAAO,CAAC;UACrF,IAAI8G,mBAAmB,GAAG5J,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEgG,gBAAgB,CAAC,EAAEb,KAAK,CAAC;UACnF,IAAIqB,kBAAkB,GAAGF,qBAAqB,CAACxD,OAAO,EAAEK,YAAY,CAAC;UACrE,IAAIoF,eAAe,GAAG,IAAIjL,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAAC7C,cAAc,EAAE7E,gBAAgB,EAAEyH,WAAW,EAAEiB,mBAAmB,EAAEpD,kBAAkB,CAAC;UAC9IP,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;UACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;QACpC;MACF;IACF,CAAC,CAAC;EACJ,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAIoE,oBAAoB,GAAG,SAASA,oBAAoB,GAAG;IACzD,IAAIvH,OAAO,GAAG3C,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC9D,IAAIgK,WAAW,GAAGhK,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAClE,IAAIgF,KAAK,GAAGhF,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC5DmF,0BAA0B,CAACxC,OAAO,CAAC,CAAC6C,IAAI,CAAC,UAAU+C,QAAQ,EAAE;MAC3D,IAAI9C,eAAe,GAAG8C,QAAQ,CAAC9C,eAAe;QAC5CG,cAAc,GAAG2C,QAAQ,CAAC3C,cAAc;QACxC7E,gBAAgB,GAAGwH,QAAQ,CAACxH,gBAAgB;QAC5C8E,gBAAgB,GAAG0C,QAAQ,CAAC1C,gBAAgB;QAC5C7C,YAAY,GAAGuF,QAAQ,CAACvF,YAAY;QACpC8C,aAAa,GAAGyC,QAAQ,CAACzC,aAAa;MACxC,IAAIL,eAAe,GAAG,CAAC,CAAC,EAAE;QACxB,IAAI0E,sBAAsB;QAC1B;AACR;AACA;QACQ,IAAI,CAACxI,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACwI,sBAAsB,GAAGxI,YAAY,CAACkF,OAAO,MAAM,IAAI,IAAIsD,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAACvD,GAAG,MAAMoD,WAAW,CAACpD,GAAG,EAAE;UACzNd,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,CAAC;UACxCtD,mBAAmB,CAAC2D,aAAa,CAAC;QACpC,CAAC,MAAM;UACL,IAAI0C,WAAW,GAAG3I,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAACwF,WAAW,CAAC,EAAE7F,OAAO,CAAC;UACrF,IAAI8G,mBAAmB,GAAG5J,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEgG,gBAAgB,CAAC,EAAEb,KAAK,CAAC;UACnF,IAAIqB,kBAAkB,GAAGF,qBAAqB,CAACxD,OAAO,EAAEK,YAAY,CAAC;UACrE,IAAIoF,eAAe,GAAG,IAAIjL,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAAC7C,cAAc,EAAE7E,gBAAgB,EAAEyH,WAAW,EAAEiB,mBAAmB,EAAEpD,kBAAkB,CAAC;UAC9IP,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;UACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;QACpC;MACF;IACF,CAAC,CAAC;EACJ,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAIsE,4BAA4B,GAAG,SAASA,4BAA4B,GAAG;IACzE,IAAIzH,OAAO,GAAG3C,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC9D,IAAIkF,IAAI,GAAGlF,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC3D,IAAIqK,QAAQ,GAAGrK,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC/D,IAAIgF,KAAK,GAAGhF,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IAC5DmF,0BAA0B,CAACxC,OAAO,CAAC,CAAC6C,IAAI,CAAC,UAAU+C,QAAQ,EAAE;MAC3D,IAAI9C,eAAe,GAAG8C,QAAQ,CAAC9C,eAAe;QAC5CG,cAAc,GAAG2C,QAAQ,CAAC3C,cAAc;QACxC7E,gBAAgB,GAAGwH,QAAQ,CAACxH,gBAAgB;QAC5C8E,gBAAgB,GAAG0C,QAAQ,CAAC1C,gBAAgB;QAC5C7C,YAAY,GAAGuF,QAAQ,CAACvF,YAAY;QACpC8C,aAAa,GAAGyC,QAAQ,CAACzC,aAAa;MACxC,IAAIL,eAAe,GAAG,CAAC,CAAC,EAAE;QACxB,IAAI6E,sBAAsB;QAC1B,IAAI9B,WAAW,GAAG3I,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAACwF,WAAW,CAAC,EAAE7F,OAAO,CAAC;QACrF,IAAI0D,kBAAkB,GAAGF,qBAAqB,CAACxD,OAAO,EAAEK,YAAY,CAAC;QACrE,IAAI,CAACrB,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC2I,sBAAsB,GAAG3I,YAAY,CAACkF,OAAO,MAAM,IAAI,IAAIyD,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAAC1D,GAAG,MAAM1B,IAAI,CAAC0B,GAAG,EAAE;UAClN,IAAI6C,mBAAmB,GAAG5J,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEgG,gBAAgB,CAAC,EAAEb,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE;YACrGuF,KAAK,EAAEF;UACT,CAAC,CAAC;UACF,IAAIjC,eAAe,GAAG,IAAIjL,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAAC7C,cAAc,EAAE7E,gBAAgB,EAAEyH,WAAW,EAAEiB,mBAAmB,EAAEpD,kBAAkB,CAAC;UAC9IP,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,CAAC;UACxCK,aAAa,CAAC4C,OAAO,CAACN,eAAe,CAAC;UACtCjG,mBAAmB,CAAC2D,aAAa,CAAC;QACpC,CAAC,MAAM;UACL,IAAI0E,qBAAqB,GAAG3K,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEgG,gBAAgB,CAAC,EAAEb,KAAK,CAAC;UACrF,IAAIyF,iBAAiB,GAAG,IAAItN,KAAK,CAAC+G,SAAS,CAACuE,YAAY,CAAC7C,cAAc,EAAE7E,gBAAgB,EAAEyH,WAAW,EAAEgC,qBAAqB,EAAEnE,kBAAkB,CAAC;UAClJP,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAEgF,iBAAiB,CAAC;UAC3DtI,mBAAmB,CAAC2D,aAAa,CAAC;QACpC;MACF;IACF,CAAC,CAAC;EACJ,CAAC;;EAED;AACF;AACA;AACA;EACE,IAAI4E,YAAY,GAAG,SAASA,YAAY,GAAG;IACzC,IAAIC,UAAU,GAAG3K,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IACjE,IAAI4K,aAAa,GAAG5K,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGmG,SAAS,GAAGpG,SAAS,CAAC,CAAC,CAAC;IACpE,IAAI8F,aAAa,GAAG,CAAC,CAAC,EAAE/I,mBAAmB,CAAC,SAAS,CAAC,EAAEmF,gBAAgB,CAAC;IACzE,IAAIuD,eAAe,GAAGK,aAAa,CAACJ,SAAS,CAAC,UAAU1C,YAAY,EAAE;MACpE,IAAI6H,sBAAsB,EAAEC,kBAAkB,EAAEC,sBAAsB;MACtE,OAAO,CAAC/H,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACjC,gBAAgB,OAAO4J,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAAC7F,YAAY,CAAC,KAAK,CAAC9B,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACjC,gBAAgB,MAAMtD,OAAO,CAACsH,qBAAqB,CAACG,IAAI,IAAI,CAAC,CAAC2F,sBAAsB,GAAG7H,YAAY,CAAC6C,gBAAgB,MAAM,IAAI,IAAIgF,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAACjE,GAAG,OAAO+D,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACG,kBAAkB,GAAGH,UAAU,CAAChE,MAAM,MAAM,IAAI,IAAImE,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kBAAkB,CAAClE,GAAG,CAAC,IAAI5D,YAAY,CAACjC,gBAAgB,KAAKtD,OAAO,CAACsH,qBAAqB,CAACC,KAAK,IAAI,CAAC,CAAC+F,sBAAsB,GAAG/H,YAAY,CAAC6C,gBAAgB,MAAM,IAAI,IAAIkF,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAACpD,IAAI,OAAOgD,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACpD,UAAU,CAAC,CAAC;IACv7B,CAAC,CAAC;IACF,IAAI9B,eAAe,GAAG,CAAC,CAAC,EAAE;MACxB,IAAIuF,mBAAmB,GAAG,EAAE;MAC5B,IAAIJ,aAAa,EAAE;QACjB,IAAIK,mBAAmB;QACvBD,mBAAmB,GAAG,CAACL,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAAC7F,YAAY,MAAMrH,OAAO,CAACsH,qBAAqB,CAACC,KAAK,GAAG,EAAE,CAAChB,MAAM,CAAC2G,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACM,mBAAmB,GAAGN,UAAU,CAAChE,MAAM,MAAM,IAAI,IAAIsE,mBAAmB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,mBAAmB,CAAClH,IAAI,EAAE,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEvG,OAAO,CAACgF,QAAQ,EAAE,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,EAAEhF,OAAO,CAACgF,QAAQ,EAAE,WAAW,CAAC;MACpa;MACA,IAAIO,YAAY,GAAGd,gBAAgB,CAACuD,eAAe,CAAC;MACpD,IAAI2C,eAAe,GAAGvI,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAAC,EAAE,CAAC,CAAC,EAAE;QACvEkI,mBAAmB,EAAEN,aAAa;QAClCI,mBAAmB,EAAEA;MACvB,CAAC,CAAC;MACFlF,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;MACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;IACpC;EACF,CAAC;;EAED;AACF;AACA;AACA;AACA;EACE,IAAIrB,kBAAkB,GAAG,SAASA,kBAAkB,CAACzB,YAAY,EAAE;IACjE,IAAIyC,eAAe,GAAGvD,gBAAgB,CAACwD,SAAS,CAAC,UAAUuC,gBAAgB,EAAE;MAC3E,IAAIkD,sBAAsB;MAC1B,OAAOlD,gBAAgB,CAACpC,gBAAgB,IAAIoC,gBAAgB,CAACpC,gBAAgB,CAACe,GAAG,IAAIqB,gBAAgB,CAACpC,gBAAgB,CAACe,GAAG,MAAM5D,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACmI,sBAAsB,GAAGnI,YAAY,CAAC6C,gBAAgB,MAAM,IAAI,IAAIsF,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAACvE,GAAG,CAAC;IAC3U,CAAC,CAAC;IACF,IAAInB,eAAe,GAAG,CAAC,CAAC,EAAE;MACxB,IAAIK,aAAa,GAAG,CAAC,CAAC,EAAE/I,mBAAmB,CAAC,SAAS,CAAC,EAAEmF,gBAAgB,CAAC;MACzE,IAAIkJ,aAAa,GAAGtF,aAAa,CAACL,eAAe,CAAC;MAClD,IAAII,gBAAgB,GAAGhG,aAAa,CAAC,CAAC,CAAC,EAAEuL,aAAa,CAACvF,gBAAgB,CAAC;MACxE,IAAIuC,eAAe,GAAGvI,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEuL,aAAa,CAAC,EAAE,CAAC,CAAC,EAAE;QACxEvF,gBAAgB,EAAEA;MACpB,CAAC,CAAC;MACFC,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;MACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;IACpC;EACF,CAAC;EACD,IAAIuF,QAAQ,GAAG;IACbC,YAAY,EAAEtD,WAAW;IACzBuD,aAAa,EAAEvD,WAAW;IAC1BwD,qBAAqB,EAAElD,cAAc;IACrCmD,sBAAsB,EAAEnD,cAAc;IACtCoD,uBAAuB,EAAEpD,cAAc;IACvCqD,sBAAsB,EAAErD,cAAc;IACtCsD,uBAAuB,EAAEtD,cAAc;IACvCuD,aAAa,EAAEhD,oBAAoB;IACnCiD,gBAAgB,EAAEjD,oBAAoB;IACtCkD,WAAW,EAAEhD,wBAAwB;IACrCiD,oBAAoB,EAAE1C,yBAAyB;IAC/C2C,mBAAmB,EAAE3C,yBAAyB;IAC9C4C,mBAAmB,EAAEnC,wBAAwB;IAC7CoC,iBAAiB,EAAEpC,wBAAwB;IAC3CqC,mBAAmB,EAAElC,oBAAoB;IACzCmC,yBAAyB,EAAEjC,4BAA4B;IACvDkC,eAAe,EAAE5B,YAAY;IAC7B6B,aAAa,EAAE7B;EACjB,CAAC;EACD,IAAI8B,mBAAmB,GAAG,SAASA,mBAAmB,GAAG;IACvDC,gBAAgB,EAAE,CAACjH,IAAI,CAAC,UAAUM,aAAa,EAAE;MAC/C,IAAI5D,gBAAgB,CAACjC,MAAM,KAAK,CAAC,IAAI6F,aAAa,CAAC7F,MAAM,KAAK,CAAC,EAAE;QAC/D2C,UAAU,CAAC,gBAAgB,CAAC;MAC9B,CAAC,MAAM;QACLA,UAAU,CAAC,EAAE,CAAC;MAChB;MACAT,mBAAmB,CAAC,UAAUD,gBAAgB,EAAE;QAC9C,OAAO,EAAE,CAAC8B,MAAM,CAAC,CAAC,CAAC,EAAEjH,mBAAmB,CAAC,SAAS,CAAC,EAAEmF,gBAAgB,CAAC,EAAE,CAAC,CAAC,EAAEnF,mBAAmB,CAAC,SAAS,CAAC,EAAE+I,aAAa,CAAC,CAAC;MAC7H,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,UAAUC,KAAK,EAAE;MAC3BrI,CAAC,CAACsI,2BAA2B,CAACC,IAAI,CAACvI,CAAC,CAACsI,2BAA2B,CAACE,OAAO,EAAEH,KAAK,CAAC;MAChFnD,UAAU,CAAC,sBAAsB,CAAC;IACpC,CAAC,CAAC;EACJ,CAAC;EACD,IAAI6J,gBAAgB,GAAG,SAASA,gBAAgB,GAAG;IACjD,OAAO,IAAIrH,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;MAC5CzD,uBAAuB,KAAK,IAAI,IAAIA,uBAAuB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,uBAAuB,CAACgF,OAAO,CAAC6F,qBAAqB,EAAE,CAAClH,IAAI,CAAC,UAAUM,aAAa,EAAE;QACtK,OAAOT,OAAO,CAACS,aAAa,CAAC;MAC/B,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,UAAUC,KAAK,EAAE;QAC3BrI,CAAC,CAACsI,2BAA2B,CAACC,IAAI,CAACvI,CAAC,CAACsI,2BAA2B,CAACE,OAAO,EAAEH,KAAK,CAAC;QAChFT,MAAM,CAACS,KAAK,CAAC;MACf,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD,IAAI4G,YAAY,GAAG,SAASA,YAAY,CAACC,KAAK,EAAE;IAC9C,IAAIC,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,aAAa,CAACC,YAAY,GAAGL,KAAK,CAACI,aAAa,CAACE,SAAS,CAAC,KAAKJ,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,aAAa,CAACG,YAAY,CAAC;IAC1I,IAAIN,MAAM,EAAE;MACVL,mBAAmB,EAAE;IACvB;EACF,CAAC;;EAED;AACF;AACA;EACE,IAAInI,gBAAgB,GAAG,SAASA,gBAAgB,CAACrB,YAAY,EAAE;IAC7D,IAAI8C,aAAa,GAAG,CAAC,CAAC,EAAE/I,mBAAmB,CAAC,SAAS,CAAC,EAAEmF,gBAAgB,CAAC;IACzE,IAAIuD,eAAe,GAAGK,aAAa,CAACJ,SAAS,CAAC,UAAU0H,kBAAkB,EAAE;MAC1E,OAAOA,kBAAkB,CAACxH,cAAc,KAAK5C,YAAY,CAAC4C,cAAc;IAC1E,CAAC,CAAC;IACF,IAAIH,eAAe,GAAG,CAAC,CAAC,EAAE;MACxB,IAAI4H,cAAc,GAAGvH,aAAa,CAACL,eAAe,CAAC;MACnD,IAAI2C,eAAe,GAAGvI,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEwN,cAAc,CAAC,EAAE,CAAC,CAAC,EAAE;QACzEhH,kBAAkB,EAAE;MACtB,CAAC,CAAC;MACFP,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;MACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;IACpC;EACF,CAAC;;EAED;AACF;AACA;EACE,IAAIxB,iBAAiB,GAAG,SAASA,iBAAiB,CAAC3B,OAAO,EAAE;IAC1DwC,0BAA0B,CAACxC,OAAO,CAAC,CAAC6C,IAAI,CAAC,UAAU+C,QAAQ,EAAE;MAC3D,IAAI9C,eAAe,GAAG8C,QAAQ,CAAC9C,eAAe;QAC5CK,aAAa,GAAGyC,QAAQ,CAACzC,aAAa;QACtC9C,YAAY,GAAGuF,QAAQ,CAACvF,YAAY;MACtC,IAAIwF,WAAW,GAAG3I,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAACwF,WAAW,CAAC;MAC7D,IAAI/C,eAAe,GAAG,CAAC,CAAC,EAAE;QACxB,IAAI2C,eAAe,GAAGvI,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEmD,YAAY,CAAC,EAAE,CAAC,CAAC,EAAE;UACvEwF,WAAW,EAAEA;QACf,CAAC,CAAC;QACF1C,aAAa,CAACuC,MAAM,CAAC5C,eAAe,EAAE,CAAC,EAAE2C,eAAe,CAAC;QACzDjG,mBAAmB,CAAC2D,aAAa,CAAC;MACpC;IACF,CAAC,CAAC;EACJ,CAAC;;EAED;AACF;AACA;EACE,IAAIvB,kBAAkB,GAAG,SAASA,kBAAkB,CAACvB,YAAY,EAAE;IACjE,IAAIyC,eAAe,GAAGvD,gBAAgB,CAACwD,SAAS,CAAC,UAAUC,CAAC,EAAE;MAC5D,OAAOA,CAAC,CAACC,cAAc,KAAK5C,YAAY,CAAC4C,cAAc;IACzD,CAAC,CAAC;IACF,IAAIH,eAAe,GAAG,CAAC,CAAC,EAAE;MACxB,IAAI6H,mBAAmB,GAAG,CAAC,CAAC,EAAEvQ,mBAAmB,CAAC,SAAS,CAAC,EAAEmF,gBAAgB,CAAC;MAC/EoL,mBAAmB,CAACjF,MAAM,CAAC5C,eAAe,EAAE,CAAC,CAAC;MAC9CtD,mBAAmB,CAACmL,mBAAmB,CAAC;IAC1C;EACF,CAAC;EACD,IAAI9I,kBAAkB,GAAG,SAASA,kBAAkB,CAAC+I,uBAAuB,EAAE;IAC5E,OAAO,IAAInI,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;MAC5C,IAAIkI,qBAAqB,EAAEC,sBAAsB;MACjD,IAAI5H,gBAAgB,GAAG,CAAC0H,uBAAuB,KAAK,IAAI,IAAIA,uBAAuB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,uBAAuB,CAACxM,gBAAgB,MAAMtD,OAAO,CAACsH,qBAAqB,CAACC,KAAK,GAAGuI,uBAAuB,KAAK,IAAI,IAAIA,uBAAuB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACC,qBAAqB,GAAGD,uBAAuB,CAAC1H,gBAAgB,MAAM,IAAI,IAAI2H,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAAC7F,IAAI,GAAG4F,uBAAuB,KAAK,IAAI,IAAIA,uBAAuB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACE,sBAAsB,GAAGF,uBAAuB,CAAC1H,gBAAgB,MAAM,IAAI,IAAI4H,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAAC7G,GAAG;MACjpBzJ,KAAK,CAAC+G,SAAS,CAACM,kBAAkB,CAACqB,gBAAgB,EAAE0H,uBAAuB,KAAK,IAAI,IAAIA,uBAAuB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,uBAAuB,CAACxM,gBAAgB,CAAC,CAACyE,IAAI,CAAC,UAAUkI,mBAAmB,EAAE;QACnNtK,cAAc,CAACvD,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEsD,WAAW,CAAC,EAAE,CAAC,CAAC,EAAE;UAC/DL,IAAI,EAAE;QACR,CAAC,CAAC,CAAC;QACHyB,kBAAkB,CAACgJ,uBAAuB,CAAC;QAC3ClI,OAAO,CAACqI,mBAAmB,CAAC;QAC5BhQ,CAAC,CAACsI,2BAA2B,CAACC,IAAI,CAACvI,CAAC,CAACsI,2BAA2B,CAAC2H,oBAAoB,EAAEJ,uBAAuB,CAAC;MACjH,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,UAAUxH,KAAK,EAAE;QAC3BrI,CAAC,CAACsI,2BAA2B,CAACC,IAAI,CAACvI,CAAC,CAACsI,2BAA2B,CAACE,OAAO,EAAEqH,uBAAuB,CAAC;QAClGjI,MAAM,CAACS,KAAK,CAAC;MACf,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD,IAAI6H,YAAY,GAAG,SAASA,YAAY,GAAG;IACzC,OAAOxK,cAAc,CAACvD,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEsD,WAAW,CAAC,EAAE,CAAC,CAAC,EAAE;MACtEL,IAAI,EAAE;IACR,CAAC,CAAC,CAAC;EACL,CAAC;EACD,IAAI+K,aAAa,GAAG,SAASA,aAAa,CAAC7K,YAAY,EAAE;IACvDI,cAAc,CAACvD,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEsD,WAAW,CAAC,EAAE,CAAC,CAAC,EAAE;MAC/DL,IAAI,EAAE,IAAI;MACVE,YAAY,EAAEA,YAAY;MAC1BC,QAAQ,EAAE2K;IACZ,CAAC,CAAC,CAAC;EACL,CAAC;EACD,IAAIE,gBAAgB,GAAG,SAASA,gBAAgB,CAACC,CAAC,EAAE;IAClDrQ,CAAC,CAACsI,2BAA2B,CAACC,IAAI,CAACvI,CAAC,CAACsI,2BAA2B,CAACgI,WAAW,EAAED,CAAC,CAAC;EAClF,CAAC;;EAED;AACF;AACA;;EAEE,CAAC,CAAC,EAAEzQ,MAAM,CAAC2Q,KAAK,EAAElN,gBAAgB,EAAEC,KAAK,EAAEE,IAAI,EAAEC,gBAAgB,EAAEgB,mBAAmB,EAAEsB,oBAAoB,EAAE5B,uBAAuB,EAAEwJ,QAAQ,EAAE/I,YAAY,EAAEX,YAAY,EAAE6K,mBAAmB,EAAEqB,aAAa,CAAC;;EAEhN;AACF;AACA;;EAEE,IAAIK,aAAa,GAAG,SAASA,aAAa,CAAC1M,UAAU,EAAEhB,KAAK,EAAE;IAC5D,OAAO,aAAavD,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC3M,UAAU,EAAEhB,KAAK,CAAC;EACxE,CAAC;EACD,IAAI4N,mBAAmB,GAAG,SAASA,mBAAmB,GAAG;IACvD,IAAIC,gBAAgB,GAAG,IAAI;IAC3B,IAAInM,gBAAgB,CAACjC,MAAM,KAAK,CAAC,IAAI0C,OAAO,CAAC2L,WAAW,EAAE,KAAK,CAAC,CAAC,EAAE7Q,OAAO,CAACgF,QAAQ,EAAE,SAAS,CAAC,EAAE;MAC/F;MACA4L,gBAAgB,GAAG,aAAapR,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC,KAAK,EAAE;QACrE9M,KAAK,EAAE9D,MAAM,CAACgR,qBAAqB,CAAClN,KAAK,CAAC;QAC1CmN,SAAS,EAAE;MACb,CAAC,EAAEhN,UAAU,CAACiN,OAAO,GAAGP,aAAa,CAAC1M,UAAU,CAACiN,OAAO,EAAEjO,KAAK,CAAC,GAAG,aAAavD,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC,KAAK,EAAE;QACrH9M,KAAK,EAAE9D,MAAM,CAACmR,eAAe,CAACrN,KAAK,EAAEkC,MAAM,EAAEnC,cAAc,CAAC;QAC5DoN,SAAS,EAAE;MACb,CAAC,CAAC,CAAC;IACL,CAAC,MAAM,IAAItM,gBAAgB,CAACjC,MAAM,KAAK,CAAC,IAAI0C,OAAO,CAAC2L,WAAW,EAAE,KAAK,gBAAgB,EAAE;MACtF;MACAD,gBAAgB,GAAG,aAAapR,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC,KAAK,EAAE;QACrE9M,KAAK,EAAE9D,MAAM,CAACgR,qBAAqB,CAAClN,KAAK,CAAC;QAC1CmN,SAAS,EAAE;MACb,CAAC,EAAEhN,UAAU,CAACmN,KAAK,GAAGT,aAAa,CAAC1M,UAAU,CAACmN,KAAK,EAAEnO,KAAK,CAAC,GAAG,aAAavD,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC,KAAK,EAAE;QACjH9M,KAAK,EAAE9D,MAAM,CAACqR,gBAAgB,CAACvN,KAAK,EAAEkC,MAAM,EAAEZ,OAAO,CAAC;QACtD6L,SAAS,EAAE;MACb,CAAC,EAAE3N,SAAS,CAAC,CAAC;IAChB,CAAC,MAAM,IAAI,CAACI,SAAS,IAAI0B,OAAO,CAAC2L,WAAW,EAAE,KAAK,sBAAsB,EAAE;MACzE;MACAD,gBAAgB,GAAG,aAAapR,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC,KAAK,EAAE;QACrE9M,KAAK,EAAE9D,MAAM,CAACgR,qBAAqB,CAAClN,KAAK,CAAC;QAC1CmN,SAAS,EAAE;MACb,CAAC,EAAEhN,UAAU,CAACuE,KAAK,GAAGmI,aAAa,CAAC1M,UAAU,CAACuE,KAAK,EAAEvF,KAAK,CAAC,GAAG,aAAavD,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC,KAAK,EAAE;QACjH9M,KAAK,EAAE9D,MAAM,CAACqR,gBAAgB,CAACvN,KAAK,EAAEkC,MAAM,EAAEZ,OAAO,CAAC;QACtD6L,SAAS,EAAE;MACb,CAAC,EAAE1N,SAAS,CAAC,CAAC;IAChB;IACA,OAAOuN,gBAAgB;EACzB,CAAC;EACD,IAAIQ,WAAW,GAAG3M,gBAAgB,CAAC4M,GAAG,CAAC,UAAU9L,YAAY,EAAE;IAC7D,IAAI+L,oBAAoB;IACxB,IAAI/D,mBAAmB,GAAGhI,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,IAAIA,YAAY,CAACgI,mBAAmB,GAAGhI,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACgI,mBAAmB,GAAG,EAAE;IAClN,IAAIgE,QAAQ,GAAG,CAAChM,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAAC4C,cAAc,OAAOhF,kBAAkB,KAAK,IAAI,IAAIA,kBAAkB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kBAAkB,CAACgF,cAAc,CAAC,GAAG,IAAI,GAAG,KAAK;;IAEvO;AACJ;AACA;IACI,IAAIqJ,mBAAmB,GAAG5L,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAAC4L,mBAAmB;IACxL,IAAI,CAAC,CAACF,oBAAoB,GAAGE,mBAAmB,MAAM,IAAI,IAAIF,oBAAoB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,oBAAoB,CAAC9O,MAAM,KAAK,CAAC,EAAE;MAC1IgP,mBAAmB,GAAG,CAAC,IAAItR,MAAM,CAACuR,4BAA4B,CAAC;QAC7DpG,EAAE,EAAErL,OAAO,CAAC0R,2BAA2B,CAAC,QAAQ,CAAC;QACjDC,KAAK,EAAE,CAAC,CAAC,EAAE3R,OAAO,CAACgF,QAAQ,EAAE,QAAQ,CAAC;QACtC4M,OAAO,EAAExR,OAAO,CAAC,SAAS,CAAC;QAC3ByR,OAAO,EAAE,SAASA,OAAO,GAAG;UAC1B,OAAOzB,aAAa,CAAC7K,YAAY,CAAC;QACpC;MACF,CAAC,CAAC,CAAC;IACL;IACA,OAAO,aAAa/F,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC1Q,OAAO,CAAC8R,6BAA6B,EAAE;MACzF3Q,GAAG,EAAEoE,YAAY,CAAC4C,cAAc;MAChCwH,kBAAkB,EAAEpK,YAAY;MAChCgM,QAAQ,EAAEA,QAAQ;MAClBQ,qBAAqB,EAAEnM,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAACmM,qBAAqB;MACvLP,mBAAmB,EAAEA,mBAAmB;MACxC5N,KAAK,EAAE,IAAI5D,OAAO,CAACgS,0BAA0B,CAAC5P,aAAa,CAAC,CAAC,CAAC,EAAEtC,MAAM,CAACmS,aAAa,CAACrO,KAAK,EAAEkC,MAAM,CAAC,CAAC,CAAC;MACrGoM,mBAAmB,EAAEtM,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAACsM,mBAAmB;MACnLC,gBAAgB,EAAEvM,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAACuM,gBAAgB;MAC7K1E,mBAAmB,EAAE7H,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAAC6H,mBAAmB;MACnLF,mBAAmB,EAAEA,mBAAmB;MACxC6E,mBAAmB,EAAExM,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAACwM,mBAAmB;MACnLC,mBAAmB,EAAE,CAAC,CAAC,EAAErS,OAAO,CAACgF,QAAQ,EAAE,aAAa,CAAC;MACzDf,KAAK,EAAE6B,MAAM;MACb+L,OAAO,EAAExB,gBAAgB,CAACiC,IAAI,CAACjS,KAAK,CAAC;MACrCkS,mBAAmB,EAAE3M,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAAC2M,mBAAmB;MACnLC,4BAA4B,EAAE5M,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAAC4M,4BAA4B;MACrMC,uBAAuB,EAAE7M,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAAC6M,uBAAuB;MAC3LC,2BAA2B,EAAE9M,kCAAkC,KAAK,IAAI,IAAIA,kCAAkC,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,kCAAkC,CAAC8M,2BAA2B;MACnMxO,YAAY,EAAEA,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACkF;IACzF,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;AACF;AACA;EACE,OAAO,aAAa5J,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAClR,MAAM,CAAC,SAAS,CAAC,CAACmT,QAAQ,EAAE,IAAI,EAAEhC,mBAAmB,EAAE,EAAE,aAAanR,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC,KAAK,EAAE;IAC/J9M,KAAK,EAAE9D,MAAM,CAAC8S,cAAc,CAAChP,KAAK,EAAEkC,MAAM,CAAC;IAC3CiL,SAAS,EAAE,oBAAoB;IAC/B8B,QAAQ,EAAE3D;EACZ,CAAC,EAAEkC,WAAW,CAAC,EAAE,aAAa5R,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC1Q,OAAO,CAAC8S,iBAAiB,EAAE;IACvFC,MAAM,EAAErN,WAAW,CAACL,IAAI;IACxBwM,OAAO,EAAEnM,WAAW,CAACF,QAAQ;IAC7BwN,UAAU,EAAElN,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC7C,cAAc,GAAG6C,MAAM,CAACmN,OAAO,MAAM,IAAI,IAAIhQ,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,cAAc,CAACiQ,SAAS,CAACpN,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC5C,eAAe,GAAG4C,MAAM,CAACmN,OAAO,MAAM,IAAI,IAAI/P,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,eAAe,CAACiQ,IAAI;EACnU,CAAC,EAAE,aAAa3T,MAAM,CAAC,SAAS,CAAC,CAACkR,aAAa,CAAC1Q,OAAO,CAACoT,sBAAsB,EAAE;IAC9EL,MAAM,EAAErN,WAAW,CAACL,IAAI;IACxBgO,SAAS,EAAEtM,kBAAkB,CAACuL,IAAI,CAACjS,KAAK,EAAEqF,WAAW,CAACH,YAAY,CAAC;IACnEC,QAAQ,EAAEE,WAAW,CAACF,QAAQ;IAC9B5B,KAAK,EAAE9D,MAAM,CAACwT,WAAW,CAACxN,MAAM,CAAC;IACjC6L,KAAK,EAAE,CAAC,CAAC,EAAE3R,OAAO,CAACgF,QAAQ,EAAE,qBAAqB,CAAC;IACnDuO,WAAW,EAAE,CAAC,CAAC,EAAEvT,OAAO,CAACgF,QAAQ,EAAE,6BAA6B,CAAC;IACjEM,iBAAiB,EAAE,CAAC,CAAC,EAAEtF,OAAO,CAACgF,QAAQ,EAAE,qBAAqB,CAAC;IAC/DwO,gBAAgB,EAAE,CAAC,CAAC,EAAExT,OAAO,CAACgF,QAAQ,EAAE,oBAAoB;EAC9D,CAAC,CAAC,CAAC,CAAC;AACN,CAAC,CAAC;;AAEF;AACA;AACA;AACAnC,gBAAgB,CAAC4Q,YAAY,GAAG;EAC9B9P,cAAc,EAAE5D,QAAQ,CAAC,SAAS;AACpC,CAAC;;AAED;AACA;AACA;AACA8C,gBAAgB,CAAC6Q,SAAS,GAAG;EAC3BpQ,gBAAgB,EAAE3D,UAAU,CAAC,SAAS,CAAC,CAACgU,KAAK,CAAC,CAAC,OAAO,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;EAC1EpQ,KAAK,EAAE5D,UAAU,CAAC,SAAS,CAAC,CAACiU,MAAM;EACnCpQ,SAAS,EAAE7D,UAAU,CAAC,SAAS,CAAC,CAACkU,IAAI;EACrCpQ,IAAI,EAAE9D,UAAU,CAAC,SAAS,CAAC,CAACmU,KAAK;EACjCpQ,gBAAgB,EAAE/D,UAAU,CAAC,SAAS,CAAC,CAACkU,IAAI;EAC5CzQ,SAAS,EAAEzD,UAAU,CAAC,SAAS,CAAC,CAACoU,MAAM;EACvC1Q,SAAS,EAAE1D,UAAU,CAAC,SAAS,CAAC,CAACoU,MAAM;EACvCpQ,cAAc,EAAEhE,UAAU,CAAC,SAAS,CAAC,CAACoU,MAAM;EAC5CnQ,KAAK,EAAEjE,UAAU,CAAC,SAAS,CAAC,CAAC+B,MAAM;EACnCyB,kBAAkB,EAAExD,UAAU,CAAC,SAAS,CAAC,CAAC+B,MAAM;EAChDmC,sBAAsB,EAAElE,UAAU,CAAC,SAAS,CAAC,CAACkU,IAAI;EAClD/P,0BAA0B,EAAEnE,UAAU,CAAC,SAAS,CAAC,CAACoU,MAAM;EACxDhQ,UAAU,EAAEpE,UAAU,CAAC,SAAS,CAAC,CAAC+B,MAAM;EACxCsC,iCAAiC,EAAErE,UAAU,CAAC,SAAS,CAAC,CAAC+B,MAAM;EAC/DuC,KAAK,EAAEtE,UAAU,CAAC,SAAS,CAAC,CAAC+B;AAC/B,CAAC;AACD,IAAItC,yBAAyB,GAAG,aAAaI,MAAM,CAAC,SAAS,CAAC,CAACwU,IAAI,CAACnR,gBAAgB,CAAC;AACrF3D,OAAO,CAACE,yBAAyB,GAAGA,yBAAyB"},"metadata":{},"sourceType":"script","externalDependencies":[]}