{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatConversationList = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _controller = require(\"./controller\");\nvar _hooks = require(\"./hooks\");\nvar styles = _interopRequireWildcard(require(\"./style\"));\nvar _spinner = _interopRequireDefault(require(\"./resources/spinner.svg\"));\nvar _Shared = require(\"../../Shared\");\nvar _ = require(\"../\");\nvar _Chats = require(\"../../Chats\");\nvar _ConversationListCustomView = require(\"../ConversationListCustomView\");\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n/**\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @description CometChatConversationList component retrieves the latest conversations that a CometChat logged-in user has been a part of.\n * The state of the component is communicated via 3 states i.e empty, loading and error.\n *\n */\nvar ConversationList = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  var _theme$palette, _theme$palette2;\n  /**\n   * Props destructuring\n   */\n  var activeConversation = props.activeConversation,\n    emptyText = props.emptyText,\n    errorText = props.errorText,\n    conversationType = props.conversationType,\n    limit = props.limit,\n    hideError = props.hideError,\n    tags = props.tags,\n    userAndGroupTags = props.userAndGroupTags,\n    loadingIconURL = props.loadingIconURL,\n    style = props.style,\n    enableSoundForMessages = props.enableSoundForMessages,\n    customIncomingMessageSound = props.customIncomingMessageSound,\n    customView = props.customView,\n    conversationListItemConfiguration = props.conversationListItemConfiguration,\n    theme = props.theme;\n\n  /**\n   * Component internal state\n   */\n  var loggedInUser = (0, _react.useRef)(null);\n  var conversationListManager = (0, _react.useRef)(new _controller.ConversationListManager({\n    conversationType: conversationType,\n    limit: limit,\n    tags: tags,\n    userAndGroupTags: userAndGroupTags\n  }));\n  var _useState = (0, _react.useState)([]),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    conversationList = _useState2[0],\n    setConversationList = _useState2[1];\n  var _useState3 = (0, _react.useState)((0, _Shared.localize)(\"LOADING\")),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    message = _useState4[0],\n    setMessage = _useState4[1];\n  var _useState5 = (0, _react.useState)({\n      show: false,\n      message: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n      confirmButtonText: (0, _Shared.localize)(\"DELETE\"),\n      conversation: null,\n      onCancel: function onCancel() {}\n    }),\n    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n    showConfirm = _useState6[0],\n    setShowConfirm = _useState6[1];\n  var activeConversationRef = _react.default.useRef(null);\n  var callbackDataRef = _react.default.useRef(null);\n\n  /**\n   * Component private scoping\n   */\n  var _conversationListItemConfiguration = new _Shared.ConversationListItemConfiguration(conversationListItemConfiguration !== null && conversationListItemConfiguration !== void 0 ? conversationListItemConfiguration : {});\n  var _theme = new _Shared.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n  activeConversationRef.current = activeConversation;\n\n  /**\n   * Component internal handlers/methods\n   */\n\n  var conversationCallback = function conversationCallback(listenerName) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    callbackDataRef.current = {\n      name: listenerName,\n      args: [].concat(args)\n    };\n    try {\n      var _callbackDataRef$curr, _callbackDataRef$curr2;\n      var handler = handlers[(_callbackDataRef$curr = callbackDataRef.current) === null || _callbackDataRef$curr === void 0 ? void 0 : _callbackDataRef$curr.name];\n      if (handler) return handler.apply(void 0, (0, _toConsumableArray2.default)((_callbackDataRef$curr2 = callbackDataRef.current) === null || _callbackDataRef$curr2 === void 0 ? void 0 : _callbackDataRef$curr2.args));\n    } catch (e) {\n      throw e;\n    }\n  };\n\n  /**\n   * Mark the incoming message as delivered\n   */\n  var markMessageAsDelivered = function markMessageAsDelivered(message) {\n    if (message.hasOwnProperty(\"deliveredAt\") === false) {\n      _chat.CometChat.markAsDelivered(message);\n    }\n  };\n\n  /**\n   *\n   * If the incoming message is 1-1 conversation, and the conversation type filter is set to groups return false\n   * If the incoming message is group conversation, and the conversation type filter is set to users return false\n   * else return true\n   *\n   */\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      resetUnreadCount: resetUnreadCount,\n      updateLastMessage: updateLastMessage,\n      removeConversation: removeConversation,\n      deleteConversation: deleteConversation,\n      updateConversation: updateConversation\n    };\n  });\n  var filterByConversationType = function filterByConversationType(message) {\n    if (conversationType !== _Shared.ConversationTypeConstants.both) {\n      if (conversationType === _Shared.ConversationTypeConstants.users && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.group || conversationType === _Shared.ConversationTypeConstants.groups && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.user) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  /**\n   *\n   * Converting message object received in the listener callback to conversation object\n   */\n  var getConversationFromMessage = function getConversationFromMessage(message) {\n    return new Promise(function (resolve, reject) {\n      _chat.CometChat.CometChatHelper.getConversationFromMessage(message).then(function (conversation) {\n        var conversationKey = conversationList.findIndex(function (c) {\n          return c.conversationId === conversation.conversationId;\n        });\n        if (conversationKey > -1) {\n          resolve({\n            conversationKey: conversationKey,\n            conversationId: conversation.conversationId,\n            conversationType: conversation.conversationType,\n            conversationWith: conversation.conversationWith,\n            conversation: conversationList[conversationKey],\n            conversations: (0, _toConsumableArray2.default)(conversationList)\n          });\n        }\n        resolve({\n          conversationKey: conversationKey,\n          conversationId: conversation.conversationId,\n          conversationType: conversation.conversationType,\n          conversationWith: conversation.conversationWith,\n          conversation: conversation,\n          conversations: (0, _toConsumableArray2.default)(conversationList)\n        });\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var getUnreadMessageCount = function getUnreadMessageCount(message) {\n    var _activeConversationRe;\n    var conversation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var activeConversation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var unreadMessageCount = conversation !== null && conversation !== void 0 && conversation.unreadMessageCount ? Number(conversation === null || conversation === void 0 ? void 0 : conversation.unreadMessageCount) : 0;\n    unreadMessageCount = shouldIncrementCount(message) ? ++unreadMessageCount : unreadMessageCount;\n    console.log(\"activeConversation\", activeConversationRef, \"conversation\", conversation);\n    unreadMessageCount = ((_activeConversationRe = activeConversationRef.current) === null || _activeConversationRe === void 0 ? void 0 : _activeConversationRe.conversationId) === (conversation === null || conversation === void 0 ? void 0 : conversation.conversationId) ? 0 : unreadMessageCount;\n    console.log(\"unreadMessageCount\", unreadMessageCount);\n    return unreadMessageCount;\n  };\n\n  /**\n   *\n   * If the message is sent by the logged in user, return false\n   * If the message has category message or has incrementUnreadCount key in the metadata with value set to true, return true else return false\n   *\n   */\n  var shouldIncrementCount = function shouldIncrementCount(message) {\n    var _message$sender, _loggedInUser$current, _message$metadata;\n    if ((message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.uid) === (loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current = loggedInUser.current) === null || _loggedInUser$current === void 0 ? void 0 : _loggedInUser$current.uid)) {\n      return false;\n    }\n    if ((message === null || message === void 0 ? void 0 : message.category) === _Shared.MessageCategoryConstants.message || (message === null || message === void 0 ? void 0 : (_message$metadata = message.metadata) === null || _message$metadata === void 0 ? void 0 : _message$metadata.incrementUnreadCount) === true) {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * play notification sound for incoming messages\n   */\n  var playNotificationSound = function playNotificationSound(message) {\n    /**\n     * If unreadcount is not incremented, don't play notification sound\n     */\n    if (!shouldIncrementCount(message)) {\n      return false;\n    }\n    /**\n          * If customIncomingMessageSound url is present then CometChatSoundManager will play this sound\n          else play the default sound\n          */\n    if (enableSoundForMessages && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationType && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationWith) {\n      var _message$getSender, _activeConversation$c, _activeConversation$c2;\n      var receiverType = message.getReceiverType();\n      var receiverId = receiverType === _Shared.ReceiverTypeConstants.user ? message === null || message === void 0 ? void 0 : (_message$getSender = message.getSender()) === null || _message$getSender === void 0 ? void 0 : _message$getSender.getUid() : message === null || message === void 0 ? void 0 : message.getReceiverId();\n      if (receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c = activeConversation.conversationWith) === null || _activeConversation$c === void 0 ? void 0 : _activeConversation$c.uid) && receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c2 = activeConversation.conversationWith) === null || _activeConversation$c2 === void 0 ? void 0 : _activeConversation$c2.guid)) {\n        if (customIncomingMessageSound) {\n          _Shared.CometChatSoundManager.play(customIncomingMessageSound);\n        } else {\n          _Shared.CometChatSoundManager.play(_Shared.CometChatSoundManager.Sound.incomingMessageFromOther);\n        }\n      }\n    }\n  };\n\n  /**\n   *\n   * When a user goes online/ offline\n   */\n  var handleUsers = function handleUsers(user) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      return eachConversation.conversationType && eachConversation.conversationType === _Shared.ReceiverTypeConstants.user && eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === user.uid;\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2.default)(conversationList);\n      var conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread(_objectSpread({}, conversation.conversationWith), {}, {\n        status: user.getStatus()\n      });\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * When a text message / media message / custom message is received\n   */\n  var handleMessages = function handleMessages() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    /**\n     * marking the incoming messages as read\n     */\n    markMessageAsDelivered(message);\n    /**\n     * If the incoming message is 1-1 and the conversation type filter is set to group, return false\n     * OR\n     * If the incoming message is group and the conversation type filter is set to \"users\", return false\n     * ELSE\n     * return true\n     */\n    if (filterByConversationType() === false) {\n      return false;\n    }\n    _chat.CometChat.CometChatHelper.getConversationFromMessage(message).then(function (conversation) {\n      setConversationList(function (prevConversationList) {\n        var list = (0, _toConsumableArray2.default)(prevConversationList);\n        var conversationKey = prevConversationList.findIndex(function (c) {\n          return c.conversationId === conversation.conversationId;\n        });\n\n        //  const lastMessage = { ...conversation?.lastMessage, ...message, data: {...message.data} };\n\n        if (conversationKey > -1) {\n          var latestConversation = prevConversationList[conversationKey];\n          var lastMessage = _objectSpread(_objectSpread(_objectSpread({}, latestConversation === null || latestConversation === void 0 ? void 0 : latestConversation.lastMessage), message), {}, {\n            data: _objectSpread({}, message.data)\n          });\n          var unreadMessageCount = getUnreadMessageCount(message, latestConversation);\n          var newConversation = _objectSpread(_objectSpread({}, latestConversation), {}, {\n            conversationId: latestConversation.conversationId,\n            conversationType: latestConversation.conversationType,\n            conversationWith: _objectSpread({}, latestConversation.conversationWith),\n            unreadMessageCount: unreadMessageCount,\n            lastMessage: _objectSpread({}, lastMessage)\n          });\n\n          //play notification sound\n          playNotificationSound(message);\n          list.splice(conversationKey, 1);\n          list.unshift(newConversation);\n          return (0, _toConsumableArray2.default)(list);\n        } else {\n          var _lastMessage = _objectSpread(_objectSpread(_objectSpread({}, conversation === null || conversation === void 0 ? void 0 : conversation.lastMessage), message), {}, {\n            data: _objectSpread({}, message.data)\n          });\n          var _unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var _newConversation = new _chat.CometChat.Conversation(conversation.conversationId, conversation.conversationType, _lastMessage, conversation.conversationWith, _unreadMessageCount);\n          list.unshift(_newConversation);\n          return (0, _toConsumableArray2.default)(list);\n        }\n      });\n    }).catch(function (error) {\n      return _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n    });\n  };\n\n  /**\n   * Listener callback when a message is edited, deleted or updated\n   */\n  var handleMessageActions = function handleMessageActions() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1 && conversation.lastMessage.id === message.id) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList((0, _toConsumableArray2.default)(conversations));\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a message is read\n   */\n  var handleMessageReadActions = function handleMessageReadActions() {\n    var messageReceipt = arguments.length <= 0 ? undefined : arguments[0];\n    var conversationKey = conversationList.findIndex(function (conversation) {\n      var _conversation$convers, _conversation$convers2;\n      return (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiverType) === (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) && ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers = conversation.conversationWith) === null || _conversation$convers === void 0 ? void 0 : _conversation$convers.uid) || (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers2 = conversation.conversationWith) === null || _conversation$convers2 === void 0 ? void 0 : _conversation$convers2.guid));\n    });\n    if (conversationKey > -1) {\n      var _conversation$lastMes;\n      var conversations = _objectSpread({}, conversationList);\n      var conversation = conversations[conversationKey];\n      var unreadMessageCount = getUnreadMessageCount(message, conversation);\n\n      /**\n       * If the message id in the read receipt is greater than or equal to the lastmessage id, set unreadmessagecount to 0\n       */\n      if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.messageId) >= (conversation === null || conversation === void 0 ? void 0 : (_conversation$lastMes = conversation.lastMessage) === null || _conversation$lastMes === void 0 ? void 0 : _conversation$lastMes.id)) {\n        unreadMessageCount = 0;\n      }\n      var newConversation = new _chat.CometChat.Conversation(conversation.conversationId, conversation.conversationType, conversation.lastMessage, conversation.conversationWith, unreadMessageCount);\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * Listener callback when a user joins/added to the group\n   */\n  var handleGroupMemberAddition = function handleGroupMemberAddition() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var newUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var _loggedInUser$current2;\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      } else if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current2 = loggedInUser.current) === null || _loggedInUser$current2 === void 0 ? void 0 : _loggedInUser$current2.uid) === newUser.uid) {\n        /**\n         * If the loggedin user is added to the group, add the conversation to the chats list\n         */\n        var _lastMessage2 = _objectSpread({}, message);\n        var _newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n          hasJoined: true\n        });\n        var _unreadMessageCount2 = getUnreadMessageCount(message, conversation);\n        var _newConversation2 = new _chat.CometChat.Conversation(conversationId, conversationType, _lastMessage2, _newConversationWith, _unreadMessageCount2);\n        conversations.unshift(_newConversation2);\n        setConversationList(conversations);\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a member is kicked from / has left the group\n   */\n  var handleGroupMemberRemoval = function handleGroupMemberRemoval() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current3;\n        /**\n         * If the loggedin user is removed from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current3 = loggedInUser.current) === null || _loggedInUser$current3 === void 0 ? void 0 : _loggedInUser$current3.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a member is banned from the group\n   */\n  var handleGroupMemberBan = function handleGroupMemberBan() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current4;\n        /**\n         * If the loggedin user is banned from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current4 = loggedInUser.current) === null || _loggedInUser$current4 === void 0 ? void 0 : _loggedInUser$current4.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a group member scope is updated\n   */\n  var handleGroupMemberScopeChange = function handleGroupMemberScopeChange() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var user = arguments.length <= 1 ? undefined : arguments[1];\n    var newScope = arguments.length <= 2 ? undefined : arguments[2];\n    var group = arguments.length <= 4 ? undefined : arguments[4];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current5;\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current5 = loggedInUser.current) === null || _loggedInUser$current5 === void 0 ? void 0 : _loggedInUser$current5.uid) === user.uid) {\n          var newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n            scope: newScope\n          });\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1);\n          conversations.unshift(newConversation);\n          setConversationList(conversations);\n        } else {\n          var _newConversationWith2 = _objectSpread(_objectSpread({}, conversationWith), group);\n          var _newConversation3 = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, _newConversationWith2, unreadMessageCount);\n          conversations.splice(conversationKey, 1, _newConversation3);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback for typing events\n   */\n  var handleTyping = function handleTyping() {\n    var typingData = arguments.length <= 0 ? undefined : arguments[0];\n    var typingStarted = arguments.length <= 1 ? undefined : arguments[1];\n    var conversations = (0, _toConsumableArray2.default)(conversationList);\n    var conversationKey = conversations.findIndex(function (conversation) {\n      var _conversation$convers3, _typingData$sender, _conversation$convers4;\n      return (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) && ((conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === _Shared.ReceiverTypeConstants.user && ((_conversation$convers3 = conversation.conversationWith) === null || _conversation$convers3 === void 0 ? void 0 : _conversation$convers3.uid) === (typingData === null || typingData === void 0 ? void 0 : (_typingData$sender = typingData.sender) === null || _typingData$sender === void 0 ? void 0 : _typingData$sender.uid) || conversation.conversationType === _Shared.ReceiverTypeConstants.group && ((_conversation$convers4 = conversation.conversationWith) === null || _conversation$convers4 === void 0 ? void 0 : _conversation$convers4.guid) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverId));\n    });\n    if (conversationKey > -1) {\n      var typingIndicatorText = \"\";\n      if (typingStarted) {\n        var _typingData$sender2;\n        typingIndicatorText = (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) === _Shared.ReceiverTypeConstants.group ? \"\".concat(typingData === null || typingData === void 0 ? void 0 : (_typingData$sender2 = typingData.sender) === null || _typingData$sender2 === void 0 ? void 0 : _typingData$sender2.name, \" \").concat((0, _Shared.localize)(\"IS_TYPING\")) : (0, _Shared.localize)(\"IS_TYPING\");\n      }\n      var conversation = conversationList[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        showTypingIndicator: typingStarted,\n        typingIndicatorText: typingIndicatorText\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * @param {Object} conversation\n   * Public method to update the conversation list programmatically\n   */\n  var updateConversation = function updateConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      var _conversation$convers5;\n      return eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers5 = conversation.conversationWith) === null || _conversation$convers5 === void 0 ? void 0 : _conversation$convers5.uid);\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2.default)(conversationList);\n      var _conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread({}, _conversation.conversationWith);\n      var newConversation = _objectSpread(_objectSpread({}, _conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  var handlers = {\n    onUserOnline: handleUsers,\n    onUserOffline: handleUsers,\n    onTextMessageReceived: handleMessages,\n    onMediaMessageReceived: handleMessages,\n    onCustomMessageReceived: handleMessages,\n    onIncomingCallReceived: handleMessages,\n    onIncomingCallCancelled: handleMessages,\n    messageEdited: handleMessageActions,\n    onMessageDeleted: handleMessageActions,\n    messageRead: handleMessageReadActions,\n    onMemberAddedToGroup: handleGroupMemberAddition,\n    onGroupMemberJoined: handleGroupMemberAddition,\n    onGroupMemberKicked: handleGroupMemberRemoval,\n    onGroupMemberLeft: handleGroupMemberRemoval,\n    onGroupMemberBanned: handleGroupMemberBan,\n    onGroupMemberScopeChanged: handleGroupMemberScopeChange,\n    onTypingStarted: handleTyping,\n    onTypingEnded: handleTyping\n  };\n  var handleConversations = function handleConversations() {\n    getConversations().then(function (conversations) {\n      if (conversationList.length === 0 && conversations.length === 0) {\n        setMessage(\"NO_CHATS_FOUND\");\n      } else {\n        setMessage(\"\");\n      }\n      setConversationList(function (conversationList) {\n        return [].concat((0, _toConsumableArray2.default)(conversationList), (0, _toConsumableArray2.default)(conversations));\n      });\n    }).catch(function (error) {\n      _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n      setMessage(\"SOMETHING_WENT_WRONG\");\n    });\n  };\n  var getConversations = function getConversations() {\n    return new Promise(function (resolve, reject) {\n      conversationListManager === null || conversationListManager === void 0 ? void 0 : conversationListManager.current.fetchNextConversation().then(function (conversations) {\n        return resolve(conversations);\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var handleScroll = function handleScroll(event) {\n    var bottom = Math.round(event.currentTarget.scrollHeight - event.currentTarget.scrollTop) === Math.round(event.currentTarget.clientHeight);\n    if (bottom) {\n      handleConversations();\n    }\n  };\n\n  /**\n   * reset un read count\n   */\n  var resetUnreadCount = function resetUnreadCount(conversation) {\n    var conversations = (0, _toConsumableArray2.default)(conversationList);\n    var conversationKey = conversations.findIndex(function (conversationObject) {\n      return conversationObject.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var _conversation2 = conversations[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, _conversation2), {}, {\n        unreadMessageCount: 0\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   * update last message\n   */\n  var updateLastMessage = function updateLastMessage(message) {\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversations = response.conversations,\n        conversation = response.conversation;\n      if (conversationKey > -1) {\n        var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n          lastMessage: message\n        });\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList((0, _toConsumableArray2.default)(conversations));\n      }\n    });\n  };\n\n  /**\n   * Remove conversation from the conversationlist upon delete\n   */\n  var removeConversation = function removeConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (c) {\n      return c.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var newConversationList = (0, _toConsumableArray2.default)(conversationList);\n      newConversationList.splice(conversationKey, 1);\n      setConversationList(newConversationList);\n    }\n  };\n  var deleteConversation = function deleteConversation(conversationToBeDeleted) {\n    return new Promise(function (resolve, reject) {\n      var _conversationToBeDele, _conversationToBeDele2;\n      var conversationWith = (conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType) === _Shared.ReceiverTypeConstants.group ? conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele === void 0 ? void 0 : _conversationToBeDele.guid : conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele2 = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele2 === void 0 ? void 0 : _conversationToBeDele2.uid;\n      _chat.CometChat.deleteConversation(conversationWith, conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType).then(function (deletedConversation) {\n        setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n          show: false\n        }));\n        removeConversation(conversationToBeDeleted);\n        resolve(deletedConversation);\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onDeleteConversation, conversationToBeDeleted);\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, conversationToBeDeleted);\n        reject(error);\n      });\n    });\n  };\n  var cancelDelete = function cancelDelete() {\n    return setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: false\n    }));\n  };\n  var confirmDelete = function confirmDelete(conversation) {\n    setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: true,\n      conversation: conversation,\n      onCancel: cancelDelete\n    }));\n  };\n  var itemClickhandler = function itemClickhandler(e) {\n    _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onItemClick, e);\n  };\n\n  /**\n   * Component hooks\n   */\n\n  (0, _hooks.Hooks)(conversationType, limit, tags, userAndGroupTags, setConversationList, conversationCallback, conversationListManager, loggedInUser, handleConversations);\n\n  /**\n   * Component template scoping\n   */\n\n  var getCustomView = function getCustomView(customView, props) {\n    return /*#__PURE__*/_react.default.createElement(customView, props);\n  };\n  var getMessageContainer = function getMessageContainer() {\n    var messageContainer = null;\n    if (conversationList.length === 0 && message.toLowerCase() === (0, _Shared.localize)(\"LOADING\")) {\n      /**Loading custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.loading ? getCustomView(customView.loading, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageImgStyle(style, _theme, loadingIconURL),\n        className: \"message\"\n      }));\n    } else if (conversationList.length === 0 && message.toLowerCase() === \"no chats found\") {\n      /**Empty custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.empty ? getCustomView(customView.empty, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, emptyText));\n    } else if (!hideError && message.toLowerCase() === \"something went wrong\") {\n      /**Error custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.error ? getCustomView(customView.error, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, errorText));\n    }\n    return messageContainer;\n  };\n  var renderItems = conversationList.map(function (conversation) {\n    var _conversationOptions;\n    var typingIndicatorText = conversation !== null && conversation !== void 0 && conversation.typingIndicatorText ? conversation === null || conversation === void 0 ? void 0 : conversation.typingIndicatorText : \"\";\n    var isActive = (conversation === null || conversation === void 0 ? void 0 : conversation.conversationId) === (activeConversation === null || activeConversation === void 0 ? void 0 : activeConversation.conversationId) ? true : false;\n\n    /**\n     * Calculate conversations options for child component\n     */\n    var conversationOptions = _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationOptions;\n    if (((_conversationOptions = conversationOptions) === null || _conversationOptions === void 0 ? void 0 : _conversationOptions.length) == 0) {\n      conversationOptions = [new _Chats.CometChatConversationOptions({\n        id: _Shared.ConversationOptionConstants.delete,\n        title: (0, _Shared.localize)(\"DELETE\"),\n        iconURL: _delete.default,\n        onClick: function onClick() {\n          return confirmDelete(conversation);\n        }\n      })];\n    }\n    return /*#__PURE__*/_react.default.createElement(_Shared.CometChatConversationListItem, {\n      key: conversation.conversationId,\n      conversationObject: conversation,\n      isActive: isActive,\n      conversationInputData: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationInputData,\n      conversationOptions: conversationOptions,\n      style: new _Shared.ConversationListItemStyles(_objectSpread({}, styles.listItemStyle(style, _theme))),\n      hideDeletedMessages: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideDeletedMessages,\n      hideGroupActions: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideGroupActions,\n      showTypingIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.showTypingIndicator,\n      typingIndicatorText: typingIndicatorText,\n      hideThreadIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideThreadIndicator,\n      threadIndicatorText: (0, _Shared.localize)(\"IN_A_THREAD\"),\n      theme: _theme,\n      onClick: itemClickhandler.bind(_this),\n      avatarConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.avatarConfiguration,\n      statusIndicatorConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.statusIndicatorConfiguration,\n      badgeCountConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.badgeCountConfiguration,\n      messageReceiptConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.messageReceiptConfiguration,\n      loggedInUser: loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.current\n    });\n  });\n\n  /**\n   * Component template\n   */\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, getMessageContainer(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: styles.chatsListStyle(style, _theme),\n    className: \"conversation__list\",\n    onScroll: handleScroll\n  }, renderItems), /*#__PURE__*/_react.default.createElement(_Shared.CometChatBackdrop, {\n    isOpen: showConfirm.show,\n    onClick: showConfirm.onCancel,\n    background: _theme === null || _theme === void 0 ? void 0 : (_theme$palette = _theme.palette) === null || _theme$palette === void 0 ? void 0 : _theme$palette.accent200[_theme === null || _theme === void 0 ? void 0 : (_theme$palette2 = _theme.palette) === null || _theme$palette2 === void 0 ? void 0 : _theme$palette2.mode]\n  }, /*#__PURE__*/_react.default.createElement(_Shared.CometChatConfirmDialog, {\n    isOpen: showConfirm.show,\n    onConfirm: deleteConversation.bind(_this, showConfirm.conversation),\n    onCancel: showConfirm.onCancel,\n    style: styles.DialogStyle(_theme),\n    title: (0, _Shared.localize)(\"DELETE_CONVERSATION\"),\n    messageText: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n    confirmButtonText: (0, _Shared.localize)(\"CONFIRM_BUTTON_TEXT\"),\n    cancelButtonText: (0, _Shared.localize)(\"CANCEL_BUTTON_TEXT\")\n  })));\n});\n\n/**\n * Component default props\n */\nConversationList.defaultProps = {\n  loadingIconURL: _spinner.default\n};\n\n/**\n * Component default props types\n */\nConversationList.propTypes = {\n  conversationType: _propTypes.default.oneOf([\"users\", \"groups\", \"both\"]),\n  limit: _propTypes.default.number,\n  hideError: _propTypes.default.bool,\n  tags: _propTypes.default.array,\n  userAndGroupTags: _propTypes.default.bool,\n  emptyText: _propTypes.default.string,\n  errorText: _propTypes.default.string,\n  loadingIconURL: _propTypes.default.string,\n  style: _propTypes.default.object,\n  activeConversation: _propTypes.default.object,\n  enableSoundForMessages: _propTypes.default.bool,\n  customIncomingMessageSound: _propTypes.default.string,\n  customView: _propTypes.default.object,\n  conversationListItemConfiguration: _propTypes.default.object,\n  theme: _propTypes.default.object\n};\nvar CometChatConversationList = /*#__PURE__*/_react.default.memo(ConversationList);\nexports.CometChatConversationList = CometChatConversationList;","map":{"version":3,"names":["_interopRequireDefault","require","_typeof","Object","defineProperty","exports","value","CometChatConversationList","_defineProperty2","_toConsumableArray2","_slicedToArray2","_react","_interopRequireWildcard","_chat","_propTypes","_controller","_hooks","styles","_spinner","_Shared","_","_Chats","_ConversationListCustomView","_delete","_this","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","ConversationList","forwardRef","props","ref","_theme$palette","_theme$palette2","activeConversation","emptyText","errorText","conversationType","limit","hideError","tags","userAndGroupTags","loadingIconURL","style","enableSoundForMessages","customIncomingMessageSound","customView","conversationListItemConfiguration","theme","loggedInUser","useRef","conversationListManager","ConversationListManager","_useState","useState","_useState2","conversationList","setConversationList","_useState3","localize","_useState4","message","setMessage","_useState5","show","confirmButtonText","conversation","onCancel","_useState6","showConfirm","setShowConfirm","activeConversationRef","callbackDataRef","_conversationListItemConfiguration","ConversationListItemConfiguration","_theme","CometChatTheme","current","conversationCallback","listenerName","_len","args","Array","_key","name","concat","_callbackDataRef$curr","_callbackDataRef$curr2","handler","handlers","e","markMessageAsDelivered","CometChat","markAsDelivered","useImperativeHandle","resetUnreadCount","updateLastMessage","removeConversation","deleteConversation","updateConversation","filterByConversationType","ConversationTypeConstants","both","users","receiverType","ReceiverTypeConstants","group","groups","user","getConversationFromMessage","Promise","resolve","reject","CometChatHelper","then","conversationKey","findIndex","c","conversationId","conversationWith","conversations","catch","error","CometChatConversationEvents","emit","onError","getUnreadMessageCount","_activeConversationRe","undefined","unreadMessageCount","Number","shouldIncrementCount","console","log","_message$sender","_loggedInUser$current","_message$metadata","sender","uid","category","MessageCategoryConstants","metadata","incrementUnreadCount","playNotificationSound","_message$getSender","_activeConversation$c","_activeConversation$c2","getReceiverType","receiverId","getSender","getUid","getReceiverId","guid","CometChatSoundManager","play","Sound","incomingMessageFromOther","handleUsers","eachConversation","status","getStatus","newConversation","splice","handleMessages","prevConversationList","list","latestConversation","lastMessage","data","unshift","_lastMessage","_unreadMessageCount","_newConversation","Conversation","handleMessageActions","response","id","handleMessageReadActions","messageReceipt","_conversation$convers","_conversation$convers2","receiver","_conversation$lastMes","messageId","handleGroupMemberAddition","newUser","_loggedInUser$current2","newConversationWith","_lastMessage2","_newConversationWith","hasJoined","_unreadMessageCount2","_newConversation2","handleGroupMemberRemoval","removedUser","_loggedInUser$current3","handleGroupMemberBan","_loggedInUser$current4","handleGroupMemberScopeChange","newScope","_loggedInUser$current5","scope","_newConversationWith2","_newConversation3","handleTyping","typingData","typingStarted","_conversation$convers3","_typingData$sender","_conversation$convers4","typingIndicatorText","_typingData$sender2","showTypingIndicator","_conversation$convers5","_conversation","onUserOnline","onUserOffline","onTextMessageReceived","onMediaMessageReceived","onCustomMessageReceived","onIncomingCallReceived","onIncomingCallCancelled","messageEdited","onMessageDeleted","messageRead","onMemberAddedToGroup","onGroupMemberJoined","onGroupMemberKicked","onGroupMemberLeft","onGroupMemberBanned","onGroupMemberScopeChanged","onTypingStarted","onTypingEnded","handleConversations","getConversations","fetchNextConversation","handleScroll","event","bottom","Math","round","currentTarget","scrollHeight","scrollTop","clientHeight","conversationObject","_conversation2","newConversationList","conversationToBeDeleted","_conversationToBeDele","_conversationToBeDele2","deletedConversation","onDeleteConversation","cancelDelete","confirmDelete","itemClickhandler","onItemClick","Hooks","getCustomView","createElement","getMessageContainer","messageContainer","toLowerCase","messageContainerStyle","className","loading","messageImgStyle","empty","messageTextStyle","renderItems","map","_conversationOptions","isActive","conversationOptions","CometChatConversationOptions","ConversationOptionConstants","delete","title","iconURL","onClick","CometChatConversationListItem","conversationInputData","ConversationListItemStyles","listItemStyle","hideDeletedMessages","hideGroupActions","hideThreadIndicator","threadIndicatorText","bind","avatarConfiguration","statusIndicatorConfiguration","badgeCountConfiguration","messageReceiptConfiguration","Fragment","chatsListStyle","onScroll","CometChatBackdrop","isOpen","background","palette","accent200","mode","CometChatConfirmDialog","onConfirm","DialogStyle","messageText","cancelButtonText","defaultProps","propTypes","oneOf","number","bool","array","string","memo"],"sources":["/home/admin1/dev/react/react-sample-guide/sample-react-guides/node_modules/react-ui-kit-testing/dist/Chats/CometChatConversationList/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatConversationList = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _controller = require(\"./controller\");\nvar _hooks = require(\"./hooks\");\nvar styles = _interopRequireWildcard(require(\"./style\"));\nvar _spinner = _interopRequireDefault(require(\"./resources/spinner.svg\"));\nvar _Shared = require(\"../../Shared\");\nvar _ = require(\"../\");\nvar _Chats = require(\"../../Chats\");\nvar _ConversationListCustomView = require(\"../ConversationListCustomView\");\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n/**\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @description CometChatConversationList component retrieves the latest conversations that a CometChat logged-in user has been a part of.\n * The state of the component is communicated via 3 states i.e empty, loading and error.\n *\n */\nvar ConversationList = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  var _theme$palette, _theme$palette2;\n  /**\n   * Props destructuring\n   */\n  var activeConversation = props.activeConversation,\n    emptyText = props.emptyText,\n    errorText = props.errorText,\n    conversationType = props.conversationType,\n    limit = props.limit,\n    hideError = props.hideError,\n    tags = props.tags,\n    userAndGroupTags = props.userAndGroupTags,\n    loadingIconURL = props.loadingIconURL,\n    style = props.style,\n    enableSoundForMessages = props.enableSoundForMessages,\n    customIncomingMessageSound = props.customIncomingMessageSound,\n    customView = props.customView,\n    conversationListItemConfiguration = props.conversationListItemConfiguration,\n    theme = props.theme;\n\n  /**\n   * Component internal state\n   */\n  var loggedInUser = (0, _react.useRef)(null);\n  var conversationListManager = (0, _react.useRef)(new _controller.ConversationListManager({\n    conversationType: conversationType,\n    limit: limit,\n    tags: tags,\n    userAndGroupTags: userAndGroupTags\n  }));\n  var _useState = (0, _react.useState)([]),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    conversationList = _useState2[0],\n    setConversationList = _useState2[1];\n  var _useState3 = (0, _react.useState)((0, _Shared.localize)(\"LOADING\")),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    message = _useState4[0],\n    setMessage = _useState4[1];\n  var _useState5 = (0, _react.useState)({\n      show: false,\n      message: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n      confirmButtonText: (0, _Shared.localize)(\"DELETE\"),\n      conversation: null,\n      onCancel: function onCancel() {}\n    }),\n    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n    showConfirm = _useState6[0],\n    setShowConfirm = _useState6[1];\n  var activeConversationRef = _react.default.useRef(null);\n  var callbackDataRef = _react.default.useRef(null);\n\n  /**\n   * Component private scoping\n   */\n  var _conversationListItemConfiguration = new _Shared.ConversationListItemConfiguration(conversationListItemConfiguration !== null && conversationListItemConfiguration !== void 0 ? conversationListItemConfiguration : {});\n  var _theme = new _Shared.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n  activeConversationRef.current = activeConversation;\n\n  /**\n   * Component internal handlers/methods\n   */\n\n  var conversationCallback = function conversationCallback(listenerName) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    callbackDataRef.current = {\n      name: listenerName,\n      args: [].concat(args)\n    };\n    try {\n      var _callbackDataRef$curr, _callbackDataRef$curr2;\n      var handler = handlers[(_callbackDataRef$curr = callbackDataRef.current) === null || _callbackDataRef$curr === void 0 ? void 0 : _callbackDataRef$curr.name];\n      if (handler) return handler.apply(void 0, (0, _toConsumableArray2.default)((_callbackDataRef$curr2 = callbackDataRef.current) === null || _callbackDataRef$curr2 === void 0 ? void 0 : _callbackDataRef$curr2.args));\n    } catch (e) {\n      throw e;\n    }\n  };\n\n  /**\n   * Mark the incoming message as delivered\n   */\n  var markMessageAsDelivered = function markMessageAsDelivered(message) {\n    if (message.hasOwnProperty(\"deliveredAt\") === false) {\n      _chat.CometChat.markAsDelivered(message);\n    }\n  };\n\n  /**\n   *\n   * If the incoming message is 1-1 conversation, and the conversation type filter is set to groups return false\n   * If the incoming message is group conversation, and the conversation type filter is set to users return false\n   * else return true\n   *\n   */\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      resetUnreadCount: resetUnreadCount,\n      updateLastMessage: updateLastMessage,\n      removeConversation: removeConversation,\n      deleteConversation: deleteConversation,\n      updateConversation: updateConversation\n    };\n  });\n  var filterByConversationType = function filterByConversationType(message) {\n    if (conversationType !== _Shared.ConversationTypeConstants.both) {\n      if (conversationType === _Shared.ConversationTypeConstants.users && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.group || conversationType === _Shared.ConversationTypeConstants.groups && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.user) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  /**\n   *\n   * Converting message object received in the listener callback to conversation object\n   */\n  var getConversationFromMessage = function getConversationFromMessage(message) {\n    return new Promise(function (resolve, reject) {\n      _chat.CometChat.CometChatHelper.getConversationFromMessage(message).then(function (conversation) {\n        var conversationKey = conversationList.findIndex(function (c) {\n          return c.conversationId === conversation.conversationId;\n        });\n        if (conversationKey > -1) {\n          resolve({\n            conversationKey: conversationKey,\n            conversationId: conversation.conversationId,\n            conversationType: conversation.conversationType,\n            conversationWith: conversation.conversationWith,\n            conversation: conversationList[conversationKey],\n            conversations: (0, _toConsumableArray2.default)(conversationList)\n          });\n        }\n        resolve({\n          conversationKey: conversationKey,\n          conversationId: conversation.conversationId,\n          conversationType: conversation.conversationType,\n          conversationWith: conversation.conversationWith,\n          conversation: conversation,\n          conversations: (0, _toConsumableArray2.default)(conversationList)\n        });\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var getUnreadMessageCount = function getUnreadMessageCount(message) {\n    var _activeConversationRe;\n    var conversation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var activeConversation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var unreadMessageCount = conversation !== null && conversation !== void 0 && conversation.unreadMessageCount ? Number(conversation === null || conversation === void 0 ? void 0 : conversation.unreadMessageCount) : 0;\n    unreadMessageCount = shouldIncrementCount(message) ? ++unreadMessageCount : unreadMessageCount;\n    console.log(\"activeConversation\", activeConversationRef, \"conversation\", conversation);\n    unreadMessageCount = ((_activeConversationRe = activeConversationRef.current) === null || _activeConversationRe === void 0 ? void 0 : _activeConversationRe.conversationId) === (conversation === null || conversation === void 0 ? void 0 : conversation.conversationId) ? 0 : unreadMessageCount;\n    console.log(\"unreadMessageCount\", unreadMessageCount);\n    return unreadMessageCount;\n  };\n\n  /**\n   *\n   * If the message is sent by the logged in user, return false\n   * If the message has category message or has incrementUnreadCount key in the metadata with value set to true, return true else return false\n   *\n   */\n  var shouldIncrementCount = function shouldIncrementCount(message) {\n    var _message$sender, _loggedInUser$current, _message$metadata;\n    if ((message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.uid) === (loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current = loggedInUser.current) === null || _loggedInUser$current === void 0 ? void 0 : _loggedInUser$current.uid)) {\n      return false;\n    }\n    if ((message === null || message === void 0 ? void 0 : message.category) === _Shared.MessageCategoryConstants.message || (message === null || message === void 0 ? void 0 : (_message$metadata = message.metadata) === null || _message$metadata === void 0 ? void 0 : _message$metadata.incrementUnreadCount) === true) {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * play notification sound for incoming messages\n   */\n  var playNotificationSound = function playNotificationSound(message) {\n    /**\n     * If unreadcount is not incremented, don't play notification sound\n     */\n    if (!shouldIncrementCount(message)) {\n      return false;\n    }\n    /**\n          * If customIncomingMessageSound url is present then CometChatSoundManager will play this sound\n          else play the default sound\n          */\n    if (enableSoundForMessages && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationType && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationWith) {\n      var _message$getSender, _activeConversation$c, _activeConversation$c2;\n      var receiverType = message.getReceiverType();\n      var receiverId = receiverType === _Shared.ReceiverTypeConstants.user ? message === null || message === void 0 ? void 0 : (_message$getSender = message.getSender()) === null || _message$getSender === void 0 ? void 0 : _message$getSender.getUid() : message === null || message === void 0 ? void 0 : message.getReceiverId();\n      if (receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c = activeConversation.conversationWith) === null || _activeConversation$c === void 0 ? void 0 : _activeConversation$c.uid) && receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c2 = activeConversation.conversationWith) === null || _activeConversation$c2 === void 0 ? void 0 : _activeConversation$c2.guid)) {\n        if (customIncomingMessageSound) {\n          _Shared.CometChatSoundManager.play(customIncomingMessageSound);\n        } else {\n          _Shared.CometChatSoundManager.play(_Shared.CometChatSoundManager.Sound.incomingMessageFromOther);\n        }\n      }\n    }\n  };\n\n  /**\n   *\n   * When a user goes online/ offline\n   */\n  var handleUsers = function handleUsers(user) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      return eachConversation.conversationType && eachConversation.conversationType === _Shared.ReceiverTypeConstants.user && eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === user.uid;\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2.default)(conversationList);\n      var conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread(_objectSpread({}, conversation.conversationWith), {}, {\n        status: user.getStatus()\n      });\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * When a text message / media message / custom message is received\n   */\n  var handleMessages = function handleMessages() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    /**\n     * marking the incoming messages as read\n     */\n    markMessageAsDelivered(message);\n    /**\n     * If the incoming message is 1-1 and the conversation type filter is set to group, return false\n     * OR\n     * If the incoming message is group and the conversation type filter is set to \"users\", return false\n     * ELSE\n     * return true\n     */\n    if (filterByConversationType() === false) {\n      return false;\n    }\n    _chat.CometChat.CometChatHelper.getConversationFromMessage(message).then(function (conversation) {\n      setConversationList(function (prevConversationList) {\n        var list = (0, _toConsumableArray2.default)(prevConversationList);\n        var conversationKey = prevConversationList.findIndex(function (c) {\n          return c.conversationId === conversation.conversationId;\n        });\n\n        //  const lastMessage = { ...conversation?.lastMessage, ...message, data: {...message.data} };\n\n        if (conversationKey > -1) {\n          var latestConversation = prevConversationList[conversationKey];\n          var lastMessage = _objectSpread(_objectSpread(_objectSpread({}, latestConversation === null || latestConversation === void 0 ? void 0 : latestConversation.lastMessage), message), {}, {\n            data: _objectSpread({}, message.data)\n          });\n          var unreadMessageCount = getUnreadMessageCount(message, latestConversation);\n          var newConversation = _objectSpread(_objectSpread({}, latestConversation), {}, {\n            conversationId: latestConversation.conversationId,\n            conversationType: latestConversation.conversationType,\n            conversationWith: _objectSpread({}, latestConversation.conversationWith),\n            unreadMessageCount: unreadMessageCount,\n            lastMessage: _objectSpread({}, lastMessage)\n          });\n\n          //play notification sound\n          playNotificationSound(message);\n          list.splice(conversationKey, 1);\n          list.unshift(newConversation);\n          return (0, _toConsumableArray2.default)(list);\n        } else {\n          var _lastMessage = _objectSpread(_objectSpread(_objectSpread({}, conversation === null || conversation === void 0 ? void 0 : conversation.lastMessage), message), {}, {\n            data: _objectSpread({}, message.data)\n          });\n          var _unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var _newConversation = new _chat.CometChat.Conversation(conversation.conversationId, conversation.conversationType, _lastMessage, conversation.conversationWith, _unreadMessageCount);\n          list.unshift(_newConversation);\n          return (0, _toConsumableArray2.default)(list);\n        }\n      });\n    }).catch(function (error) {\n      return _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n    });\n  };\n\n  /**\n   * Listener callback when a message is edited, deleted or updated\n   */\n  var handleMessageActions = function handleMessageActions() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1 && conversation.lastMessage.id === message.id) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList((0, _toConsumableArray2.default)(conversations));\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a message is read\n   */\n  var handleMessageReadActions = function handleMessageReadActions() {\n    var messageReceipt = arguments.length <= 0 ? undefined : arguments[0];\n    var conversationKey = conversationList.findIndex(function (conversation) {\n      var _conversation$convers, _conversation$convers2;\n      return (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiverType) === (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) && ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers = conversation.conversationWith) === null || _conversation$convers === void 0 ? void 0 : _conversation$convers.uid) || (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers2 = conversation.conversationWith) === null || _conversation$convers2 === void 0 ? void 0 : _conversation$convers2.guid));\n    });\n    if (conversationKey > -1) {\n      var _conversation$lastMes;\n      var conversations = _objectSpread({}, conversationList);\n      var conversation = conversations[conversationKey];\n      var unreadMessageCount = getUnreadMessageCount(message, conversation);\n\n      /**\n       * If the message id in the read receipt is greater than or equal to the lastmessage id, set unreadmessagecount to 0\n       */\n      if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.messageId) >= (conversation === null || conversation === void 0 ? void 0 : (_conversation$lastMes = conversation.lastMessage) === null || _conversation$lastMes === void 0 ? void 0 : _conversation$lastMes.id)) {\n        unreadMessageCount = 0;\n      }\n      var newConversation = new _chat.CometChat.Conversation(conversation.conversationId, conversation.conversationType, conversation.lastMessage, conversation.conversationWith, unreadMessageCount);\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * Listener callback when a user joins/added to the group\n   */\n  var handleGroupMemberAddition = function handleGroupMemberAddition() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var newUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var _loggedInUser$current2;\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      } else if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current2 = loggedInUser.current) === null || _loggedInUser$current2 === void 0 ? void 0 : _loggedInUser$current2.uid) === newUser.uid) {\n        /**\n         * If the loggedin user is added to the group, add the conversation to the chats list\n         */\n        var _lastMessage2 = _objectSpread({}, message);\n        var _newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n          hasJoined: true\n        });\n        var _unreadMessageCount2 = getUnreadMessageCount(message, conversation);\n        var _newConversation2 = new _chat.CometChat.Conversation(conversationId, conversationType, _lastMessage2, _newConversationWith, _unreadMessageCount2);\n        conversations.unshift(_newConversation2);\n        setConversationList(conversations);\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a member is kicked from / has left the group\n   */\n  var handleGroupMemberRemoval = function handleGroupMemberRemoval() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current3;\n        /**\n         * If the loggedin user is removed from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current3 = loggedInUser.current) === null || _loggedInUser$current3 === void 0 ? void 0 : _loggedInUser$current3.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a member is banned from the group\n   */\n  var handleGroupMemberBan = function handleGroupMemberBan() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current4;\n        /**\n         * If the loggedin user is banned from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current4 = loggedInUser.current) === null || _loggedInUser$current4 === void 0 ? void 0 : _loggedInUser$current4.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback when a group member scope is updated\n   */\n  var handleGroupMemberScopeChange = function handleGroupMemberScopeChange() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var user = arguments.length <= 1 ? undefined : arguments[1];\n    var newScope = arguments.length <= 2 ? undefined : arguments[2];\n    var group = arguments.length <= 4 ? undefined : arguments[4];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current5;\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current5 = loggedInUser.current) === null || _loggedInUser$current5 === void 0 ? void 0 : _loggedInUser$current5.uid) === user.uid) {\n          var newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n            scope: newScope\n          });\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1);\n          conversations.unshift(newConversation);\n          setConversationList(conversations);\n        } else {\n          var _newConversationWith2 = _objectSpread(_objectSpread({}, conversationWith), group);\n          var _newConversation3 = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, _newConversationWith2, unreadMessageCount);\n          conversations.splice(conversationKey, 1, _newConversation3);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n\n  /**\n   *\n   * Listener callback for typing events\n   */\n  var handleTyping = function handleTyping() {\n    var typingData = arguments.length <= 0 ? undefined : arguments[0];\n    var typingStarted = arguments.length <= 1 ? undefined : arguments[1];\n    var conversations = (0, _toConsumableArray2.default)(conversationList);\n    var conversationKey = conversations.findIndex(function (conversation) {\n      var _conversation$convers3, _typingData$sender, _conversation$convers4;\n      return (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) && ((conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === _Shared.ReceiverTypeConstants.user && ((_conversation$convers3 = conversation.conversationWith) === null || _conversation$convers3 === void 0 ? void 0 : _conversation$convers3.uid) === (typingData === null || typingData === void 0 ? void 0 : (_typingData$sender = typingData.sender) === null || _typingData$sender === void 0 ? void 0 : _typingData$sender.uid) || conversation.conversationType === _Shared.ReceiverTypeConstants.group && ((_conversation$convers4 = conversation.conversationWith) === null || _conversation$convers4 === void 0 ? void 0 : _conversation$convers4.guid) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverId));\n    });\n    if (conversationKey > -1) {\n      var typingIndicatorText = \"\";\n      if (typingStarted) {\n        var _typingData$sender2;\n        typingIndicatorText = (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) === _Shared.ReceiverTypeConstants.group ? \"\".concat(typingData === null || typingData === void 0 ? void 0 : (_typingData$sender2 = typingData.sender) === null || _typingData$sender2 === void 0 ? void 0 : _typingData$sender2.name, \" \").concat((0, _Shared.localize)(\"IS_TYPING\")) : (0, _Shared.localize)(\"IS_TYPING\");\n      }\n      var conversation = conversationList[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        showTypingIndicator: typingStarted,\n        typingIndicatorText: typingIndicatorText\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   *\n   * @param {Object} conversation\n   * Public method to update the conversation list programmatically\n   */\n  var updateConversation = function updateConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      var _conversation$convers5;\n      return eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers5 = conversation.conversationWith) === null || _conversation$convers5 === void 0 ? void 0 : _conversation$convers5.uid);\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2.default)(conversationList);\n      var _conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread({}, _conversation.conversationWith);\n      var newConversation = _objectSpread(_objectSpread({}, _conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  var handlers = {\n    onUserOnline: handleUsers,\n    onUserOffline: handleUsers,\n    onTextMessageReceived: handleMessages,\n    onMediaMessageReceived: handleMessages,\n    onCustomMessageReceived: handleMessages,\n    onIncomingCallReceived: handleMessages,\n    onIncomingCallCancelled: handleMessages,\n    messageEdited: handleMessageActions,\n    onMessageDeleted: handleMessageActions,\n    messageRead: handleMessageReadActions,\n    onMemberAddedToGroup: handleGroupMemberAddition,\n    onGroupMemberJoined: handleGroupMemberAddition,\n    onGroupMemberKicked: handleGroupMemberRemoval,\n    onGroupMemberLeft: handleGroupMemberRemoval,\n    onGroupMemberBanned: handleGroupMemberBan,\n    onGroupMemberScopeChanged: handleGroupMemberScopeChange,\n    onTypingStarted: handleTyping,\n    onTypingEnded: handleTyping\n  };\n  var handleConversations = function handleConversations() {\n    getConversations().then(function (conversations) {\n      if (conversationList.length === 0 && conversations.length === 0) {\n        setMessage(\"NO_CHATS_FOUND\");\n      } else {\n        setMessage(\"\");\n      }\n      setConversationList(function (conversationList) {\n        return [].concat((0, _toConsumableArray2.default)(conversationList), (0, _toConsumableArray2.default)(conversations));\n      });\n    }).catch(function (error) {\n      _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n      setMessage(\"SOMETHING_WENT_WRONG\");\n    });\n  };\n  var getConversations = function getConversations() {\n    return new Promise(function (resolve, reject) {\n      conversationListManager === null || conversationListManager === void 0 ? void 0 : conversationListManager.current.fetchNextConversation().then(function (conversations) {\n        return resolve(conversations);\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var handleScroll = function handleScroll(event) {\n    var bottom = Math.round(event.currentTarget.scrollHeight - event.currentTarget.scrollTop) === Math.round(event.currentTarget.clientHeight);\n    if (bottom) {\n      handleConversations();\n    }\n  };\n\n  /**\n   * reset un read count\n   */\n  var resetUnreadCount = function resetUnreadCount(conversation) {\n    var conversations = (0, _toConsumableArray2.default)(conversationList);\n    var conversationKey = conversations.findIndex(function (conversationObject) {\n      return conversationObject.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var _conversation2 = conversations[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, _conversation2), {}, {\n        unreadMessageCount: 0\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  /**\n   * update last message\n   */\n  var updateLastMessage = function updateLastMessage(message) {\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversations = response.conversations,\n        conversation = response.conversation;\n      if (conversationKey > -1) {\n        var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n          lastMessage: message\n        });\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList((0, _toConsumableArray2.default)(conversations));\n      }\n    });\n  };\n\n  /**\n   * Remove conversation from the conversationlist upon delete\n   */\n  var removeConversation = function removeConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (c) {\n      return c.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var newConversationList = (0, _toConsumableArray2.default)(conversationList);\n      newConversationList.splice(conversationKey, 1);\n      setConversationList(newConversationList);\n    }\n  };\n  var deleteConversation = function deleteConversation(conversationToBeDeleted) {\n    return new Promise(function (resolve, reject) {\n      var _conversationToBeDele, _conversationToBeDele2;\n      var conversationWith = (conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType) === _Shared.ReceiverTypeConstants.group ? conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele === void 0 ? void 0 : _conversationToBeDele.guid : conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele2 = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele2 === void 0 ? void 0 : _conversationToBeDele2.uid;\n      _chat.CometChat.deleteConversation(conversationWith, conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType).then(function (deletedConversation) {\n        setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n          show: false\n        }));\n        removeConversation(conversationToBeDeleted);\n        resolve(deletedConversation);\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onDeleteConversation, conversationToBeDeleted);\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, conversationToBeDeleted);\n        reject(error);\n      });\n    });\n  };\n  var cancelDelete = function cancelDelete() {\n    return setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: false\n    }));\n  };\n  var confirmDelete = function confirmDelete(conversation) {\n    setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: true,\n      conversation: conversation,\n      onCancel: cancelDelete\n    }));\n  };\n  var itemClickhandler = function itemClickhandler(e) {\n    _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onItemClick, e);\n  };\n\n  /**\n   * Component hooks\n   */\n\n  (0, _hooks.Hooks)(conversationType, limit, tags, userAndGroupTags, setConversationList, conversationCallback, conversationListManager, loggedInUser, handleConversations);\n\n  /**\n   * Component template scoping\n   */\n\n  var getCustomView = function getCustomView(customView, props) {\n    return /*#__PURE__*/_react.default.createElement(customView, props);\n  };\n  var getMessageContainer = function getMessageContainer() {\n    var messageContainer = null;\n    if (conversationList.length === 0 && message.toLowerCase() === (0, _Shared.localize)(\"LOADING\")) {\n      /**Loading custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.loading ? getCustomView(customView.loading, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageImgStyle(style, _theme, loadingIconURL),\n        className: \"message\"\n      }));\n    } else if (conversationList.length === 0 && message.toLowerCase() === \"no chats found\") {\n      /**Empty custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.empty ? getCustomView(customView.empty, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, emptyText));\n    } else if (!hideError && message.toLowerCase() === \"something went wrong\") {\n      /**Error custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.error ? getCustomView(customView.error, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, errorText));\n    }\n    return messageContainer;\n  };\n  var renderItems = conversationList.map(function (conversation) {\n    var _conversationOptions;\n    var typingIndicatorText = conversation !== null && conversation !== void 0 && conversation.typingIndicatorText ? conversation === null || conversation === void 0 ? void 0 : conversation.typingIndicatorText : \"\";\n    var isActive = (conversation === null || conversation === void 0 ? void 0 : conversation.conversationId) === (activeConversation === null || activeConversation === void 0 ? void 0 : activeConversation.conversationId) ? true : false;\n\n    /**\n     * Calculate conversations options for child component\n     */\n    var conversationOptions = _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationOptions;\n    if (((_conversationOptions = conversationOptions) === null || _conversationOptions === void 0 ? void 0 : _conversationOptions.length) == 0) {\n      conversationOptions = [new _Chats.CometChatConversationOptions({\n        id: _Shared.ConversationOptionConstants.delete,\n        title: (0, _Shared.localize)(\"DELETE\"),\n        iconURL: _delete.default,\n        onClick: function onClick() {\n          return confirmDelete(conversation);\n        }\n      })];\n    }\n    return /*#__PURE__*/_react.default.createElement(_Shared.CometChatConversationListItem, {\n      key: conversation.conversationId,\n      conversationObject: conversation,\n      isActive: isActive,\n      conversationInputData: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationInputData,\n      conversationOptions: conversationOptions,\n      style: new _Shared.ConversationListItemStyles(_objectSpread({}, styles.listItemStyle(style, _theme))),\n      hideDeletedMessages: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideDeletedMessages,\n      hideGroupActions: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideGroupActions,\n      showTypingIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.showTypingIndicator,\n      typingIndicatorText: typingIndicatorText,\n      hideThreadIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideThreadIndicator,\n      threadIndicatorText: (0, _Shared.localize)(\"IN_A_THREAD\"),\n      theme: _theme,\n      onClick: itemClickhandler.bind(_this),\n      avatarConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.avatarConfiguration,\n      statusIndicatorConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.statusIndicatorConfiguration,\n      badgeCountConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.badgeCountConfiguration,\n      messageReceiptConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.messageReceiptConfiguration,\n      loggedInUser: loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.current\n    });\n  });\n\n  /**\n   * Component template\n   */\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, getMessageContainer(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: styles.chatsListStyle(style, _theme),\n    className: \"conversation__list\",\n    onScroll: handleScroll\n  }, renderItems), /*#__PURE__*/_react.default.createElement(_Shared.CometChatBackdrop, {\n    isOpen: showConfirm.show,\n    onClick: showConfirm.onCancel,\n    background: _theme === null || _theme === void 0 ? void 0 : (_theme$palette = _theme.palette) === null || _theme$palette === void 0 ? void 0 : _theme$palette.accent200[_theme === null || _theme === void 0 ? void 0 : (_theme$palette2 = _theme.palette) === null || _theme$palette2 === void 0 ? void 0 : _theme$palette2.mode]\n  }, /*#__PURE__*/_react.default.createElement(_Shared.CometChatConfirmDialog, {\n    isOpen: showConfirm.show,\n    onConfirm: deleteConversation.bind(_this, showConfirm.conversation),\n    onCancel: showConfirm.onCancel,\n    style: styles.DialogStyle(_theme),\n    title: (0, _Shared.localize)(\"DELETE_CONVERSATION\"),\n    messageText: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n    confirmButtonText: (0, _Shared.localize)(\"CONFIRM_BUTTON_TEXT\"),\n    cancelButtonText: (0, _Shared.localize)(\"CANCEL_BUTTON_TEXT\")\n  })));\n});\n\n/**\n * Component default props\n */\nConversationList.defaultProps = {\n  loadingIconURL: _spinner.default\n};\n\n/**\n * Component default props types\n */\nConversationList.propTypes = {\n  conversationType: _propTypes.default.oneOf([\"users\", \"groups\", \"both\"]),\n  limit: _propTypes.default.number,\n  hideError: _propTypes.default.bool,\n  tags: _propTypes.default.array,\n  userAndGroupTags: _propTypes.default.bool,\n  emptyText: _propTypes.default.string,\n  errorText: _propTypes.default.string,\n  loadingIconURL: _propTypes.default.string,\n  style: _propTypes.default.object,\n  activeConversation: _propTypes.default.object,\n  enableSoundForMessages: _propTypes.default.bool,\n  customIncomingMessageSound: _propTypes.default.string,\n  customView: _propTypes.default.object,\n  conversationListItemConfiguration: _propTypes.default.object,\n  theme: _propTypes.default.object\n};\nvar CometChatConversationList = /*#__PURE__*/_react.default.memo(ConversationList);\nexports.CometChatConversationList = CometChatConversationList;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}