{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatMessageComposer = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _ = require(\"../..\");\nvar _2 = require(\"..\");\nvar _CometChatMessageHelper = require(\"../CometChatMessageHelper\");\nvar _CometChatMessageConstants = require(\"../CometChatMessageConstants\");\nvar _hooks = require(\"./hooks\");\nvar _style = require(\"./style\");\nvar _MessagePreviewConfiguration = require(\"../CometChatMessagePreview/MessagePreviewConfiguration\");\nvar _EmojiKeyboardConfiguration = require(\"../CometChatEmojiKeyboard/EmojiKeyboardConfiguration\");\nvar _CreatePollConfiguration = require(\"../CometChatCreatePoll/CreatePollConfiguration\");\nvar _StickerKeyboardConfiguration = require(\"../CometChatStickerKeyboard/StickerKeyboardConfiguration\");\nvar _Shared = require(\"../../Shared\");\nvar _addCircleFilled = _interopRequireDefault(require(\"./resources/add-circle-filled.svg\"));\nvar _emoji = _interopRequireDefault(require(\"./resources/emoji.svg\"));\nvar _sendMessage = _interopRequireDefault(require(\"./resources/send-message.svg\"));\nvar _closeCircle = _interopRequireDefault(require(\"./resources/close-circle.svg\"));\nvar _heart = _interopRequireDefault(require(\"./resources/heart.png\"));\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n\n/**\n *\n * CometChatMessageComposer component part of messages component it's takes user input text,image,video etc,after pressing send button\n * it's append messages in message list, with additonal CometChat SDK conversation object.\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @copyright Â© 2022 CometChat Inc.\n *\n */\nvar CometChatMessageComposer = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  var _React$useState = _react.default.useState(null),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    chatWith = _React$useState2[0],\n    setChatWith = _React$useState2[1];\n  var _React$useState3 = _react.default.useState(null),\n    _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n    chatWithId = _React$useState4[0],\n    setChatWithId = _React$useState4[1];\n  var _React$useState5 = _react.default.useState(\"\"),\n    _React$useState6 = (0, _slicedToArray2.default)(_React$useState5, 2),\n    messageInput = _React$useState6[0],\n    setMessageInput = _React$useState6[1];\n  var _React$useState7 = _react.default.useState(false),\n    _React$useState8 = (0, _slicedToArray2.default)(_React$useState7, 2),\n    viewAttachButton = _React$useState8[0],\n    setViewAttachButton = _React$useState8[1];\n  var _React$useState9 = _react.default.useState(false),\n    _React$useState10 = (0, _slicedToArray2.default)(_React$useState9, 2),\n    viewSticker = _React$useState10[0],\n    setViewSticker = _React$useState10[1];\n  var _React$useState11 = _react.default.useState(null),\n    _React$useState12 = (0, _slicedToArray2.default)(_React$useState11, 2),\n    viewStickerTray = _React$useState12[0],\n    setViewStickerTray = _React$useState12[1];\n  var _React$useState13 = _react.default.useState({}),\n    _React$useState14 = (0, _slicedToArray2.default)(_React$useState13, 2),\n    viewActionSheet = _React$useState14[0],\n    setViewActionSheet = _React$useState14[1];\n  var _React$useState15 = _react.default.useState([]),\n    _React$useState16 = (0, _slicedToArray2.default)(_React$useState15, 2),\n    actionSheetItems = _React$useState16[0],\n    setActionSheetItems = _React$useState16[1];\n  var _React$useState17 = _react.default.useState(false),\n    _React$useState18 = (0, _slicedToArray2.default)(_React$useState17, 2),\n    viewCreatePoll = _React$useState18[0],\n    setViewCreatePoll = _React$useState18[1];\n  var _React$useState19 = _react.default.useState({}),\n    _React$useState20 = (0, _slicedToArray2.default)(_React$useState19, 2),\n    viewEmojiTray = _React$useState20[0],\n    setViewEmojiTray = _React$useState20[1];\n  var _React$useState21 = _react.default.useState(null),\n    _React$useState22 = (0, _slicedToArray2.default)(_React$useState21, 2),\n    messagePreview = _React$useState22[0],\n    setMessagePreview = _React$useState22[1];\n  var _React$useState23 = _react.default.useState(true),\n    _React$useState24 = (0, _slicedToArray2.default)(_React$useState23, 2),\n    viewInputField = _React$useState24[0],\n    setViewInputField = _React$useState24[1];\n  var stickerTemplate = _react.default.useRef(null);\n  var loggedInUser = _react.default.useRef(null);\n  var isTyping = null;\n  var liveReactionTimeout = 0;\n  var disabledState = false;\n  var messageInputRef = _react.default.useRef(null);\n  var fileInputRef = _react.default.useRef(null);\n  var chatRef = _react.default.useRef(chatWith); //console.log(\"stickerTemplate\", stickerTemplate);\n\n  var user = props.user,\n    group = props.group,\n    style = props.style,\n    theme = props.theme,\n    attachmentIconURL = props.attachmentIconURL,\n    stickerIconURL = props.stickerIconURL,\n    stickerCloseIconURL = props.stickerCloseIconURL,\n    placeholderText = props.placeholderText,\n    hideAttachment = props.hideAttachment,\n    liveReactionIconURL = props.liveReactionIconURL,\n    hideLiveReaction = props.hideLiveReaction,\n    hideEmoji = props.hideEmoji,\n    emojiIconURL = props.emojiIconURL,\n    showSendButton = props.showSendButton,\n    sendButtonIconURL = props.sendButtonIconURL,\n    messageTypes = props.messageTypes,\n    excludeMessageTypes = props.excludeMessageTypes,\n    onSendButtonClick = props.onSendButtonClick,\n    enableTypingIndicator = props.enableTypingIndicator,\n    enableSoundForMessage = props.enableSoundForMessage,\n    messagePreviewConfiguration = props.messagePreviewConfiguration,\n    emojiKeyboardConfiguration = props.emojiKeyboardConfiguration,\n    createPollConfiguration = props.createPollConfiguration,\n    stickerKeyboardConfiguration = props.stickerKeyboardConfiguration,\n    actionSheetConfiguration = props.actionSheetConfiguration;\n  var _theme = new _.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n  /**,\n   * Event callbacks\n   */\n\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      previewMessageForEdit: previewMessage\n    };\n  });\n  var draftMessage = function draftMessage() {};\n  var previewMessage = function previewMessage(message) {\n    setMessagePreview({\n      message: message,\n      mode: _.ConversationOptionConstants.edit\n    });\n    setMessageInput(message.text);\n    var element = messageInputRef.current;\n    var messageText = message.text; //xss extensions data\n\n    var xssData = (0, _2.getExtensionsData)(message, _.MetadataConstants.extensions.xssFilter);\n    if (xssData && xssData.hasOwnProperty(_.ExtensionConstants.sanitizedText) && xssData.hasOwnProperty(_.ExtensionConstants.hasXSS) && xssData.hasXSS === _.ExtensionConstants.yes) {\n      messageText = xssData.sanitized_text;\n    }\n    element.focus();\n    element.textContent = \"\";\n    pasteHtmlAtCaret(messageText, false);\n  };\n  var closeMessagePreview = function closeMessagePreview() {\n    setMessagePreview(null);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n  };\n  var sendMessageOnEnter = function sendMessageOnEnter(event) {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      sendTextMessage();\n    }\n  };\n  /** send text message */\n\n  var sendTextMessage = function sendTextMessage() {\n    setViewEmojiTray(false);\n    if (!messageInput.trim().length) {\n      return false;\n    }\n    if (messagePreview && messagePreview.mode === _.ConversationOptionConstants.edit) {\n      editMessage(messagePreview.message);\n      return false;\n    }\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageInput, chatWith);\n    textMessage.setSender(loggedInUser.current);\n    textMessage.setReceiver(chatWith);\n    textMessage.setText(messageInput);\n    textMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    textMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: textMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n    setMessageInput();\n    messageInputRef.current.textContent = \"\";\n    _chat.CometChat.sendMessage(textMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n  };\n  /** send media message */\n\n  var sendMediaMessage = function sendMediaMessage(messageInput, messageType) {\n    setViewActionSheet(false);\n    var mediaMessage = new _chat.CometChat.MediaMessage(chatWithId, messageInput, messageType, chatWith);\n    mediaMessage.setSender(loggedInUser.current);\n    mediaMessage.setReceiver(chatWith);\n    mediaMessage.setType(messageType);\n    mediaMessage.setMetadata((0, _defineProperty2.default)({}, _.MetadataConstants.file, messageInput));\n    mediaMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    mediaMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: mediaMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n    _chat.CometChat.sendMessage(mediaMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: mediaMessage,\n        error: error\n      });\n    });\n  };\n  /** send sticker */\n\n  var sendSticker = function sendSticker(stickerMessage) {\n    var customData = {\n      sticker_url: stickerMessage.stickerUrl,\n      sticker_name: stickerMessage.stickerName\n    };\n    var customMessage = new _chat.CometChat.CustomMessage(chatWithId, chatWith, _2.CometChatCustomMessageTypes.sticker, customData);\n    customMessage.setSender(loggedInUser.current);\n    customMessage.setReceiver(chatWith);\n    customMessage.setMetadata({\n      incrementUnreadCount: true\n    });\n    customMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    customMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: customMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n    _chat.CometChat.sendCustomMessage(customMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: customMessage,\n        error: error\n      });\n    });\n  };\n  /** edit message */\n\n  var editMessage = function editMessage(message) {\n    endTyping(null, null);\n    var messageText = messageInput.trim();\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageText, chatWith);\n    textMessage.setId(messagePreview.message.id);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n    _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n    setMessagePreview(null);\n    _chat.CometChat.editMessage(textMessage).then(function (editedMessage) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageEdit, {\n        message: editedMessage,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        error: error,\n        message: message\n      });\n    });\n  };\n  var startTyping = function startTyping(endTypingTimeout, typingMetadata) {\n    //if typing is disabled\n    if (!enableTypingIndicator) {\n      return false;\n    } //if typing is in progress\n\n    if (isTyping) {\n      return false;\n    }\n    var typingInterval = endTypingTimeout || 5000;\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.startTyping(typingNotification);\n    isTyping = setTimeout(function () {\n      endTyping(null, typingMetadata);\n    }, typingInterval);\n  };\n  var endTyping = function endTyping(event, typingMetadata) {\n    if (event) {\n      event.persist();\n    }\n    if (!enableTypingIndicator) {\n      return false;\n    }\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.endTyping(typingNotification);\n    clearTimeout(isTyping);\n    isTyping = null;\n  };\n  var fileInputHandler = function fileInputHandler(event) {\n    setViewActionSheet(false);\n    if (!fileInputRef.current) {\n      return false;\n    }\n    fileInputRef.current.click();\n  };\n  /** fileInputChangeHandler */\n\n  var fileInputChangeHandler = function fileInputChangeHandler(event) {\n    setViewActionSheet(false);\n    var uploadedFile = event.target.files[\"0\"];\n    var fileNameType = uploadedFile.type.split(\"/\");\n    var reader = new FileReader();\n    reader.addEventListener(\"load\", function (event) {\n      var newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n      switch (fileNameType[0]) {\n        case \"image\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.image);\n          break;\n        case \"video\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.video);\n          break;\n        case \"audio\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.audio);\n          break;\n        case \"file\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n        default:\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n      }\n      fileInputRef.current.value = \"\";\n    }, false);\n    reader.readAsArrayBuffer(uploadedFile);\n  };\n  /** closeCreatePoll */\n\n  var closeCreatePoll = function closeCreatePoll() {\n    setViewCreatePoll(false);\n  };\n  /** onPollSubmit */\n\n  var onPollSubmit = function onPollSubmit() {\n    setViewCreatePoll(false);\n  };\n  /** openCreatePoll  */\n\n  var openCreatePoll = function openCreatePoll() {\n    setViewActionSheet(false);\n    setViewCreatePoll(true);\n  };\n  /** share collaborative document */\n\n  var shareCollaborativeDocument = function shareCollaborativeDocument() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.document, _.ExtensionConstants.post, _.ExtensionURLs.document, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        error: error\n      });\n    });\n  };\n  /** share collaborative whitevoard */\n\n  var shareCollaborativeWhiteboard = function shareCollaborativeWhiteboard() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.whiteboard, _.ExtensionConstants.post, _.ExtensionURLs.whiteboard, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        error: error\n      });\n    });\n  };\n  /** handleInputEvent */\n\n  var handleInputEvent = function handleInputEvent(event) {\n    startTyping();\n    var elem = event.currentTarget;\n    var messageInput = elem.textContent.trim();\n    if (!messageInput.length) {\n      event.currentTarget.textContent = messageInput;\n    }\n    setMessageInput(elem.innerText);\n  };\n  /** inputChangeHandler */\n\n  var inputChangeHandler = function inputChangeHandler(event) {\n    setTimeout(handleInputEvent(event), 500);\n  };\n  /** composer sticker iconClickHandler */\n\n  var toggleStickersTray = function toggleStickersTray() {\n    setViewStickerTray(function (prevViewStickerOption) {\n      return !prevViewStickerOption;\n    });\n  };\n  var pasteHtmlAtCaret = function pasteHtmlAtCaret(html, selectPastedContent) {\n    var sel, range;\n    var chatWindow = window;\n    if (chatWindow.getSelection) {\n      // IE9 and non-IE\n      sel = chatWindow.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        range = sel.getRangeAt(0);\n        range.deleteContents(); // Range.createContextualFragment() would be useful here but is\n        // only relatively recently standardized and is not supported in\n        // some browsers (IE9, for one)\n\n        var el = document.createElement(\"div\");\n        el.innerText = html;\n        var frag = document.createDocumentFragment(),\n          node,\n          lastNode;\n        while (node = el.firstChild) {\n          lastNode = frag.appendChild(node);\n        }\n        var firstNode = frag.firstChild;\n        range.insertNode(frag);\n        if (lastNode) {\n          range = range.cloneRange();\n          range.setStartAfter(lastNode);\n          if (selectPastedContent) {\n            range.setStartBefore(firstNode);\n          } else {\n            range.collapse(true);\n          }\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }\n      }\n    } else if ((sel = document.selection) && sel.type !== \"Control\") {\n      // IE < 9\n      var originalRange = sel.createRange();\n      originalRange.collapse(true);\n      sel.createRange().pasteHTML(html);\n      if (selectPastedContent) {\n        range = sel.createRange();\n        range.setEndPoint(\"StartToStart\", originalRange);\n        range.select();\n      }\n    }\n  };\n  /** select emoji from emojikeyboard */\n\n  var onEmojiSelect = function onEmojiSelect(emojiObject) {\n    var element = messageInputRef.current;\n    element.focus();\n    element.innerText = \"\";\n    pasteHtmlAtCaret(messageInput + emojiObject, false);\n    setMessageInput(element.innerText);\n  };\n  /** composer pluse button  onClickHandler */\n\n  var attachmentClickHandler = function attachmentClickHandler(event) {\n    setViewActionSheet(function (old) {\n      return {\n        actionSheet: !old.actionSheet,\n        event: event\n      };\n    });\n  };\n  /** composer  emoji onClickHandler  */\n\n  var emojiClickHandler = function emojiClickHandler(event) {\n    setViewEmojiTray(function (old) {\n      return {\n        emojiTrayPreview: !old.emojiTrayPreview,\n        event: event\n      };\n    });\n  };\n  /** composer  sticker onClickHandler  */\n\n  var stickerClickHandler = function stickerClickHandler() {\n    if (stickerTemplate.current.actionCallback) {\n      stickerTemplate.current.actionCallback();\n    } else {\n      toggleStickersTray();\n    }\n  };\n  /** if already live reaction in progress */\n\n  var shareLiveReaction = function shareLiveReaction() {\n    if (liveReactionTimeout) {\n      return false;\n    }\n    /** fetching the metadata type from constants */\n\n    var data = {\n      type: _.MetadataConstants.liveReaction,\n      reaction: liveReactionIconURL || _heart.default\n    };\n    /*** send transient message */\n\n    var transientMessage = new _chat.CometChat.TransientMessage(chatWithId, chatWith, data);\n    _chat.CometChat.sendTransientMessage(transientMessage);\n    /** set timeout till the next share */\n\n    liveReactionTimeout = setTimeout(clearTimeout(liveReactionTimeout), _2.messageConstants.liveReactionTimeout);\n    /** emit event to share live reaction */\n\n    var payload = {\n      reaction: liveReactionIconURL || _heart.default\n    };\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onLiveReaction, payload);\n  };\n  /** attach/composr pluse icon */\n\n  var attachOption = function attachOption() {\n    return viewAttachButton ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      style: (0, _style.stickyAttachButtonStyle)(),\n      className: \"attachment__icon\",\n      onClick: attachmentClickHandler.bind(_this),\n      title: (0, _.localize)(\"ATTACH\")\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.attchButtonIconStyle)(style, attachmentIconURL, _theme)\n    })) : null;\n  };\n  /**actionSheetConfiguration */\n\n  var _actionSheetConfiguration = actionSheetConfiguration !== null && actionSheetConfiguration !== void 0 ? actionSheetConfiguration : new _Shared.ActionSheetConfiguration({});\n  /**  action sheet render under tooltip */\n\n  var actionSheetBoard = function actionSheetBoard() {\n    var _viewActionSheet$even, _viewActionSheet$even2;\n    return viewActionSheet.actionSheet ? /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n      position: \"top\",\n      x: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even = viewActionSheet.event) === null || _viewActionSheet$even === void 0 ? void 0 : _viewActionSheet$even.clientX,\n      y: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even2 = viewActionSheet.event) === null || _viewActionSheet$even2 === void 0 ? void 0 : _viewActionSheet$even2.clientY,\n      style: (0, _style.actionSheetPopoverStyle)(_theme, _actionSheetConfiguration)\n    }, /*#__PURE__*/_react.default.createElement(_.CometChatActionSheet, {\n      title: (0, _.localize)(\"ADD_TO_CHAT\"),\n      layoutModeIconURL: _addCircleFilled.default,\n      theme: _theme,\n      style: (0, _style.actionSheetStyle)(_theme),\n      actions: actionSheetItems\n    })) : null;\n  };\n  /**CreatePollConfiguration */\n\n  var _createPollConfiguration = createPollConfiguration !== null && createPollConfiguration !== void 0 ? createPollConfiguration : new _CreatePollConfiguration.CreatePollConfiguration({});\n  var title = (0, _.localize)(\"CREATE_POLL\");\n  var questionPlaceholderText = (0, _.localize)(\"QUESTION\");\n  var answerPlaceholderText = (0, _.localize)(\"ANSWER\");\n  var addAnswerText = (0, _.localize)(\"ADD_ANSWER\");\n  var answerHelpText = (0, _.localize)(\"SET_THE_ANSWERS\");\n  /** createpoll */\n\n  var createPoll = function createPoll() {\n    return viewCreatePoll ? /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n      withBackDrop: viewCreatePoll ? true : false,\n      style: (0, _style.popoverForCreatePollStyle)(_theme, _createPollConfiguration)\n    }, /*#__PURE__*/_react.default.createElement(_2.CometChatCreatePoll, {\n      closeIconURL: _createPollConfiguration.closeIconURL || _closeCircle.default,\n      title: title,\n      addAnswerIconURL: _createPollConfiguration.addAnswerIconURL || _addCircleFilled.default,\n      createPollButtonText: (0, _.localize)(\"SEND\"),\n      deleteIconURL: _createPollConfiguration.deleteIconURL || _delete.default,\n      defaultAnswers: 2,\n      theme: _theme,\n      style: (0, _style.createPollStyle)(_theme, _createPollConfiguration),\n      questionPlaceholderText: questionPlaceholderText,\n      addAnswerText: addAnswerText,\n      answerPlaceholderText: answerPlaceholderText,\n      answerHelpText: answerHelpText,\n      user: user,\n      group: group,\n      onClose: _createPollConfiguration.onClose || closeCreatePoll,\n      onCreatePoll: _createPollConfiguration.onCreatePoll || onPollSubmit\n    })) : null;\n  };\n  /** sticker button */\n\n  var stickerButton = function stickerButton() {\n    var _stickerTemplate$curr;\n    return viewSticker ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"STICKER\"),\n      style: (0, _style.stickerBtnStyle)(),\n      className: \"button__sticker\",\n      onClick: stickerClickHandler\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.stickerBtnIconStyle)(style, viewStickerTray ? stickerCloseIconURL : stickerTemplate === null || stickerTemplate === void 0 ? void 0 : (_stickerTemplate$curr = stickerTemplate.current) === null || _stickerTemplate$curr === void 0 ? void 0 : _stickerTemplate$curr.icon, _theme)\n    })) : null;\n  };\n  /** messagePreviewConfiguration */\n\n  var _messagePreviewConfiguration = messagePreviewConfiguration || new _MessagePreviewConfiguration.MessagePreviewConfiguration({});\n  /** message preview  */\n\n  var previewTray = function previewTray() {\n    var _messagePreview$messa;\n    return messagePreview ? /*#__PURE__*/_react.default.createElement(_2.CometChatMessagePreview, {\n      messagePreviewTitle: _messagePreviewConfiguration.messagePreviewTitle || (0, _.localize)(\"MESSAGE_EDIT\"),\n      messagePreviewSubtitle: _messagePreviewConfiguration.messagePreviewSubtitle || (messagePreview === null || messagePreview === void 0 ? void 0 : (_messagePreview$messa = messagePreview.message) === null || _messagePreview$messa === void 0 ? void 0 : _messagePreview$messa.text),\n      closeIconURL: _messagePreviewConfiguration.closeIconURL || _closeCircle.default,\n      onCloseClick: _messagePreviewConfiguration.onCloseClick || closeMessagePreview.bind(_this),\n      theme: _theme,\n      style: (0, _style.messagePreviewStyle)(_theme, _messagePreviewConfiguration)\n    }) : null;\n  };\n  /**StickerKeyboardConfiguration */\n\n  var _stickerKeyboardConfiguration = stickerKeyboardConfiguration !== null && stickerKeyboardConfiguration !== void 0 ? stickerKeyboardConfiguration : new _StickerKeyboardConfiguration.StickerKeyboardConfiguration({});\n  /** sticker board */\n\n  var stickerTray = function stickerTray() {\n    return viewStickerTray ? /*#__PURE__*/_react.default.createElement(_2.CometChatStickerKeyboard, {\n      onClick: _stickerKeyboardConfiguration.onClick || sendSticker.bind(_this),\n      onClose: _stickerKeyboardConfiguration.onClose || toggleStickersTray,\n      emptyText: _stickerKeyboardConfiguration.emptyText || (0, _.localize)(\"NO_STICKERS_FOUND\"),\n      errorText: _stickerKeyboardConfiguration.errorText || (0, _.localize)(\"SOMETHING_WRONG\"),\n      loadingText: _stickerKeyboardConfiguration.loadingText || (0, _.localize)(\"LOADING\"),\n      theme: _theme,\n      style: (0, _style.stickerKeyboardStyle)(_theme, _stickerKeyboardConfiguration)\n    }) : null;\n  };\n  /** emoji icon */\n\n  var emojiButton = function emojiButton() {\n    return !hideEmoji ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"EMOJI\"),\n      style: (0, _style.emojiButtonStyle)(),\n      className: \"button__emoji\",\n      onClick: emojiClickHandler.bind(_this)\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.emojiBtnIconStyle)(style, emojiIconURL, _theme)\n    })) : null;\n  };\n  /** EmojiKeyboardConfiguration */\n\n  var _emojiKeyboardConfiguration = emojiKeyboardConfiguration || new _EmojiKeyboardConfiguration.EmojiKeyboardConfiguration({});\n  /** emoji board */\n\n  var emojiBoard = function emojiBoard() {\n    if (viewEmojiTray.emojiTrayPreview) {\n      var _viewEmojiTray$event, _viewEmojiTray$event2;\n      return /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n        position: \"top\",\n        x: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event = viewEmojiTray.event) === null || _viewEmojiTray$event === void 0 ? void 0 : _viewEmojiTray$event.clientX,\n        y: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event2 = viewEmojiTray.event) === null || _viewEmojiTray$event2 === void 0 ? void 0 : _viewEmojiTray$event2.clientY,\n        style: (0, _style.emojiBoardPopoverStyle)(_theme, _emojiKeyboardConfiguration)\n      }, /*#__PURE__*/_react.default.createElement(_2.CometChatEmojiKeyboard, {\n        theme: _theme,\n        style: (0, _style.emojiKeyBoardStyle)(_theme, _emojiKeyboardConfiguration),\n        onClick: (_emojiKeyboardConfiguration === null || _emojiKeyboardConfiguration === void 0 ? void 0 : _emojiKeyboardConfiguration.onClick) || onEmojiSelect.bind(_this)\n      }));\n    } else {\n      return null;\n    }\n  };\n  /** live reaction button */\n\n  var liveReactionButton = function liveReactionButton() {\n    var _messageInputRef$curr;\n    if (!hideLiveReaction && !(messageInputRef !== null && messageInputRef !== void 0 && (_messageInputRef$curr = messageInputRef.current) !== null && _messageInputRef$curr !== void 0 && _messageInputRef$curr.innerText)) {\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.reactionBtnStyle)(),\n        className: \"button__reactions\",\n        onClick: shareLiveReaction.bind(_this)\n      }, /*#__PURE__*/_react.default.createElement(\"img\", {\n        src: liveReactionIconURL,\n        alt: liveReactionIconURL,\n        title: (0, _.localize)(\"LIVE_REACTION\"),\n        style: (0, _style.reactionBtnIconStyle)()\n      }));\n    }\n    return null;\n  };\n  /** send button */\n\n  var sendButton = function sendButton() {\n    return messageInput !== null && messageInput !== void 0 && messageInput.length ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"SEND_MESSAGE\"),\n      style: (0, _style.sendButtonStyle)(),\n      className: \"button__send\",\n      onClick: sendTextMessage\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.sendBtnIconStyle)(style, sendButtonIconURL, _theme)\n    })) : null;\n  };\n  /**message input field*/\n\n  var inputField = function inputField() {\n    return viewInputField ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      style: (0, _style.messageInputStyle)(style, disabledState, _theme),\n      className: \"input__message-input\",\n      contentEditable: \"true\",\n      placeholder: placeholderText,\n      dir: _.CometChatLocalize.getDir(),\n      onInput: inputChangeHandler,\n      onBlur: endTyping.bind(_this),\n      onKeyDown: sendMessageOnEnter,\n      ref: messageInputRef\n    }) : null;\n  };\n  (0, _hooks.Hooks)(props, loggedInUser, setChatWith, setChatWithId, chatRef, setViewSticker, stickerTemplate, setActionSheetItems, setViewInputField, setViewAttachButton, openCreatePoll, fileInputHandler, shareCollaborativeDocument, shareCollaborativeWhiteboard, sendSticker);\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.chatComposerStyle)(style, _theme),\n    className: \"chat__composer\"\n  }, previewTray(), stickerTray(), emojiBoard(), actionSheetBoard(), /*#__PURE__*/_react.default.createElement(\"input\", {\n    type: \"file\",\n    ref: fileInputRef,\n    style: (0, _style.fileInputStyle)(),\n    onChange: fileInputChangeHandler\n  }), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.composerInputStyle)(style),\n    className: \"composer__input\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    tabIndex: \"-1\",\n    style: (0, _style.inputInnerStyle)(style, _theme),\n    className: \"input__inner\"\n  }, inputField(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.inputStickyStyle)(disabledState, attachOption(), _theme),\n    className: \"input__sticky\"\n  }, attachOption(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"input__sticky__buttons\",\n    style: (0, _style.stickyButtonStyle)()\n  }, stickerButton(), emojiButton(), liveReactionButton(), sendButton())))), createPoll());\n});\nexports.CometChatMessageComposer = CometChatMessageComposer;\nCometChatMessageComposer.defaultProps = {\n  user: null,\n  group: null,\n  style: _objectSpread(_objectSpread({}, new _Shared.BaseStyles({\n    width: \"100%\",\n    height: \"auto\",\n    background: \"rgb(255, 255, 255)\",\n    border: \"1px solid rgb(234, 234, 234)\",\n    borderRadius: \"8px\",\n    activeBackground: \"\"\n  })), {}, {\n    placeholderTextFont: \"400 15px Inter, sans-serif\",\n    placeholderTextColor: \"rgba(20, 20, 20,0.6)\",\n    attachmentIconTint: \"rgba(20, 20, 20, 0.46)\",\n    sendButtonIconTint: \"#39f\",\n    inputBackground: \"\",\n    inputTextFont: \"\",\n    inputTextColor: \"\",\n    emojiIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerCloseIconTint: \"\"\n  }),\n  attachmentIconURL: _addCircleFilled.default,\n  stickerCloseIconURL: \"\",\n  placeholderText: (0, _.localize)(\"ENTER_YOUR_MESSAGE_HERE\"),\n  hideAttachment: false,\n  liveReactionIconURL: _heart.default,\n  hideLiveReaction: false,\n  hideEmoji: false,\n  emojiIconURL: _emoji.default,\n  showSendButton: true,\n  sendButtonIconURL: _sendMessage.default,\n  messageTypes: null,\n  excludeMessageTypes: null,\n  onSendButtonClick: null,\n  enableTypingIndicator: true,\n  enableSoundForMessage: true,\n  customOutgoingMessageSound: null,\n  messagePreviewConfiguration: null,\n  emojiKeyboardConfiguration: null,\n  stickerkeyboardConfiguration: null,\n  createPollConfiguration: null,\n  actionSheetConfiguration: null\n};\nCometChatMessageComposer.propTypes = {\n  user: _propTypes.default.object,\n  group: _propTypes.default.object,\n  style: _propTypes.default.object,\n  attachmentIconURL: _propTypes.default.string,\n  stickerCloseIconURL: _propTypes.default.string,\n  placeholderText: _propTypes.default.string,\n  hideAttachment: _propTypes.default.bool,\n  liveReactionIconURL: _propTypes.default.string,\n  hideLiveReaction: _propTypes.default.bool,\n  hideEmoji: _propTypes.default.bool,\n  emojiIconURL: _propTypes.default.string,\n  enableTypingIndicator: _propTypes.default.bool,\n  enableSoundForMessage: _propTypes.default.bool,\n  customOutgoingMessageSound: _propTypes.default.string,\n  showSendButton: _propTypes.default.bool,\n  sendButtonIconURL: _propTypes.default.string,\n  onSendButtonClick: _propTypes.default.func,\n  messageTypes: _propTypes.default.array,\n  excludeMessageTypes: _propTypes.default.array,\n  messagePreviewConfiguration: _propTypes.default.object,\n  emojiKeyboardConfiguration: _propTypes.default.object,\n  stickerkeyboardConfiguration: _propTypes.default.object,\n  createPollConfiguration: _propTypes.default.object,\n  actionSheetConfiguration: _propTypes.default.object\n};","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","CometChatMessageComposer","_defineProperty2","_slicedToArray2","_react","_propTypes","_chat","_","_2","_CometChatMessageHelper","_CometChatMessageConstants","_hooks","_style","_MessagePreviewConfiguration","_EmojiKeyboardConfiguration","_CreatePollConfiguration","_StickerKeyboardConfiguration","_Shared","_addCircleFilled","_emoji","_sendMessage","_closeCircle","_heart","_delete","_this","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","default","getOwnPropertyDescriptors","defineProperties","forwardRef","props","ref","_React$useState","useState","_React$useState2","chatWith","setChatWith","_React$useState3","_React$useState4","chatWithId","setChatWithId","_React$useState5","_React$useState6","messageInput","setMessageInput","_React$useState7","_React$useState8","viewAttachButton","setViewAttachButton","_React$useState9","_React$useState10","viewSticker","setViewSticker","_React$useState11","_React$useState12","viewStickerTray","setViewStickerTray","_React$useState13","_React$useState14","viewActionSheet","setViewActionSheet","_React$useState15","_React$useState16","actionSheetItems","setActionSheetItems","_React$useState17","_React$useState18","viewCreatePoll","setViewCreatePoll","_React$useState19","_React$useState20","viewEmojiTray","setViewEmojiTray","_React$useState21","_React$useState22","messagePreview","setMessagePreview","_React$useState23","_React$useState24","viewInputField","setViewInputField","stickerTemplate","useRef","loggedInUser","isTyping","liveReactionTimeout","disabledState","messageInputRef","fileInputRef","chatRef","user","group","style","theme","attachmentIconURL","stickerIconURL","stickerCloseIconURL","placeholderText","hideAttachment","liveReactionIconURL","hideLiveReaction","hideEmoji","emojiIconURL","showSendButton","sendButtonIconURL","messageTypes","excludeMessageTypes","onSendButtonClick","enableTypingIndicator","enableSoundForMessage","messagePreviewConfiguration","emojiKeyboardConfiguration","createPollConfiguration","stickerKeyboardConfiguration","actionSheetConfiguration","_theme","CometChatTheme","useImperativeHandle","previewMessageForEdit","previewMessage","draftMessage","message","mode","ConversationOptionConstants","edit","text","element","current","messageText","xssData","getExtensionsData","MetadataConstants","extensions","xssFilter","hasOwnProperty","ExtensionConstants","sanitizedText","hasXSS","yes","sanitized_text","focus","textContent","pasteHtmlAtCaret","closeMessagePreview","sendMessageOnEnter","event","keyCode","shiftKey","preventDefault","sendTextMessage","trim","editMessage","textMessage","CometChat","TextMessage","setSender","setReceiver","setText","setSentAt","getUnixTimestamp","setMuid","String","CometChatMessageEvents","emit","onMessageSent","status","messageStatus","inprogress","CometChatSoundManager","play","Sound","outgoingMessage","sendMessage","then","messageObject","success","catch","error","onMessageError","sendMediaMessage","messageType","mediaMessage","MediaMessage","setType","setMetadata","file","sendSticker","stickerMessage","customData","sticker_url","stickerUrl","sticker_name","stickerName","customMessage","CustomMessage","CometChatCustomMessageTypes","sticker","incrementUnreadCount","sendCustomMessage","endTyping","setId","id","editedMessage","onMessageEdit","startTyping","endTypingTimeout","typingMetadata","typingInterval","metadata","undefined","typingNotification","TypingIndicator","setTimeout","persist","clearTimeout","fileInputHandler","click","fileInputChangeHandler","uploadedFile","files","fileNameType","type","split","reader","FileReader","addEventListener","newFile","File","result","name","MessageTypeConstants","image","video","audio","readAsArrayBuffer","closeCreatePoll","onPollSubmit","openCreatePoll","shareCollaborativeDocument","callExtension","document","post","ExtensionURLs","receiver","receiverType","shareCollaborativeWhiteboard","whiteboard","handleInputEvent","elem","currentTarget","innerText","inputChangeHandler","toggleStickersTray","prevViewStickerOption","html","selectPastedContent","sel","range","chatWindow","window","getSelection","getRangeAt","rangeCount","deleteContents","el","createElement","frag","createDocumentFragment","node","lastNode","firstChild","appendChild","firstNode","insertNode","cloneRange","setStartAfter","setStartBefore","collapse","removeAllRanges","addRange","selection","originalRange","createRange","pasteHTML","setEndPoint","select","onEmojiSelect","emojiObject","attachmentClickHandler","old","actionSheet","emojiClickHandler","emojiTrayPreview","stickerClickHandler","actionCallback","shareLiveReaction","data","liveReaction","reaction","transientMessage","TransientMessage","sendTransientMessage","messageConstants","payload","onLiveReaction","attachOption","stickyAttachButtonStyle","className","onClick","bind","title","localize","attchButtonIconStyle","_actionSheetConfiguration","ActionSheetConfiguration","actionSheetBoard","_viewActionSheet$even","_viewActionSheet$even2","CometChatPopover","position","x","clientX","y","clientY","actionSheetPopoverStyle","CometChatActionSheet","layoutModeIconURL","actionSheetStyle","actions","_createPollConfiguration","CreatePollConfiguration","questionPlaceholderText","answerPlaceholderText","addAnswerText","answerHelpText","createPoll","withBackDrop","popoverForCreatePollStyle","CometChatCreatePoll","closeIconURL","addAnswerIconURL","createPollButtonText","deleteIconURL","defaultAnswers","createPollStyle","onClose","onCreatePoll","stickerButton","_stickerTemplate$curr","stickerBtnStyle","stickerBtnIconStyle","icon","_messagePreviewConfiguration","MessagePreviewConfiguration","previewTray","_messagePreview$messa","CometChatMessagePreview","messagePreviewTitle","messagePreviewSubtitle","onCloseClick","messagePreviewStyle","_stickerKeyboardConfiguration","StickerKeyboardConfiguration","stickerTray","CometChatStickerKeyboard","emptyText","errorText","loadingText","stickerKeyboardStyle","emojiButton","emojiButtonStyle","emojiBtnIconStyle","_emojiKeyboardConfiguration","EmojiKeyboardConfiguration","emojiBoard","_viewEmojiTray$event","_viewEmojiTray$event2","emojiBoardPopoverStyle","CometChatEmojiKeyboard","emojiKeyBoardStyle","liveReactionButton","_messageInputRef$curr","reactionBtnStyle","src","alt","reactionBtnIconStyle","sendButton","sendButtonStyle","sendBtnIconStyle","inputField","messageInputStyle","contentEditable","placeholder","dir","CometChatLocalize","getDir","onInput","onBlur","onKeyDown","Hooks","chatComposerStyle","fileInputStyle","onChange","composerInputStyle","tabIndex","inputInnerStyle","inputStickyStyle","stickyButtonStyle","defaultProps","BaseStyles","width","height","background","border","borderRadius","activeBackground","placeholderTextFont","placeholderTextColor","attachmentIconTint","sendButtonIconTint","inputBackground","inputTextFont","inputTextColor","emojiIconTint","stickerIconTint","stickerCloseIconTint","customOutgoingMessageSound","stickerkeyboardConfiguration","propTypes","string","bool","func","array"],"sources":["/home/admin1/dev/react/react-sample-guide/sample-react-guides/node_modules/cometchat-react-ui-kit/dist/Messages/CometChatMessageComposer/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatMessageComposer = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _chat = require(\"@cometchat-pro/chat\");\n\nvar _ = require(\"../..\");\n\nvar _2 = require(\"..\");\n\nvar _CometChatMessageHelper = require(\"../CometChatMessageHelper\");\n\nvar _CometChatMessageConstants = require(\"../CometChatMessageConstants\");\n\nvar _hooks = require(\"./hooks\");\n\nvar _style = require(\"./style\");\n\nvar _MessagePreviewConfiguration = require(\"../CometChatMessagePreview/MessagePreviewConfiguration\");\n\nvar _EmojiKeyboardConfiguration = require(\"../CometChatEmojiKeyboard/EmojiKeyboardConfiguration\");\n\nvar _CreatePollConfiguration = require(\"../CometChatCreatePoll/CreatePollConfiguration\");\n\nvar _StickerKeyboardConfiguration = require(\"../CometChatStickerKeyboard/StickerKeyboardConfiguration\");\n\nvar _Shared = require(\"../../Shared\");\n\nvar _addCircleFilled = _interopRequireDefault(require(\"./resources/add-circle-filled.svg\"));\n\nvar _emoji = _interopRequireDefault(require(\"./resources/emoji.svg\"));\n\nvar _sendMessage = _interopRequireDefault(require(\"./resources/send-message.svg\"));\n\nvar _closeCircle = _interopRequireDefault(require(\"./resources/close-circle.svg\"));\n\nvar _heart = _interopRequireDefault(require(\"./resources/heart.png\"));\n\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\n\nvar _this = void 0;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n/**\n *\n * CometChatMessageComposer component part of messages component it's takes user input text,image,video etc,after pressing send button\n * it's append messages in message list, with additonal CometChat SDK conversation object.\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @copyright Â© 2022 CometChat Inc.\n *\n */\nvar CometChatMessageComposer = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  var _React$useState = _react.default.useState(null),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      chatWith = _React$useState2[0],\n      setChatWith = _React$useState2[1];\n\n  var _React$useState3 = _react.default.useState(null),\n      _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n      chatWithId = _React$useState4[0],\n      setChatWithId = _React$useState4[1];\n\n  var _React$useState5 = _react.default.useState(\"\"),\n      _React$useState6 = (0, _slicedToArray2.default)(_React$useState5, 2),\n      messageInput = _React$useState6[0],\n      setMessageInput = _React$useState6[1];\n\n  var _React$useState7 = _react.default.useState(false),\n      _React$useState8 = (0, _slicedToArray2.default)(_React$useState7, 2),\n      viewAttachButton = _React$useState8[0],\n      setViewAttachButton = _React$useState8[1];\n\n  var _React$useState9 = _react.default.useState(false),\n      _React$useState10 = (0, _slicedToArray2.default)(_React$useState9, 2),\n      viewSticker = _React$useState10[0],\n      setViewSticker = _React$useState10[1];\n\n  var _React$useState11 = _react.default.useState(null),\n      _React$useState12 = (0, _slicedToArray2.default)(_React$useState11, 2),\n      viewStickerTray = _React$useState12[0],\n      setViewStickerTray = _React$useState12[1];\n\n  var _React$useState13 = _react.default.useState({}),\n      _React$useState14 = (0, _slicedToArray2.default)(_React$useState13, 2),\n      viewActionSheet = _React$useState14[0],\n      setViewActionSheet = _React$useState14[1];\n\n  var _React$useState15 = _react.default.useState([]),\n      _React$useState16 = (0, _slicedToArray2.default)(_React$useState15, 2),\n      actionSheetItems = _React$useState16[0],\n      setActionSheetItems = _React$useState16[1];\n\n  var _React$useState17 = _react.default.useState(false),\n      _React$useState18 = (0, _slicedToArray2.default)(_React$useState17, 2),\n      viewCreatePoll = _React$useState18[0],\n      setViewCreatePoll = _React$useState18[1];\n\n  var _React$useState19 = _react.default.useState({}),\n      _React$useState20 = (0, _slicedToArray2.default)(_React$useState19, 2),\n      viewEmojiTray = _React$useState20[0],\n      setViewEmojiTray = _React$useState20[1];\n\n  var _React$useState21 = _react.default.useState(null),\n      _React$useState22 = (0, _slicedToArray2.default)(_React$useState21, 2),\n      messagePreview = _React$useState22[0],\n      setMessagePreview = _React$useState22[1];\n\n  var _React$useState23 = _react.default.useState(true),\n      _React$useState24 = (0, _slicedToArray2.default)(_React$useState23, 2),\n      viewInputField = _React$useState24[0],\n      setViewInputField = _React$useState24[1];\n\n  var stickerTemplate = _react.default.useRef(null);\n\n  var loggedInUser = _react.default.useRef(null);\n\n  var isTyping = null;\n  var liveReactionTimeout = 0;\n  var disabledState = false;\n\n  var messageInputRef = _react.default.useRef(null);\n\n  var fileInputRef = _react.default.useRef(null);\n\n  var chatRef = _react.default.useRef(chatWith); //console.log(\"stickerTemplate\", stickerTemplate);\n\n\n  var user = props.user,\n      group = props.group,\n      style = props.style,\n      theme = props.theme,\n      attachmentIconURL = props.attachmentIconURL,\n      stickerIconURL = props.stickerIconURL,\n      stickerCloseIconURL = props.stickerCloseIconURL,\n      placeholderText = props.placeholderText,\n      hideAttachment = props.hideAttachment,\n      liveReactionIconURL = props.liveReactionIconURL,\n      hideLiveReaction = props.hideLiveReaction,\n      hideEmoji = props.hideEmoji,\n      emojiIconURL = props.emojiIconURL,\n      showSendButton = props.showSendButton,\n      sendButtonIconURL = props.sendButtonIconURL,\n      messageTypes = props.messageTypes,\n      excludeMessageTypes = props.excludeMessageTypes,\n      onSendButtonClick = props.onSendButtonClick,\n      enableTypingIndicator = props.enableTypingIndicator,\n      enableSoundForMessage = props.enableSoundForMessage,\n      messagePreviewConfiguration = props.messagePreviewConfiguration,\n      emojiKeyboardConfiguration = props.emojiKeyboardConfiguration,\n      createPollConfiguration = props.createPollConfiguration,\n      stickerKeyboardConfiguration = props.stickerKeyboardConfiguration,\n      actionSheetConfiguration = props.actionSheetConfiguration;\n\n  var _theme = new _.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n  /**,\n   * Event callbacks\n   */\n\n\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      previewMessageForEdit: previewMessage\n    };\n  });\n\n  var draftMessage = function draftMessage() {};\n\n  var previewMessage = function previewMessage(message) {\n    setMessagePreview({\n      message: message,\n      mode: _.ConversationOptionConstants.edit\n    });\n    setMessageInput(message.text);\n    var element = messageInputRef.current;\n    var messageText = message.text; //xss extensions data\n\n    var xssData = (0, _2.getExtensionsData)(message, _.MetadataConstants.extensions.xssFilter);\n\n    if (xssData && xssData.hasOwnProperty(_.ExtensionConstants.sanitizedText) && xssData.hasOwnProperty(_.ExtensionConstants.hasXSS) && xssData.hasXSS === _.ExtensionConstants.yes) {\n      messageText = xssData.sanitized_text;\n    }\n\n    element.focus();\n    element.textContent = \"\";\n    pasteHtmlAtCaret(messageText, false);\n  };\n\n  var closeMessagePreview = function closeMessagePreview() {\n    setMessagePreview(null);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n  };\n\n  var sendMessageOnEnter = function sendMessageOnEnter(event) {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      sendTextMessage();\n    }\n  };\n  /** send text message */\n\n\n  var sendTextMessage = function sendTextMessage() {\n    setViewEmojiTray(false);\n\n    if (!messageInput.trim().length) {\n      return false;\n    }\n\n    if (messagePreview && messagePreview.mode === _.ConversationOptionConstants.edit) {\n      editMessage(messagePreview.message);\n      return false;\n    }\n\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageInput, chatWith);\n    textMessage.setSender(loggedInUser.current);\n    textMessage.setReceiver(chatWith);\n    textMessage.setText(messageInput);\n    textMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    textMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: textMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n\n    _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n\n    setMessageInput();\n    messageInputRef.current.textContent = \"\";\n\n    _chat.CometChat.sendMessage(textMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n  };\n  /** send media message */\n\n\n  var sendMediaMessage = function sendMediaMessage(messageInput, messageType) {\n    setViewActionSheet(false);\n    var mediaMessage = new _chat.CometChat.MediaMessage(chatWithId, messageInput, messageType, chatWith);\n    mediaMessage.setSender(loggedInUser.current);\n    mediaMessage.setReceiver(chatWith);\n    mediaMessage.setType(messageType);\n    mediaMessage.setMetadata((0, _defineProperty2.default)({}, _.MetadataConstants.file, messageInput));\n    mediaMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    mediaMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: mediaMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n\n    _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n\n    _chat.CometChat.sendMessage(mediaMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: mediaMessage,\n        error: error\n      });\n    });\n  };\n  /** send sticker */\n\n\n  var sendSticker = function sendSticker(stickerMessage) {\n    var customData = {\n      sticker_url: stickerMessage.stickerUrl,\n      sticker_name: stickerMessage.stickerName\n    };\n    var customMessage = new _chat.CometChat.CustomMessage(chatWithId, chatWith, _2.CometChatCustomMessageTypes.sticker, customData);\n    customMessage.setSender(loggedInUser.current);\n    customMessage.setReceiver(chatWith);\n    customMessage.setMetadata({\n      incrementUnreadCount: true\n    });\n    customMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    customMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: customMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n\n    _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n\n    _chat.CometChat.sendCustomMessage(customMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: customMessage,\n        error: error\n      });\n    });\n  };\n  /** edit message */\n\n\n  var editMessage = function editMessage(message) {\n    endTyping(null, null);\n    var messageText = messageInput.trim();\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageText, chatWith);\n    textMessage.setId(messagePreview.message.id);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n\n    _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n\n    setMessagePreview(null);\n\n    _chat.CometChat.editMessage(textMessage).then(function (editedMessage) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageEdit, {\n        message: editedMessage,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        error: error,\n        message: message\n      });\n    });\n  };\n\n  var startTyping = function startTyping(endTypingTimeout, typingMetadata) {\n    //if typing is disabled\n    if (!enableTypingIndicator) {\n      return false;\n    } //if typing is in progress\n\n\n    if (isTyping) {\n      return false;\n    }\n\n    var typingInterval = endTypingTimeout || 5000;\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n\n    _chat.CometChat.startTyping(typingNotification);\n\n    isTyping = setTimeout(function () {\n      endTyping(null, typingMetadata);\n    }, typingInterval);\n  };\n\n  var endTyping = function endTyping(event, typingMetadata) {\n    if (event) {\n      event.persist();\n    }\n\n    if (!enableTypingIndicator) {\n      return false;\n    }\n\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n\n    _chat.CometChat.endTyping(typingNotification);\n\n    clearTimeout(isTyping);\n    isTyping = null;\n  };\n\n  var fileInputHandler = function fileInputHandler(event) {\n    setViewActionSheet(false);\n\n    if (!fileInputRef.current) {\n      return false;\n    }\n\n    fileInputRef.current.click();\n  };\n  /** fileInputChangeHandler */\n\n\n  var fileInputChangeHandler = function fileInputChangeHandler(event) {\n    setViewActionSheet(false);\n    var uploadedFile = event.target.files[\"0\"];\n    var fileNameType = uploadedFile.type.split(\"/\");\n    var reader = new FileReader();\n    reader.addEventListener(\"load\", function (event) {\n      var newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n\n      switch (fileNameType[0]) {\n        case \"image\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.image);\n          break;\n\n        case \"video\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.video);\n          break;\n\n        case \"audio\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.audio);\n          break;\n\n        case \"file\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n\n        default:\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n      }\n\n      fileInputRef.current.value = \"\";\n    }, false);\n    reader.readAsArrayBuffer(uploadedFile);\n  };\n  /** closeCreatePoll */\n\n\n  var closeCreatePoll = function closeCreatePoll() {\n    setViewCreatePoll(false);\n  };\n  /** onPollSubmit */\n\n\n  var onPollSubmit = function onPollSubmit() {\n    setViewCreatePoll(false);\n  };\n  /** openCreatePoll  */\n\n\n  var openCreatePoll = function openCreatePoll() {\n    setViewActionSheet(false);\n    setViewCreatePoll(true);\n  };\n  /** share collaborative document */\n\n\n  var shareCollaborativeDocument = function shareCollaborativeDocument() {\n    setViewActionSheet(false);\n\n    _chat.CometChat.callExtension(_.ExtensionConstants.document, _.ExtensionConstants.post, _.ExtensionURLs.document, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        error: error\n      });\n    });\n  };\n  /** share collaborative whitevoard */\n\n\n  var shareCollaborativeWhiteboard = function shareCollaborativeWhiteboard() {\n    setViewActionSheet(false);\n\n    _chat.CometChat.callExtension(_.ExtensionConstants.whiteboard, _.ExtensionConstants.post, _.ExtensionURLs.whiteboard, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        error: error\n      });\n    });\n  };\n  /** handleInputEvent */\n\n\n  var handleInputEvent = function handleInputEvent(event) {\n    startTyping();\n    var elem = event.currentTarget;\n    var messageInput = elem.textContent.trim();\n\n    if (!messageInput.length) {\n      event.currentTarget.textContent = messageInput;\n    }\n\n    setMessageInput(elem.innerText);\n  };\n  /** inputChangeHandler */\n\n\n  var inputChangeHandler = function inputChangeHandler(event) {\n    setTimeout(handleInputEvent(event), 500);\n  };\n  /** composer sticker iconClickHandler */\n\n\n  var toggleStickersTray = function toggleStickersTray() {\n    setViewStickerTray(function (prevViewStickerOption) {\n      return !prevViewStickerOption;\n    });\n  };\n\n  var pasteHtmlAtCaret = function pasteHtmlAtCaret(html, selectPastedContent) {\n    var sel, range;\n    var chatWindow = window;\n\n    if (chatWindow.getSelection) {\n      // IE9 and non-IE\n      sel = chatWindow.getSelection();\n\n      if (sel.getRangeAt && sel.rangeCount) {\n        range = sel.getRangeAt(0);\n        range.deleteContents(); // Range.createContextualFragment() would be useful here but is\n        // only relatively recently standardized and is not supported in\n        // some browsers (IE9, for one)\n\n        var el = document.createElement(\"div\");\n        el.innerText = html;\n        var frag = document.createDocumentFragment(),\n            node,\n            lastNode;\n\n        while (node = el.firstChild) {\n          lastNode = frag.appendChild(node);\n        }\n\n        var firstNode = frag.firstChild;\n        range.insertNode(frag);\n\n        if (lastNode) {\n          range = range.cloneRange();\n          range.setStartAfter(lastNode);\n\n          if (selectPastedContent) {\n            range.setStartBefore(firstNode);\n          } else {\n            range.collapse(true);\n          }\n\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }\n      }\n    } else if ((sel = document.selection) && sel.type !== \"Control\") {\n      // IE < 9\n      var originalRange = sel.createRange();\n      originalRange.collapse(true);\n      sel.createRange().pasteHTML(html);\n\n      if (selectPastedContent) {\n        range = sel.createRange();\n        range.setEndPoint(\"StartToStart\", originalRange);\n        range.select();\n      }\n    }\n  };\n  /** select emoji from emojikeyboard */\n\n\n  var onEmojiSelect = function onEmojiSelect(emojiObject) {\n    var element = messageInputRef.current;\n    element.focus();\n    element.innerText = \"\";\n    pasteHtmlAtCaret(messageInput + emojiObject, false);\n    setMessageInput(element.innerText);\n  };\n  /** composer pluse button  onClickHandler */\n\n\n  var attachmentClickHandler = function attachmentClickHandler(event) {\n    setViewActionSheet(function (old) {\n      return {\n        actionSheet: !old.actionSheet,\n        event: event\n      };\n    });\n  };\n  /** composer  emoji onClickHandler  */\n\n\n  var emojiClickHandler = function emojiClickHandler(event) {\n    setViewEmojiTray(function (old) {\n      return {\n        emojiTrayPreview: !old.emojiTrayPreview,\n        event: event\n      };\n    });\n  };\n  /** composer  sticker onClickHandler  */\n\n\n  var stickerClickHandler = function stickerClickHandler() {\n    if (stickerTemplate.current.actionCallback) {\n      stickerTemplate.current.actionCallback();\n    } else {\n      toggleStickersTray();\n    }\n  };\n  /** if already live reaction in progress */\n\n\n  var shareLiveReaction = function shareLiveReaction() {\n    if (liveReactionTimeout) {\n      return false;\n    }\n    /** fetching the metadata type from constants */\n\n\n    var data = {\n      type: _.MetadataConstants.liveReaction,\n      reaction: liveReactionIconURL || _heart.default\n    };\n    /*** send transient message */\n\n    var transientMessage = new _chat.CometChat.TransientMessage(chatWithId, chatWith, data);\n\n    _chat.CometChat.sendTransientMessage(transientMessage);\n    /** set timeout till the next share */\n\n\n    liveReactionTimeout = setTimeout(clearTimeout(liveReactionTimeout), _2.messageConstants.liveReactionTimeout);\n    /** emit event to share live reaction */\n\n    var payload = {\n      reaction: liveReactionIconURL || _heart.default\n    };\n\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onLiveReaction, payload);\n  };\n  /** attach/composr pluse icon */\n\n\n  var attachOption = function attachOption() {\n    return viewAttachButton ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      style: (0, _style.stickyAttachButtonStyle)(),\n      className: \"attachment__icon\",\n      onClick: attachmentClickHandler.bind(_this),\n      title: (0, _.localize)(\"ATTACH\")\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.attchButtonIconStyle)(style, attachmentIconURL, _theme)\n    })) : null;\n  };\n  /**actionSheetConfiguration */\n\n\n  var _actionSheetConfiguration = actionSheetConfiguration !== null && actionSheetConfiguration !== void 0 ? actionSheetConfiguration : new _Shared.ActionSheetConfiguration({});\n  /**  action sheet render under tooltip */\n\n\n  var actionSheetBoard = function actionSheetBoard() {\n    var _viewActionSheet$even, _viewActionSheet$even2;\n\n    return viewActionSheet.actionSheet ? /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n      position: \"top\",\n      x: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even = viewActionSheet.event) === null || _viewActionSheet$even === void 0 ? void 0 : _viewActionSheet$even.clientX,\n      y: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even2 = viewActionSheet.event) === null || _viewActionSheet$even2 === void 0 ? void 0 : _viewActionSheet$even2.clientY,\n      style: (0, _style.actionSheetPopoverStyle)(_theme, _actionSheetConfiguration)\n    }, /*#__PURE__*/_react.default.createElement(_.CometChatActionSheet, {\n      title: (0, _.localize)(\"ADD_TO_CHAT\"),\n      layoutModeIconURL: _addCircleFilled.default,\n      theme: _theme,\n      style: (0, _style.actionSheetStyle)(_theme),\n      actions: actionSheetItems\n    })) : null;\n  };\n  /**CreatePollConfiguration */\n\n\n  var _createPollConfiguration = createPollConfiguration !== null && createPollConfiguration !== void 0 ? createPollConfiguration : new _CreatePollConfiguration.CreatePollConfiguration({});\n\n  var title = (0, _.localize)(\"CREATE_POLL\");\n  var questionPlaceholderText = (0, _.localize)(\"QUESTION\");\n  var answerPlaceholderText = (0, _.localize)(\"ANSWER\");\n  var addAnswerText = (0, _.localize)(\"ADD_ANSWER\");\n  var answerHelpText = (0, _.localize)(\"SET_THE_ANSWERS\");\n  /** createpoll */\n\n  var createPoll = function createPoll() {\n    return viewCreatePoll ? /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n      withBackDrop: viewCreatePoll ? true : false,\n      style: (0, _style.popoverForCreatePollStyle)(_theme, _createPollConfiguration)\n    }, /*#__PURE__*/_react.default.createElement(_2.CometChatCreatePoll, {\n      closeIconURL: _createPollConfiguration.closeIconURL || _closeCircle.default,\n      title: title,\n      addAnswerIconURL: _createPollConfiguration.addAnswerIconURL || _addCircleFilled.default,\n      createPollButtonText: (0, _.localize)(\"SEND\"),\n      deleteIconURL: _createPollConfiguration.deleteIconURL || _delete.default,\n      defaultAnswers: 2,\n      theme: _theme,\n      style: (0, _style.createPollStyle)(_theme, _createPollConfiguration),\n      questionPlaceholderText: questionPlaceholderText,\n      addAnswerText: addAnswerText,\n      answerPlaceholderText: answerPlaceholderText,\n      answerHelpText: answerHelpText,\n      user: user,\n      group: group,\n      onClose: _createPollConfiguration.onClose || closeCreatePoll,\n      onCreatePoll: _createPollConfiguration.onCreatePoll || onPollSubmit\n    })) : null;\n  };\n  /** sticker button */\n\n\n  var stickerButton = function stickerButton() {\n    var _stickerTemplate$curr;\n\n    return viewSticker ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"STICKER\"),\n      style: (0, _style.stickerBtnStyle)(),\n      className: \"button__sticker\",\n      onClick: stickerClickHandler\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.stickerBtnIconStyle)(style, viewStickerTray ? stickerCloseIconURL : stickerTemplate === null || stickerTemplate === void 0 ? void 0 : (_stickerTemplate$curr = stickerTemplate.current) === null || _stickerTemplate$curr === void 0 ? void 0 : _stickerTemplate$curr.icon, _theme)\n    })) : null;\n  };\n  /** messagePreviewConfiguration */\n\n\n  var _messagePreviewConfiguration = messagePreviewConfiguration || new _MessagePreviewConfiguration.MessagePreviewConfiguration({});\n  /** message preview  */\n\n\n  var previewTray = function previewTray() {\n    var _messagePreview$messa;\n\n    return messagePreview ? /*#__PURE__*/_react.default.createElement(_2.CometChatMessagePreview, {\n      messagePreviewTitle: _messagePreviewConfiguration.messagePreviewTitle || (0, _.localize)(\"MESSAGE_EDIT\"),\n      messagePreviewSubtitle: _messagePreviewConfiguration.messagePreviewSubtitle || (messagePreview === null || messagePreview === void 0 ? void 0 : (_messagePreview$messa = messagePreview.message) === null || _messagePreview$messa === void 0 ? void 0 : _messagePreview$messa.text),\n      closeIconURL: _messagePreviewConfiguration.closeIconURL || _closeCircle.default,\n      onCloseClick: _messagePreviewConfiguration.onCloseClick || closeMessagePreview.bind(_this),\n      theme: _theme,\n      style: (0, _style.messagePreviewStyle)(_theme, _messagePreviewConfiguration)\n    }) : null;\n  };\n  /**StickerKeyboardConfiguration */\n\n\n  var _stickerKeyboardConfiguration = stickerKeyboardConfiguration !== null && stickerKeyboardConfiguration !== void 0 ? stickerKeyboardConfiguration : new _StickerKeyboardConfiguration.StickerKeyboardConfiguration({});\n  /** sticker board */\n\n\n  var stickerTray = function stickerTray() {\n    return viewStickerTray ? /*#__PURE__*/_react.default.createElement(_2.CometChatStickerKeyboard, {\n      onClick: _stickerKeyboardConfiguration.onClick || sendSticker.bind(_this),\n      onClose: _stickerKeyboardConfiguration.onClose || toggleStickersTray,\n      emptyText: _stickerKeyboardConfiguration.emptyText || (0, _.localize)(\"NO_STICKERS_FOUND\"),\n      errorText: _stickerKeyboardConfiguration.errorText || (0, _.localize)(\"SOMETHING_WRONG\"),\n      loadingText: _stickerKeyboardConfiguration.loadingText || (0, _.localize)(\"LOADING\"),\n      theme: _theme,\n      style: (0, _style.stickerKeyboardStyle)(_theme, _stickerKeyboardConfiguration)\n    }) : null;\n  };\n  /** emoji icon */\n\n\n  var emojiButton = function emojiButton() {\n    return !hideEmoji ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"EMOJI\"),\n      style: (0, _style.emojiButtonStyle)(),\n      className: \"button__emoji\",\n      onClick: emojiClickHandler.bind(_this)\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.emojiBtnIconStyle)(style, emojiIconURL, _theme)\n    })) : null;\n  };\n  /** EmojiKeyboardConfiguration */\n\n\n  var _emojiKeyboardConfiguration = emojiKeyboardConfiguration || new _EmojiKeyboardConfiguration.EmojiKeyboardConfiguration({});\n  /** emoji board */\n\n\n  var emojiBoard = function emojiBoard() {\n    if (viewEmojiTray.emojiTrayPreview) {\n      var _viewEmojiTray$event, _viewEmojiTray$event2;\n\n      return /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n        position: \"top\",\n        x: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event = viewEmojiTray.event) === null || _viewEmojiTray$event === void 0 ? void 0 : _viewEmojiTray$event.clientX,\n        y: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event2 = viewEmojiTray.event) === null || _viewEmojiTray$event2 === void 0 ? void 0 : _viewEmojiTray$event2.clientY,\n        style: (0, _style.emojiBoardPopoverStyle)(_theme, _emojiKeyboardConfiguration)\n      }, /*#__PURE__*/_react.default.createElement(_2.CometChatEmojiKeyboard, {\n        theme: _theme,\n        style: (0, _style.emojiKeyBoardStyle)(_theme, _emojiKeyboardConfiguration),\n        onClick: (_emojiKeyboardConfiguration === null || _emojiKeyboardConfiguration === void 0 ? void 0 : _emojiKeyboardConfiguration.onClick) || onEmojiSelect.bind(_this)\n      }));\n    } else {\n      return null;\n    }\n  };\n  /** live reaction button */\n\n\n  var liveReactionButton = function liveReactionButton() {\n    var _messageInputRef$curr;\n\n    if (!hideLiveReaction && !(messageInputRef !== null && messageInputRef !== void 0 && (_messageInputRef$curr = messageInputRef.current) !== null && _messageInputRef$curr !== void 0 && _messageInputRef$curr.innerText)) {\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.reactionBtnStyle)(),\n        className: \"button__reactions\",\n        onClick: shareLiveReaction.bind(_this)\n      }, /*#__PURE__*/_react.default.createElement(\"img\", {\n        src: liveReactionIconURL,\n        alt: liveReactionIconURL,\n        title: (0, _.localize)(\"LIVE_REACTION\"),\n        style: (0, _style.reactionBtnIconStyle)()\n      }));\n    }\n\n    return null;\n  };\n  /** send button */\n\n\n  var sendButton = function sendButton() {\n    return messageInput !== null && messageInput !== void 0 && messageInput.length ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"SEND_MESSAGE\"),\n      style: (0, _style.sendButtonStyle)(),\n      className: \"button__send\",\n      onClick: sendTextMessage\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.sendBtnIconStyle)(style, sendButtonIconURL, _theme)\n    })) : null;\n  };\n  /**message input field*/\n\n\n  var inputField = function inputField() {\n    return viewInputField ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      style: (0, _style.messageInputStyle)(style, disabledState, _theme),\n      className: \"input__message-input\",\n      contentEditable: \"true\",\n      placeholder: placeholderText,\n      dir: _.CometChatLocalize.getDir(),\n      onInput: inputChangeHandler,\n      onBlur: endTyping.bind(_this),\n      onKeyDown: sendMessageOnEnter,\n      ref: messageInputRef\n    }) : null;\n  };\n\n  (0, _hooks.Hooks)(props, loggedInUser, setChatWith, setChatWithId, chatRef, setViewSticker, stickerTemplate, setActionSheetItems, setViewInputField, setViewAttachButton, openCreatePoll, fileInputHandler, shareCollaborativeDocument, shareCollaborativeWhiteboard, sendSticker);\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.chatComposerStyle)(style, _theme),\n    className: \"chat__composer\"\n  }, previewTray(), stickerTray(), emojiBoard(), actionSheetBoard(), /*#__PURE__*/_react.default.createElement(\"input\", {\n    type: \"file\",\n    ref: fileInputRef,\n    style: (0, _style.fileInputStyle)(),\n    onChange: fileInputChangeHandler\n  }), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.composerInputStyle)(style),\n    className: \"composer__input\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    tabIndex: \"-1\",\n    style: (0, _style.inputInnerStyle)(style, _theme),\n    className: \"input__inner\"\n  }, inputField(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.inputStickyStyle)(disabledState, attachOption(), _theme),\n    className: \"input__sticky\"\n  }, attachOption(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"input__sticky__buttons\",\n    style: (0, _style.stickyButtonStyle)()\n  }, stickerButton(), emojiButton(), liveReactionButton(), sendButton())))), createPoll());\n});\n\nexports.CometChatMessageComposer = CometChatMessageComposer;\nCometChatMessageComposer.defaultProps = {\n  user: null,\n  group: null,\n  style: _objectSpread(_objectSpread({}, new _Shared.BaseStyles({\n    width: \"100%\",\n    height: \"auto\",\n    background: \"rgb(255, 255, 255)\",\n    border: \"1px solid rgb(234, 234, 234)\",\n    borderRadius: \"8px\",\n    activeBackground: \"\"\n  })), {}, {\n    placeholderTextFont: \"400 15px Inter, sans-serif\",\n    placeholderTextColor: \"rgba(20, 20, 20,0.6)\",\n    attachmentIconTint: \"rgba(20, 20, 20, 0.46)\",\n    sendButtonIconTint: \"#39f\",\n    inputBackground: \"\",\n    inputTextFont: \"\",\n    inputTextColor: \"\",\n    emojiIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerCloseIconTint: \"\"\n  }),\n  attachmentIconURL: _addCircleFilled.default,\n  stickerCloseIconURL: \"\",\n  placeholderText: (0, _.localize)(\"ENTER_YOUR_MESSAGE_HERE\"),\n  hideAttachment: false,\n  liveReactionIconURL: _heart.default,\n  hideLiveReaction: false,\n  hideEmoji: false,\n  emojiIconURL: _emoji.default,\n  showSendButton: true,\n  sendButtonIconURL: _sendMessage.default,\n  messageTypes: null,\n  excludeMessageTypes: null,\n  onSendButtonClick: null,\n  enableTypingIndicator: true,\n  enableSoundForMessage: true,\n  customOutgoingMessageSound: null,\n  messagePreviewConfiguration: null,\n  emojiKeyboardConfiguration: null,\n  stickerkeyboardConfiguration: null,\n  createPollConfiguration: null,\n  actionSheetConfiguration: null\n};\nCometChatMessageComposer.propTypes = {\n  user: _propTypes.default.object,\n  group: _propTypes.default.object,\n  style: _propTypes.default.object,\n  attachmentIconURL: _propTypes.default.string,\n  stickerCloseIconURL: _propTypes.default.string,\n  placeholderText: _propTypes.default.string,\n  hideAttachment: _propTypes.default.bool,\n  liveReactionIconURL: _propTypes.default.string,\n  hideLiveReaction: _propTypes.default.bool,\n  hideEmoji: _propTypes.default.bool,\n  emojiIconURL: _propTypes.default.string,\n  enableTypingIndicator: _propTypes.default.bool,\n  enableSoundForMessage: _propTypes.default.bool,\n  customOutgoingMessageSound: _propTypes.default.string,\n  showSendButton: _propTypes.default.bool,\n  sendButtonIconURL: _propTypes.default.string,\n  onSendButtonClick: _propTypes.default.func,\n  messageTypes: _propTypes.default.array,\n  excludeMessageTypes: _propTypes.default.array,\n  messagePreviewConfiguration: _propTypes.default.object,\n  emojiKeyboardConfiguration: _propTypes.default.object,\n  stickerkeyboardConfiguration: _propTypes.default.object,\n  createPollConfiguration: _propTypes.default.object,\n  actionSheetConfiguration: _propTypes.default.object\n};"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAA8C,CAAC;AAEpFC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,wBAAwB,GAAG,KAAK,CAAC;AAEzC,IAAIC,gBAAgB,GAAGP,sBAAsB,CAACC,OAAO,CAAC,uCAAuC,CAAC,CAAC;AAE/F,IAAIO,eAAe,GAAGR,sBAAsB,CAACC,OAAO,CAAC,sCAAsC,CAAC,CAAC;AAE7F,IAAIQ,MAAM,GAAGT,sBAAsB,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;AAErD,IAAIS,UAAU,GAAGV,sBAAsB,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC;AAE9D,IAAIU,KAAK,GAAGV,OAAO,CAAC,qBAAqB,CAAC;AAE1C,IAAIW,CAAC,GAAGX,OAAO,CAAC,OAAO,CAAC;AAExB,IAAIY,EAAE,GAAGZ,OAAO,CAAC,IAAI,CAAC;AAEtB,IAAIa,uBAAuB,GAAGb,OAAO,CAAC,2BAA2B,CAAC;AAElE,IAAIc,0BAA0B,GAAGd,OAAO,CAAC,8BAA8B,CAAC;AAExE,IAAIe,MAAM,GAAGf,OAAO,CAAC,SAAS,CAAC;AAE/B,IAAIgB,MAAM,GAAGhB,OAAO,CAAC,SAAS,CAAC;AAE/B,IAAIiB,4BAA4B,GAAGjB,OAAO,CAAC,wDAAwD,CAAC;AAEpG,IAAIkB,2BAA2B,GAAGlB,OAAO,CAAC,sDAAsD,CAAC;AAEjG,IAAImB,wBAAwB,GAAGnB,OAAO,CAAC,gDAAgD,CAAC;AAExF,IAAIoB,6BAA6B,GAAGpB,OAAO,CAAC,0DAA0D,CAAC;AAEvG,IAAIqB,OAAO,GAAGrB,OAAO,CAAC,cAAc,CAAC;AAErC,IAAIsB,gBAAgB,GAAGvB,sBAAsB,CAACC,OAAO,CAAC,mCAAmC,CAAC,CAAC;AAE3F,IAAIuB,MAAM,GAAGxB,sBAAsB,CAACC,OAAO,CAAC,uBAAuB,CAAC,CAAC;AAErE,IAAIwB,YAAY,GAAGzB,sBAAsB,CAACC,OAAO,CAAC,8BAA8B,CAAC,CAAC;AAElF,IAAIyB,YAAY,GAAG1B,sBAAsB,CAACC,OAAO,CAAC,8BAA8B,CAAC,CAAC;AAElF,IAAI0B,MAAM,GAAG3B,sBAAsB,CAACC,OAAO,CAAC,uBAAuB,CAAC,CAAC;AAErE,IAAI2B,OAAO,GAAG5B,sBAAsB,CAACC,OAAO,CAAC,wBAAwB,CAAC,CAAC;AAEvE,IAAI4B,KAAK,GAAG,KAAK,CAAC;AAElB,SAASC,OAAO,CAACC,MAAM,EAAEC,cAAc,EAAE;EAAE,IAAIC,IAAI,GAAG/B,MAAM,CAAC+B,IAAI,CAACF,MAAM,CAAC;EAAE,IAAI7B,MAAM,CAACgC,qBAAqB,EAAE;IAAE,IAAIC,OAAO,GAAGjC,MAAM,CAACgC,qBAAqB,CAACH,MAAM,CAAC;IAAEC,cAAc,KAAKG,OAAO,GAAGA,OAAO,CAACC,MAAM,CAAC,UAAUC,GAAG,EAAE;MAAE,OAAOnC,MAAM,CAACoC,wBAAwB,CAACP,MAAM,EAAEM,GAAG,CAAC,CAACE,UAAU;IAAE,CAAC,CAAC,CAAC,EAAEN,IAAI,CAACO,IAAI,CAACC,KAAK,CAACR,IAAI,EAAEE,OAAO,CAAC;EAAE;EAAE,OAAOF,IAAI;AAAE;AAEpV,SAASS,aAAa,CAACC,MAAM,EAAE;EAAE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;IAAE,IAAIG,MAAM,GAAG,IAAI,IAAIF,SAAS,CAACD,CAAC,CAAC,GAAGC,SAAS,CAACD,CAAC,CAAC,GAAG,CAAC,CAAC;IAAEA,CAAC,GAAG,CAAC,GAAGd,OAAO,CAAC5B,MAAM,CAAC6C,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,UAAUC,GAAG,EAAE;MAAE,CAAC,CAAC,EAAE1C,gBAAgB,CAAC2C,OAAO,EAAEP,MAAM,EAAEM,GAAG,EAAEF,MAAM,CAACE,GAAG,CAAC,CAAC;IAAE,CAAC,CAAC,GAAG/C,MAAM,CAACiD,yBAAyB,GAAGjD,MAAM,CAACkD,gBAAgB,CAACT,MAAM,EAAEzC,MAAM,CAACiD,yBAAyB,CAACJ,MAAM,CAAC,CAAC,GAAGjB,OAAO,CAAC5B,MAAM,CAAC6C,MAAM,CAAC,CAAC,CAACC,OAAO,CAAC,UAAUC,GAAG,EAAE;MAAE/C,MAAM,CAACC,cAAc,CAACwC,MAAM,EAAEM,GAAG,EAAE/C,MAAM,CAACoC,wBAAwB,CAACS,MAAM,EAAEE,GAAG,CAAC,CAAC;IAAE,CAAC,CAAC;EAAE;EAAE,OAAON,MAAM;AAAE;;AAEvgB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIrC,wBAAwB,GAAG,aAAaG,MAAM,CAACyC,OAAO,CAACG,UAAU,CAAC,UAAUC,KAAK,EAAEC,GAAG,EAAE;EAC1F,IAAIC,eAAe,GAAG/C,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,IAAI,CAAC;IAC/CC,gBAAgB,GAAG,CAAC,CAAC,EAAElD,eAAe,CAAC0C,OAAO,EAAEM,eAAe,EAAE,CAAC,CAAC;IACnEG,QAAQ,GAAGD,gBAAgB,CAAC,CAAC,CAAC;IAC9BE,WAAW,GAAGF,gBAAgB,CAAC,CAAC,CAAC;EAErC,IAAIG,gBAAgB,GAAGpD,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,IAAI,CAAC;IAChDK,gBAAgB,GAAG,CAAC,CAAC,EAAEtD,eAAe,CAAC0C,OAAO,EAAEW,gBAAgB,EAAE,CAAC,CAAC;IACpEE,UAAU,GAAGD,gBAAgB,CAAC,CAAC,CAAC;IAChCE,aAAa,GAAGF,gBAAgB,CAAC,CAAC,CAAC;EAEvC,IAAIG,gBAAgB,GAAGxD,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,EAAE,CAAC;IAC9CS,gBAAgB,GAAG,CAAC,CAAC,EAAE1D,eAAe,CAAC0C,OAAO,EAAEe,gBAAgB,EAAE,CAAC,CAAC;IACpEE,YAAY,GAAGD,gBAAgB,CAAC,CAAC,CAAC;IAClCE,eAAe,GAAGF,gBAAgB,CAAC,CAAC,CAAC;EAEzC,IAAIG,gBAAgB,GAAG5D,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,KAAK,CAAC;IACjDa,gBAAgB,GAAG,CAAC,CAAC,EAAE9D,eAAe,CAAC0C,OAAO,EAAEmB,gBAAgB,EAAE,CAAC,CAAC;IACpEE,gBAAgB,GAAGD,gBAAgB,CAAC,CAAC,CAAC;IACtCE,mBAAmB,GAAGF,gBAAgB,CAAC,CAAC,CAAC;EAE7C,IAAIG,gBAAgB,GAAGhE,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,KAAK,CAAC;IACjDiB,iBAAiB,GAAG,CAAC,CAAC,EAAElE,eAAe,CAAC0C,OAAO,EAAEuB,gBAAgB,EAAE,CAAC,CAAC;IACrEE,WAAW,GAAGD,iBAAiB,CAAC,CAAC,CAAC;IAClCE,cAAc,GAAGF,iBAAiB,CAAC,CAAC,CAAC;EAEzC,IAAIG,iBAAiB,GAAGpE,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,IAAI,CAAC;IACjDqB,iBAAiB,GAAG,CAAC,CAAC,EAAEtE,eAAe,CAAC0C,OAAO,EAAE2B,iBAAiB,EAAE,CAAC,CAAC;IACtEE,eAAe,GAAGD,iBAAiB,CAAC,CAAC,CAAC;IACtCE,kBAAkB,GAAGF,iBAAiB,CAAC,CAAC,CAAC;EAE7C,IAAIG,iBAAiB,GAAGxE,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC/CyB,iBAAiB,GAAG,CAAC,CAAC,EAAE1E,eAAe,CAAC0C,OAAO,EAAE+B,iBAAiB,EAAE,CAAC,CAAC;IACtEE,eAAe,GAAGD,iBAAiB,CAAC,CAAC,CAAC;IACtCE,kBAAkB,GAAGF,iBAAiB,CAAC,CAAC,CAAC;EAE7C,IAAIG,iBAAiB,GAAG5E,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,EAAE,CAAC;IAC/C6B,iBAAiB,GAAG,CAAC,CAAC,EAAE9E,eAAe,CAAC0C,OAAO,EAAEmC,iBAAiB,EAAE,CAAC,CAAC;IACtEE,gBAAgB,GAAGD,iBAAiB,CAAC,CAAC,CAAC;IACvCE,mBAAmB,GAAGF,iBAAiB,CAAC,CAAC,CAAC;EAE9C,IAAIG,iBAAiB,GAAGhF,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,KAAK,CAAC;IAClDiC,iBAAiB,GAAG,CAAC,CAAC,EAAElF,eAAe,CAAC0C,OAAO,EAAEuC,iBAAiB,EAAE,CAAC,CAAC;IACtEE,cAAc,GAAGD,iBAAiB,CAAC,CAAC,CAAC;IACrCE,iBAAiB,GAAGF,iBAAiB,CAAC,CAAC,CAAC;EAE5C,IAAIG,iBAAiB,GAAGpF,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC/CqC,iBAAiB,GAAG,CAAC,CAAC,EAAEtF,eAAe,CAAC0C,OAAO,EAAE2C,iBAAiB,EAAE,CAAC,CAAC;IACtEE,aAAa,GAAGD,iBAAiB,CAAC,CAAC,CAAC;IACpCE,gBAAgB,GAAGF,iBAAiB,CAAC,CAAC,CAAC;EAE3C,IAAIG,iBAAiB,GAAGxF,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,IAAI,CAAC;IACjDyC,iBAAiB,GAAG,CAAC,CAAC,EAAE1F,eAAe,CAAC0C,OAAO,EAAE+C,iBAAiB,EAAE,CAAC,CAAC;IACtEE,cAAc,GAAGD,iBAAiB,CAAC,CAAC,CAAC;IACrCE,iBAAiB,GAAGF,iBAAiB,CAAC,CAAC,CAAC;EAE5C,IAAIG,iBAAiB,GAAG5F,MAAM,CAACyC,OAAO,CAACO,QAAQ,CAAC,IAAI,CAAC;IACjD6C,iBAAiB,GAAG,CAAC,CAAC,EAAE9F,eAAe,CAAC0C,OAAO,EAAEmD,iBAAiB,EAAE,CAAC,CAAC;IACtEE,cAAc,GAAGD,iBAAiB,CAAC,CAAC,CAAC;IACrCE,iBAAiB,GAAGF,iBAAiB,CAAC,CAAC,CAAC;EAE5C,IAAIG,eAAe,GAAGhG,MAAM,CAACyC,OAAO,CAACwD,MAAM,CAAC,IAAI,CAAC;EAEjD,IAAIC,YAAY,GAAGlG,MAAM,CAACyC,OAAO,CAACwD,MAAM,CAAC,IAAI,CAAC;EAE9C,IAAIE,QAAQ,GAAG,IAAI;EACnB,IAAIC,mBAAmB,GAAG,CAAC;EAC3B,IAAIC,aAAa,GAAG,KAAK;EAEzB,IAAIC,eAAe,GAAGtG,MAAM,CAACyC,OAAO,CAACwD,MAAM,CAAC,IAAI,CAAC;EAEjD,IAAIM,YAAY,GAAGvG,MAAM,CAACyC,OAAO,CAACwD,MAAM,CAAC,IAAI,CAAC;EAE9C,IAAIO,OAAO,GAAGxG,MAAM,CAACyC,OAAO,CAACwD,MAAM,CAAC/C,QAAQ,CAAC,CAAC,CAAC;;EAG/C,IAAIuD,IAAI,GAAG5D,KAAK,CAAC4D,IAAI;IACjBC,KAAK,GAAG7D,KAAK,CAAC6D,KAAK;IACnBC,KAAK,GAAG9D,KAAK,CAAC8D,KAAK;IACnBC,KAAK,GAAG/D,KAAK,CAAC+D,KAAK;IACnBC,iBAAiB,GAAGhE,KAAK,CAACgE,iBAAiB;IAC3CC,cAAc,GAAGjE,KAAK,CAACiE,cAAc;IACrCC,mBAAmB,GAAGlE,KAAK,CAACkE,mBAAmB;IAC/CC,eAAe,GAAGnE,KAAK,CAACmE,eAAe;IACvCC,cAAc,GAAGpE,KAAK,CAACoE,cAAc;IACrCC,mBAAmB,GAAGrE,KAAK,CAACqE,mBAAmB;IAC/CC,gBAAgB,GAAGtE,KAAK,CAACsE,gBAAgB;IACzCC,SAAS,GAAGvE,KAAK,CAACuE,SAAS;IAC3BC,YAAY,GAAGxE,KAAK,CAACwE,YAAY;IACjCC,cAAc,GAAGzE,KAAK,CAACyE,cAAc;IACrCC,iBAAiB,GAAG1E,KAAK,CAAC0E,iBAAiB;IAC3CC,YAAY,GAAG3E,KAAK,CAAC2E,YAAY;IACjCC,mBAAmB,GAAG5E,KAAK,CAAC4E,mBAAmB;IAC/CC,iBAAiB,GAAG7E,KAAK,CAAC6E,iBAAiB;IAC3CC,qBAAqB,GAAG9E,KAAK,CAAC8E,qBAAqB;IACnDC,qBAAqB,GAAG/E,KAAK,CAAC+E,qBAAqB;IACnDC,2BAA2B,GAAGhF,KAAK,CAACgF,2BAA2B;IAC/DC,0BAA0B,GAAGjF,KAAK,CAACiF,0BAA0B;IAC7DC,uBAAuB,GAAGlF,KAAK,CAACkF,uBAAuB;IACvDC,4BAA4B,GAAGnF,KAAK,CAACmF,4BAA4B;IACjEC,wBAAwB,GAAGpF,KAAK,CAACoF,wBAAwB;EAE7D,IAAIC,MAAM,GAAG,IAAI/H,CAAC,CAACgI,cAAc,CAACvB,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAGA,KAAK,GAAG,CAAC,CAAC,CAAC;EAClF;AACF;AACA;;EAGE5G,MAAM,CAACyC,OAAO,CAAC2F,mBAAmB,CAACtF,GAAG,EAAE,YAAY;IAClD,OAAO;MACLuF,qBAAqB,EAAEC;IACzB,CAAC;EACH,CAAC,CAAC;EAEF,IAAIC,YAAY,GAAG,SAASA,YAAY,GAAG,CAAC,CAAC;EAE7C,IAAID,cAAc,GAAG,SAASA,cAAc,CAACE,OAAO,EAAE;IACpD7C,iBAAiB,CAAC;MAChB6C,OAAO,EAAEA,OAAO;MAChBC,IAAI,EAAEtI,CAAC,CAACuI,2BAA2B,CAACC;IACtC,CAAC,CAAC;IACFhF,eAAe,CAAC6E,OAAO,CAACI,IAAI,CAAC;IAC7B,IAAIC,OAAO,GAAGvC,eAAe,CAACwC,OAAO;IACrC,IAAIC,WAAW,GAAGP,OAAO,CAACI,IAAI,CAAC,CAAC;;IAEhC,IAAII,OAAO,GAAG,CAAC,CAAC,EAAE5I,EAAE,CAAC6I,iBAAiB,EAAET,OAAO,EAAErI,CAAC,CAAC+I,iBAAiB,CAACC,UAAU,CAACC,SAAS,CAAC;IAE1F,IAAIJ,OAAO,IAAIA,OAAO,CAACK,cAAc,CAAClJ,CAAC,CAACmJ,kBAAkB,CAACC,aAAa,CAAC,IAAIP,OAAO,CAACK,cAAc,CAAClJ,CAAC,CAACmJ,kBAAkB,CAACE,MAAM,CAAC,IAAIR,OAAO,CAACQ,MAAM,KAAKrJ,CAAC,CAACmJ,kBAAkB,CAACG,GAAG,EAAE;MAC/KV,WAAW,GAAGC,OAAO,CAACU,cAAc;IACtC;IAEAb,OAAO,CAACc,KAAK,EAAE;IACfd,OAAO,CAACe,WAAW,GAAG,EAAE;IACxBC,gBAAgB,CAACd,WAAW,EAAE,KAAK,CAAC;EACtC,CAAC;EAED,IAAIe,mBAAmB,GAAG,SAASA,mBAAmB,GAAG;IACvDnE,iBAAiB,CAAC,IAAI,CAAC;IACvBhC,eAAe,CAAC,EAAE,CAAC;IACnB2C,eAAe,CAACwC,OAAO,CAACc,WAAW,GAAG,EAAE;EAC1C,CAAC;EAED,IAAIG,kBAAkB,GAAG,SAASA,kBAAkB,CAACC,KAAK,EAAE;IAC1D,IAAIA,KAAK,CAACC,OAAO,KAAK,EAAE,IAAI,CAACD,KAAK,CAACE,QAAQ,EAAE;MAC3CF,KAAK,CAACG,cAAc,EAAE;MACtBC,eAAe,EAAE;IACnB;EACF,CAAC;EACD;;EAGA,IAAIA,eAAe,GAAG,SAASA,eAAe,GAAG;IAC/C7E,gBAAgB,CAAC,KAAK,CAAC;IAEvB,IAAI,CAAC7B,YAAY,CAAC2G,IAAI,EAAE,CAAChI,MAAM,EAAE;MAC/B,OAAO,KAAK;IACd;IAEA,IAAIqD,cAAc,IAAIA,cAAc,CAAC+C,IAAI,KAAKtI,CAAC,CAACuI,2BAA2B,CAACC,IAAI,EAAE;MAChF2B,WAAW,CAAC5E,cAAc,CAAC8C,OAAO,CAAC;MACnC,OAAO,KAAK;IACd;IAEA,IAAI+B,WAAW,GAAG,IAAIrK,KAAK,CAACsK,SAAS,CAACC,WAAW,CAACnH,UAAU,EAAEI,YAAY,EAAER,QAAQ,CAAC;IACrFqH,WAAW,CAACG,SAAS,CAACxE,YAAY,CAAC4C,OAAO,CAAC;IAC3CyB,WAAW,CAACI,WAAW,CAACzH,QAAQ,CAAC;IACjCqH,WAAW,CAACK,OAAO,CAAClH,YAAY,CAAC;IACjC6G,WAAW,CAACM,SAAS,CAAC,CAAC,CAAC,EAAExK,uBAAuB,CAACyK,gBAAgB,GAAG,CAAC;IACtEP,WAAW,CAACQ,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE3K,uBAAuB,CAACyK,gBAAgB,GAAG,CAAC,CAAC;IAE5E1K,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACE,aAAa,EAAE;MACtE3C,OAAO,EAAE+B,WAAW;MACpBa,MAAM,EAAE9K,0BAA0B,CAAC+K,aAAa,CAACC;IACnD,CAAC,CAAC;IAEFnL,CAAC,CAACoL,qBAAqB,CAACC,IAAI,CAACrL,CAAC,CAACoL,qBAAqB,CAACE,KAAK,CAACC,eAAe,CAAC;IAE3E/H,eAAe,EAAE;IACjB2C,eAAe,CAACwC,OAAO,CAACc,WAAW,GAAG,EAAE;IAExC1J,KAAK,CAACsK,SAAS,CAACmB,WAAW,CAACpB,WAAW,CAAC,CAACqB,IAAI,CAAC,UAAUpD,OAAO,EAAE;MAC/D,IAAIqD,aAAa,GAAG5J,aAAa,CAAC,CAAC,CAAC,EAAEuG,OAAO,CAAC;MAE9CpI,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACE,aAAa,EAAE;QACtE3C,OAAO,EAAEqD,aAAa;QACtBT,MAAM,EAAE9K,0BAA0B,CAAC+K,aAAa,CAACS;MACnD,CAAC,CAAC;IACJ,CAAC,CAAC,CAACC,KAAK,CAAC,UAAUC,KAAK,EAAE;MACxB5L,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACgB,cAAc,EAAE;QACvEzD,OAAO,EAAE+B,WAAW;QACpByB,KAAK,EAAEA;MACT,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD;;EAGA,IAAIE,gBAAgB,GAAG,SAASA,gBAAgB,CAACxI,YAAY,EAAEyI,WAAW,EAAE;IAC1ExH,kBAAkB,CAAC,KAAK,CAAC;IACzB,IAAIyH,YAAY,GAAG,IAAIlM,KAAK,CAACsK,SAAS,CAAC6B,YAAY,CAAC/I,UAAU,EAAEI,YAAY,EAAEyI,WAAW,EAAEjJ,QAAQ,CAAC;IACpGkJ,YAAY,CAAC1B,SAAS,CAACxE,YAAY,CAAC4C,OAAO,CAAC;IAC5CsD,YAAY,CAACzB,WAAW,CAACzH,QAAQ,CAAC;IAClCkJ,YAAY,CAACE,OAAO,CAACH,WAAW,CAAC;IACjCC,YAAY,CAACG,WAAW,CAAC,CAAC,CAAC,EAAEzM,gBAAgB,CAAC2C,OAAO,EAAE,CAAC,CAAC,EAAEtC,CAAC,CAAC+I,iBAAiB,CAACsD,IAAI,EAAE9I,YAAY,CAAC,CAAC;IACnG0I,YAAY,CAACvB,SAAS,CAAC,CAAC,CAAC,EAAExK,uBAAuB,CAACyK,gBAAgB,GAAG,CAAC;IACvEsB,YAAY,CAACrB,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE3K,uBAAuB,CAACyK,gBAAgB,GAAG,CAAC,CAAC;IAE7E1K,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACE,aAAa,EAAE;MACtE3C,OAAO,EAAE4D,YAAY;MACrBhB,MAAM,EAAE9K,0BAA0B,CAAC+K,aAAa,CAACC;IACnD,CAAC,CAAC;IAEFnL,CAAC,CAACoL,qBAAqB,CAACC,IAAI,CAACrL,CAAC,CAACoL,qBAAqB,CAACE,KAAK,CAACC,eAAe,CAAC;IAE3ExL,KAAK,CAACsK,SAAS,CAACmB,WAAW,CAACS,YAAY,CAAC,CAACR,IAAI,CAAC,UAAUpD,OAAO,EAAE;MAChE,IAAIqD,aAAa,GAAG5J,aAAa,CAAC,CAAC,CAAC,EAAEuG,OAAO,CAAC;MAE9CpI,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACE,aAAa,EAAE;QACtE3C,OAAO,EAAEqD,aAAa;QACtBT,MAAM,EAAE9K,0BAA0B,CAAC+K,aAAa,CAACS;MACnD,CAAC,CAAC;IACJ,CAAC,CAAC,CAACC,KAAK,CAAC,UAAUC,KAAK,EAAE;MACxB5L,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACgB,cAAc,EAAE;QACvEzD,OAAO,EAAE4D,YAAY;QACrBJ,KAAK,EAAEA;MACT,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD;;EAGA,IAAIS,WAAW,GAAG,SAASA,WAAW,CAACC,cAAc,EAAE;IACrD,IAAIC,UAAU,GAAG;MACfC,WAAW,EAAEF,cAAc,CAACG,UAAU;MACtCC,YAAY,EAAEJ,cAAc,CAACK;IAC/B,CAAC;IACD,IAAIC,aAAa,GAAG,IAAI9M,KAAK,CAACsK,SAAS,CAACyC,aAAa,CAAC3J,UAAU,EAAEJ,QAAQ,EAAE9C,EAAE,CAAC8M,2BAA2B,CAACC,OAAO,EAAER,UAAU,CAAC;IAC/HK,aAAa,CAACtC,SAAS,CAACxE,YAAY,CAAC4C,OAAO,CAAC;IAC7CkE,aAAa,CAACrC,WAAW,CAACzH,QAAQ,CAAC;IACnC8J,aAAa,CAACT,WAAW,CAAC;MACxBa,oBAAoB,EAAE;IACxB,CAAC,CAAC;IACFJ,aAAa,CAACnC,SAAS,CAAC,CAAC,CAAC,EAAExK,uBAAuB,CAACyK,gBAAgB,GAAG,CAAC;IACxEkC,aAAa,CAACjC,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE3K,uBAAuB,CAACyK,gBAAgB,GAAG,CAAC,CAAC;IAE9E1K,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACE,aAAa,EAAE;MACtE3C,OAAO,EAAEwE,aAAa;MACtB5B,MAAM,EAAE9K,0BAA0B,CAAC+K,aAAa,CAACC;IACnD,CAAC,CAAC;IAEFnL,CAAC,CAACoL,qBAAqB,CAACC,IAAI,CAACrL,CAAC,CAACoL,qBAAqB,CAACE,KAAK,CAACC,eAAe,CAAC;IAE3ExL,KAAK,CAACsK,SAAS,CAAC6C,iBAAiB,CAACL,aAAa,CAAC,CAACpB,IAAI,CAAC,UAAUpD,OAAO,EAAE;MACvE,IAAIqD,aAAa,GAAG5J,aAAa,CAAC,CAAC,CAAC,EAAEuG,OAAO,CAAC;MAE9CpI,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACE,aAAa,EAAE;QACtE3C,OAAO,EAAEqD,aAAa;QACtBT,MAAM,EAAE9K,0BAA0B,CAAC+K,aAAa,CAACS;MACnD,CAAC,CAAC;IACJ,CAAC,CAAC,CAACC,KAAK,CAAC,UAAUC,KAAK,EAAE;MACxB5L,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACgB,cAAc,EAAE;QACvEzD,OAAO,EAAEwE,aAAa;QACtBhB,KAAK,EAAEA;MACT,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD;;EAGA,IAAI1B,WAAW,GAAG,SAASA,WAAW,CAAC9B,OAAO,EAAE;IAC9C8E,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC;IACrB,IAAIvE,WAAW,GAAGrF,YAAY,CAAC2G,IAAI,EAAE;IACrC,IAAIE,WAAW,GAAG,IAAIrK,KAAK,CAACsK,SAAS,CAACC,WAAW,CAACnH,UAAU,EAAEyF,WAAW,EAAE7F,QAAQ,CAAC;IACpFqH,WAAW,CAACgD,KAAK,CAAC7H,cAAc,CAAC8C,OAAO,CAACgF,EAAE,CAAC;IAC5C7J,eAAe,CAAC,EAAE,CAAC;IACnB2C,eAAe,CAACwC,OAAO,CAACc,WAAW,GAAG,EAAE;IAExCzJ,CAAC,CAACoL,qBAAqB,CAACC,IAAI,CAACrL,CAAC,CAACoL,qBAAqB,CAACE,KAAK,CAACC,eAAe,CAAC;IAE3E/F,iBAAiB,CAAC,IAAI,CAAC;IAEvBzF,KAAK,CAACsK,SAAS,CAACF,WAAW,CAACC,WAAW,CAAC,CAACqB,IAAI,CAAC,UAAU6B,aAAa,EAAE;MACrErN,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACyC,aAAa,EAAE;QACtElF,OAAO,EAAEiF,aAAa;QACtBrC,MAAM,EAAE9K,0BAA0B,CAAC+K,aAAa,CAACS;MACnD,CAAC,CAAC;IACJ,CAAC,CAAC,CAACC,KAAK,CAAC,UAAUC,KAAK,EAAE;MACxB5L,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACgB,cAAc,EAAE;QACvED,KAAK,EAAEA,KAAK;QACZxD,OAAO,EAAEA;MACX,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EAED,IAAImF,WAAW,GAAG,SAASA,WAAW,CAACC,gBAAgB,EAAEC,cAAc,EAAE;IACvE;IACA,IAAI,CAAClG,qBAAqB,EAAE;MAC1B,OAAO,KAAK;IACd,CAAC,CAAC;;IAGF,IAAIxB,QAAQ,EAAE;MACZ,OAAO,KAAK;IACd;IAEA,IAAI2H,cAAc,GAAGF,gBAAgB,IAAI,IAAI;IAC7C,IAAIG,QAAQ,GAAGF,cAAc,IAAIG,SAAS;IAC1C,IAAIC,kBAAkB,GAAG,IAAI/N,KAAK,CAACsK,SAAS,CAAC0D,eAAe,CAAC5K,UAAU,EAAEJ,QAAQ,EAAE6K,QAAQ,CAAC;IAE5F7N,KAAK,CAACsK,SAAS,CAACmD,WAAW,CAACM,kBAAkB,CAAC;IAE/C9H,QAAQ,GAAGgI,UAAU,CAAC,YAAY;MAChCb,SAAS,CAAC,IAAI,EAAEO,cAAc,CAAC;IACjC,CAAC,EAAEC,cAAc,CAAC;EACpB,CAAC;EAED,IAAIR,SAAS,GAAG,SAASA,SAAS,CAACtD,KAAK,EAAE6D,cAAc,EAAE;IACxD,IAAI7D,KAAK,EAAE;MACTA,KAAK,CAACoE,OAAO,EAAE;IACjB;IAEA,IAAI,CAACzG,qBAAqB,EAAE;MAC1B,OAAO,KAAK;IACd;IAEA,IAAIoG,QAAQ,GAAGF,cAAc,IAAIG,SAAS;IAC1C,IAAIC,kBAAkB,GAAG,IAAI/N,KAAK,CAACsK,SAAS,CAAC0D,eAAe,CAAC5K,UAAU,EAAEJ,QAAQ,EAAE6K,QAAQ,CAAC;IAE5F7N,KAAK,CAACsK,SAAS,CAAC8C,SAAS,CAACW,kBAAkB,CAAC;IAE7CI,YAAY,CAAClI,QAAQ,CAAC;IACtBA,QAAQ,GAAG,IAAI;EACjB,CAAC;EAED,IAAImI,gBAAgB,GAAG,SAASA,gBAAgB,CAACtE,KAAK,EAAE;IACtDrF,kBAAkB,CAAC,KAAK,CAAC;IAEzB,IAAI,CAAC4B,YAAY,CAACuC,OAAO,EAAE;MACzB,OAAO,KAAK;IACd;IAEAvC,YAAY,CAACuC,OAAO,CAACyF,KAAK,EAAE;EAC9B,CAAC;EACD;;EAGA,IAAIC,sBAAsB,GAAG,SAASA,sBAAsB,CAACxE,KAAK,EAAE;IAClErF,kBAAkB,CAAC,KAAK,CAAC;IACzB,IAAI8J,YAAY,GAAGzE,KAAK,CAAC9H,MAAM,CAACwM,KAAK,CAAC,GAAG,CAAC;IAC1C,IAAIC,YAAY,GAAGF,YAAY,CAACG,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC;IAC/C,IAAIC,MAAM,GAAG,IAAIC,UAAU,EAAE;IAC7BD,MAAM,CAACE,gBAAgB,CAAC,MAAM,EAAE,UAAUhF,KAAK,EAAE;MAC/C,IAAIiF,OAAO,GAAG,IAAIC,IAAI,CAAC,CAACJ,MAAM,CAACK,MAAM,CAAC,EAAEV,YAAY,CAACW,IAAI,EAAEX,YAAY,CAAC;MAExE,QAAQE,YAAY,CAAC,CAAC,CAAC;QACrB,KAAK,OAAO;UACVzC,gBAAgB,CAAC+C,OAAO,EAAE9O,CAAC,CAACkP,oBAAoB,CAACC,KAAK,CAAC;UACvD;QAEF,KAAK,OAAO;UACVpD,gBAAgB,CAAC+C,OAAO,EAAE9O,CAAC,CAACkP,oBAAoB,CAACE,KAAK,CAAC;UACvD;QAEF,KAAK,OAAO;UACVrD,gBAAgB,CAAC+C,OAAO,EAAE9O,CAAC,CAACkP,oBAAoB,CAACG,KAAK,CAAC;UACvD;QAEF,KAAK,MAAM;UACTtD,gBAAgB,CAAC+C,OAAO,EAAE9O,CAAC,CAACkP,oBAAoB,CAAC7C,IAAI,CAAC;UACtD;QAEF;UACEN,gBAAgB,CAAC+C,OAAO,EAAE9O,CAAC,CAACkP,oBAAoB,CAAC7C,IAAI,CAAC;UACtD;MAAM;MAGVjG,YAAY,CAACuC,OAAO,CAAClJ,KAAK,GAAG,EAAE;IACjC,CAAC,EAAE,KAAK,CAAC;IACTkP,MAAM,CAACW,iBAAiB,CAAChB,YAAY,CAAC;EACxC,CAAC;EACD;;EAGA,IAAIiB,eAAe,GAAG,SAASA,eAAe,GAAG;IAC/CvK,iBAAiB,CAAC,KAAK,CAAC;EAC1B,CAAC;EACD;;EAGA,IAAIwK,YAAY,GAAG,SAASA,YAAY,GAAG;IACzCxK,iBAAiB,CAAC,KAAK,CAAC;EAC1B,CAAC;EACD;;EAGA,IAAIyK,cAAc,GAAG,SAASA,cAAc,GAAG;IAC7CjL,kBAAkB,CAAC,KAAK,CAAC;IACzBQ,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;EACD;;EAGA,IAAI0K,0BAA0B,GAAG,SAASA,0BAA0B,GAAG;IACrElL,kBAAkB,CAAC,KAAK,CAAC;IAEzBzE,KAAK,CAACsK,SAAS,CAACsF,aAAa,CAAC3P,CAAC,CAACmJ,kBAAkB,CAACyG,QAAQ,EAAE5P,CAAC,CAACmJ,kBAAkB,CAAC0G,IAAI,EAAE7P,CAAC,CAAC8P,aAAa,CAACF,QAAQ,EAAE;MAChHG,QAAQ,EAAE1J,OAAO,CAACsC,OAAO,CAACxF,UAAU;MACpC6M,YAAY,EAAE3J,OAAO,CAACsC,OAAO,CAAC5F;IAChC,CAAC,CAAC,CAAC6I,KAAK,CAAC,UAAUC,KAAK,EAAE;MACxB5L,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACgB,cAAc,EAAE;QACvED,KAAK,EAAEA;MACT,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD;;EAGA,IAAIoE,4BAA4B,GAAG,SAASA,4BAA4B,GAAG;IACzEzL,kBAAkB,CAAC,KAAK,CAAC;IAEzBzE,KAAK,CAACsK,SAAS,CAACsF,aAAa,CAAC3P,CAAC,CAACmJ,kBAAkB,CAAC+G,UAAU,EAAElQ,CAAC,CAACmJ,kBAAkB,CAAC0G,IAAI,EAAE7P,CAAC,CAAC8P,aAAa,CAACI,UAAU,EAAE;MACpHH,QAAQ,EAAE1J,OAAO,CAACsC,OAAO,CAACxF,UAAU;MACpC6M,YAAY,EAAE3J,OAAO,CAACsC,OAAO,CAAC5F;IAChC,CAAC,CAAC,CAAC6I,KAAK,CAAC,UAAUC,KAAK,EAAE;MACxB5L,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAACgB,cAAc,EAAE;QACvED,KAAK,EAAEA;MACT,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EACD;;EAGA,IAAIsE,gBAAgB,GAAG,SAASA,gBAAgB,CAACtG,KAAK,EAAE;IACtD2D,WAAW,EAAE;IACb,IAAI4C,IAAI,GAAGvG,KAAK,CAACwG,aAAa;IAC9B,IAAI9M,YAAY,GAAG6M,IAAI,CAAC3G,WAAW,CAACS,IAAI,EAAE;IAE1C,IAAI,CAAC3G,YAAY,CAACrB,MAAM,EAAE;MACxB2H,KAAK,CAACwG,aAAa,CAAC5G,WAAW,GAAGlG,YAAY;IAChD;IAEAC,eAAe,CAAC4M,IAAI,CAACE,SAAS,CAAC;EACjC,CAAC;EACD;;EAGA,IAAIC,kBAAkB,GAAG,SAASA,kBAAkB,CAAC1G,KAAK,EAAE;IAC1DmE,UAAU,CAACmC,gBAAgB,CAACtG,KAAK,CAAC,EAAE,GAAG,CAAC;EAC1C,CAAC;EACD;;EAGA,IAAI2G,kBAAkB,GAAG,SAASA,kBAAkB,GAAG;IACrDpM,kBAAkB,CAAC,UAAUqM,qBAAqB,EAAE;MAClD,OAAO,CAACA,qBAAqB;IAC/B,CAAC,CAAC;EACJ,CAAC;EAED,IAAI/G,gBAAgB,GAAG,SAASA,gBAAgB,CAACgH,IAAI,EAAEC,mBAAmB,EAAE;IAC1E,IAAIC,GAAG,EAAEC,KAAK;IACd,IAAIC,UAAU,GAAGC,MAAM;IAEvB,IAAID,UAAU,CAACE,YAAY,EAAE;MAC3B;MACAJ,GAAG,GAAGE,UAAU,CAACE,YAAY,EAAE;MAE/B,IAAIJ,GAAG,CAACK,UAAU,IAAIL,GAAG,CAACM,UAAU,EAAE;QACpCL,KAAK,GAAGD,GAAG,CAACK,UAAU,CAAC,CAAC,CAAC;QACzBJ,KAAK,CAACM,cAAc,EAAE,CAAC,CAAC;QACxB;QACA;;QAEA,IAAIC,EAAE,GAAGxB,QAAQ,CAACyB,aAAa,CAAC,KAAK,CAAC;QACtCD,EAAE,CAACd,SAAS,GAAGI,IAAI;QACnB,IAAIY,IAAI,GAAG1B,QAAQ,CAAC2B,sBAAsB,EAAE;UACxCC,IAAI;UACJC,QAAQ;QAEZ,OAAOD,IAAI,GAAGJ,EAAE,CAACM,UAAU,EAAE;UAC3BD,QAAQ,GAAGH,IAAI,CAACK,WAAW,CAACH,IAAI,CAAC;QACnC;QAEA,IAAII,SAAS,GAAGN,IAAI,CAACI,UAAU;QAC/Bb,KAAK,CAACgB,UAAU,CAACP,IAAI,CAAC;QAEtB,IAAIG,QAAQ,EAAE;UACZZ,KAAK,GAAGA,KAAK,CAACiB,UAAU,EAAE;UAC1BjB,KAAK,CAACkB,aAAa,CAACN,QAAQ,CAAC;UAE7B,IAAId,mBAAmB,EAAE;YACvBE,KAAK,CAACmB,cAAc,CAACJ,SAAS,CAAC;UACjC,CAAC,MAAM;YACLf,KAAK,CAACoB,QAAQ,CAAC,IAAI,CAAC;UACtB;UAEArB,GAAG,CAACsB,eAAe,EAAE;UACrBtB,GAAG,CAACuB,QAAQ,CAACtB,KAAK,CAAC;QACrB;MACF;IACF,CAAC,MAAM,IAAI,CAACD,GAAG,GAAGhB,QAAQ,CAACwC,SAAS,KAAKxB,GAAG,CAACnC,IAAI,KAAK,SAAS,EAAE;MAC/D;MACA,IAAI4D,aAAa,GAAGzB,GAAG,CAAC0B,WAAW,EAAE;MACrCD,aAAa,CAACJ,QAAQ,CAAC,IAAI,CAAC;MAC5BrB,GAAG,CAAC0B,WAAW,EAAE,CAACC,SAAS,CAAC7B,IAAI,CAAC;MAEjC,IAAIC,mBAAmB,EAAE;QACvBE,KAAK,GAAGD,GAAG,CAAC0B,WAAW,EAAE;QACzBzB,KAAK,CAAC2B,WAAW,CAAC,cAAc,EAAEH,aAAa,CAAC;QAChDxB,KAAK,CAAC4B,MAAM,EAAE;MAChB;IACF;EACF,CAAC;EACD;;EAGA,IAAIC,aAAa,GAAG,SAASA,aAAa,CAACC,WAAW,EAAE;IACtD,IAAIjK,OAAO,GAAGvC,eAAe,CAACwC,OAAO;IACrCD,OAAO,CAACc,KAAK,EAAE;IACfd,OAAO,CAAC4H,SAAS,GAAG,EAAE;IACtB5G,gBAAgB,CAACnG,YAAY,GAAGoP,WAAW,EAAE,KAAK,CAAC;IACnDnP,eAAe,CAACkF,OAAO,CAAC4H,SAAS,CAAC;EACpC,CAAC;EACD;;EAGA,IAAIsC,sBAAsB,GAAG,SAASA,sBAAsB,CAAC/I,KAAK,EAAE;IAClErF,kBAAkB,CAAC,UAAUqO,GAAG,EAAE;MAChC,OAAO;QACLC,WAAW,EAAE,CAACD,GAAG,CAACC,WAAW;QAC7BjJ,KAAK,EAAEA;MACT,CAAC;IACH,CAAC,CAAC;EACJ,CAAC;EACD;;EAGA,IAAIkJ,iBAAiB,GAAG,SAASA,iBAAiB,CAAClJ,KAAK,EAAE;IACxDzE,gBAAgB,CAAC,UAAUyN,GAAG,EAAE;MAC9B,OAAO;QACLG,gBAAgB,EAAE,CAACH,GAAG,CAACG,gBAAgB;QACvCnJ,KAAK,EAAEA;MACT,CAAC;IACH,CAAC,CAAC;EACJ,CAAC;EACD;;EAGA,IAAIoJ,mBAAmB,GAAG,SAASA,mBAAmB,GAAG;IACvD,IAAIpN,eAAe,CAAC8C,OAAO,CAACuK,cAAc,EAAE;MAC1CrN,eAAe,CAAC8C,OAAO,CAACuK,cAAc,EAAE;IAC1C,CAAC,MAAM;MACL1C,kBAAkB,EAAE;IACtB;EACF,CAAC;EACD;;EAGA,IAAI2C,iBAAiB,GAAG,SAASA,iBAAiB,GAAG;IACnD,IAAIlN,mBAAmB,EAAE;MACvB,OAAO,KAAK;IACd;IACA;;IAGA,IAAImN,IAAI,GAAG;MACT3E,IAAI,EAAEzO,CAAC,CAAC+I,iBAAiB,CAACsK,YAAY;MACtCC,QAAQ,EAAEvM,mBAAmB,IAAIhG,MAAM,CAACuB;IAC1C,CAAC;IACD;;IAEA,IAAIiR,gBAAgB,GAAG,IAAIxT,KAAK,CAACsK,SAAS,CAACmJ,gBAAgB,CAACrQ,UAAU,EAAEJ,QAAQ,EAAEqQ,IAAI,CAAC;IAEvFrT,KAAK,CAACsK,SAAS,CAACoJ,oBAAoB,CAACF,gBAAgB,CAAC;IACtD;;IAGAtN,mBAAmB,GAAG+H,UAAU,CAACE,YAAY,CAACjI,mBAAmB,CAAC,EAAEhG,EAAE,CAACyT,gBAAgB,CAACzN,mBAAmB,CAAC;IAC5G;;IAEA,IAAI0N,OAAO,GAAG;MACZL,QAAQ,EAAEvM,mBAAmB,IAAIhG,MAAM,CAACuB;IAC1C,CAAC;IAEDrC,EAAE,CAAC6K,sBAAsB,CAACC,IAAI,CAAC9K,EAAE,CAAC6K,sBAAsB,CAAC8I,cAAc,EAAED,OAAO,CAAC;EACnF,CAAC;EACD;;EAGA,IAAIE,YAAY,GAAG,SAASA,YAAY,GAAG;IACzC,OAAOlQ,gBAAgB,GAAG,aAAa9D,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;MACzE7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACyT,uBAAuB,GAAG;MAC5CC,SAAS,EAAE,kBAAkB;MAC7BC,OAAO,EAAEpB,sBAAsB,CAACqB,IAAI,CAAChT,KAAK,CAAC;MAC3CiT,KAAK,EAAE,CAAC,CAAC,EAAElU,CAAC,CAACmU,QAAQ,EAAE,QAAQ;IACjC,CAAC,EAAE,aAAatU,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,GAAG,EAAE;MAChD7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC+T,oBAAoB,EAAE5N,KAAK,EAAEE,iBAAiB,EAAEqB,MAAM;IAC1E,CAAC,CAAC,CAAC,GAAG,IAAI;EACZ,CAAC;EACD;;EAGA,IAAIsM,yBAAyB,GAAGvM,wBAAwB,KAAK,IAAI,IAAIA,wBAAwB,KAAK,KAAK,CAAC,GAAGA,wBAAwB,GAAG,IAAIpH,OAAO,CAAC4T,wBAAwB,CAAC,CAAC,CAAC,CAAC;EAC9K;;EAGA,IAAIC,gBAAgB,GAAG,SAASA,gBAAgB,GAAG;IACjD,IAAIC,qBAAqB,EAAEC,sBAAsB;IAEjD,OAAOlQ,eAAe,CAACuO,WAAW,GAAG,aAAajT,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAACrR,CAAC,CAAC0U,gBAAgB,EAAE;MACjGC,QAAQ,EAAE,KAAK;MACfC,CAAC,EAAErQ,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACiQ,qBAAqB,GAAGjQ,eAAe,CAACsF,KAAK,MAAM,IAAI,IAAI2K,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACK,OAAO;MAC1MC,CAAC,EAAEvQ,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACkQ,sBAAsB,GAAGlQ,eAAe,CAACsF,KAAK,MAAM,IAAI,IAAI4K,sBAAsB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,sBAAsB,CAACM,OAAO;MAC7MvO,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC2U,uBAAuB,EAAEjN,MAAM,EAAEsM,yBAAyB;IAC9E,CAAC,EAAE,aAAaxU,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAACrR,CAAC,CAACiV,oBAAoB,EAAE;MACnEf,KAAK,EAAE,CAAC,CAAC,EAAElU,CAAC,CAACmU,QAAQ,EAAE,aAAa,CAAC;MACrCe,iBAAiB,EAAEvU,gBAAgB,CAAC2B,OAAO;MAC3CmE,KAAK,EAAEsB,MAAM;MACbvB,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC8U,gBAAgB,EAAEpN,MAAM,CAAC;MAC3CqN,OAAO,EAAEzQ;IACX,CAAC,CAAC,CAAC,GAAG,IAAI;EACZ,CAAC;EACD;;EAGA,IAAI0Q,wBAAwB,GAAGzN,uBAAuB,KAAK,IAAI,IAAIA,uBAAuB,KAAK,KAAK,CAAC,GAAGA,uBAAuB,GAAG,IAAIpH,wBAAwB,CAAC8U,uBAAuB,CAAC,CAAC,CAAC,CAAC;EAE1L,IAAIpB,KAAK,GAAG,CAAC,CAAC,EAAElU,CAAC,CAACmU,QAAQ,EAAE,aAAa,CAAC;EAC1C,IAAIoB,uBAAuB,GAAG,CAAC,CAAC,EAAEvV,CAAC,CAACmU,QAAQ,EAAE,UAAU,CAAC;EACzD,IAAIqB,qBAAqB,GAAG,CAAC,CAAC,EAAExV,CAAC,CAACmU,QAAQ,EAAE,QAAQ,CAAC;EACrD,IAAIsB,aAAa,GAAG,CAAC,CAAC,EAAEzV,CAAC,CAACmU,QAAQ,EAAE,YAAY,CAAC;EACjD,IAAIuB,cAAc,GAAG,CAAC,CAAC,EAAE1V,CAAC,CAACmU,QAAQ,EAAE,iBAAiB,CAAC;EACvD;;EAEA,IAAIwB,UAAU,GAAG,SAASA,UAAU,GAAG;IACrC,OAAO5Q,cAAc,GAAG,aAAalF,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAACrR,CAAC,CAAC0U,gBAAgB,EAAE;MACpFkB,YAAY,EAAE7Q,cAAc,GAAG,IAAI,GAAG,KAAK;MAC3CyB,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACwV,yBAAyB,EAAE9N,MAAM,EAAEsN,wBAAwB;IAC/E,CAAC,EAAE,aAAaxV,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAACpR,EAAE,CAAC6V,mBAAmB,EAAE;MACnEC,YAAY,EAAEV,wBAAwB,CAACU,YAAY,IAAIjV,YAAY,CAACwB,OAAO;MAC3E4R,KAAK,EAAEA,KAAK;MACZ8B,gBAAgB,EAAEX,wBAAwB,CAACW,gBAAgB,IAAIrV,gBAAgB,CAAC2B,OAAO;MACvF2T,oBAAoB,EAAE,CAAC,CAAC,EAAEjW,CAAC,CAACmU,QAAQ,EAAE,MAAM,CAAC;MAC7C+B,aAAa,EAAEb,wBAAwB,CAACa,aAAa,IAAIlV,OAAO,CAACsB,OAAO;MACxE6T,cAAc,EAAE,CAAC;MACjB1P,KAAK,EAAEsB,MAAM;MACbvB,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC+V,eAAe,EAAErO,MAAM,EAAEsN,wBAAwB,CAAC;MACpEE,uBAAuB,EAAEA,uBAAuB;MAChDE,aAAa,EAAEA,aAAa;MAC5BD,qBAAqB,EAAEA,qBAAqB;MAC5CE,cAAc,EAAEA,cAAc;MAC9BpP,IAAI,EAAEA,IAAI;MACVC,KAAK,EAAEA,KAAK;MACZ8P,OAAO,EAAEhB,wBAAwB,CAACgB,OAAO,IAAI9G,eAAe;MAC5D+G,YAAY,EAAEjB,wBAAwB,CAACiB,YAAY,IAAI9G;IACzD,CAAC,CAAC,CAAC,GAAG,IAAI;EACZ,CAAC;EACD;;EAGA,IAAI+G,aAAa,GAAG,SAASA,aAAa,GAAG;IAC3C,IAAIC,qBAAqB;IAEzB,OAAOzS,WAAW,GAAG,aAAalE,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;MACpE6C,KAAK,EAAE,CAAC,CAAC,EAAElU,CAAC,CAACmU,QAAQ,EAAE,SAAS,CAAC;MACjC3N,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACoW,eAAe,GAAG;MACpC1C,SAAS,EAAE,iBAAiB;MAC5BC,OAAO,EAAEf;IACX,CAAC,EAAE,aAAapT,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,GAAG,EAAE;MAChD7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACqW,mBAAmB,EAAElQ,KAAK,EAAErC,eAAe,GAAGyC,mBAAmB,GAAGf,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC2Q,qBAAqB,GAAG3Q,eAAe,CAAC8C,OAAO,MAAM,IAAI,IAAI6N,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACG,IAAI,EAAE5O,MAAM;IACtS,CAAC,CAAC,CAAC,GAAG,IAAI;EACZ,CAAC;EACD;;EAGA,IAAI6O,4BAA4B,GAAGlP,2BAA2B,IAAI,IAAIpH,4BAA4B,CAACuW,2BAA2B,CAAC,CAAC,CAAC,CAAC;EAClI;;EAGA,IAAIC,WAAW,GAAG,SAASA,WAAW,GAAG;IACvC,IAAIC,qBAAqB;IAEzB,OAAOxR,cAAc,GAAG,aAAa1F,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAACpR,EAAE,CAAC+W,uBAAuB,EAAE;MAC5FC,mBAAmB,EAAEL,4BAA4B,CAACK,mBAAmB,IAAI,CAAC,CAAC,EAAEjX,CAAC,CAACmU,QAAQ,EAAE,cAAc,CAAC;MACxG+C,sBAAsB,EAAEN,4BAA4B,CAACM,sBAAsB,KAAK3R,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACwR,qBAAqB,GAAGxR,cAAc,CAAC8C,OAAO,MAAM,IAAI,IAAI0O,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACtO,IAAI,CAAC;MACpRsN,YAAY,EAAEa,4BAA4B,CAACb,YAAY,IAAIjV,YAAY,CAACwB,OAAO;MAC/E6U,YAAY,EAAEP,4BAA4B,CAACO,YAAY,IAAIxN,mBAAmB,CAACsK,IAAI,CAAChT,KAAK,CAAC;MAC1FwF,KAAK,EAAEsB,MAAM;MACbvB,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC+W,mBAAmB,EAAErP,MAAM,EAAE6O,4BAA4B;IAC7E,CAAC,CAAC,GAAG,IAAI;EACX,CAAC;EACD;;EAGA,IAAIS,6BAA6B,GAAGxP,4BAA4B,KAAK,IAAI,IAAIA,4BAA4B,KAAK,KAAK,CAAC,GAAGA,4BAA4B,GAAG,IAAIpH,6BAA6B,CAAC6W,4BAA4B,CAAC,CAAC,CAAC,CAAC;EACxN;;EAGA,IAAIC,WAAW,GAAG,SAASA,WAAW,GAAG;IACvC,OAAOpT,eAAe,GAAG,aAAatE,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAACpR,EAAE,CAACuX,wBAAwB,EAAE;MAC9FxD,OAAO,EAAEqD,6BAA6B,CAACrD,OAAO,IAAI1H,WAAW,CAAC2H,IAAI,CAAChT,KAAK,CAAC;MACzEoV,OAAO,EAAEgB,6BAA6B,CAAChB,OAAO,IAAI7F,kBAAkB;MACpEiH,SAAS,EAAEJ,6BAA6B,CAACI,SAAS,IAAI,CAAC,CAAC,EAAEzX,CAAC,CAACmU,QAAQ,EAAE,mBAAmB,CAAC;MAC1FuD,SAAS,EAAEL,6BAA6B,CAACK,SAAS,IAAI,CAAC,CAAC,EAAE1X,CAAC,CAACmU,QAAQ,EAAE,iBAAiB,CAAC;MACxFwD,WAAW,EAAEN,6BAA6B,CAACM,WAAW,IAAI,CAAC,CAAC,EAAE3X,CAAC,CAACmU,QAAQ,EAAE,SAAS,CAAC;MACpF1N,KAAK,EAAEsB,MAAM;MACbvB,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACuX,oBAAoB,EAAE7P,MAAM,EAAEsP,6BAA6B;IAC/E,CAAC,CAAC,GAAG,IAAI;EACX,CAAC;EACD;;EAGA,IAAIQ,WAAW,GAAG,SAASA,WAAW,GAAG;IACvC,OAAO,CAAC5Q,SAAS,GAAG,aAAapH,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;MACnE6C,KAAK,EAAE,CAAC,CAAC,EAAElU,CAAC,CAACmU,QAAQ,EAAE,OAAO,CAAC;MAC/B3N,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACyX,gBAAgB,GAAG;MACrC/D,SAAS,EAAE,eAAe;MAC1BC,OAAO,EAAEjB,iBAAiB,CAACkB,IAAI,CAAChT,KAAK;IACvC,CAAC,EAAE,aAAapB,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,GAAG,EAAE;MAChD7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC0X,iBAAiB,EAAEvR,KAAK,EAAEU,YAAY,EAAEa,MAAM;IAClE,CAAC,CAAC,CAAC,GAAG,IAAI;EACZ,CAAC;EACD;;EAGA,IAAIiQ,2BAA2B,GAAGrQ,0BAA0B,IAAI,IAAIpH,2BAA2B,CAAC0X,0BAA0B,CAAC,CAAC,CAAC,CAAC;EAC9H;;EAGA,IAAIC,UAAU,GAAG,SAASA,UAAU,GAAG;IACrC,IAAI/S,aAAa,CAAC6N,gBAAgB,EAAE;MAClC,IAAImF,oBAAoB,EAAEC,qBAAqB;MAE/C,OAAO,aAAavY,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAACrR,CAAC,CAAC0U,gBAAgB,EAAE;QACnEC,QAAQ,EAAE,KAAK;QACfC,CAAC,EAAEzP,aAAa,KAAK,IAAI,IAAIA,aAAa,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACgT,oBAAoB,GAAGhT,aAAa,CAAC0E,KAAK,MAAM,IAAI,IAAIsO,oBAAoB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,oBAAoB,CAACtD,OAAO;QACjMC,CAAC,EAAE3P,aAAa,KAAK,IAAI,IAAIA,aAAa,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAACiT,qBAAqB,GAAGjT,aAAa,CAAC0E,KAAK,MAAM,IAAI,IAAIuO,qBAAqB,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,qBAAqB,CAACrD,OAAO;QACpMvO,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACgY,sBAAsB,EAAEtQ,MAAM,EAAEiQ,2BAA2B;MAC/E,CAAC,EAAE,aAAanY,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAACpR,EAAE,CAACqY,sBAAsB,EAAE;QACtE7R,KAAK,EAAEsB,MAAM;QACbvB,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACkY,kBAAkB,EAAExQ,MAAM,EAAEiQ,2BAA2B,CAAC;QAC1EhE,OAAO,EAAE,CAACgE,2BAA2B,KAAK,IAAI,IAAIA,2BAA2B,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,2BAA2B,CAAChE,OAAO,KAAKtB,aAAa,CAACuB,IAAI,CAAChT,KAAK;MACtK,CAAC,CAAC,CAAC;IACL,CAAC,MAAM;MACL,OAAO,IAAI;IACb;EACF,CAAC;EACD;;EAGA,IAAIuX,kBAAkB,GAAG,SAASA,kBAAkB,GAAG;IACrD,IAAIC,qBAAqB;IAEzB,IAAI,CAACzR,gBAAgB,IAAI,EAAEb,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,IAAI,CAACsS,qBAAqB,GAAGtS,eAAe,CAACwC,OAAO,MAAM,IAAI,IAAI8P,qBAAqB,KAAK,KAAK,CAAC,IAAIA,qBAAqB,CAACnI,SAAS,CAAC,EAAE;MACvN,OAAO,aAAazQ,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;QACtD7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACqY,gBAAgB,GAAG;QACrC3E,SAAS,EAAE,mBAAmB;QAC9BC,OAAO,EAAEb,iBAAiB,CAACc,IAAI,CAAChT,KAAK;MACvC,CAAC,EAAE,aAAapB,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;QAClDsH,GAAG,EAAE5R,mBAAmB;QACxB6R,GAAG,EAAE7R,mBAAmB;QACxBmN,KAAK,EAAE,CAAC,CAAC,EAAElU,CAAC,CAACmU,QAAQ,EAAE,eAAe,CAAC;QACvC3N,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACwY,oBAAoB;MACxC,CAAC,CAAC,CAAC;IACL;IAEA,OAAO,IAAI;EACb,CAAC;EACD;;EAGA,IAAIC,UAAU,GAAG,SAASA,UAAU,GAAG;IACrC,OAAOvV,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,IAAIA,YAAY,CAACrB,MAAM,GAAG,aAAarC,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;MAChI6C,KAAK,EAAE,CAAC,CAAC,EAAElU,CAAC,CAACmU,QAAQ,EAAE,cAAc,CAAC;MACtC3N,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC0Y,eAAe,GAAG;MACpChF,SAAS,EAAE,cAAc;MACzBC,OAAO,EAAE/J;IACX,CAAC,EAAE,aAAapK,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,GAAG,EAAE;MAChD7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC2Y,gBAAgB,EAAExS,KAAK,EAAEY,iBAAiB,EAAEW,MAAM;IACtE,CAAC,CAAC,CAAC,GAAG,IAAI;EACZ,CAAC;EACD;;EAGA,IAAIkR,UAAU,GAAG,SAASA,UAAU,GAAG;IACrC,OAAOtT,cAAc,GAAG,aAAa9F,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;MACvE7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC6Y,iBAAiB,EAAE1S,KAAK,EAAEN,aAAa,EAAE6B,MAAM,CAAC;MAClEgM,SAAS,EAAE,sBAAsB;MACjCoF,eAAe,EAAE,MAAM;MACvBC,WAAW,EAAEvS,eAAe;MAC5BwS,GAAG,EAAErZ,CAAC,CAACsZ,iBAAiB,CAACC,MAAM,EAAE;MACjCC,OAAO,EAAEjJ,kBAAkB;MAC3BkJ,MAAM,EAAEtM,SAAS,CAAC8G,IAAI,CAAChT,KAAK,CAAC;MAC7ByY,SAAS,EAAE9P,kBAAkB;MAC7BjH,GAAG,EAAEwD;IACP,CAAC,CAAC,GAAG,IAAI;EACX,CAAC;EAED,CAAC,CAAC,EAAE/F,MAAM,CAACuZ,KAAK,EAAEjX,KAAK,EAAEqD,YAAY,EAAE/C,WAAW,EAAEI,aAAa,EAAEiD,OAAO,EAAErC,cAAc,EAAE6B,eAAe,EAAEjB,mBAAmB,EAAEgB,iBAAiB,EAAEhC,mBAAmB,EAAE6L,cAAc,EAAEtB,gBAAgB,EAAEuB,0BAA0B,EAAEO,4BAA4B,EAAE3D,WAAW,CAAC;EAClR,OAAO,aAAazM,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;IACtD7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACuZ,iBAAiB,EAAEpT,KAAK,EAAEuB,MAAM,CAAC;IACnDgM,SAAS,EAAE;EACb,CAAC,EAAE+C,WAAW,EAAE,EAAES,WAAW,EAAE,EAAEW,UAAU,EAAE,EAAE3D,gBAAgB,EAAE,EAAE,aAAa1U,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,OAAO,EAAE;IACpH5C,IAAI,EAAE,MAAM;IACZ9L,GAAG,EAAEyD,YAAY;IACjBI,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAACwZ,cAAc,GAAG;IACnCC,QAAQ,EAAEzL;EACZ,CAAC,CAAC,EAAE,aAAaxO,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;IACnD7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC0Z,kBAAkB,EAAEvT,KAAK,CAAC;IAC5CuN,SAAS,EAAE;EACb,CAAC,EAAE,aAAalU,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;IAClD2I,QAAQ,EAAE,IAAI;IACdxT,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC4Z,eAAe,EAAEzT,KAAK,EAAEuB,MAAM,CAAC;IACjDgM,SAAS,EAAE;EACb,CAAC,EAAEkF,UAAU,EAAE,EAAE,aAAapZ,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;IAChE7K,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC6Z,gBAAgB,EAAEhU,aAAa,EAAE2N,YAAY,EAAE,EAAE9L,MAAM,CAAC;IAC1EgM,SAAS,EAAE;EACb,CAAC,EAAEF,YAAY,EAAE,EAAE,aAAahU,MAAM,CAACyC,OAAO,CAAC+O,aAAa,CAAC,KAAK,EAAE;IAClE0C,SAAS,EAAE,wBAAwB;IACnCvN,KAAK,EAAE,CAAC,CAAC,EAAEnG,MAAM,CAAC8Z,iBAAiB;EACrC,CAAC,EAAE5D,aAAa,EAAE,EAAEsB,WAAW,EAAE,EAAEW,kBAAkB,EAAE,EAAEM,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC,EAAEnD,UAAU,EAAE,CAAC;AAC1F,CAAC,CAAC;AAEFnW,OAAO,CAACE,wBAAwB,GAAGA,wBAAwB;AAC3DA,wBAAwB,CAAC0a,YAAY,GAAG;EACtC9T,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAE1E,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE,IAAIpB,OAAO,CAAC2Z,UAAU,CAAC;IAC5DC,KAAK,EAAE,MAAM;IACbC,MAAM,EAAE,MAAM;IACdC,UAAU,EAAE,oBAAoB;IAChCC,MAAM,EAAE,8BAA8B;IACtCC,YAAY,EAAE,KAAK;IACnBC,gBAAgB,EAAE;EACpB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;IACPC,mBAAmB,EAAE,4BAA4B;IACjDC,oBAAoB,EAAE,sBAAsB;IAC5CC,kBAAkB,EAAE,wBAAwB;IAC5CC,kBAAkB,EAAE,MAAM;IAC1BC,eAAe,EAAE,EAAE;IACnBC,aAAa,EAAE,EAAE;IACjBC,cAAc,EAAE,EAAE;IAClBC,aAAa,EAAE,wBAAwB;IACvCC,eAAe,EAAE,wBAAwB;IACzCC,oBAAoB,EAAE;EACxB,CAAC,CAAC;EACF3U,iBAAiB,EAAE/F,gBAAgB,CAAC2B,OAAO;EAC3CsE,mBAAmB,EAAE,EAAE;EACvBC,eAAe,EAAE,CAAC,CAAC,EAAE7G,CAAC,CAACmU,QAAQ,EAAE,yBAAyB,CAAC;EAC3DrN,cAAc,EAAE,KAAK;EACrBC,mBAAmB,EAAEhG,MAAM,CAACuB,OAAO;EACnC0E,gBAAgB,EAAE,KAAK;EACvBC,SAAS,EAAE,KAAK;EAChBC,YAAY,EAAEtG,MAAM,CAAC0B,OAAO;EAC5B6E,cAAc,EAAE,IAAI;EACpBC,iBAAiB,EAAEvG,YAAY,CAACyB,OAAO;EACvC+E,YAAY,EAAE,IAAI;EAClBC,mBAAmB,EAAE,IAAI;EACzBC,iBAAiB,EAAE,IAAI;EACvBC,qBAAqB,EAAE,IAAI;EAC3BC,qBAAqB,EAAE,IAAI;EAC3B6T,0BAA0B,EAAE,IAAI;EAChC5T,2BAA2B,EAAE,IAAI;EACjCC,0BAA0B,EAAE,IAAI;EAChC4T,4BAA4B,EAAE,IAAI;EAClC3T,uBAAuB,EAAE,IAAI;EAC7BE,wBAAwB,EAAE;AAC5B,CAAC;AACDpI,wBAAwB,CAAC8b,SAAS,GAAG;EACnClV,IAAI,EAAExG,UAAU,CAACwC,OAAO,CAACnB,MAAM;EAC/BoF,KAAK,EAAEzG,UAAU,CAACwC,OAAO,CAACnB,MAAM;EAChCqF,KAAK,EAAE1G,UAAU,CAACwC,OAAO,CAACnB,MAAM;EAChCuF,iBAAiB,EAAE5G,UAAU,CAACwC,OAAO,CAACmZ,MAAM;EAC5C7U,mBAAmB,EAAE9G,UAAU,CAACwC,OAAO,CAACmZ,MAAM;EAC9C5U,eAAe,EAAE/G,UAAU,CAACwC,OAAO,CAACmZ,MAAM;EAC1C3U,cAAc,EAAEhH,UAAU,CAACwC,OAAO,CAACoZ,IAAI;EACvC3U,mBAAmB,EAAEjH,UAAU,CAACwC,OAAO,CAACmZ,MAAM;EAC9CzU,gBAAgB,EAAElH,UAAU,CAACwC,OAAO,CAACoZ,IAAI;EACzCzU,SAAS,EAAEnH,UAAU,CAACwC,OAAO,CAACoZ,IAAI;EAClCxU,YAAY,EAAEpH,UAAU,CAACwC,OAAO,CAACmZ,MAAM;EACvCjU,qBAAqB,EAAE1H,UAAU,CAACwC,OAAO,CAACoZ,IAAI;EAC9CjU,qBAAqB,EAAE3H,UAAU,CAACwC,OAAO,CAACoZ,IAAI;EAC9CJ,0BAA0B,EAAExb,UAAU,CAACwC,OAAO,CAACmZ,MAAM;EACrDtU,cAAc,EAAErH,UAAU,CAACwC,OAAO,CAACoZ,IAAI;EACvCtU,iBAAiB,EAAEtH,UAAU,CAACwC,OAAO,CAACmZ,MAAM;EAC5ClU,iBAAiB,EAAEzH,UAAU,CAACwC,OAAO,CAACqZ,IAAI;EAC1CtU,YAAY,EAAEvH,UAAU,CAACwC,OAAO,CAACsZ,KAAK;EACtCtU,mBAAmB,EAAExH,UAAU,CAACwC,OAAO,CAACsZ,KAAK;EAC7ClU,2BAA2B,EAAE5H,UAAU,CAACwC,OAAO,CAACnB,MAAM;EACtDwG,0BAA0B,EAAE7H,UAAU,CAACwC,OAAO,CAACnB,MAAM;EACrDoa,4BAA4B,EAAEzb,UAAU,CAACwC,OAAO,CAACnB,MAAM;EACvDyG,uBAAuB,EAAE9H,UAAU,CAACwC,OAAO,CAACnB,MAAM;EAClD2G,wBAAwB,EAAEhI,UAAU,CAACwC,OAAO,CAACnB;AAC/C,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}