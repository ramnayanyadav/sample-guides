{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatConversationList = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _controller = require(\"./controller\");\nvar _hooks = require(\"./hooks\");\nvar styles = _interopRequireWildcard(require(\"./style\"));\nvar _spinner = _interopRequireDefault(require(\"./resources/spinner.svg\"));\nvar _Shared = require(\"../../Shared\");\nvar _ = require(\"../\");\nvar _Chats = require(\"../../Chats\");\nvar _ConversationListCustomView = require(\"../ConversationListCustomView\");\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n\n/**\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @description CometChatConversationList component retrieves the latest conversations that a CometChat logged-in user has been a part of.\n * The state of the component is communicated via 3 states i.e empty, loading and error.\n *\n */\nvar ConversationList = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  var _theme$palette, _theme$palette2;\n\n  /**\n   * Props destructuring \n   */\n  var activeConversation = props.activeConversation,\n    emptyText = props.emptyText,\n    errorText = props.errorText,\n    conversationType = props.conversationType,\n    limit = props.limit,\n    hideError = props.hideError,\n    tags = props.tags,\n    userAndGroupTags = props.userAndGroupTags,\n    loadingIconURL = props.loadingIconURL,\n    style = props.style,\n    enableSoundForMessages = props.enableSoundForMessages,\n    customIncomingMessageSound = props.customIncomingMessageSound,\n    customView = props.customView,\n    conversationListItemConfiguration = props.conversationListItemConfiguration,\n    theme = props.theme;\n  /**\n   * Component internal state\n   */\n\n  var loggedInUser = (0, _react.useRef)(null);\n  var conversationListManager = (0, _react.useRef)(new _controller.ConversationListManager({\n    conversationType: conversationType,\n    limit: limit,\n    tags: tags,\n    userAndGroupTags: userAndGroupTags\n  }));\n  var _useState = (0, _react.useState)([]),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    conversationList = _useState2[0],\n    setConversationList = _useState2[1];\n  var _useState3 = (0, _react.useState)(null),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    callbackData = _useState4[0],\n    setCallbackData = _useState4[1];\n  var _useState5 = (0, _react.useState)((0, _Shared.localize)(\"LOADING\")),\n    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n    message = _useState6[0],\n    setMessage = _useState6[1];\n  var _useState7 = (0, _react.useState)({\n      show: false,\n      message: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n      confirmButtonText: (0, _Shared.localize)(\"DELETE\"),\n      conversation: null,\n      onCancel: function onCancel() {}\n    }),\n    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n    showConfirm = _useState8[0],\n    setShowConfirm = _useState8[1];\n  /**\n   * Component private scoping\n   */\n\n  var _conversationListItemConfiguration = new _Shared.ConversationListItemConfiguration(conversationListItemConfiguration !== null && conversationListItemConfiguration !== void 0 ? conversationListItemConfiguration : {});\n  var _theme = new _Shared.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n  /**\n   * Component internal handlers/methods \n   */\n\n  var conversationCallback = function conversationCallback(listenerName) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    setCallbackData({\n      name: listenerName,\n      args: [].concat(args)\n    });\n  };\n  /**\n   * Mark the incoming message as delivered\n   */\n\n  var markMessageAsDelivered = function markMessageAsDelivered(message) {\n    if (message.hasOwnProperty(\"deliveredAt\") === false) {\n      _chat.CometChat.markAsDelivered(message);\n    }\n  };\n  /**\n   *\n   * If the incoming message is 1-1 conversation, and the conversation type filter is set to groups return false\n   * If the incoming message is group conversation, and the conversation type filter is set to users return false\n   * else return true\n   *\n   */\n\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      resetUnreadCount: resetUnreadCount,\n      updateLastMessage: updateLastMessage,\n      removeConversation: removeConversation,\n      deleteConversation: deleteConversation,\n      updateConversation: updateConversation\n    };\n  });\n  var filterByConversationType = function filterByConversationType(message) {\n    if (conversationType !== _Shared.ConversationTypeConstants.both) {\n      if (conversationType === _Shared.ConversationTypeConstants.users && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.group || conversationType === _Shared.ConversationTypeConstants.groups && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.user) {\n        return false;\n      }\n    }\n    return true;\n  };\n  /**\n   *\n   * Converting message object received in the listener callback to conversation object\n   */\n\n  var getConversationFromMessage = function getConversationFromMessage(message) {\n    return new Promise(function (resolve, reject) {\n      _chat.CometChat.CometChatHelper.getConversationFromMessage(message).then(function (conversation) {\n        var conversationKey = conversationList.findIndex(function (c) {\n          return c.conversationId === conversation.conversationId;\n        });\n        if (conversationKey > -1) {\n          resolve({\n            conversationKey: conversationKey,\n            conversationId: conversation.conversationId,\n            conversationType: conversation.conversationType,\n            conversationWith: conversation.conversationWith,\n            conversation: conversationList[conversationKey],\n            conversations: (0, _toConsumableArray2.default)(conversationList)\n          });\n        }\n        resolve({\n          conversationKey: conversationKey,\n          conversationId: conversation.conversationId,\n          conversationType: conversation.conversationType,\n          conversationWith: conversation.conversationWith,\n          conversation: conversation,\n          conversations: (0, _toConsumableArray2.default)(conversationList)\n        });\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var getUnreadMessageCount = function getUnreadMessageCount(message) {\n    var conversation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var unreadMessageCount = conversation !== null && conversation !== void 0 && conversation.unreadMessageCount ? Number(conversation === null || conversation === void 0 ? void 0 : conversation.unreadMessageCount) : 0;\n    unreadMessageCount = shouldIncrementCount(message) ? ++unreadMessageCount : unreadMessageCount;\n    return unreadMessageCount;\n  };\n  /**\n   *\n   * If the message is sent by the logged in user, return false\n   * If the message has category message or has incrementUnreadCount key in the metadata with value set to true, return true else return false\n   *\n   */\n\n  var shouldIncrementCount = function shouldIncrementCount(message) {\n    var _message$sender, _loggedInUser$current, _message$metadata;\n    if ((message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.uid) === (loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current = loggedInUser.current) === null || _loggedInUser$current === void 0 ? void 0 : _loggedInUser$current.uid)) {\n      return false;\n    }\n    if ((message === null || message === void 0 ? void 0 : message.category) === _Shared.MessageCategoryConstants.message || (message === null || message === void 0 ? void 0 : (_message$metadata = message.metadata) === null || _message$metadata === void 0 ? void 0 : _message$metadata.incrementUnreadCount) === true) {\n      return true;\n    }\n    return false;\n  };\n  /**\n   * play notification sound for incoming messages\n   */\n\n  var playNotificationSound = function playNotificationSound(message) {\n    /**\n     * If unreadcount is not incremented, don't play notification sound\n     */\n    if (!shouldIncrementCount(message)) {\n      return false;\n    }\n    /**\n    * If customIncomingMessageSound url is present then CometChatSoundManager will play this sound \n    else play the default sound\n    */\n\n    if (enableSoundForMessages && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationType && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationWith) {\n      var _activeConversation$c, _activeConversation$c2;\n      var receiverType = message.getReceiverType();\n      var receiverId = receiverType === _Shared.ReceiverTypeConstants.user ? message.getSender().getUid() : message.getReceiverId();\n      if (receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c = activeConversation.conversationWith) === null || _activeConversation$c === void 0 ? void 0 : _activeConversation$c.uid) && receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c2 = activeConversation.conversationWith) === null || _activeConversation$c2 === void 0 ? void 0 : _activeConversation$c2.guid)) {\n        if (customIncomingMessageSound) {\n          _Shared.CometChatSoundManager.play(customIncomingMessageSound);\n        } else {\n          _Shared.CometChatSoundManager.play(_Shared.CometChatSoundManager.Sound.incomingMessageFromOther);\n        }\n      }\n    }\n  };\n  /**\n   *\n   * When a user goes online/ offline\n   */\n\n  var handleUsers = function handleUsers(user) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      return eachConversation.conversationType && eachConversation.conversationType === _Shared.ReceiverTypeConstants.user && eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === user.uid;\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2.default)(conversationList);\n      var conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread(_objectSpread({}, conversation.conversationWith), {}, {\n        status: user.getStatus()\n      });\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  /**\n   *\n   * When a text message / media message / custom message is received\n   */\n\n  var handleMessages = function handleMessages() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    /**\n     * marking the incoming messages as read\n     */\n\n    markMessageAsDelivered(message);\n    /**\n     * If the incoming message is 1-1 and the conversation type filter is set to group, return false\n     * OR\n     * If the incoming message is group and the conversation type filter is set to \"users\", return false\n     * ELSE\n     * return true\n     */\n\n    if (filterByConversationType() === false) {\n      return false;\n    }\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      var lastMessage = _objectSpread(_objectSpread({}, conversation === null || conversation === void 0 ? void 0 : conversation.lastMessage), message);\n      if (conversationKey > -1) {\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1);\n        conversations.unshift(newConversation);\n        setConversationList(conversations); //play notification sound\n\n        playNotificationSound(message);\n      } else {\n        var _unreadMessageCount = getUnreadMessageCount(message);\n        var _newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, _unreadMessageCount);\n        conversations.unshift(_newConversation);\n        setConversationList(conversations); //play notification sound\n\n        playNotificationSound(message);\n      }\n    });\n  };\n  /**\n   * Listener callback when a message is edited, deleted or updated\n   */\n\n  var handleMessageActions = function handleMessageActions() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1 && conversation.lastMessage.id === message.id) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback when a message is read\n   */\n\n  var handleMessageReadActions = function handleMessageReadActions() {\n    var messageReceipt = arguments.length <= 0 ? undefined : arguments[0];\n    var conversationKey = conversationList.findIndex(function (conversation) {\n      var _conversation$convers, _conversation$convers2;\n      return (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiverType) === (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) && ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers = conversation.conversationWith) === null || _conversation$convers === void 0 ? void 0 : _conversation$convers.uid) || (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers2 = conversation.conversationWith) === null || _conversation$convers2 === void 0 ? void 0 : _conversation$convers2.guid));\n    });\n    if (conversationKey > -1) {\n      var _conversation$lastMes;\n      var conversations = _objectSpread({}, conversationList);\n      var conversation = conversations[conversationKey];\n      var unreadMessageCount = getUnreadMessageCount(message, conversation);\n      /**\n       * If the message id in the read receipt is greater than or equal to the lastmessage id, set unreadmessagecount to 0\n       */\n\n      if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.messageId) >= (conversation === null || conversation === void 0 ? void 0 : (_conversation$lastMes = conversation.lastMessage) === null || _conversation$lastMes === void 0 ? void 0 : _conversation$lastMes.id)) {\n        unreadMessageCount = 0;\n      }\n      var newConversation = new _chat.CometChat.Conversation(conversation.conversationId, conversation.conversationType, conversation.lastMessage, conversation.conversationWith, unreadMessageCount);\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  /**\n   *\n   * Listener callback when a user joins/added to the group\n   */\n\n  var handleGroupMemberAddition = function handleGroupMemberAddition() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var newUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var _loggedInUser$current2;\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      } else if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current2 = loggedInUser.current) === null || _loggedInUser$current2 === void 0 ? void 0 : _loggedInUser$current2.uid) === newUser.uid) {\n        /**\n         * If the loggedin user is added to the group, add the conversation to the chats list\n         */\n        var _lastMessage = _objectSpread({}, message);\n        var _newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n          hasJoined: true\n        });\n        var _unreadMessageCount2 = getUnreadMessageCount(message, conversation);\n        var _newConversation2 = new _chat.CometChat.Conversation(conversationId, conversationType, _lastMessage, _newConversationWith, _unreadMessageCount2);\n        conversations.unshift(_newConversation2);\n        setConversationList(conversations);\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback when a member is kicked from / has left the group\n   */\n\n  var handleGroupMemberRemoval = function handleGroupMemberRemoval() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current3;\n\n        /**\n         * If the loggedin user is removed from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current3 = loggedInUser.current) === null || _loggedInUser$current3 === void 0 ? void 0 : _loggedInUser$current3.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback when a member is banned from the group\n   */\n\n  var handleGroupMemberBan = function handleGroupMemberBan() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current4;\n\n        /**\n         * If the loggedin user is banned from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current4 = loggedInUser.current) === null || _loggedInUser$current4 === void 0 ? void 0 : _loggedInUser$current4.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback when a group member scope is updated\n   */\n\n  var handleGroupMemberScopeChange = function handleGroupMemberScopeChange() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var user = arguments.length <= 1 ? undefined : arguments[1];\n    var newScope = arguments.length <= 2 ? undefined : arguments[2];\n    var group = arguments.length <= 4 ? undefined : arguments[4];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversationId = response.conversationId,\n        conversationType = response.conversationType,\n        conversationWith = response.conversationWith,\n        conversation = response.conversation,\n        conversations = response.conversations;\n      if (conversationKey > -1) {\n        var _loggedInUser$current5;\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current5 = loggedInUser.current) === null || _loggedInUser$current5 === void 0 ? void 0 : _loggedInUser$current5.uid) === user.uid) {\n          var newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n            scope: newScope\n          });\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1);\n          conversations.unshift(newConversation);\n          setConversationList(conversations);\n        } else {\n          var _newConversationWith2 = _objectSpread(_objectSpread({}, conversationWith), group);\n          var _newConversation3 = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, _newConversationWith2, unreadMessageCount);\n          conversations.splice(conversationKey, 1, _newConversation3);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback for typing events\n   */\n\n  var handleTyping = function handleTyping() {\n    var typingData = arguments.length <= 0 ? undefined : arguments[0];\n    var typingStarted = arguments.length <= 1 ? undefined : arguments[1];\n    var conversations = (0, _toConsumableArray2.default)(conversationList);\n    var conversationKey = conversations.findIndex(function (conversation) {\n      var _conversation$convers3, _typingData$sender, _conversation$convers4;\n      return (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) && ((conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === _Shared.ReceiverTypeConstants.user && ((_conversation$convers3 = conversation.conversationWith) === null || _conversation$convers3 === void 0 ? void 0 : _conversation$convers3.uid) === (typingData === null || typingData === void 0 ? void 0 : (_typingData$sender = typingData.sender) === null || _typingData$sender === void 0 ? void 0 : _typingData$sender.uid) || conversation.conversationType === _Shared.ReceiverTypeConstants.group && ((_conversation$convers4 = conversation.conversationWith) === null || _conversation$convers4 === void 0 ? void 0 : _conversation$convers4.guid) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverId));\n    });\n    if (conversationKey > -1) {\n      var typingIndicatorText = \"\";\n      if (typingStarted) {\n        var _typingData$sender2;\n        typingIndicatorText = (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) === _Shared.ReceiverTypeConstants.group ? \"\".concat(typingData === null || typingData === void 0 ? void 0 : (_typingData$sender2 = typingData.sender) === null || _typingData$sender2 === void 0 ? void 0 : _typingData$sender2.name, \" \").concat((0, _Shared.localize)(\"IS_TYPING\")) : (0, _Shared.localize)(\"IS_TYPING\");\n      }\n      var conversation = conversationList[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        showTypingIndicator: typingStarted,\n        typingIndicatorText: typingIndicatorText\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  /**\n   * \n   * @param {Object} conversation\n   * Public method to update the conversation list programmatically  \n   */\n\n  var updateConversation = function updateConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      var _conversation$convers5;\n      return eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers5 = conversation.conversationWith) === null || _conversation$convers5 === void 0 ? void 0 : _conversation$convers5.uid);\n    });\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2.default)(conversationList);\n      var _conversation = conversations[conversationKey];\n      var conversationWith = _objectSpread({}, _conversation.conversationWith);\n      var newConversation = _objectSpread(_objectSpread({}, _conversation), {}, {\n        conversationWith: conversationWith\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  var handlers = {\n    onUserOnline: handleUsers,\n    onUserOffline: handleUsers,\n    onTextMessageReceived: handleMessages,\n    onMediaMessageReceived: handleMessages,\n    onCustomMessageReceived: handleMessages,\n    onIncomingCallReceived: handleMessages,\n    onIncomingCallCancelled: handleMessages,\n    messageEdited: handleMessageActions,\n    onMessageDeleted: handleMessageActions,\n    messageRead: handleMessageReadActions,\n    onMemberAddedToGroup: handleGroupMemberAddition,\n    onGroupMemberJoined: handleGroupMemberAddition,\n    onGroupMemberKicked: handleGroupMemberRemoval,\n    onGroupMemberLeft: handleGroupMemberRemoval,\n    onGroupMemberBanned: handleGroupMemberBan,\n    onGroupMemberScopeChanged: handleGroupMemberScopeChange,\n    onTypingStarted: handleTyping,\n    onTypingEnded: handleTyping\n  };\n  var handleConversations = function handleConversations() {\n    getConversations().then(function (conversations) {\n      if (conversationList.length === 0 && conversations.length === 0) {\n        setMessage(\"NO_CHATS_FOUND\");\n      } else {\n        setMessage(\"\");\n      }\n      setConversationList(function (conversationList) {\n        return [].concat((0, _toConsumableArray2.default)(conversationList), (0, _toConsumableArray2.default)(conversations));\n      });\n    }).catch(function (error) {\n      _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n      setMessage(\"SOMETHING_WENT_WRONG\");\n    });\n  };\n  var getConversations = function getConversations() {\n    return new Promise(function (resolve, reject) {\n      conversationListManager === null || conversationListManager === void 0 ? void 0 : conversationListManager.current.fetchNextConversation().then(function (conversations) {\n        return resolve(conversations);\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n        reject(error);\n      });\n    });\n  };\n  var handleScroll = function handleScroll(event) {\n    var bottom = Math.round(event.currentTarget.scrollHeight - event.currentTarget.scrollTop) === Math.round(event.currentTarget.clientHeight);\n    if (bottom) {\n      handleConversations();\n    }\n  };\n  /**\n   * reset un read count\n   */\n\n  var resetUnreadCount = function resetUnreadCount(conversation) {\n    var conversations = (0, _toConsumableArray2.default)(conversationList);\n    var conversationKey = conversations.findIndex(function (conversationObject) {\n      return conversationObject.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var _conversation2 = conversations[conversationKey];\n      var newConversation = _objectSpread(_objectSpread({}, _conversation2), {}, {\n        unreadMessageCount: 0\n      });\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  /**\n   * update last message\n   */\n\n  var updateLastMessage = function updateLastMessage(message) {\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n        conversations = response.conversations,\n        conversation = response.conversation;\n      var lastMessage = _objectSpread({}, conversation.lastMessage);\n      if (conversationKey > -1) {\n        var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n          lastMessage: lastMessage\n        });\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      }\n    });\n  };\n  /**\n   * Remove conversation from the conversationlist upon delete\n   */\n\n  var removeConversation = function removeConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (c) {\n      return c.conversationId === conversation.conversationId;\n    });\n    if (conversationKey > -1) {\n      var newConversationList = (0, _toConsumableArray2.default)(conversationList);\n      newConversationList.splice(conversationKey, 1);\n      setConversationList(newConversationList);\n    }\n  };\n  var deleteConversation = function deleteConversation(conversationToBeDeleted) {\n    return new Promise(function (resolve, reject) {\n      var _conversationToBeDele, _conversationToBeDele2;\n      var conversationWith = (conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType) === _Shared.ReceiverTypeConstants.group ? conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele === void 0 ? void 0 : _conversationToBeDele.guid : conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele2 = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele2 === void 0 ? void 0 : _conversationToBeDele2.uid;\n      _chat.CometChat.deleteConversation(conversationWith, conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType).then(function (deletedConversation) {\n        setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n          show: false\n        }));\n        removeConversation(conversationToBeDeleted);\n        resolve(deletedConversation);\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onDeleteConversation, conversationToBeDeleted);\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, conversationToBeDeleted);\n        reject(error);\n      });\n    });\n  };\n  var cancelDelete = function cancelDelete() {\n    return setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: false\n    }));\n  };\n  var confirmDelete = function confirmDelete(conversation) {\n    setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: true,\n      conversation: conversation,\n      onCancel: cancelDelete\n    }));\n  };\n  var itemClickhandler = function itemClickhandler(e) {\n    _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onItemClick, e);\n  };\n  /**\n   * Component hooks\n   */\n\n  (0, _hooks.Hooks)(conversationType, limit, tags, userAndGroupTags, setConversationList, conversationCallback, conversationListManager, handlers, callbackData, loggedInUser, handleConversations, confirmDelete);\n  /**\n   * Component template scoping\n   */\n\n  var getCustomView = function getCustomView(customView, props) {\n    return /*#__PURE__*/_react.default.createElement(customView, props);\n  };\n  var getMessageContainer = function getMessageContainer() {\n    var messageContainer = null;\n    if (conversationList.length === 0 && message.toLowerCase() === (0, _Shared.localize)(\"LOADING\")) {\n      /**Loading custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.loading ? getCustomView(customView.loading, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageImgStyle(style, _theme, loadingIconURL),\n        className: \"message\"\n      }));\n    } else if (conversationList.length === 0 && message.toLowerCase() === 'no chats found') {\n      /**Empty custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.empty ? getCustomView(customView.empty, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, emptyText));\n    } else if (!hideError && message.toLowerCase() === 'something went wrong') {\n      /**Error custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.error ? getCustomView(customView.error, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, errorText));\n    }\n    return messageContainer;\n  };\n  var renderItems = conversationList.map(function (conversation) {\n    var _conversationOptions;\n    var typingIndicatorText = conversation !== null && conversation !== void 0 && conversation.typingIndicatorText ? conversation === null || conversation === void 0 ? void 0 : conversation.typingIndicatorText : \"\";\n    var isActive = (conversation === null || conversation === void 0 ? void 0 : conversation.conversationId) === (activeConversation === null || activeConversation === void 0 ? void 0 : activeConversation.conversationId) ? true : false;\n    /**\n     * Calculate conversations options for child component\n     */\n\n    var conversationOptions = _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationOptions;\n    if (((_conversationOptions = conversationOptions) === null || _conversationOptions === void 0 ? void 0 : _conversationOptions.length) == 0) {\n      conversationOptions = [new _Chats.CometChatConversationOptions({\n        id: _Shared.ConversationOptionConstants.delete,\n        title: (0, _Shared.localize)(\"DELETE\"),\n        iconURL: _delete.default,\n        onClick: function onClick() {\n          return confirmDelete(conversation);\n        }\n      })];\n    }\n    return /*#__PURE__*/_react.default.createElement(_Shared.CometChatConversationListItem, {\n      key: conversation.conversationId,\n      conversationObject: conversation,\n      isActive: isActive,\n      conversationInputData: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationInputData,\n      conversationOptions: conversationOptions,\n      style: new _Shared.ConversationListItemStyles(_objectSpread({}, styles.listItemStyle(style, _theme))),\n      hideDeletedMessages: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideDeletedMessages,\n      hideGroupActions: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideGroupActions,\n      showTypingIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.showTypingIndicator,\n      typingIndicatorText: typingIndicatorText,\n      hideThreadIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideThreadIndicator,\n      threadIndicatorText: (0, _Shared.localize)(\"IN_A_THREAD\"),\n      theme: _theme,\n      onClick: itemClickhandler.bind(_this),\n      avatarConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.avatarConfiguration,\n      statusIndicatorConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.statusIndicatorConfiguration,\n      badgeCountConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.badgeCountConfiguration,\n      messageReceiptConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.messageReceiptConfiguration,\n      loggedInUser: loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.current\n    });\n  });\n  /**\n   * Component template\n   */\n\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, getMessageContainer(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: styles.chatsListStyle(style, _theme),\n    className: \"conversation__list\",\n    onScroll: handleScroll\n  }, renderItems), /*#__PURE__*/_react.default.createElement(_Shared.CometChatBackdrop, {\n    isOpen: showConfirm.show,\n    onClick: showConfirm.onCancel,\n    background: _theme === null || _theme === void 0 ? void 0 : (_theme$palette = _theme.palette) === null || _theme$palette === void 0 ? void 0 : _theme$palette.accent200[_theme === null || _theme === void 0 ? void 0 : (_theme$palette2 = _theme.palette) === null || _theme$palette2 === void 0 ? void 0 : _theme$palette2.mode]\n  }, /*#__PURE__*/_react.default.createElement(_Shared.CometChatConfirmDialog, {\n    isOpen: showConfirm.show,\n    onConfirm: deleteConversation.bind(_this, showConfirm.conversation),\n    onCancel: showConfirm.onCancel,\n    style: styles.DialogStyle(_theme),\n    title: (0, _Shared.localize)(\"DELETE_CONVERSATION\"),\n    messageText: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n    confirmButtonText: (0, _Shared.localize)(\"CONFIRM_BUTTON_TEXT\"),\n    cancelButtonText: (0, _Shared.localize)(\"CANCEL_BUTTON_TEXT\")\n  })));\n});\n/**\n * Component default props\n */\n\nConversationList.defaultProps = {\n  loadingIconURL: _spinner.default\n};\n/**\n * Component default props types\n */\n\nConversationList.propTypes = {\n  conversationType: _propTypes.default.oneOf([\"users\", \"groups\", \"both\"]),\n  limit: _propTypes.default.number,\n  hideError: _propTypes.default.bool,\n  tags: _propTypes.default.array,\n  userAndGroupTags: _propTypes.default.bool,\n  emptyText: _propTypes.default.string,\n  errorText: _propTypes.default.string,\n  loadingIconURL: _propTypes.default.string,\n  style: _propTypes.default.object,\n  activeConversation: _propTypes.default.object,\n  enableSoundForMessages: _propTypes.default.bool,\n  customIncomingMessageSound: _propTypes.default.string,\n  customView: _propTypes.default.object,\n  conversationListItemConfiguration: _propTypes.default.object,\n  theme: _propTypes.default.object\n};\nvar CometChatConversationList = /*#__PURE__*/_react.default.memo(ConversationList);\nexports.CometChatConversationList = CometChatConversationList;","map":{"version":3,"names":["_interopRequireDefault","require","_typeof","Object","defineProperty","exports","value","CometChatConversationList","_defineProperty2","_toConsumableArray2","_slicedToArray2","_react","_interopRequireWildcard","_chat","_propTypes","_controller","_hooks","styles","_spinner","_Shared","_","_Chats","_ConversationListCustomView","_delete","_this","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","ConversationList","forwardRef","props","ref","_theme$palette","_theme$palette2","activeConversation","emptyText","errorText","conversationType","limit","hideError","tags","userAndGroupTags","loadingIconURL","style","enableSoundForMessages","customIncomingMessageSound","customView","conversationListItemConfiguration","theme","loggedInUser","useRef","conversationListManager","ConversationListManager","_useState","useState","_useState2","conversationList","setConversationList","_useState3","_useState4","callbackData","setCallbackData","_useState5","localize","_useState6","message","setMessage","_useState7","show","confirmButtonText","conversation","onCancel","_useState8","showConfirm","setShowConfirm","_conversationListItemConfiguration","ConversationListItemConfiguration","_theme","CometChatTheme","conversationCallback","listenerName","_len","args","Array","_key","name","concat","markMessageAsDelivered","CometChat","markAsDelivered","useImperativeHandle","resetUnreadCount","updateLastMessage","removeConversation","deleteConversation","updateConversation","filterByConversationType","ConversationTypeConstants","both","users","receiverType","ReceiverTypeConstants","group","groups","user","getConversationFromMessage","Promise","resolve","reject","CometChatHelper","then","conversationKey","findIndex","c","conversationId","conversationWith","conversations","catch","error","CometChatConversationEvents","emit","onError","getUnreadMessageCount","undefined","unreadMessageCount","Number","shouldIncrementCount","_message$sender","_loggedInUser$current","_message$metadata","sender","uid","current","category","MessageCategoryConstants","metadata","incrementUnreadCount","playNotificationSound","_activeConversation$c","_activeConversation$c2","getReceiverType","receiverId","getSender","getUid","getReceiverId","guid","CometChatSoundManager","play","Sound","incomingMessageFromOther","handleUsers","eachConversation","status","getStatus","newConversation","splice","handleMessages","response","lastMessage","Conversation","unshift","_unreadMessageCount","_newConversation","handleMessageActions","id","handleMessageReadActions","messageReceipt","_conversation$convers","_conversation$convers2","receiver","_conversation$lastMes","messageId","handleGroupMemberAddition","newUser","_loggedInUser$current2","newConversationWith","_lastMessage","_newConversationWith","hasJoined","_unreadMessageCount2","_newConversation2","handleGroupMemberRemoval","removedUser","_loggedInUser$current3","handleGroupMemberBan","_loggedInUser$current4","handleGroupMemberScopeChange","newScope","_loggedInUser$current5","scope","_newConversationWith2","_newConversation3","handleTyping","typingData","typingStarted","_conversation$convers3","_typingData$sender","_conversation$convers4","typingIndicatorText","_typingData$sender2","showTypingIndicator","_conversation$convers5","_conversation","handlers","onUserOnline","onUserOffline","onTextMessageReceived","onMediaMessageReceived","onCustomMessageReceived","onIncomingCallReceived","onIncomingCallCancelled","messageEdited","onMessageDeleted","messageRead","onMemberAddedToGroup","onGroupMemberJoined","onGroupMemberKicked","onGroupMemberLeft","onGroupMemberBanned","onGroupMemberScopeChanged","onTypingStarted","onTypingEnded","handleConversations","getConversations","fetchNextConversation","handleScroll","event","bottom","Math","round","currentTarget","scrollHeight","scrollTop","clientHeight","conversationObject","_conversation2","newConversationList","conversationToBeDeleted","_conversationToBeDele","_conversationToBeDele2","deletedConversation","onDeleteConversation","cancelDelete","confirmDelete","itemClickhandler","e","onItemClick","Hooks","getCustomView","createElement","getMessageContainer","messageContainer","toLowerCase","messageContainerStyle","className","loading","messageImgStyle","empty","messageTextStyle","renderItems","map","_conversationOptions","isActive","conversationOptions","CometChatConversationOptions","ConversationOptionConstants","delete","title","iconURL","onClick","CometChatConversationListItem","conversationInputData","ConversationListItemStyles","listItemStyle","hideDeletedMessages","hideGroupActions","hideThreadIndicator","threadIndicatorText","bind","avatarConfiguration","statusIndicatorConfiguration","badgeCountConfiguration","messageReceiptConfiguration","Fragment","chatsListStyle","onScroll","CometChatBackdrop","isOpen","background","palette","accent200","mode","CometChatConfirmDialog","onConfirm","DialogStyle","messageText","cancelButtonText","defaultProps","propTypes","oneOf","number","bool","array","string","memo"],"sources":["/home/admin1/dev/react/react-sample-guide/sample-react-guides/node_modules/cometchat-react-ui-kit/dist/Chats/CometChatConversationList/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatConversationList = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _chat = require(\"@cometchat-pro/chat\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _controller = require(\"./controller\");\n\nvar _hooks = require(\"./hooks\");\n\nvar styles = _interopRequireWildcard(require(\"./style\"));\n\nvar _spinner = _interopRequireDefault(require(\"./resources/spinner.svg\"));\n\nvar _Shared = require(\"../../Shared\");\n\nvar _ = require(\"../\");\n\nvar _Chats = require(\"../../Chats\");\n\nvar _ConversationListCustomView = require(\"../ConversationListCustomView\");\n\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\n\nvar _this = void 0;\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n/**\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @description CometChatConversationList component retrieves the latest conversations that a CometChat logged-in user has been a part of.\n * The state of the component is communicated via 3 states i.e empty, loading and error.\n *\n */\nvar ConversationList = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  var _theme$palette, _theme$palette2;\n\n  /**\n   * Props destructuring \n   */\n  var activeConversation = props.activeConversation,\n      emptyText = props.emptyText,\n      errorText = props.errorText,\n      conversationType = props.conversationType,\n      limit = props.limit,\n      hideError = props.hideError,\n      tags = props.tags,\n      userAndGroupTags = props.userAndGroupTags,\n      loadingIconURL = props.loadingIconURL,\n      style = props.style,\n      enableSoundForMessages = props.enableSoundForMessages,\n      customIncomingMessageSound = props.customIncomingMessageSound,\n      customView = props.customView,\n      conversationListItemConfiguration = props.conversationListItemConfiguration,\n      theme = props.theme;\n  /**\n   * Component internal state\n   */\n\n  var loggedInUser = (0, _react.useRef)(null);\n  var conversationListManager = (0, _react.useRef)(new _controller.ConversationListManager({\n    conversationType: conversationType,\n    limit: limit,\n    tags: tags,\n    userAndGroupTags: userAndGroupTags\n  }));\n\n  var _useState = (0, _react.useState)([]),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      conversationList = _useState2[0],\n      setConversationList = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      callbackData = _useState4[0],\n      setCallbackData = _useState4[1];\n\n  var _useState5 = (0, _react.useState)((0, _Shared.localize)(\"LOADING\")),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      message = _useState6[0],\n      setMessage = _useState6[1];\n\n  var _useState7 = (0, _react.useState)({\n    show: false,\n    message: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n    confirmButtonText: (0, _Shared.localize)(\"DELETE\"),\n    conversation: null,\n    onCancel: function onCancel() {}\n  }),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      showConfirm = _useState8[0],\n      setShowConfirm = _useState8[1];\n  /**\n   * Component private scoping\n   */\n\n\n  var _conversationListItemConfiguration = new _Shared.ConversationListItemConfiguration(conversationListItemConfiguration !== null && conversationListItemConfiguration !== void 0 ? conversationListItemConfiguration : {});\n\n  var _theme = new _Shared.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n  /**\n   * Component internal handlers/methods \n   */\n\n\n  var conversationCallback = function conversationCallback(listenerName) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    setCallbackData({\n      name: listenerName,\n      args: [].concat(args)\n    });\n  };\n  /**\n   * Mark the incoming message as delivered\n   */\n\n\n  var markMessageAsDelivered = function markMessageAsDelivered(message) {\n    if (message.hasOwnProperty(\"deliveredAt\") === false) {\n      _chat.CometChat.markAsDelivered(message);\n    }\n  };\n  /**\n   *\n   * If the incoming message is 1-1 conversation, and the conversation type filter is set to groups return false\n   * If the incoming message is group conversation, and the conversation type filter is set to users return false\n   * else return true\n   *\n   */\n\n\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      resetUnreadCount: resetUnreadCount,\n      updateLastMessage: updateLastMessage,\n      removeConversation: removeConversation,\n      deleteConversation: deleteConversation,\n      updateConversation: updateConversation\n    };\n  });\n\n  var filterByConversationType = function filterByConversationType(message) {\n    if (conversationType !== _Shared.ConversationTypeConstants.both) {\n      if (conversationType === _Shared.ConversationTypeConstants.users && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.group || conversationType === _Shared.ConversationTypeConstants.groups && (message === null || message === void 0 ? void 0 : message.receiverType) === _Shared.ReceiverTypeConstants.user) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n  /**\n   *\n   * Converting message object received in the listener callback to conversation object\n   */\n\n\n  var getConversationFromMessage = function getConversationFromMessage(message) {\n    return new Promise(function (resolve, reject) {\n      _chat.CometChat.CometChatHelper.getConversationFromMessage(message).then(function (conversation) {\n        var conversationKey = conversationList.findIndex(function (c) {\n          return c.conversationId === conversation.conversationId;\n        });\n\n        if (conversationKey > -1) {\n          resolve({\n            conversationKey: conversationKey,\n            conversationId: conversation.conversationId,\n            conversationType: conversation.conversationType,\n            conversationWith: conversation.conversationWith,\n            conversation: conversationList[conversationKey],\n            conversations: (0, _toConsumableArray2.default)(conversationList)\n          });\n        }\n\n        resolve({\n          conversationKey: conversationKey,\n          conversationId: conversation.conversationId,\n          conversationType: conversation.conversationType,\n          conversationWith: conversation.conversationWith,\n          conversation: conversation,\n          conversations: (0, _toConsumableArray2.default)(conversationList)\n        });\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n\n        reject(error);\n      });\n    });\n  };\n\n  var getUnreadMessageCount = function getUnreadMessageCount(message) {\n    var conversation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var unreadMessageCount = conversation !== null && conversation !== void 0 && conversation.unreadMessageCount ? Number(conversation === null || conversation === void 0 ? void 0 : conversation.unreadMessageCount) : 0;\n    unreadMessageCount = shouldIncrementCount(message) ? ++unreadMessageCount : unreadMessageCount;\n    return unreadMessageCount;\n  };\n  /**\n   *\n   * If the message is sent by the logged in user, return false\n   * If the message has category message or has incrementUnreadCount key in the metadata with value set to true, return true else return false\n   *\n   */\n\n\n  var shouldIncrementCount = function shouldIncrementCount(message) {\n    var _message$sender, _loggedInUser$current, _message$metadata;\n\n    if ((message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.uid) === (loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current = loggedInUser.current) === null || _loggedInUser$current === void 0 ? void 0 : _loggedInUser$current.uid)) {\n      return false;\n    }\n\n    if ((message === null || message === void 0 ? void 0 : message.category) === _Shared.MessageCategoryConstants.message || (message === null || message === void 0 ? void 0 : (_message$metadata = message.metadata) === null || _message$metadata === void 0 ? void 0 : _message$metadata.incrementUnreadCount) === true) {\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   * play notification sound for incoming messages\n   */\n\n\n  var playNotificationSound = function playNotificationSound(message) {\n    /**\n     * If unreadcount is not incremented, don't play notification sound\n     */\n    if (!shouldIncrementCount(message)) {\n      return false;\n    }\n    /**\n    * If customIncomingMessageSound url is present then CometChatSoundManager will play this sound \n    else play the default sound\n    */\n\n\n    if (enableSoundForMessages && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationType && activeConversation !== null && activeConversation !== void 0 && activeConversation.conversationWith) {\n      var _activeConversation$c, _activeConversation$c2;\n\n      var receiverType = message.getReceiverType();\n      var receiverId = receiverType === _Shared.ReceiverTypeConstants.user ? message.getSender().getUid() : message.getReceiverId();\n\n      if (receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c = activeConversation.conversationWith) === null || _activeConversation$c === void 0 ? void 0 : _activeConversation$c.uid) && receiverId !== (activeConversation === null || activeConversation === void 0 ? void 0 : (_activeConversation$c2 = activeConversation.conversationWith) === null || _activeConversation$c2 === void 0 ? void 0 : _activeConversation$c2.guid)) {\n        if (customIncomingMessageSound) {\n          _Shared.CometChatSoundManager.play(customIncomingMessageSound);\n        } else {\n          _Shared.CometChatSoundManager.play(_Shared.CometChatSoundManager.Sound.incomingMessageFromOther);\n        }\n      }\n    }\n  };\n  /**\n   *\n   * When a user goes online/ offline\n   */\n\n\n  var handleUsers = function handleUsers(user) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      return eachConversation.conversationType && eachConversation.conversationType === _Shared.ReceiverTypeConstants.user && eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === user.uid;\n    });\n\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2.default)(conversationList);\n      var conversation = conversations[conversationKey];\n\n      var conversationWith = _objectSpread(_objectSpread({}, conversation.conversationWith), {}, {\n        status: user.getStatus()\n      });\n\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        conversationWith: conversationWith\n      });\n\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  /**\n   *\n   * When a text message / media message / custom message is received\n   */\n\n\n  var handleMessages = function handleMessages() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    /**\n     * marking the incoming messages as read\n     */\n\n    markMessageAsDelivered(message);\n    /**\n     * If the incoming message is 1-1 and the conversation type filter is set to group, return false\n     * OR\n     * If the incoming message is group and the conversation type filter is set to \"users\", return false\n     * ELSE\n     * return true\n     */\n\n    if (filterByConversationType() === false) {\n      return false;\n    }\n\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n          conversationId = response.conversationId,\n          conversationType = response.conversationType,\n          conversationWith = response.conversationWith,\n          conversation = response.conversation,\n          conversations = response.conversations;\n\n      var lastMessage = _objectSpread(_objectSpread({}, conversation === null || conversation === void 0 ? void 0 : conversation.lastMessage), message);\n\n      if (conversationKey > -1) {\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1);\n        conversations.unshift(newConversation);\n        setConversationList(conversations); //play notification sound\n\n        playNotificationSound(message);\n      } else {\n        var _unreadMessageCount = getUnreadMessageCount(message);\n\n        var _newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, _unreadMessageCount);\n\n        conversations.unshift(_newConversation);\n        setConversationList(conversations); //play notification sound\n\n        playNotificationSound(message);\n      }\n    });\n  };\n  /**\n   * Listener callback when a message is edited, deleted or updated\n   */\n\n\n  var handleMessageActions = function handleMessageActions() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n          conversationId = response.conversationId,\n          conversationType = response.conversationType,\n          conversationWith = response.conversationWith,\n          conversation = response.conversation,\n          conversations = response.conversations;\n\n      if (conversationKey > -1 && conversation.lastMessage.id === message.id) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, conversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback when a message is read\n   */\n\n\n  var handleMessageReadActions = function handleMessageReadActions() {\n    var messageReceipt = arguments.length <= 0 ? undefined : arguments[0];\n    var conversationKey = conversationList.findIndex(function (conversation) {\n      var _conversation$convers, _conversation$convers2;\n\n      return (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiverType) === (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) && ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers = conversation.conversationWith) === null || _conversation$convers === void 0 ? void 0 : _conversation$convers.uid) || (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.receiver) === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers2 = conversation.conversationWith) === null || _conversation$convers2 === void 0 ? void 0 : _conversation$convers2.guid));\n    });\n\n    if (conversationKey > -1) {\n      var _conversation$lastMes;\n\n      var conversations = _objectSpread({}, conversationList);\n\n      var conversation = conversations[conversationKey];\n      var unreadMessageCount = getUnreadMessageCount(message, conversation);\n      /**\n       * If the message id in the read receipt is greater than or equal to the lastmessage id, set unreadmessagecount to 0\n       */\n\n      if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.messageId) >= (conversation === null || conversation === void 0 ? void 0 : (_conversation$lastMes = conversation.lastMessage) === null || _conversation$lastMes === void 0 ? void 0 : _conversation$lastMes.id)) {\n        unreadMessageCount = 0;\n      }\n\n      var newConversation = new _chat.CometChat.Conversation(conversation.conversationId, conversation.conversationType, conversation.lastMessage, conversation.conversationWith, unreadMessageCount);\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  /**\n   *\n   * Listener callback when a user joins/added to the group\n   */\n\n\n  var handleGroupMemberAddition = function handleGroupMemberAddition() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var newUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var _loggedInUser$current2;\n\n      var conversationKey = response.conversationKey,\n          conversationId = response.conversationId,\n          conversationType = response.conversationType,\n          conversationWith = response.conversationWith,\n          conversation = response.conversation,\n          conversations = response.conversations;\n\n      if (conversationKey > -1) {\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n\n        var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n        var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      } else if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current2 = loggedInUser.current) === null || _loggedInUser$current2 === void 0 ? void 0 : _loggedInUser$current2.uid) === newUser.uid) {\n        /**\n         * If the loggedin user is added to the group, add the conversation to the chats list\n         */\n        var _lastMessage = _objectSpread({}, message);\n\n        var _newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n          hasJoined: true\n        });\n\n        var _unreadMessageCount2 = getUnreadMessageCount(message, conversation);\n\n        var _newConversation2 = new _chat.CometChat.Conversation(conversationId, conversationType, _lastMessage, _newConversationWith, _unreadMessageCount2);\n\n        conversations.unshift(_newConversation2);\n        setConversationList(conversations);\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback when a member is kicked from / has left the group\n   */\n\n\n  var handleGroupMemberRemoval = function handleGroupMemberRemoval() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n          conversationId = response.conversationId,\n          conversationType = response.conversationType,\n          conversationWith = response.conversationWith,\n          conversation = response.conversation,\n          conversations = response.conversations;\n\n      if (conversationKey > -1) {\n        var _loggedInUser$current3;\n\n        /**\n         * If the loggedin user is removed from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current3 = loggedInUser.current) === null || _loggedInUser$current3 === void 0 ? void 0 : _loggedInUser$current3.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback when a member is banned from the group\n   */\n\n\n  var handleGroupMemberBan = function handleGroupMemberBan() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var removedUser = arguments.length <= 1 ? undefined : arguments[1];\n    var group = arguments.length <= 3 ? undefined : arguments[3];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n          conversationId = response.conversationId,\n          conversationType = response.conversationType,\n          conversationWith = response.conversationWith,\n          conversation = response.conversation,\n          conversations = response.conversations;\n\n      if (conversationKey > -1) {\n        var _loggedInUser$current4;\n\n        /**\n         * If the loggedin user is banned from the group, remove the conversation from the chats list\n         */\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current4 = loggedInUser.current) === null || _loggedInUser$current4 === void 0 ? void 0 : _loggedInUser$current4.uid) === removedUser.uid) {\n          conversations.splice(conversationKey, 1);\n          setConversationList(conversations);\n        } else {\n          var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n\n          var newConversationWith = _objectSpread(_objectSpread({}, conversationWith), group);\n\n          var unreadMessageCount = getUnreadMessageCount(message, conversation);\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1, newConversation);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback when a group member scope is updated\n   */\n\n\n  var handleGroupMemberScopeChange = function handleGroupMemberScopeChange() {\n    var message = arguments.length <= 0 ? undefined : arguments[0];\n    var user = arguments.length <= 1 ? undefined : arguments[1];\n    var newScope = arguments.length <= 2 ? undefined : arguments[2];\n    var group = arguments.length <= 4 ? undefined : arguments[4];\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n          conversationId = response.conversationId,\n          conversationType = response.conversationType,\n          conversationWith = response.conversationWith,\n          conversation = response.conversation,\n          conversations = response.conversations;\n\n      if (conversationKey > -1) {\n        var _loggedInUser$current5;\n\n        var lastMessage = _objectSpread(_objectSpread({}, conversation.lastMessage), message);\n\n        var unreadMessageCount = getUnreadMessageCount(message, conversation);\n\n        if ((loggedInUser === null || loggedInUser === void 0 ? void 0 : (_loggedInUser$current5 = loggedInUser.current) === null || _loggedInUser$current5 === void 0 ? void 0 : _loggedInUser$current5.uid) === user.uid) {\n          var newConversationWith = _objectSpread(_objectSpread(_objectSpread({}, conversationWith), group), {}, {\n            scope: newScope\n          });\n\n          var newConversation = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, newConversationWith, unreadMessageCount);\n          conversations.splice(conversationKey, 1);\n          conversations.unshift(newConversation);\n          setConversationList(conversations);\n        } else {\n          var _newConversationWith2 = _objectSpread(_objectSpread({}, conversationWith), group);\n\n          var _newConversation3 = new _chat.CometChat.Conversation(conversationId, conversationType, lastMessage, _newConversationWith2, unreadMessageCount);\n\n          conversations.splice(conversationKey, 1, _newConversation3);\n          setConversationList(conversations);\n        }\n      }\n    });\n  };\n  /**\n   *\n   * Listener callback for typing events\n   */\n\n\n  var handleTyping = function handleTyping() {\n    var typingData = arguments.length <= 0 ? undefined : arguments[0];\n    var typingStarted = arguments.length <= 1 ? undefined : arguments[1];\n    var conversations = (0, _toConsumableArray2.default)(conversationList);\n    var conversationKey = conversations.findIndex(function (conversation) {\n      var _conversation$convers3, _typingData$sender, _conversation$convers4;\n\n      return (conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) && ((conversation === null || conversation === void 0 ? void 0 : conversation.conversationType) === _Shared.ReceiverTypeConstants.user && ((_conversation$convers3 = conversation.conversationWith) === null || _conversation$convers3 === void 0 ? void 0 : _conversation$convers3.uid) === (typingData === null || typingData === void 0 ? void 0 : (_typingData$sender = typingData.sender) === null || _typingData$sender === void 0 ? void 0 : _typingData$sender.uid) || conversation.conversationType === _Shared.ReceiverTypeConstants.group && ((_conversation$convers4 = conversation.conversationWith) === null || _conversation$convers4 === void 0 ? void 0 : _conversation$convers4.guid) === (typingData === null || typingData === void 0 ? void 0 : typingData.receiverId));\n    });\n\n    if (conversationKey > -1) {\n      var typingIndicatorText = \"\";\n\n      if (typingStarted) {\n        var _typingData$sender2;\n\n        typingIndicatorText = (typingData === null || typingData === void 0 ? void 0 : typingData.receiverType) === _Shared.ReceiverTypeConstants.group ? \"\".concat(typingData === null || typingData === void 0 ? void 0 : (_typingData$sender2 = typingData.sender) === null || _typingData$sender2 === void 0 ? void 0 : _typingData$sender2.name, \" \").concat((0, _Shared.localize)(\"IS_TYPING\")) : (0, _Shared.localize)(\"IS_TYPING\");\n      }\n\n      var conversation = conversationList[conversationKey];\n\n      var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n        showTypingIndicator: typingStarted,\n        typingIndicatorText: typingIndicatorText\n      });\n\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  /**\n   * \n   * @param {Object} conversation\n   * Public method to update the conversation list programmatically  \n   */\n\n\n  var updateConversation = function updateConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (eachConversation) {\n      var _conversation$convers5;\n\n      return eachConversation.conversationWith && eachConversation.conversationWith.uid && eachConversation.conversationWith.uid === (conversation === null || conversation === void 0 ? void 0 : (_conversation$convers5 = conversation.conversationWith) === null || _conversation$convers5 === void 0 ? void 0 : _conversation$convers5.uid);\n    });\n\n    if (conversationKey > -1) {\n      var conversations = (0, _toConsumableArray2.default)(conversationList);\n      var _conversation = conversations[conversationKey];\n\n      var conversationWith = _objectSpread({}, _conversation.conversationWith);\n\n      var newConversation = _objectSpread(_objectSpread({}, _conversation), {}, {\n        conversationWith: conversationWith\n      });\n\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n\n  var handlers = {\n    onUserOnline: handleUsers,\n    onUserOffline: handleUsers,\n    onTextMessageReceived: handleMessages,\n    onMediaMessageReceived: handleMessages,\n    onCustomMessageReceived: handleMessages,\n    onIncomingCallReceived: handleMessages,\n    onIncomingCallCancelled: handleMessages,\n    messageEdited: handleMessageActions,\n    onMessageDeleted: handleMessageActions,\n    messageRead: handleMessageReadActions,\n    onMemberAddedToGroup: handleGroupMemberAddition,\n    onGroupMemberJoined: handleGroupMemberAddition,\n    onGroupMemberKicked: handleGroupMemberRemoval,\n    onGroupMemberLeft: handleGroupMemberRemoval,\n    onGroupMemberBanned: handleGroupMemberBan,\n    onGroupMemberScopeChanged: handleGroupMemberScopeChange,\n    onTypingStarted: handleTyping,\n    onTypingEnded: handleTyping\n  };\n\n  var handleConversations = function handleConversations() {\n    getConversations().then(function (conversations) {\n      if (conversationList.length === 0 && conversations.length === 0) {\n        setMessage(\"NO_CHATS_FOUND\");\n      } else {\n        setMessage(\"\");\n      }\n\n      setConversationList(function (conversationList) {\n        return [].concat((0, _toConsumableArray2.default)(conversationList), (0, _toConsumableArray2.default)(conversations));\n      });\n    }).catch(function (error) {\n      _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n\n      setMessage(\"SOMETHING_WENT_WRONG\");\n    });\n  };\n\n  var getConversations = function getConversations() {\n    return new Promise(function (resolve, reject) {\n      conversationListManager === null || conversationListManager === void 0 ? void 0 : conversationListManager.current.fetchNextConversation().then(function (conversations) {\n        return resolve(conversations);\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, error);\n\n        reject(error);\n      });\n    });\n  };\n\n  var handleScroll = function handleScroll(event) {\n    var bottom = Math.round(event.currentTarget.scrollHeight - event.currentTarget.scrollTop) === Math.round(event.currentTarget.clientHeight);\n\n    if (bottom) {\n      handleConversations();\n    }\n  };\n  /**\n   * reset un read count\n   */\n\n\n  var resetUnreadCount = function resetUnreadCount(conversation) {\n    var conversations = (0, _toConsumableArray2.default)(conversationList);\n    var conversationKey = conversations.findIndex(function (conversationObject) {\n      return conversationObject.conversationId === conversation.conversationId;\n    });\n\n    if (conversationKey > -1) {\n      var _conversation2 = conversations[conversationKey];\n\n      var newConversation = _objectSpread(_objectSpread({}, _conversation2), {}, {\n        unreadMessageCount: 0\n      });\n\n      conversations.splice(conversationKey, 1, newConversation);\n      setConversationList(conversations);\n    }\n  };\n  /**\n   * update last message\n   */\n\n\n  var updateLastMessage = function updateLastMessage(message) {\n    getConversationFromMessage(message).then(function (response) {\n      var conversationKey = response.conversationKey,\n          conversations = response.conversations,\n          conversation = response.conversation;\n\n      var lastMessage = _objectSpread({}, conversation.lastMessage);\n\n      if (conversationKey > -1) {\n        var newConversation = _objectSpread(_objectSpread({}, conversation), {}, {\n          lastMessage: lastMessage\n        });\n\n        conversations.splice(conversationKey, 1, newConversation);\n        setConversationList(conversations);\n      }\n    });\n  };\n  /**\n   * Remove conversation from the conversationlist upon delete\n   */\n\n\n  var removeConversation = function removeConversation(conversation) {\n    var conversationKey = conversationList.findIndex(function (c) {\n      return c.conversationId === conversation.conversationId;\n    });\n\n    if (conversationKey > -1) {\n      var newConversationList = (0, _toConsumableArray2.default)(conversationList);\n      newConversationList.splice(conversationKey, 1);\n      setConversationList(newConversationList);\n    }\n  };\n\n  var deleteConversation = function deleteConversation(conversationToBeDeleted) {\n    return new Promise(function (resolve, reject) {\n      var _conversationToBeDele, _conversationToBeDele2;\n\n      var conversationWith = (conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType) === _Shared.ReceiverTypeConstants.group ? conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele === void 0 ? void 0 : _conversationToBeDele.guid : conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : (_conversationToBeDele2 = conversationToBeDeleted.conversationWith) === null || _conversationToBeDele2 === void 0 ? void 0 : _conversationToBeDele2.uid;\n\n      _chat.CometChat.deleteConversation(conversationWith, conversationToBeDeleted === null || conversationToBeDeleted === void 0 ? void 0 : conversationToBeDeleted.conversationType).then(function (deletedConversation) {\n        setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n          show: false\n        }));\n        removeConversation(conversationToBeDeleted);\n        resolve(deletedConversation);\n\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onDeleteConversation, conversationToBeDeleted);\n      }).catch(function (error) {\n        _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onError, conversationToBeDeleted);\n\n        reject(error);\n      });\n    });\n  };\n\n  var cancelDelete = function cancelDelete() {\n    return setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: false\n    }));\n  };\n\n  var confirmDelete = function confirmDelete(conversation) {\n    setShowConfirm(_objectSpread(_objectSpread({}, showConfirm), {}, {\n      show: true,\n      conversation: conversation,\n      onCancel: cancelDelete\n    }));\n  };\n\n  var itemClickhandler = function itemClickhandler(e) {\n    _.CometChatConversationEvents.emit(_.CometChatConversationEvents.onItemClick, e);\n  };\n  /**\n   * Component hooks\n   */\n\n\n  (0, _hooks.Hooks)(conversationType, limit, tags, userAndGroupTags, setConversationList, conversationCallback, conversationListManager, handlers, callbackData, loggedInUser, handleConversations, confirmDelete);\n  /**\n   * Component template scoping\n   */\n\n  var getCustomView = function getCustomView(customView, props) {\n    return /*#__PURE__*/_react.default.createElement(customView, props);\n  };\n\n  var getMessageContainer = function getMessageContainer() {\n    var messageContainer = null;\n\n    if (conversationList.length === 0 && message.toLowerCase() === (0, _Shared.localize)(\"LOADING\")) {\n      /**Loading custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.loading ? getCustomView(customView.loading, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageImgStyle(style, _theme, loadingIconURL),\n        className: \"message\"\n      }));\n    } else if (conversationList.length === 0 && message.toLowerCase() === 'no chats found') {\n      /**Empty custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.empty ? getCustomView(customView.empty, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, emptyText));\n    } else if (!hideError && message.toLowerCase() === 'something went wrong') {\n      /**Error custom view */\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageContainerStyle(style),\n        className: \"chats__message\"\n      }, customView.error ? getCustomView(customView.error, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: styles.messageTextStyle(style, _theme, message),\n        className: \"message\"\n      }, errorText));\n    }\n\n    return messageContainer;\n  };\n\n  var renderItems = conversationList.map(function (conversation) {\n    var _conversationOptions;\n\n    var typingIndicatorText = conversation !== null && conversation !== void 0 && conversation.typingIndicatorText ? conversation === null || conversation === void 0 ? void 0 : conversation.typingIndicatorText : \"\";\n    var isActive = (conversation === null || conversation === void 0 ? void 0 : conversation.conversationId) === (activeConversation === null || activeConversation === void 0 ? void 0 : activeConversation.conversationId) ? true : false;\n    /**\n     * Calculate conversations options for child component\n     */\n\n    var conversationOptions = _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationOptions;\n\n    if (((_conversationOptions = conversationOptions) === null || _conversationOptions === void 0 ? void 0 : _conversationOptions.length) == 0) {\n      conversationOptions = [new _Chats.CometChatConversationOptions({\n        id: _Shared.ConversationOptionConstants.delete,\n        title: (0, _Shared.localize)(\"DELETE\"),\n        iconURL: _delete.default,\n        onClick: function onClick() {\n          return confirmDelete(conversation);\n        }\n      })];\n    }\n\n    return /*#__PURE__*/_react.default.createElement(_Shared.CometChatConversationListItem, {\n      key: conversation.conversationId,\n      conversationObject: conversation,\n      isActive: isActive,\n      conversationInputData: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.conversationInputData,\n      conversationOptions: conversationOptions,\n      style: new _Shared.ConversationListItemStyles(_objectSpread({}, styles.listItemStyle(style, _theme))),\n      hideDeletedMessages: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideDeletedMessages,\n      hideGroupActions: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideGroupActions,\n      showTypingIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.showTypingIndicator,\n      typingIndicatorText: typingIndicatorText,\n      hideThreadIndicator: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.hideThreadIndicator,\n      threadIndicatorText: (0, _Shared.localize)(\"IN_A_THREAD\"),\n      theme: _theme,\n      onClick: itemClickhandler.bind(_this),\n      avatarConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.avatarConfiguration,\n      statusIndicatorConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.statusIndicatorConfiguration,\n      badgeCountConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.badgeCountConfiguration,\n      messageReceiptConfiguration: _conversationListItemConfiguration === null || _conversationListItemConfiguration === void 0 ? void 0 : _conversationListItemConfiguration.messageReceiptConfiguration,\n      loggedInUser: loggedInUser === null || loggedInUser === void 0 ? void 0 : loggedInUser.current\n    });\n  });\n  /**\n   * Component template\n   */\n\n  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, getMessageContainer(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: styles.chatsListStyle(style, _theme),\n    className: \"conversation__list\",\n    onScroll: handleScroll\n  }, renderItems), /*#__PURE__*/_react.default.createElement(_Shared.CometChatBackdrop, {\n    isOpen: showConfirm.show,\n    onClick: showConfirm.onCancel,\n    background: _theme === null || _theme === void 0 ? void 0 : (_theme$palette = _theme.palette) === null || _theme$palette === void 0 ? void 0 : _theme$palette.accent200[_theme === null || _theme === void 0 ? void 0 : (_theme$palette2 = _theme.palette) === null || _theme$palette2 === void 0 ? void 0 : _theme$palette2.mode]\n  }, /*#__PURE__*/_react.default.createElement(_Shared.CometChatConfirmDialog, {\n    isOpen: showConfirm.show,\n    onConfirm: deleteConversation.bind(_this, showConfirm.conversation),\n    onCancel: showConfirm.onCancel,\n    style: styles.DialogStyle(_theme),\n    title: (0, _Shared.localize)(\"DELETE_CONVERSATION\"),\n    messageText: (0, _Shared.localize)(\"CONFIRM_DELETE_CONVERSATION\"),\n    confirmButtonText: (0, _Shared.localize)(\"CONFIRM_BUTTON_TEXT\"),\n    cancelButtonText: (0, _Shared.localize)(\"CANCEL_BUTTON_TEXT\")\n  })));\n});\n/**\n * Component default props\n */\n\n\nConversationList.defaultProps = {\n  loadingIconURL: _spinner.default\n};\n/**\n * Component default props types\n */\n\nConversationList.propTypes = {\n  conversationType: _propTypes.default.oneOf([\"users\", \"groups\", \"both\"]),\n  limit: _propTypes.default.number,\n  hideError: _propTypes.default.bool,\n  tags: _propTypes.default.array,\n  userAndGroupTags: _propTypes.default.bool,\n  emptyText: _propTypes.default.string,\n  errorText: _propTypes.default.string,\n  loadingIconURL: _propTypes.default.string,\n  style: _propTypes.default.object,\n  activeConversation: _propTypes.default.object,\n  enableSoundForMessages: _propTypes.default.bool,\n  customIncomingMessageSound: _propTypes.default.string,\n  customView: _propTypes.default.object,\n  conversationListItemConfiguration: _propTypes.default.object,\n  theme: _propTypes.default.object\n};\n\nvar CometChatConversationList = /*#__PURE__*/_react.default.memo(ConversationList);\n\nexports.CometChatConversationList = CometChatConversationList;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}