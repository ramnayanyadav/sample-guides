{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatMessageList = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _ = require(\"..\");\nvar _2 = require(\"../..\");\nvar _spinner = _interopRequireDefault(require(\"./resources/spinner.svg\"));\nvar _hooks = require(\"./hooks\");\nvar _controller = require(\"./controller\");\nvar _style = require(\"./style\");\nvar _CometChatMessageConstants = require(\"../CometChatMessageConstants\");\nvar _Shared = require(\"../../Shared\");\nvar _3 = require(\"../\");\nvar _SmartRepliesConfiguration = require(\"../CometChatSmartReplies/SmartRepliesConfiguration\");\nvar _NewMessageIndicatorConfiguration = require(\"../CometChatNewMessageIndicator/NewMessageIndicatorConfiguration\");\nvar _MessageBubbleConfiguration = require(\"../Bubbles/CometChatMessageBubble/MessageBubbleConfiguration\");\nvar _DateConfiguration = require(\"../../Shared/PrimaryComponents/CometChatConfiguration/DateConfiguration\");\nvar _CometChatMessageHelper = require(\"../CometChatMessageHelper\");\nvar _this = void 0;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n/**\n *\n * CometChatMessageList component retrieves the latest messages and presents them inside a message bubble, that a CometChat logged-in user has been a part of.\n * The state of the component is communicated via 3 states i.e empty, loading and error\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @copyright Â© 2022 CometChat Inc.\n *\n *\n */\n\nvar CometChatMessageList = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  /**\n   * Destructuring prop values\n   */\n  var limit = props.limit,\n    user = props.user,\n    group = props.group,\n    alignment = props.alignment,\n    messageTypes = props.messageTypes,\n    excludeMessageOptions = props.excludeMessageOptions,\n    customMessageOptions = props.customMessageOptions,\n    excludeMessageTypes = props.excludeMessageTypes,\n    onlyUnread = props.onlyUnread,\n    hideMessagesFromBlockedUsers = props.hideMessagesFromBlockedUsers,\n    hideDeletedMessages = props.hideDeletedMessages,\n    tags = props.tags,\n    loadingIconURL = props.loadingIconURL,\n    customView = props.customView,\n    emptyText = props.emptyText,\n    errorText = props.errorText,\n    hideError = props.hideError,\n    customIncomingMessageSound = props.customIncomingMessageSound,\n    enableSoundForMessages = props.enableSoundForMessages,\n    sentMessageInputData = props.sentMessageInputData,\n    receivedMessageInputData = props.receivedMessageInputData,\n    style = props.style,\n    theme = props.theme,\n    messageBubbleConfiguration = props.messageBubbleConfiguration,\n    emojiKeyboardConfiguration = props.emojiKeyboardConfiguration,\n    smartRepliesConfiguration = props.smartRepliesConfiguration,\n    newMessageIndicatorConfiguration = props.newMessageIndicatorConfiguration,\n    dateConfiguration = props.dateConfiguration;\n  var lastScrollTop = 0;\n  var loggedInUserRef = _react.default.useRef(null);\n  var _React$useState = _react.default.useState(0),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    messageCount = _React$useState2[0],\n    setMessageCount = _React$useState2[1];\n  var _React$useState3 = _react.default.useState([]),\n    _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n    messageList = _React$useState4[0],\n    setMessageList = _React$useState4[1];\n  var _React$useState5 = _react.default.useState(0),\n    _React$useState6 = (0, _slicedToArray2.default)(_React$useState5, 2),\n    unreadMessageCount = _React$useState6[0],\n    setUnreadMessageCount = _React$useState6[1];\n  var callbackDataRef = _react.default.useRef(null);\n  var chatWithRef = _react.default.useRef(null);\n  var chatWithTypeRef = _react.default.useRef(null);\n  var _React$useState7 = _react.default.useState((0, _2.localize)(\"LOADING\")),\n    _React$useState8 = (0, _slicedToArray2.default)(_React$useState7, 2),\n    decoratorMessage = _React$useState8[0],\n    setDecoratorMessage = _React$useState8[1];\n  var messageTypesRef = _react.default.useRef(null);\n  var messageCategoryRef = _react.default.useRef(null);\n  var messageListManagerRef = _react.default.useRef(null);\n  var messageListEndRef = _react.default.useRef(null);\n  var _React$useState9 = _react.default.useState({}),\n    _React$useState10 = (0, _slicedToArray2.default)(_React$useState9, 2),\n    viewEmojiTray = _React$useState10[0],\n    setViewEmojiTray = _React$useState10[1];\n  var _React$useState11 = _react.default.useState(null),\n    _React$useState12 = (0, _slicedToArray2.default)(_React$useState11, 2),\n    messageToReact = _React$useState12[0],\n    setMessageToReact = _React$useState12[1];\n  var _React$useState13 = _react.default.useState({}),\n    _React$useState14 = (0, _slicedToArray2.default)(_React$useState13, 2),\n    newMessage = _React$useState14[0],\n    setnewMessage = _React$useState14[1];\n  var _theme = new _2.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n  var _messageBubbleConfiguration = messageBubbleConfiguration || new _MessageBubbleConfiguration.MessageBubbleConfiguration({});\n  var _emojiKeyboardConfiguration = emojiKeyboardConfiguration || new _3.EmojiKeyboardConfiguration({});\n  var _newMessageIndicatorConfiguration = newMessageIndicatorConfiguration || new _NewMessageIndicatorConfiguration.NewMessageIndicatorConfiguration({});\n  var _dateConfiguration = dateConfiguration || new _DateConfiguration.DateConfiguration({\n    pattern: \"dayDateFormat\"\n  });\n\n  /**\n   * Update messagelist\n   */\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      addMessage: addMessage,\n      updateMessage: updateMessage,\n      removeMessage: removeMessage,\n      deleteMessage: deleteMessage,\n      scrollToBottom: scrollToBottom,\n      translateMessage: translateMessage,\n      reactToMessages: reactToMessages\n    };\n  });\n  var messageListCallback = function messageListCallback(listenerName) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    callbackDataRef.current = {\n      name: listenerName,\n      args: [].concat(args)\n    };\n    try {\n      var _callbackDataRef$curr, _callbackDataRef$curr2;\n      var handler = handlers[(_callbackDataRef$curr = callbackDataRef.current) === null || _callbackDataRef$curr === void 0 ? void 0 : _callbackDataRef$curr.name];\n      if (handler) return handler.apply(void 0, (0, _toConsumableArray2.default)((_callbackDataRef$curr2 = callbackDataRef.current) === null || _callbackDataRef$curr2 === void 0 ? void 0 : _callbackDataRef$curr2.args));\n    } catch (e) {\n      throw e;\n    }\n  };\n  var errorHandler = function errorHandler(errorCode) {\n    _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageError, errorCode);\n  };\n  var reInitializeMessageBuilder = function reInitializeMessageBuilder() {\n    resetChatWindow();\n    setDecoratorMessage(\"loading\");\n    messageListManagerRef.current.removeListeners();\n    messageListManagerRef.current = new _controller.MessageListManager(limit, user, group, onlyUnread, hideDeletedMessages, hideMessagesFromBlockedUsers, tags, messageTypesRef.current, messageCategoryRef.current);\n    (0, _hooks.fetchMessages)(messageListManagerRef === null || messageListManagerRef === void 0 ? void 0 : messageListManagerRef.current).then(function (messagelist) {\n      messageHandler(messagelist, true);\n      setMessageList(messagelist);\n      messageListManagerRef.current.attachListeners(messageListCallback);\n    });\n  };\n\n  /**\n   * add new message to the messageList\n   */\n  var addMessage = function addMessage(message) {\n    setMessageList(function (prevMessageList) {\n      var messagelist = (0, _toConsumableArray2.default)(prevMessageList);\n      messagelist.push(message);\n      return (0, _toConsumableArray2.default)(messagelist);\n    });\n    // scrollToBottom()\n  };\n\n  /**\n   * Set unreadCount when new message is received\n   */\n  var updateUnreadMessageCount = function updateUnreadMessageCount() {\n    setUnreadMessageCount(unreadMessageCount + 1);\n  };\n\n  /**\n   *\n   * @param {*} message\n   * Function to play notification sound if sound for messages is enabled.\n   * It checks for custom sound and if not provided plays default sound.\n   */\n  var playNotificationSound = function playNotificationSound(message) {\n    var _message$metadata;\n    if ((message === null || message === void 0 ? void 0 : message.category) === _2.MessageCategoryConstants.message) {\n      if (enableSoundForMessages) {\n        if (customIncomingMessageSound) {\n          _2.CometChatSoundManager.play(_2.CometChatSoundManager.Sound.incomingMessage, customIncomingMessageSound);\n        } else {\n          _2.CometChatSoundManager.play(_2.CometChatSoundManager.Sound.incomingMessage);\n        }\n      }\n    } else if ((message === null || message === void 0 ? void 0 : message.category) !== _2.MessageCategoryConstants.message && message !== null && message !== void 0 && (_message$metadata = message.metadata) !== null && _message$metadata !== void 0 && _message$metadata.incrementUnreadCount) {\n      if (enableSoundForMessages) {\n        if (customIncomingMessageSound) {\n          _2.CometChatSoundManager.play(customIncomingMessageSound);\n        } else {\n          _2.CometChatSoundManager.play(_2.CometChatSoundManager.Sound.incomingMessage);\n        }\n      }\n    }\n  };\n\n  /**\n   * Update message\n   */\n  var updateMessage = function updateMessage(message) {\n    var withMuid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var messageKey;\n    var messagelist = (0, _toConsumableArray2.default)(messageList);\n    if (withMuid) {\n      messageKey = messagelist.findIndex(function (m) {\n        return m.muid === message.muid;\n      });\n    } else {\n      messageKey = messagelist.findIndex(function (m) {\n        return m.id === message.id;\n      });\n    }\n    if (messageKey > -1) {\n      var messageObject = _objectSpread(_objectSpread({}, messageList[messageKey]), message);\n      messagelist.splice(messageKey, 1, messageObject);\n      setMessageCount(messagelist.length);\n      setMessageList(messagelist);\n    }\n  };\n\n  /**\n   * Update message as read; show double blue tick\n   */\n  var updateMessageAsRead = function updateMessageAsRead(message) {\n    var messagelist = (0, _toConsumableArray2.default)(messageList);\n    var messageKey = messagelist.findIndex(function (m) {\n      return m.id === message.messageId;\n    });\n    if (messageKey > -1) {\n      var messageObject = _objectSpread({}, messageList[messageKey]);\n      messageObject.readAt = message.getReadAt();\n      messagelist.splice(messageKey, 1, messageObject);\n      setMessageList(messagelist);\n    }\n    markAllMessageAsRead(message, messageKey);\n  };\n\n  /**\n   * Update message as deleted; show deleted message bubble\n   */\n  var removeMessage = function removeMessage(message) {\n    var messages = (0, _toConsumableArray2.default)(messageList);\n    var messageKey = messages.findIndex(function (m) {\n      return m.id === message.id;\n    });\n    if (messageKey > -1) {\n      if (hideDeletedMessages) {\n        messages.splice(messageKey, 1);\n      } else {\n        var messageObject = _objectSpread(_objectSpread({}, messages[messageKey]), message);\n        messages.splice(messageKey, 1, messageObject);\n      }\n      setMessageList((0, _toConsumableArray2.default)(messages));\n    }\n  };\n\n  /**\n   *\n   * @param {*} message\n   * emits markAsRead Event\n   */\n  var markMessageAsRead = function markMessageAsRead(message) {\n    if (!(message !== null && message !== void 0 && message.readAt)) {\n      _chat.CometChat.markAsRead(message).catch(function (error) {\n        errorHandler(error);\n      });\n    }\n  };\n  var handleNewMessages = function handleNewMessages(message) {\n    var _chatWithRef$current;\n    //handling dom lag - increment count only for main message list\n\n    setnewMessage(message);\n    var messageReceivedHandler = function messageReceivedHandler(message) {\n      //if the user has not scrolled in chat window(scroll is at the bottom of the chat window)\n      setMessageCount(messageCount + 1);\n      if (messageListEndRef.current.scrollHeight - messageListEndRef.current.scrollTop - messageListEndRef.current.clientHeight <= 1) {\n        if (messageCount > _.messageConstants.maximumNumOfMessages) {\n          reInitializeMessageBuilder();\n        } else {\n          playNotificationSound(message);\n          addMessage(message);\n          scrollToBottom();\n          markMessageAsRead(message);\n          _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n        }\n      } else {\n        //if the user has scrolled up in chat window\n        playNotificationSound(message);\n        addMessage(message);\n        updateUnreadMessageCount();\n      }\n    };\n\n    /**\n     * message receiver is chat window group\n     */\n    if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current = chatWithRef.current) === null || _chatWithRef$current === void 0 ? void 0 : _chatWithRef$current.guid)) {\n      messageReceivedHandler(message);\n    } else if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user) {\n      var _chatWithRef$current2, _loggedInUserRef$curr, _loggedInUserRef$curr2, _chatWithRef$current3;\n      /**\n       * If the message sender is chat window user and message receiver is logged-in user\n       * OR\n       * If the message sender is logged-in user and message receiver is chat window user\n       */\n      if (message.getSender().uid === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current2 = chatWithRef.current) === null || _chatWithRef$current2 === void 0 ? void 0 : _chatWithRef$current2.uid) && message.getReceiverId() === (loggedInUserRef === null || loggedInUserRef === void 0 ? void 0 : (_loggedInUserRef$curr = loggedInUserRef.current) === null || _loggedInUserRef$curr === void 0 ? void 0 : _loggedInUserRef$curr.uid) || message.getSender().uid === (loggedInUserRef === null || loggedInUserRef === void 0 ? void 0 : (_loggedInUserRef$curr2 = loggedInUserRef.current) === null || _loggedInUserRef$curr2 === void 0 ? void 0 : _loggedInUserRef$curr2.uid) && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current3 = chatWithRef.current) === null || _chatWithRef$current3 === void 0 ? void 0 : _chatWithRef$current3.uid)) {\n        messageReceivedHandler(message);\n      }\n    }\n  };\n  var handleNewCustomMessages = function handleNewCustomMessages(message) {\n    var _loggedInUserRef$curr3, _chatWithRef$current4, _chatWithRef$current5, _chatWithRef$current6, _loggedInUserRef$curr4, _chatWithRef$current7;\n    var customMessageReceivedHandler = function customMessageReceivedHandler(message) {\n      setMessageCount(messageCount + 1);\n      //if the user has not scrolled in chat window(scroll is at the bottom of the chat window)\n      if (messageListEndRef.current.scrollHeight - messageListEndRef.current.scrollTop - messageListEndRef.current.clientHeight <= 1) {\n        if (messageCount > _.messageConstants.maximumNumOfMessages) {\n          reInitializeMessageBuilder();\n        } else {\n          playNotificationSound(message);\n          addMessage(message);\n          scrollToBottom();\n          markMessageAsRead(message);\n          _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n        }\n      } else {\n        //if the user has scrolled in chat window\n        playNotificationSound(message);\n        addMessage(message);\n        updateUnreadMessageCount();\n      }\n    };\n    if (chatWithTypeRef.current === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && ((_loggedInUserRef$curr3 = loggedInUserRef.current) === null || _loggedInUserRef$curr3 === void 0 ? void 0 : _loggedInUserRef$curr3.uid) === message.getSender().uid && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current4 = chatWithRef.current) === null || _chatWithRef$current4 === void 0 ? void 0 : _chatWithRef$current4.guid) && (message.type === _.CometChatCustomMessageTypes.poll || message.type === _.CometChatCustomMessageTypes.document || message.type === _.CometChatCustomMessageTypes.whiteboard)) {\n      playNotificationSound();\n      addMessage(message);\n      scrollToBottom();\n    } else if (chatWithTypeRef.current === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current5 = chatWithRef.current) === null || _chatWithRef$current5 === void 0 ? void 0 : _chatWithRef$current5.guid)) {\n      customMessageReceivedHandler(message, _2.ReceiverTypeConstants.group);\n    } else if (chatWithTypeRef.current === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && message.getSender().uid === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current6 = chatWithRef.current) === null || _chatWithRef$current6 === void 0 ? void 0 : _chatWithRef$current6.uid)) {\n      customMessageReceivedHandler(message, _2.ReceiverTypeConstants.user);\n    } else if (chatWithTypeRef.current === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && ((_loggedInUserRef$curr4 = loggedInUserRef.current) === null || _loggedInUserRef$curr4 === void 0 ? void 0 : _loggedInUserRef$curr4.uid) === message.getSender().uid && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current7 = chatWithRef.current) === null || _chatWithRef$current7 === void 0 ? void 0 : _chatWithRef$current7.uid) && (message.type === _.CometChatCustomMessageTypes.poll || message.type === _.CometChatCustomMessageTypes.document || message.type === _.CometChatCustomMessageTypes.whiteboard)) {\n      playNotificationSound(message);\n      addMessage(message);\n      scrollToBottom();\n    }\n  };\n  var markAllMessageAsDelivered = function markAllMessageAsDelivered(readMessage, messageKey) {\n    for (var i = messageKey; i >= 0; i--) {\n      var _messageList$i;\n      if (!((_messageList$i = messageList[i]) !== null && _messageList$i !== void 0 && _messageList$i.deliveredAt)) {\n        messageList[i].deliveredAt = readMessage === null || readMessage === void 0 ? void 0 : readMessage.getDeliveredAt();\n      }\n    }\n  };\n  var markAllMessageAsRead = function markAllMessageAsRead(readMessage, messageKey) {\n    for (var i = messageKey; i >= 0; i--) {\n      var _messageList$i2;\n      if (!((_messageList$i2 = messageList[i]) !== null && _messageList$i2 !== void 0 && _messageList$i2.readAt)) {\n        messageList[i].readAt = readMessage === null || readMessage === void 0 ? void 0 : readMessage.getReadAt();\n      }\n    }\n  };\n  var handleMessageDeliveryAndReadReceipt = function handleMessageDeliveryAndReadReceipt(messageReceipt) {\n    var _messageReceipt$getSe, _chatWithRef$current8, _chatWithRef$current9;\n    //read receipts\n    if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiverType()) === _2.ReceiverTypeConstants.user && (messageReceipt === null || messageReceipt === void 0 ? void 0 : (_messageReceipt$getSe = messageReceipt.getSender()) === null || _messageReceipt$getSe === void 0 ? void 0 : _messageReceipt$getSe.getUid()) === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current8 = chatWithRef.current) === null || _chatWithRef$current8 === void 0 ? void 0 : _chatWithRef$current8.uid) && (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiver()) === loggedInUserRef.current.uid) {\n      if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiptType()) === \"delivery\") {\n        updateMessageAsDelivered(messageReceipt);\n      } else if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiptType()) === \"read\") {\n        updateMessageAsRead(messageReceipt);\n      }\n    } else if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiverType()) === _2.ReceiverTypeConstants.group && (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiver()) === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current9 = chatWithRef.current) === null || _chatWithRef$current9 === void 0 ? void 0 : _chatWithRef$current9.guid)) {}\n  };\n  var handleMessageDelete = function handleMessageDelete(message) {\n    var _chatWithRef$current10, _chatWithRef$current11;\n    if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current10 = chatWithRef.current) === null || _chatWithRef$current10 === void 0 ? void 0 : _chatWithRef$current10.guid)) {\n      removeMessage(message);\n    } else if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && message.getSender().uid === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current11 = chatWithRef.current) === null || _chatWithRef$current11 === void 0 ? void 0 : _chatWithRef$current11.uid)) {\n      removeMessage(message);\n    }\n  };\n  var handleMessageEdit = function handleMessageEdit(message) {\n    var _chatWithRef$current12, _chatWithRef$current13, _chatWithRef$current14;\n    if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current12 = chatWithRef.current) === null || _chatWithRef$current12 === void 0 ? void 0 : _chatWithRef$current12.guid)) {\n      updateMessage(message);\n    } else if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && loggedInUserRef.current.uid === message.getReceiverId() && message.getSender().uid === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current13 = chatWithRef.current) === null || _chatWithRef$current13 === void 0 ? void 0 : _chatWithRef$current13.uid)) {\n      updateMessage(message);\n    } else if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && loggedInUserRef.current.uid === message.getSender().uid && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current14 = chatWithRef.current) === null || _chatWithRef$current14 === void 0 ? void 0 : _chatWithRef$current14.uid)) {\n      updateMessage(message);\n    }\n  };\n  var handleNewGroupActionMessage = function handleNewGroupActionMessage(message) {\n    var _chatWithRef$current15;\n    if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current15 = chatWithRef.current) === null || _chatWithRef$current15 === void 0 ? void 0 : _chatWithRef$current15.guid)) {\n      playNotificationSound(message);\n      addMessage(message);\n      // scrollToBottom();\n      markMessageAsRead(message);\n      _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n    }\n  };\n\n  /**\n   * update message list\n   */\n  var prependMessages = function prependMessages(messages) {\n    var messagelist = [].concat((0, _toConsumableArray2.default)(messages), (0, _toConsumableArray2.default)(messageList));\n    setMessageList(messagelist);\n    setMessageCount(messagelist.length);\n  };\n  var messageHandler = function messageHandler(messagelist, scroll, val) {\n    messagelist.forEach(function (message) {\n      var _message$getSender, _loggedInUserRef$curr5;\n      //if the sender of the message is not the loggedin user, mark the message as read.\n      if ((message === null || message === void 0 ? void 0 : (_message$getSender = message.getSender()) === null || _message$getSender === void 0 ? void 0 : _message$getSender.getUid()) !== ((_loggedInUserRef$curr5 = loggedInUserRef.current) === null || _loggedInUserRef$curr5 === void 0 ? void 0 : _loggedInUserRef$curr5.uid) && !(message !== null && message !== void 0 && message.readAt)) {\n        if (message.getReceiverType() === _2.ReceiverTypeConstants.user) {\n          markMessageAsRead(message);\n          _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n        } else if (message.getReceiverType() === _2.ReceiverTypeConstants.group) {\n          markMessageAsRead(message);\n          _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n        }\n      }\n    });\n    if (scroll) {\n      var lastScrollPoint = val || 0;\n      scrollToBottom(lastScrollPoint);\n    }\n  };\n  var scrollToBottom = function scrollToBottom() {\n    var scrollHeight = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    setTimeout(function () {\n      if (messageListEndRef && messageListEndRef.current) {\n        messageListEndRef.current.scrollTop = messageListEndRef.current.scrollHeight - scrollHeight;\n      }\n    }, 10);\n  };\n  var handleScroll = function handleScroll(event) {\n    var scrollTop = event.currentTarget.scrollTop;\n    var scrollHeight = event.currentTarget.scrollHeight;\n    var clientHeight = event.currentTarget.clientHeight;\n    lastScrollTop = scrollHeight - scrollTop;\n    if (lastScrollTop - clientHeight <= 1) {\n      scrolledToBottom();\n    }\n    var top = Math.round(scrollTop) === 0;\n    if (top && messageList.length) {\n      (0, _hooks.fetchMessages)(messageListManagerRef === null || messageListManagerRef === void 0 ? void 0 : messageListManagerRef.current).then(function (messageList) {\n        messageHandler(messageList, false);\n      }).catch(function (error) {\n        errorHandler(error);\n        setDecoratorMessage((0, _2.localize)(\"SOMETHING_WRONG\"));\n      });\n    }\n  };\n\n  /**\n   * Update message as delivered; show double grey tick\n   */\n  var updateMessageAsDelivered = function updateMessageAsDelivered(message) {\n    var messagelist = (0, _toConsumableArray2.default)(messageList);\n    var messageKey = messagelist.findIndex(function (m) {\n      return m.id === message.messageId;\n    });\n    if (messageKey > -1) {\n      var messageObject = _objectSpread({}, messageList[messageKey]);\n      messageObject.deliveredAt = message.getDeliveredAt();\n      messagelist === null || messagelist === void 0 ? void 0 : messagelist.splice(messageKey, 1, messageObject);\n      setMessageList(messagelist);\n    }\n    markAllMessageAsDelivered(message, messageKey);\n  };\n\n  /**\n   * Upon scrolling to bottom, reload the chat if messages cross the maximum count,\n   * or else render and update (mark them as read) the stored messages\n   */\n  var scrolledToBottom = function scrolledToBottom() {\n    if (unreadMessageCount <= 0) {\n      return false;\n    }\n    var totalMessageCount = messageList.length + unreadMessageCount;\n    var message = messageList[messageList.length - 1];\n    var messageKey = messageList[messageList.length - 1];\n    if (totalMessageCount > _.messageConstants.maximumNumOfMessages) {\n      reInitializeMessageBuilder();\n    } else {\n      setUnreadMessageCount(0);\n      scrollToBottom();\n      markMessageAsRead(message);\n      markAllMessageAsRead(message, messageKey);\n      _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n    }\n  };\n\n  /**\n   * upon scrolling to the bottom, update the unread messagess\n   */\n\n  /**\n   * reset message list\n   */\n  var resetChatWindow = function resetChatWindow() {\n    setMessageList([]);\n    setUnreadMessageCount(0);\n    setMessageCount(0);\n    setnewMessage({});\n  };\n  var handlers = {\n    onTextMessageReceived: handleNewMessages,\n    onMediaMessageReceived: handleNewMessages,\n    onCustomMessageReceived: handleNewCustomMessages,\n    onMessagesDelivered: handleMessageDeliveryAndReadReceipt,\n    onMessagesRead: handleMessageDeliveryAndReadReceipt,\n    onMessageDeleted: handleMessageDelete,\n    onMessageEdited: handleMessageEdit,\n    onGroupMemberScopeChanged: handleNewGroupActionMessage,\n    onGroupMemberKicked: handleNewGroupActionMessage,\n    onGroupMemberBanned: handleNewGroupActionMessage,\n    onGroupMemberUnbanned: handleNewGroupActionMessage,\n    onMemberAddedToGroup: handleNewGroupActionMessage,\n    onGroupMemberLeft: handleNewGroupActionMessage,\n    onGroupMemberJoined: handleNewGroupActionMessage\n  };\n  (0, _hooks.Hooks)(limit, user, group, excludeMessageTypes, onlyUnread, hideDeletedMessages, hideMessagesFromBlockedUsers, tags, messageTypes, loggedInUserRef, messageList, setMessageList, setDecoratorMessage, messageHandler, messageListCallback, messageTypesRef, messageCategoryRef, messageListManagerRef, _2.localize, errorHandler, chatWithRef, chatWithTypeRef, setMessageCount, setnewMessage);\n\n  /**\n   *\n   * @param {*} message\n   * returns translated text and push it into metadata of message Object\n   */\n  var translateMessage = function translateMessage(message) {\n    var messageId = message.id;\n    var messageText = message.text;\n    var translateToLanguage = _2.CometChatLocalize.getLocale();\n    var translateMessage = \"\";\n    _chat.CometChat.callExtension(_2.ExtensionConstants.messageTranslation, \"POST\", _2.ExtensionURLs.translate, {\n      msgId: messageId,\n      text: messageText,\n      languages: [translateToLanguage]\n    }).then(function (result) {\n      if (result !== null && result !== void 0 && result.hasOwnProperty(\"translations\") && result.translations.length) {\n        var messageTranslation = result.translations[0];\n        translateMessage = \"\".concat(messageTranslation[\"message_translated\"]);\n        if (message.hasOwnProperty(\"metadata\")) {\n          Object.assign(message.metadata, {\n            translatedText: translateMessage\n          });\n        } else {\n          Object.assign(message, {\n            metadata: {\n              translatedText: translateMessage\n            }\n          });\n        }\n        updateMessage(message);\n      }\n    }).catch(function (error) {\n      errorHandler(error);\n    });\n  };\n\n  /**\n   *\n   * @param {*} message\n   * emits edit Message event\n   */\n  var editMessage = function editMessage(message) {\n    _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageEdit, {\n      message: message,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n  };\n\n  /**\n   *\n   * @param {*} message\n   * copies message text to the clipboard\n   */\n  var copyMessage = function copyMessage(message) {\n    navigator.clipboard.writeText(message.text);\n  };\n\n  /**\n   *\n   * @param {*} message\n   * Deletes the selected message\n   */\n  var deleteMessage = function deleteMessage(message) {\n    _chat.CometChat.deleteMessage(message.id).then(function (deletedMessage) {\n      removeMessage(deletedMessage);\n    }).catch(function (error) {\n      errorHandler(error);\n    });\n  };\n\n  /**\n   *\n   * @param {*} message\n   * @param {*} event\n   * set visibility of Emoji Tray to true\n   */\n  var onReactToMessages = function onReactToMessages(message, event, emoji) {\n    // To remove reaction by clicking on the reacted emoji\n    if (emoji) {\n      reactToMessages(message, emoji);\n    }\n    // Open EmojiTray When clicked on Reaction messageOption or Add Reaction button\n    else {\n      setMessageToReact(message);\n      setViewEmojiTray(function (old) {\n        return {\n          emojiTrayPreview: !old.emojiTrayPreview,\n          event: event\n        };\n      });\n    }\n  };\n\n  /**\n   *\n   * @param {*} emojiObject\n   * triggers reactToMessages function after closing the emojiKeyboard\n   */\n  var onReactionSelected = function onReactionSelected(emojiObject) {\n    setViewEmojiTray(function (old) {\n      return {\n        emojiTrayPreview: !old.emojiTrayPreview\n      };\n    });\n    reactToMessages(messageToReact, emojiObject);\n  };\n\n  /**\n   *\n   * @returns EmojiKeyboard inside tooltip\n   */\n  var emojiBoard = function emojiBoard() {\n    if (viewEmojiTray.emojiTrayPreview) {\n      var _viewEmojiTray$event, _viewEmojiTray$event2;\n      return /*#__PURE__*/_react.default.createElement(_2.CometChatPopover, {\n        position: \"top\",\n        x: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event = viewEmojiTray.event) === null || _viewEmojiTray$event === void 0 ? void 0 : _viewEmojiTray$event.clientX,\n        y: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event2 = viewEmojiTray.event) === null || _viewEmojiTray$event2 === void 0 ? void 0 : _viewEmojiTray$event2.clientY,\n        style: (0, _style.emojiBoardToolTipStyle)(_theme)\n      }, /*#__PURE__*/_react.default.createElement(_2.CometChatEmojiKeyboard, {\n        style: (0, _style.emojiKeyBoardStyle)(_theme),\n        hideSearch: _emojiKeyboardConfiguration.hideSearch,\n        theme: _theme,\n        onClick: onReactionSelected.bind(_this) || _emojiKeyboardConfiguration.onClick\n      }));\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   *\n   * @param {*} message\n   * @param {*} emoji\n   * Calls extension reaction to Messages\n   */\n  var reactToMessages = function reactToMessages(message, emoji) {\n    var _loggedInUserRef$curr6, _loggedInUserRef$curr7, _loggedInUserRef$curr8, _loggedInUserRef$curr9;\n    var reactionObject = {};\n    var newMessageObject = {};\n    var messageObject = _objectSpread({}, message);\n    var userObject = {};\n    if (loggedInUserRef !== null && loggedInUserRef !== void 0 && (_loggedInUserRef$curr6 = loggedInUserRef.current) !== null && _loggedInUserRef$curr6 !== void 0 && (_loggedInUserRef$curr7 = _loggedInUserRef$curr6.avatar) !== null && _loggedInUserRef$curr7 !== void 0 && _loggedInUserRef$curr7.length) {\n      userObject[\"avatar\"] = loggedInUserRef.current.avatar;\n    }\n    if (loggedInUserRef !== null && loggedInUserRef !== void 0 && (_loggedInUserRef$curr8 = loggedInUserRef.current) !== null && _loggedInUserRef$curr8 !== void 0 && (_loggedInUserRef$curr9 = _loggedInUserRef$curr8.name) !== null && _loggedInUserRef$curr9 !== void 0 && _loggedInUserRef$curr9.length) {\n      userObject[\"name\"] = loggedInUserRef.current.name;\n    }\n    var emojiObject = (0, _defineProperty2.default)({}, emoji, (0, _defineProperty2.default)({}, loggedInUserRef.current.uid, userObject));\n    var reactionExtensionsData = (0, _2.getExtensionsData)(messageObject, _2.ExtensionConstants.reactions);\n    if (reactionExtensionsData) {\n      if (reactionExtensionsData[emoji]) {\n        //if the reactions metadata has the selected emoji/reaction for the loggedin user\n        if (reactionExtensionsData[emoji][loggedInUserRef.current.uid]) {\n          reactionObject = _objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"]);\n          delete reactionObject[emoji][loggedInUserRef.current.uid];\n        } else {\n          reactionObject = _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"]), {}, (0, _defineProperty2.default)({}, emoji, _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"][emoji]), {}, (0, _defineProperty2.default)({}, loggedInUserRef.current.uid, userObject))));\n        }\n      } else {\n        reactionObject = _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"]), emojiObject);\n      }\n    } else {\n      if (!messageObject.hasOwnProperty(\"metadata\")) {\n        messageObject[\"metadata\"] = {};\n      }\n      if (!messageObject[\"metadata\"].hasOwnProperty(\"@injected\")) {\n        messageObject[\"metadata\"][\"@injected\"] = {};\n      }\n      if (!messageObject[\"metadata\"][\"@injected\"].hasOwnProperty(\"extensions\")) {\n        messageObject[\"metadata\"][\"@injected\"][\"extensions\"] = {};\n      }\n      if (!messageObject[\"metadata\"][\"@injected\"][\"extensions\"].hasOwnProperty(\"reactions\")) {\n        messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"] = {};\n      }\n      reactionObject = _objectSpread({}, emojiObject);\n    }\n    var metadataObject = {\n      metadata: _objectSpread(_objectSpread({}, messageObject[\"metadata\"]), {}, {\n        \"@injected\": _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"]), {}, {\n          extensions: _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"]), {}, {\n            reactions: _objectSpread({}, reactionObject)\n          })\n        })\n      })\n    };\n    newMessageObject = _objectSpread(_objectSpread({}, messageObject), {}, {\n      data: _objectSpread(_objectSpread({}, messageObject), metadataObject)\n    }, metadataObject);\n    updateMessage(newMessageObject);\n    _chat.CometChat.callExtension(_2.ExtensionConstants.reactions, \"POST\", _2.ExtensionURLs.reaction, {\n      msgId: message.id,\n      emoji: emoji\n    }).catch(function (error) {\n      errorHandler(error);\n      updateMessage(message);\n    });\n  };\n\n  /**\n   *\n   * @param {*} messageOptions\n   * Sets MessageOptions Onclick function\n   */\n  var setOptionsCallbackData = function setOptionsCallbackData(messageOptions) {\n    var optionsList = (0, _toConsumableArray2.default)(messageOptions);\n    optionsList.forEach(function (eachMessageOption) {\n      switch (eachMessageOption.id) {\n        case _2.MessageOptionConstants.deleteMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = deleteMessage.bind(_this);\n          }\n          break;\n        case _2.MessageOptionConstants.editMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = editMessage.bind(_this);\n          }\n          break;\n        case _2.MessageOptionConstants.copyMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = copyMessage.bind(_this);\n          }\n          break;\n        case _2.MessageOptionConstants.reactToMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = onReactToMessages.bind(_this);\n          }\n          break;\n        case _2.MessageOptionConstants.translateMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = translateMessage.bind(_this);\n          }\n          break;\n        default:\n          break;\n      }\n    });\n    return optionsList;\n  };\n\n  /**\n   *\n   * @param {*} messageObject\n   * @returns messageOptions according to the type of message and sender's identity\n   */\n  var filterMessageOptions = function filterMessageOptions(messageObject) {\n    var _messageTypes = messageTypes && messageTypes.length ? messageTypes : (0, _.getDefaultTypes)();\n    var messageOptions = [];\n    // If User sends messageTypes as\n    _messageTypes.forEach(function (messageTemplateObject) {\n      // Checking Message types for Template object and message object to set options\n      if (messageTemplateObject.type === messageObject.type) {\n        messageOptions = messageTemplateObject.options.filter(function (option) {\n          var _loggedInUserRef$curr10, _messageObject$sender, _loggedInUserRef$curr11, _messageObject$sender2;\n          return (\n            // Segregating Sender and receiver options.\n\n            ((_loggedInUserRef$curr10 = loggedInUserRef.current) === null || _loggedInUserRef$curr10 === void 0 ? void 0 : _loggedInUserRef$curr10.uid) === (messageObject === null || messageObject === void 0 ? void 0 : (_messageObject$sender = messageObject.sender) === null || _messageObject$sender === void 0 ? void 0 : _messageObject$sender.uid) && option.optionFor === _2.MessageOptionForConstants.sender || option.optionFor === _2.MessageOptionForConstants.both || ((_loggedInUserRef$curr11 = loggedInUserRef.current) === null || _loggedInUserRef$curr11 === void 0 ? void 0 : _loggedInUserRef$curr11.uid) !== (messageObject === null || messageObject === void 0 ? void 0 : (_messageObject$sender2 = messageObject.sender) === null || _messageObject$sender2 === void 0 ? void 0 : _messageObject$sender2.uid) && option.optionFor === _2.MessageOptionForConstants.receiver || option.optionFor === _2.MessageOptionForConstants.both\n          );\n        });\n      }\n    });\n\n    // If user exclude's an option from options list\n    if (excludeMessageOptions && excludeMessageOptions.length) {\n      excludeMessageOptions.forEach(function (excludeOption) {\n        messageOptions.forEach(function (option) {\n          if (option.id === excludeOption) {\n            var index = messageOptions.indexOf(option);\n            if (index > -1) {\n              messageOptions.splice(index, 1); // 2nd parameter means remove one item only\n            }\n          }\n        });\n      });\n    }\n\n    // If user sends in customMessageOptions\n    if (customMessageOptions !== null && customMessageOptions !== void 0 && customMessageOptions.length) {\n      customMessageOptions.forEach(function (option) {\n        messageOptions.push(option);\n      });\n    }\n\n    // Setting callback data for Message Option's onClick\n    return setOptionsCallbackData(messageOptions);\n  };\n\n  /**\n   *\n   * @param {*} message\n   * @returns filtering custom View from message Types sent in by the user\n   */\n  var filterCustomView = function filterCustomView(message) {\n    if (messageTypes !== null && messageTypes !== void 0 && messageTypes.length) {\n      var _templateObject$;\n      var templateObject = messageTypes.filter(function (messageTemplateObject) {\n        return messageTemplateObject.type === message.type && messageTemplateObject.customView;\n      });\n      if ((_templateObject$ = templateObject[0]) !== null && _templateObject$ !== void 0 && _templateObject$.customView) {\n        return templateObject[0].customView;\n      }\n      return null;\n    }\n  };\n\n  /**\n   *\n   * @param {*} customView\n   * @returns customView for handling empty,error and loading states\n   */\n  var getCustomView = function getCustomView(customView) {\n    return /*#__PURE__*/_react.default.createElement(customView, props);\n  };\n  var getMessageContainer = function getMessageContainer() {\n    var _localize;\n    var messageContainer = null;\n    if (messageList.length === 0 && (decoratorMessage === null || decoratorMessage === void 0 ? void 0 : decoratorMessage.toLowerCase()) === (0, _2.localize)(\"LOADING\").toLowerCase()) {\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgStyle)(style),\n        className: \"messagelist__decorator-message\"\n      }, customView !== null && customView !== void 0 && customView.loading ? getCustomView(customView === null || customView === void 0 ? void 0 : customView.loading, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgImgStyle)(style, loadingIconURL, _theme),\n        className: \"decorator-message\"\n      }));\n    } else if (messageList.length === 0 && (decoratorMessage === null || decoratorMessage === void 0 ? void 0 : decoratorMessage.toLowerCase()) === (0, _2.localize)(\"NO_MESSAGES_FOUND\").toLowerCase()) {\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgStyle)(style),\n        className: \"messagelist__decorator-message\"\n      }, customView !== null && customView !== void 0 && customView.empty ? getCustomView(customView === null || customView === void 0 ? void 0 : customView.empty, props) : /*#__PURE__*/_react.default.createElement(\"p\", {\n        style: (0, _style.decoratorMsgTxtStyle)(style, _2.fontHelper, _theme, decoratorMessage, _2.localize),\n        className: \"decorator-message\"\n      }, emptyText));\n    } else if ((decoratorMessage === null || decoratorMessage === void 0 ? void 0 : decoratorMessage.toLowerCase()) === ((_localize = (0, _2.localize)(\"NO_MESSAGE_TYPE_SET\")) === null || _localize === void 0 ? void 0 : _localize.toLowerCase())) {\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgStyle)(style),\n        className: \"messagelist__decorator-message\"\n      }, customView !== null && customView !== void 0 && customView.empty ? getCustomView(customView === null || customView === void 0 ? void 0 : customView.empty, props) : /*#__PURE__*/_react.default.createElement(\"p\", {\n        style: (0, _style.decoratorMsgTxtStyle)(style, _2.fontHelper, _theme, decoratorMessage, _2.localize),\n        className: \"decorator-message\"\n      }, decoratorMessage));\n    } else if (!hideError && (decoratorMessage === null || decoratorMessage === void 0 ? void 0 : decoratorMessage.toLowerCase()) === (0, _2.localize)(\"SOMETHING_WRONG\").toLowerCase()) {\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgStyle)(style),\n        className: \"messagelist__decorator-message\"\n      }, customView !== null && customView !== void 0 && customView.error ? getCustomView(customView === null || customView === void 0 ? void 0 : customView.error, props) : /*#__PURE__*/_react.default.createElement(\"p\", {\n        style: (0, _style.decoratorMsgTxtStyle)(style, _2.fontHelper, _theme, decoratorMessage, _2.localize),\n        className: \"decorator-message\"\n      }, errorText));\n    }\n    return messageContainer;\n  };\n\n  /**\n   * Empty new Message Received State to close Smart reply Preview\n   */\n  var onClose = function onClose() {\n    setnewMessage({});\n  };\n  var _smartRepliesConfiguration = smartRepliesConfiguration || new _SmartRepliesConfiguration.SmartRepliesConfiguration({\n    onClose: onClose\n  });\n  /**\n   *\n   * @returns smart suggestions to the user as per the message received\n   */\n  var getSmartReplies = function getSmartReplies() {\n    if (Object.keys(newMessage).length) {\n      return /*#__PURE__*/_react.default.createElement(_.CometChatSmartReplies, {\n        messageObject: newMessage,\n        customOutgoingMessageSound: _smartRepliesConfiguration.customOutgoingMessageSound,\n        enableSoundForMessages: _smartRepliesConfiguration.enableSoundForMessages,\n        loggedInUser: loggedInUserRef.current,\n        onClick: _smartRepliesConfiguration.onClick,\n        style: (0, _style.smartReplyStyle)(_theme),\n        onClose: onClose.bind(_this)\n      });\n    }\n  };\n\n  /**\n   *\n   * @returns new Message Indicator banner\n   */\n  var newMessageIndicator = function newMessageIndicator() {\n    if (unreadMessageCount >= 1) {\n      var text = unreadMessageCount > 1 ? \"\".concat(unreadMessageCount, \" \").concat((0, _2.localize)(\"NEW_MESSAGES\")) : \"\".concat(unreadMessageCount, \" \").concat((0, _2.localize)(\"NEW_MESSAGE\"));\n      return /*#__PURE__*/_react.default.createElement(_.CometChatNewMessageIndicator, {\n        text: text,\n        onClick: scrolledToBottom.bind(_this) || _newMessageIndicatorConfiguration.onClick,\n        Icon: _newMessageIndicatorConfiguration.Icon,\n        style: (0, _style.messageIndicatorStyle)(_theme)\n      });\n    }\n    return null;\n  };\n\n  /**\n   *\n   * @returns Items to render in Message List Component\n   */\n  var renderItems = function renderItems() {\n    // to hold date value for first message\n    var previousMessageDate = null;\n    return messageList.map(function (eachMessage) {\n      var _previousMessageDate, _previousMessageDate2, _previousMessageDate3, _dateConfiguration$st, _theme$palette, _theme$palette2, _dateConfiguration$st2, _theme$typography, _loggedInUserRef$curr12, _eachMessage$sender, _loggedInUserRef$curr13, _eachMessage$sender2;\n      // date label component\n      var dateSeparator = null;\n\n      // Converting Unix  timeStamp to readable date format\n      var currentMessageDate = new Date(eachMessage.sentAt * 1000);\n      var currentDate = currentMessageDate.getDate() + \"-\" + currentMessageDate.getMonth + \"-\" + currentMessageDate.getFullYear();\n      var previousDate = ((_previousMessageDate = previousMessageDate) === null || _previousMessageDate === void 0 ? void 0 : _previousMessageDate.getDate()) + \"-\" + ((_previousMessageDate2 = previousMessageDate) === null || _previousMessageDate2 === void 0 ? void 0 : _previousMessageDate2.getMonth) + \"-\" + ((_previousMessageDate3 = previousMessageDate) === null || _previousMessageDate3 === void 0 ? void 0 : _previousMessageDate3.getFullYear());\n      var pattern = _dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : _dateConfiguration.pattern;\n      var customPattern = _dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : _dateConfiguration.customPattern;\n      var dateStyle = new _Shared.DateStyles(_objectSpread(_objectSpread({}, _dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : _dateConfiguration.style), {}, {\n        textColor: (_dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : (_dateConfiguration$st = _dateConfiguration.style) === null || _dateConfiguration$st === void 0 ? void 0 : _dateConfiguration$st.textColor) || (_theme === null || _theme === void 0 ? void 0 : (_theme$palette = _theme.palette) === null || _theme$palette === void 0 ? void 0 : _theme$palette.accent500[_theme === null || _theme === void 0 ? void 0 : (_theme$palette2 = _theme.palette) === null || _theme$palette2 === void 0 ? void 0 : _theme$palette2.mode]),\n        textFont: (_dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : (_dateConfiguration$st2 = _dateConfiguration.style) === null || _dateConfiguration$st2 === void 0 ? void 0 : _dateConfiguration$st2.textFont) || (0, _2.fontHelper)(_theme === null || _theme === void 0 ? void 0 : (_theme$typography = _theme.typography) === null || _theme$typography === void 0 ? void 0 : _theme$typography.caption2)\n      }));\n\n      // Comparing Date, Month, Year of the two dates\n      if (previousDate !== currentDate) {\n        dateSeparator = /*#__PURE__*/_react.default.createElement(\"div\", {\n          style: (0, _style.messageDateContainerStyle)(_theme)\n        }, /*#__PURE__*/_react.default.createElement(\"div\", {\n          style: (0, _style.messageDateStyle)(_theme)\n        }, /*#__PURE__*/_react.default.createElement(_Shared.CometChatDate, {\n          timestamp: eachMessage === null || eachMessage === void 0 ? void 0 : eachMessage.sentAt,\n          pattern: pattern,\n          customPattern: customPattern,\n          style: dateStyle\n        })));\n      }\n      previousMessageDate = currentMessageDate;\n      var messageKey = eachMessage.id || eachMessage.muid;\n      var className = \"message__\".concat(eachMessage.type, \" message__kit__background\");\n      var alignmentValue = _2.MessageBubbleAlignmentConstants.left;\n      var background;\n      var messageBubbleData = {};\n      if (alignment === (_2.MessageListAlignmentConstants === null || _2.MessageListAlignmentConstants === void 0 ? void 0 : _2.MessageListAlignmentConstants.standard) && ((_loggedInUserRef$curr12 = loggedInUserRef.current) === null || _loggedInUserRef$curr12 === void 0 ? void 0 : _loggedInUserRef$curr12.uid) === (eachMessage === null || eachMessage === void 0 ? void 0 : (_eachMessage$sender = eachMessage.sender) === null || _eachMessage$sender === void 0 ? void 0 : _eachMessage$sender.uid)) {\n        alignmentValue = _2.MessageBubbleAlignmentConstants.right;\n        background = {\n          background: _theme.palette.primary[_theme.palette.mode]\n        };\n        messageBubbleData = sentMessageInputData;\n      } else if (alignment === (_2.MessageListAlignmentConstants === null || _2.MessageListAlignmentConstants === void 0 ? void 0 : _2.MessageListAlignmentConstants.left) && ((_loggedInUserRef$curr13 = loggedInUserRef.current) === null || _loggedInUserRef$curr13 === void 0 ? void 0 : _loggedInUserRef$curr13.uid) === (eachMessage === null || eachMessage === void 0 ? void 0 : (_eachMessage$sender2 = eachMessage.sender) === null || _eachMessage$sender2 === void 0 ? void 0 : _eachMessage$sender2.uid)) {\n        alignmentValue = _2.MessageBubbleAlignmentConstants.left;\n        background = {\n          background: _theme.palette.secondary[_theme.palette.mode]\n        };\n        messageBubbleData = sentMessageInputData;\n      } else {\n        alignmentValue = _2.MessageBubbleAlignmentConstants.left;\n        background = {\n          background: _theme.palette.secondary[_theme.palette.mode]\n        };\n        messageBubbleData = receivedMessageInputData;\n      }\n      var style = _objectSpread(_objectSpread({\n        width: \"100%\",\n        height: \"100%\",\n        border: \"0 none\",\n        borderRadius: \"12px\",\n        nameTextFont: (0, _2.fontHelper)(_theme.typography.caption1),\n        timestampFont: (0, _2.fontHelper)(_theme.typography.caption2)\n      }, background), {}, {\n        nameTextColor: _theme.palette.accent500[_theme.palette.mode],\n        timestampColor: _theme.palette.accent[_theme.palette.mode]\n      });\n      return !eachMessage.action ? /*#__PURE__*/_react.default.createElement(_react.default.Fragment, {\n        key: messageKey\n      }, dateSeparator, /*#__PURE__*/_react.default.createElement(\"div\", {\n        key: messageKey,\n        className: className,\n        style: (0, _style.messageBubbleStyle)(alignment, loggedInUserRef.current, eachMessage)\n      }, /*#__PURE__*/_react.default.createElement(_.CometChatMessageBubble, {\n        key: messageKey,\n        messageBubbleData: messageBubbleData || _messageBubbleConfiguration.messageBubbleData,\n        alignment: alignmentValue,\n        timeAlignment: _messageBubbleConfiguration.timeAlignment,\n        messageObject: eachMessage,\n        messageOptions: filterMessageOptions(eachMessage),\n        loggedInUser: loggedInUserRef.current,\n        customView: filterCustomView(eachMessage),\n        style: _objectSpread({}, style),\n        theme: _theme,\n        updateReaction: onReactToMessages.bind(_this)\n      }))) : null;\n    });\n  };\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"message__list\",\n    style: (0, _style.chatListStyle)(style, _theme)\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"list__wrapper\",\n    style: (0, _style.listWrapperStyle)(style, _theme),\n    ref: messageListEndRef,\n    onScroll: handleScroll\n  }, getMessageContainer(), newMessageIndicator(), emojiBoard(), renderItems()), getSmartReplies());\n});\nexports.CometChatMessageList = CometChatMessageList;\nCometChatMessageList.defaultProps = {\n  limit: 30,\n  user: null,\n  group: null,\n  alignment: \"standard\",\n  messageTypes: null,\n  excludeMessageTypes: null,\n  excludeMessageOptions: null,\n  customMessageOptions: null,\n  onlyUnread: false,\n  hideMessagesFromBlockedUsers: false,\n  hideDeletedMessages: false,\n  tags: null,\n  loadingIconURL: _spinner.default,\n  customView: {\n    loading: \"\",\n    empty: \"\",\n    error: \"\"\n  },\n  emptyText: \"No messages here yet...\",\n  errorText: \"Something went wrong\",\n  hideError: false,\n  customIncomingMessageSound: \"\",\n  enableSoundForMessages: true,\n  sentMessageInputData: {\n    thumbnail: true,\n    title: true,\n    timestamp: true,\n    readReceipt: true\n  },\n  receivedMessageInputData: {\n    thumbnail: true,\n    title: true,\n    timestamp: true,\n    readReceipt: false\n  },\n  style: {\n    width: \"100%\",\n    height: \"100%\",\n    border: \"\",\n    borderRadius: \"8px\",\n    background: \"\",\n    textFont: \"400 12px Inter, sans-serif\",\n    textColor: \"rgb(20,20,20)\"\n  },\n  messageBubbleConfiguration: null,\n  emojiKeyboardConfiguration: null,\n  smartRepliesConfiguration: null,\n  newMessageIndicatorConfiguration: null,\n  dateConfiguration: null\n};\nCometChatMessageList.propTypes = {\n  limit: _propTypes.default.number,\n  user: _propTypes.default.object,\n  group: _propTypes.default.object,\n  alignment: _propTypes.default.string,\n  messageTypes: _propTypes.default.array,\n  excludeMessageTypes: _propTypes.default.array,\n  excludeMessageOptions: _propTypes.default.array,\n  customMessageOptions: _propTypes.default.array,\n  onlyUnread: _propTypes.default.bool,\n  hideMessagesFromBlockedUsers: _propTypes.default.bool,\n  hideDeletedMessages: _propTypes.default.bool,\n  tags: _propTypes.default.array,\n  loadingIconURL: _propTypes.default.string,\n  customView: _propTypes.default.object,\n  emptyText: _propTypes.default.string,\n  errorText: _propTypes.default.string,\n  hideError: _propTypes.default.bool,\n  customIncomingMessageSound: _propTypes.default.string,\n  enableSoundForMessages: _propTypes.default.bool,\n  sentMessageInputData: _propTypes.default.object,\n  receivedMessageInputData: _propTypes.default.object,\n  style: _propTypes.default.object,\n  messageBubbleConfiguration: _propTypes.default.object,\n  emojiKeyboardConfiguration: _propTypes.default.object,\n  smartRepliesConfiguration: _propTypes.default.object,\n  newMessageIndicatorConfiguration: _propTypes.default.object,\n  dateConfiguration: _propTypes.default.object\n};","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","CometChatMessageList","_defineProperty2","_toConsumableArray2","_slicedToArray2","_react","_propTypes","_chat","_","_2","_spinner","_hooks","_controller","_style","_CometChatMessageConstants","_Shared","_3","_SmartRepliesConfiguration","_NewMessageIndicatorConfiguration","_MessageBubbleConfiguration","_DateConfiguration","_CometChatMessageHelper","_this","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","default","getOwnPropertyDescriptors","defineProperties","forwardRef","props","ref","limit","user","group","alignment","messageTypes","excludeMessageOptions","customMessageOptions","excludeMessageTypes","onlyUnread","hideMessagesFromBlockedUsers","hideDeletedMessages","tags","loadingIconURL","customView","emptyText","errorText","hideError","customIncomingMessageSound","enableSoundForMessages","sentMessageInputData","receivedMessageInputData","style","theme","messageBubbleConfiguration","emojiKeyboardConfiguration","smartRepliesConfiguration","newMessageIndicatorConfiguration","dateConfiguration","lastScrollTop","loggedInUserRef","useRef","_React$useState","useState","_React$useState2","messageCount","setMessageCount","_React$useState3","_React$useState4","messageList","setMessageList","_React$useState5","_React$useState6","unreadMessageCount","setUnreadMessageCount","callbackDataRef","chatWithRef","chatWithTypeRef","_React$useState7","localize","_React$useState8","decoratorMessage","setDecoratorMessage","messageTypesRef","messageCategoryRef","messageListManagerRef","messageListEndRef","_React$useState9","_React$useState10","viewEmojiTray","setViewEmojiTray","_React$useState11","_React$useState12","messageToReact","setMessageToReact","_React$useState13","_React$useState14","newMessage","setnewMessage","_theme","CometChatTheme","_messageBubbleConfiguration","MessageBubbleConfiguration","_emojiKeyboardConfiguration","EmojiKeyboardConfiguration","_newMessageIndicatorConfiguration","NewMessageIndicatorConfiguration","_dateConfiguration","DateConfiguration","pattern","useImperativeHandle","addMessage","updateMessage","removeMessage","deleteMessage","scrollToBottom","translateMessage","reactToMessages","messageListCallback","listenerName","_len","args","Array","_key","current","name","concat","_callbackDataRef$curr","_callbackDataRef$curr2","handler","handlers","e","errorHandler","errorCode","CometChatMessageEvents","emit","onMessageError","reInitializeMessageBuilder","resetChatWindow","removeListeners","MessageListManager","fetchMessages","then","messagelist","messageHandler","attachListeners","message","prevMessageList","updateUnreadMessageCount","playNotificationSound","_message$metadata","category","MessageCategoryConstants","CometChatSoundManager","play","Sound","incomingMessage","metadata","incrementUnreadCount","withMuid","undefined","messageKey","findIndex","m","muid","id","messageObject","splice","updateMessageAsRead","messageId","readAt","getReadAt","markAllMessageAsRead","messages","markMessageAsRead","CometChat","markAsRead","catch","error","handleNewMessages","_chatWithRef$current","messageReceivedHandler","scrollHeight","scrollTop","clientHeight","messageConstants","maximumNumOfMessages","onMessageRead","ReceiverTypeConstants","getReceiverType","getReceiverId","guid","_chatWithRef$current2","_loggedInUserRef$curr","_loggedInUserRef$curr2","_chatWithRef$current3","getSender","uid","handleNewCustomMessages","_loggedInUserRef$curr3","_chatWithRef$current4","_chatWithRef$current5","_chatWithRef$current6","_loggedInUserRef$curr4","_chatWithRef$current7","customMessageReceivedHandler","type","CometChatCustomMessageTypes","poll","document","whiteboard","markAllMessageAsDelivered","readMessage","_messageList$i","deliveredAt","getDeliveredAt","_messageList$i2","handleMessageDeliveryAndReadReceipt","messageReceipt","_messageReceipt$getSe","_chatWithRef$current8","_chatWithRef$current9","getUid","getReceiver","getReceiptType","updateMessageAsDelivered","handleMessageDelete","_chatWithRef$current10","_chatWithRef$current11","handleMessageEdit","_chatWithRef$current12","_chatWithRef$current13","_chatWithRef$current14","handleNewGroupActionMessage","_chatWithRef$current15","prependMessages","scroll","val","_message$getSender","_loggedInUserRef$curr5","lastScrollPoint","setTimeout","handleScroll","event","currentTarget","scrolledToBottom","top","Math","round","totalMessageCount","onTextMessageReceived","onMediaMessageReceived","onCustomMessageReceived","onMessagesDelivered","onMessagesRead","onMessageDeleted","onMessageEdited","onGroupMemberScopeChanged","onGroupMemberKicked","onGroupMemberBanned","onGroupMemberUnbanned","onMemberAddedToGroup","onGroupMemberLeft","onGroupMemberJoined","Hooks","messageText","text","translateToLanguage","CometChatLocalize","getLocale","callExtension","ExtensionConstants","messageTranslation","ExtensionURLs","translate","msgId","languages","result","hasOwnProperty","translations","assign","translatedText","editMessage","onMessageEdit","status","messageStatus","inprogress","copyMessage","navigator","clipboard","writeText","deletedMessage","onReactToMessages","emoji","old","emojiTrayPreview","onReactionSelected","emojiObject","emojiBoard","_viewEmojiTray$event","_viewEmojiTray$event2","createElement","CometChatPopover","position","x","clientX","y","clientY","emojiBoardToolTipStyle","CometChatEmojiKeyboard","emojiKeyBoardStyle","hideSearch","onClick","bind","_loggedInUserRef$curr6","_loggedInUserRef$curr7","_loggedInUserRef$curr8","_loggedInUserRef$curr9","reactionObject","newMessageObject","userObject","avatar","reactionExtensionsData","getExtensionsData","reactions","metadataObject","extensions","data","reaction","setOptionsCallbackData","messageOptions","optionsList","eachMessageOption","MessageOptionConstants","reactToMessage","filterMessageOptions","_messageTypes","getDefaultTypes","messageTemplateObject","options","option","_loggedInUserRef$curr10","_messageObject$sender","_loggedInUserRef$curr11","_messageObject$sender2","sender","optionFor","MessageOptionForConstants","both","receiver","excludeOption","index","indexOf","filterCustomView","_templateObject$","templateObject","getCustomView","getMessageContainer","_localize","messageContainer","toLowerCase","decoratorMsgStyle","className","loading","decoratorMsgImgStyle","empty","decoratorMsgTxtStyle","fontHelper","onClose","_smartRepliesConfiguration","SmartRepliesConfiguration","getSmartReplies","CometChatSmartReplies","customOutgoingMessageSound","loggedInUser","smartReplyStyle","newMessageIndicator","CometChatNewMessageIndicator","Icon","messageIndicatorStyle","renderItems","previousMessageDate","map","eachMessage","_previousMessageDate","_previousMessageDate2","_previousMessageDate3","_dateConfiguration$st","_theme$palette","_theme$palette2","_dateConfiguration$st2","_theme$typography","_loggedInUserRef$curr12","_eachMessage$sender","_loggedInUserRef$curr13","_eachMessage$sender2","dateSeparator","currentMessageDate","Date","sentAt","currentDate","getDate","getMonth","getFullYear","previousDate","customPattern","dateStyle","DateStyles","textColor","palette","accent500","mode","textFont","typography","caption2","messageDateContainerStyle","messageDateStyle","CometChatDate","timestamp","alignmentValue","MessageBubbleAlignmentConstants","left","background","messageBubbleData","MessageListAlignmentConstants","standard","right","primary","secondary","width","height","border","borderRadius","nameTextFont","caption1","timestampFont","nameTextColor","timestampColor","accent","action","Fragment","messageBubbleStyle","CometChatMessageBubble","timeAlignment","updateReaction","chatListStyle","listWrapperStyle","onScroll","defaultProps","thumbnail","title","readReceipt","propTypes","number","string","array","bool"],"sources":["/home/admin1/dev/react/react-sample-guide/sample-react-guides/node_modules/react-ui-kit-testing/dist/Messages/CometChatMessageList/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatMessageList = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _ = require(\"..\");\nvar _2 = require(\"../..\");\nvar _spinner = _interopRequireDefault(require(\"./resources/spinner.svg\"));\nvar _hooks = require(\"./hooks\");\nvar _controller = require(\"./controller\");\nvar _style = require(\"./style\");\nvar _CometChatMessageConstants = require(\"../CometChatMessageConstants\");\nvar _Shared = require(\"../../Shared\");\nvar _3 = require(\"../\");\nvar _SmartRepliesConfiguration = require(\"../CometChatSmartReplies/SmartRepliesConfiguration\");\nvar _NewMessageIndicatorConfiguration = require(\"../CometChatNewMessageIndicator/NewMessageIndicatorConfiguration\");\nvar _MessageBubbleConfiguration = require(\"../Bubbles/CometChatMessageBubble/MessageBubbleConfiguration\");\nvar _DateConfiguration = require(\"../../Shared/PrimaryComponents/CometChatConfiguration/DateConfiguration\");\nvar _CometChatMessageHelper = require(\"../CometChatMessageHelper\");\nvar _this = void 0;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n/**\n *\n * CometChatMessageList component retrieves the latest messages and presents them inside a message bubble, that a CometChat logged-in user has been a part of.\n * The state of the component is communicated via 3 states i.e empty, loading and error\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @copyright Â© 2022 CometChat Inc.\n *\n *\n */\n\nvar CometChatMessageList = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  /**\n   * Destructuring prop values\n   */\n  var limit = props.limit,\n    user = props.user,\n    group = props.group,\n    alignment = props.alignment,\n    messageTypes = props.messageTypes,\n    excludeMessageOptions = props.excludeMessageOptions,\n    customMessageOptions = props.customMessageOptions,\n    excludeMessageTypes = props.excludeMessageTypes,\n    onlyUnread = props.onlyUnread,\n    hideMessagesFromBlockedUsers = props.hideMessagesFromBlockedUsers,\n    hideDeletedMessages = props.hideDeletedMessages,\n    tags = props.tags,\n    loadingIconURL = props.loadingIconURL,\n    customView = props.customView,\n    emptyText = props.emptyText,\n    errorText = props.errorText,\n    hideError = props.hideError,\n    customIncomingMessageSound = props.customIncomingMessageSound,\n    enableSoundForMessages = props.enableSoundForMessages,\n    sentMessageInputData = props.sentMessageInputData,\n    receivedMessageInputData = props.receivedMessageInputData,\n    style = props.style,\n    theme = props.theme,\n    messageBubbleConfiguration = props.messageBubbleConfiguration,\n    emojiKeyboardConfiguration = props.emojiKeyboardConfiguration,\n    smartRepliesConfiguration = props.smartRepliesConfiguration,\n    newMessageIndicatorConfiguration = props.newMessageIndicatorConfiguration,\n    dateConfiguration = props.dateConfiguration;\n  var lastScrollTop = 0;\n  var loggedInUserRef = _react.default.useRef(null);\n  var _React$useState = _react.default.useState(0),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    messageCount = _React$useState2[0],\n    setMessageCount = _React$useState2[1];\n  var _React$useState3 = _react.default.useState([]),\n    _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n    messageList = _React$useState4[0],\n    setMessageList = _React$useState4[1];\n  var _React$useState5 = _react.default.useState(0),\n    _React$useState6 = (0, _slicedToArray2.default)(_React$useState5, 2),\n    unreadMessageCount = _React$useState6[0],\n    setUnreadMessageCount = _React$useState6[1];\n  var callbackDataRef = _react.default.useRef(null);\n  var chatWithRef = _react.default.useRef(null);\n  var chatWithTypeRef = _react.default.useRef(null);\n  var _React$useState7 = _react.default.useState((0, _2.localize)(\"LOADING\")),\n    _React$useState8 = (0, _slicedToArray2.default)(_React$useState7, 2),\n    decoratorMessage = _React$useState8[0],\n    setDecoratorMessage = _React$useState8[1];\n  var messageTypesRef = _react.default.useRef(null);\n  var messageCategoryRef = _react.default.useRef(null);\n  var messageListManagerRef = _react.default.useRef(null);\n  var messageListEndRef = _react.default.useRef(null);\n  var _React$useState9 = _react.default.useState({}),\n    _React$useState10 = (0, _slicedToArray2.default)(_React$useState9, 2),\n    viewEmojiTray = _React$useState10[0],\n    setViewEmojiTray = _React$useState10[1];\n  var _React$useState11 = _react.default.useState(null),\n    _React$useState12 = (0, _slicedToArray2.default)(_React$useState11, 2),\n    messageToReact = _React$useState12[0],\n    setMessageToReact = _React$useState12[1];\n  var _React$useState13 = _react.default.useState({}),\n    _React$useState14 = (0, _slicedToArray2.default)(_React$useState13, 2),\n    newMessage = _React$useState14[0],\n    setnewMessage = _React$useState14[1];\n  var _theme = new _2.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n  var _messageBubbleConfiguration = messageBubbleConfiguration || new _MessageBubbleConfiguration.MessageBubbleConfiguration({});\n  var _emojiKeyboardConfiguration = emojiKeyboardConfiguration || new _3.EmojiKeyboardConfiguration({});\n  var _newMessageIndicatorConfiguration = newMessageIndicatorConfiguration || new _NewMessageIndicatorConfiguration.NewMessageIndicatorConfiguration({});\n  var _dateConfiguration = dateConfiguration || new _DateConfiguration.DateConfiguration({\n    pattern: \"dayDateFormat\"\n  });\n\n  /**\n   * Update messagelist\n   */\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      addMessage: addMessage,\n      updateMessage: updateMessage,\n      removeMessage: removeMessage,\n      deleteMessage: deleteMessage,\n      scrollToBottom: scrollToBottom,\n      translateMessage: translateMessage,\n      reactToMessages: reactToMessages\n    };\n  });\n  var messageListCallback = function messageListCallback(listenerName) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    callbackDataRef.current = {\n      name: listenerName,\n      args: [].concat(args)\n    };\n    try {\n      var _callbackDataRef$curr, _callbackDataRef$curr2;\n      var handler = handlers[(_callbackDataRef$curr = callbackDataRef.current) === null || _callbackDataRef$curr === void 0 ? void 0 : _callbackDataRef$curr.name];\n      if (handler) return handler.apply(void 0, (0, _toConsumableArray2.default)((_callbackDataRef$curr2 = callbackDataRef.current) === null || _callbackDataRef$curr2 === void 0 ? void 0 : _callbackDataRef$curr2.args));\n    } catch (e) {\n      throw e;\n    }\n  };\n  var errorHandler = function errorHandler(errorCode) {\n    _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageError, errorCode);\n  };\n  var reInitializeMessageBuilder = function reInitializeMessageBuilder() {\n    resetChatWindow();\n    setDecoratorMessage(\"loading\");\n    messageListManagerRef.current.removeListeners();\n    messageListManagerRef.current = new _controller.MessageListManager(limit, user, group, onlyUnread, hideDeletedMessages, hideMessagesFromBlockedUsers, tags, messageTypesRef.current, messageCategoryRef.current);\n    (0, _hooks.fetchMessages)(messageListManagerRef === null || messageListManagerRef === void 0 ? void 0 : messageListManagerRef.current).then(function (messagelist) {\n      messageHandler(messagelist, true);\n      setMessageList(messagelist);\n      messageListManagerRef.current.attachListeners(messageListCallback);\n    });\n  };\n\n  /**\n   * add new message to the messageList\n   */\n  var addMessage = function addMessage(message) {\n    setMessageList(function (prevMessageList) {\n      var messagelist = (0, _toConsumableArray2.default)(prevMessageList);\n      messagelist.push(message);\n      return (0, _toConsumableArray2.default)(messagelist);\n    });\n    // scrollToBottom()\n  };\n\n  /**\n   * Set unreadCount when new message is received\n   */\n  var updateUnreadMessageCount = function updateUnreadMessageCount() {\n    setUnreadMessageCount(unreadMessageCount + 1);\n  };\n\n  /**\n   *\n   * @param {*} message\n   * Function to play notification sound if sound for messages is enabled.\n   * It checks for custom sound and if not provided plays default sound.\n   */\n  var playNotificationSound = function playNotificationSound(message) {\n    var _message$metadata;\n    if ((message === null || message === void 0 ? void 0 : message.category) === _2.MessageCategoryConstants.message) {\n      if (enableSoundForMessages) {\n        if (customIncomingMessageSound) {\n          _2.CometChatSoundManager.play(_2.CometChatSoundManager.Sound.incomingMessage, customIncomingMessageSound);\n        } else {\n          _2.CometChatSoundManager.play(_2.CometChatSoundManager.Sound.incomingMessage);\n        }\n      }\n    } else if ((message === null || message === void 0 ? void 0 : message.category) !== _2.MessageCategoryConstants.message && message !== null && message !== void 0 && (_message$metadata = message.metadata) !== null && _message$metadata !== void 0 && _message$metadata.incrementUnreadCount) {\n      if (enableSoundForMessages) {\n        if (customIncomingMessageSound) {\n          _2.CometChatSoundManager.play(customIncomingMessageSound);\n        } else {\n          _2.CometChatSoundManager.play(_2.CometChatSoundManager.Sound.incomingMessage);\n        }\n      }\n    }\n  };\n\n  /**\n   * Update message\n   */\n  var updateMessage = function updateMessage(message) {\n    var withMuid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var messageKey;\n    var messagelist = (0, _toConsumableArray2.default)(messageList);\n    if (withMuid) {\n      messageKey = messagelist.findIndex(function (m) {\n        return m.muid === message.muid;\n      });\n    } else {\n      messageKey = messagelist.findIndex(function (m) {\n        return m.id === message.id;\n      });\n    }\n    if (messageKey > -1) {\n      var messageObject = _objectSpread(_objectSpread({}, messageList[messageKey]), message);\n      messagelist.splice(messageKey, 1, messageObject);\n      setMessageCount(messagelist.length);\n      setMessageList(messagelist);\n    }\n  };\n\n  /**\n   * Update message as read; show double blue tick\n   */\n  var updateMessageAsRead = function updateMessageAsRead(message) {\n    var messagelist = (0, _toConsumableArray2.default)(messageList);\n    var messageKey = messagelist.findIndex(function (m) {\n      return m.id === message.messageId;\n    });\n    if (messageKey > -1) {\n      var messageObject = _objectSpread({}, messageList[messageKey]);\n      messageObject.readAt = message.getReadAt();\n      messagelist.splice(messageKey, 1, messageObject);\n      setMessageList(messagelist);\n    }\n    markAllMessageAsRead(message, messageKey);\n  };\n\n  /**\n   * Update message as deleted; show deleted message bubble\n   */\n  var removeMessage = function removeMessage(message) {\n    var messages = (0, _toConsumableArray2.default)(messageList);\n    var messageKey = messages.findIndex(function (m) {\n      return m.id === message.id;\n    });\n    if (messageKey > -1) {\n      if (hideDeletedMessages) {\n        messages.splice(messageKey, 1);\n      } else {\n        var messageObject = _objectSpread(_objectSpread({}, messages[messageKey]), message);\n        messages.splice(messageKey, 1, messageObject);\n      }\n      setMessageList((0, _toConsumableArray2.default)(messages));\n    }\n  };\n\n  /**\n   *\n   * @param {*} message\n   * emits markAsRead Event\n   */\n  var markMessageAsRead = function markMessageAsRead(message) {\n    if (!(message !== null && message !== void 0 && message.readAt)) {\n      _chat.CometChat.markAsRead(message).catch(function (error) {\n        errorHandler(error);\n      });\n    }\n  };\n  var handleNewMessages = function handleNewMessages(message) {\n    var _chatWithRef$current;\n    //handling dom lag - increment count only for main message list\n\n    setnewMessage(message);\n    var messageReceivedHandler = function messageReceivedHandler(message) {\n      //if the user has not scrolled in chat window(scroll is at the bottom of the chat window)\n      setMessageCount(messageCount + 1);\n      if (messageListEndRef.current.scrollHeight - messageListEndRef.current.scrollTop - messageListEndRef.current.clientHeight <= 1) {\n        if (messageCount > _.messageConstants.maximumNumOfMessages) {\n          reInitializeMessageBuilder();\n        } else {\n          playNotificationSound(message);\n          addMessage(message);\n          scrollToBottom();\n          markMessageAsRead(message);\n          _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n        }\n      } else {\n        //if the user has scrolled up in chat window\n        playNotificationSound(message);\n        addMessage(message);\n        updateUnreadMessageCount();\n      }\n    };\n\n    /**\n     * message receiver is chat window group\n     */\n    if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current = chatWithRef.current) === null || _chatWithRef$current === void 0 ? void 0 : _chatWithRef$current.guid)) {\n      messageReceivedHandler(message);\n    } else if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user) {\n      var _chatWithRef$current2, _loggedInUserRef$curr, _loggedInUserRef$curr2, _chatWithRef$current3;\n      /**\n       * If the message sender is chat window user and message receiver is logged-in user\n       * OR\n       * If the message sender is logged-in user and message receiver is chat window user\n       */\n      if (message.getSender().uid === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current2 = chatWithRef.current) === null || _chatWithRef$current2 === void 0 ? void 0 : _chatWithRef$current2.uid) && message.getReceiverId() === (loggedInUserRef === null || loggedInUserRef === void 0 ? void 0 : (_loggedInUserRef$curr = loggedInUserRef.current) === null || _loggedInUserRef$curr === void 0 ? void 0 : _loggedInUserRef$curr.uid) || message.getSender().uid === (loggedInUserRef === null || loggedInUserRef === void 0 ? void 0 : (_loggedInUserRef$curr2 = loggedInUserRef.current) === null || _loggedInUserRef$curr2 === void 0 ? void 0 : _loggedInUserRef$curr2.uid) && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current3 = chatWithRef.current) === null || _chatWithRef$current3 === void 0 ? void 0 : _chatWithRef$current3.uid)) {\n        messageReceivedHandler(message);\n      }\n    }\n  };\n  var handleNewCustomMessages = function handleNewCustomMessages(message) {\n    var _loggedInUserRef$curr3, _chatWithRef$current4, _chatWithRef$current5, _chatWithRef$current6, _loggedInUserRef$curr4, _chatWithRef$current7;\n    var customMessageReceivedHandler = function customMessageReceivedHandler(message) {\n      setMessageCount(messageCount + 1);\n      //if the user has not scrolled in chat window(scroll is at the bottom of the chat window)\n      if (messageListEndRef.current.scrollHeight - messageListEndRef.current.scrollTop - messageListEndRef.current.clientHeight <= 1) {\n        if (messageCount > _.messageConstants.maximumNumOfMessages) {\n          reInitializeMessageBuilder();\n        } else {\n          playNotificationSound(message);\n          addMessage(message);\n          scrollToBottom();\n          markMessageAsRead(message);\n          _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n        }\n      } else {\n        //if the user has scrolled in chat window\n        playNotificationSound(message);\n        addMessage(message);\n        updateUnreadMessageCount();\n      }\n    };\n    if (chatWithTypeRef.current === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && ((_loggedInUserRef$curr3 = loggedInUserRef.current) === null || _loggedInUserRef$curr3 === void 0 ? void 0 : _loggedInUserRef$curr3.uid) === message.getSender().uid && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current4 = chatWithRef.current) === null || _chatWithRef$current4 === void 0 ? void 0 : _chatWithRef$current4.guid) && (message.type === _.CometChatCustomMessageTypes.poll || message.type === _.CometChatCustomMessageTypes.document || message.type === _.CometChatCustomMessageTypes.whiteboard)) {\n      playNotificationSound();\n      addMessage(message);\n      scrollToBottom();\n    } else if (chatWithTypeRef.current === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current5 = chatWithRef.current) === null || _chatWithRef$current5 === void 0 ? void 0 : _chatWithRef$current5.guid)) {\n      customMessageReceivedHandler(message, _2.ReceiverTypeConstants.group);\n    } else if (chatWithTypeRef.current === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && message.getSender().uid === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current6 = chatWithRef.current) === null || _chatWithRef$current6 === void 0 ? void 0 : _chatWithRef$current6.uid)) {\n      customMessageReceivedHandler(message, _2.ReceiverTypeConstants.user);\n    } else if (chatWithTypeRef.current === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && ((_loggedInUserRef$curr4 = loggedInUserRef.current) === null || _loggedInUserRef$curr4 === void 0 ? void 0 : _loggedInUserRef$curr4.uid) === message.getSender().uid && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current7 = chatWithRef.current) === null || _chatWithRef$current7 === void 0 ? void 0 : _chatWithRef$current7.uid) && (message.type === _.CometChatCustomMessageTypes.poll || message.type === _.CometChatCustomMessageTypes.document || message.type === _.CometChatCustomMessageTypes.whiteboard)) {\n      playNotificationSound(message);\n      addMessage(message);\n      scrollToBottom();\n    }\n  };\n  var markAllMessageAsDelivered = function markAllMessageAsDelivered(readMessage, messageKey) {\n    for (var i = messageKey; i >= 0; i--) {\n      var _messageList$i;\n      if (!((_messageList$i = messageList[i]) !== null && _messageList$i !== void 0 && _messageList$i.deliveredAt)) {\n        messageList[i].deliveredAt = readMessage === null || readMessage === void 0 ? void 0 : readMessage.getDeliveredAt();\n      }\n    }\n  };\n  var markAllMessageAsRead = function markAllMessageAsRead(readMessage, messageKey) {\n    for (var i = messageKey; i >= 0; i--) {\n      var _messageList$i2;\n      if (!((_messageList$i2 = messageList[i]) !== null && _messageList$i2 !== void 0 && _messageList$i2.readAt)) {\n        messageList[i].readAt = readMessage === null || readMessage === void 0 ? void 0 : readMessage.getReadAt();\n      }\n    }\n  };\n  var handleMessageDeliveryAndReadReceipt = function handleMessageDeliveryAndReadReceipt(messageReceipt) {\n    var _messageReceipt$getSe, _chatWithRef$current8, _chatWithRef$current9;\n    //read receipts\n    if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiverType()) === _2.ReceiverTypeConstants.user && (messageReceipt === null || messageReceipt === void 0 ? void 0 : (_messageReceipt$getSe = messageReceipt.getSender()) === null || _messageReceipt$getSe === void 0 ? void 0 : _messageReceipt$getSe.getUid()) === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current8 = chatWithRef.current) === null || _chatWithRef$current8 === void 0 ? void 0 : _chatWithRef$current8.uid) && (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiver()) === loggedInUserRef.current.uid) {\n      if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiptType()) === \"delivery\") {\n        updateMessageAsDelivered(messageReceipt);\n      } else if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiptType()) === \"read\") {\n        updateMessageAsRead(messageReceipt);\n      }\n    } else if ((messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiverType()) === _2.ReceiverTypeConstants.group && (messageReceipt === null || messageReceipt === void 0 ? void 0 : messageReceipt.getReceiver()) === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current9 = chatWithRef.current) === null || _chatWithRef$current9 === void 0 ? void 0 : _chatWithRef$current9.guid)) {}\n  };\n  var handleMessageDelete = function handleMessageDelete(message) {\n    var _chatWithRef$current10, _chatWithRef$current11;\n    if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current10 = chatWithRef.current) === null || _chatWithRef$current10 === void 0 ? void 0 : _chatWithRef$current10.guid)) {\n      removeMessage(message);\n    } else if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && message.getSender().uid === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current11 = chatWithRef.current) === null || _chatWithRef$current11 === void 0 ? void 0 : _chatWithRef$current11.uid)) {\n      removeMessage(message);\n    }\n  };\n  var handleMessageEdit = function handleMessageEdit(message) {\n    var _chatWithRef$current12, _chatWithRef$current13, _chatWithRef$current14;\n    if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current12 = chatWithRef.current) === null || _chatWithRef$current12 === void 0 ? void 0 : _chatWithRef$current12.guid)) {\n      updateMessage(message);\n    } else if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && loggedInUserRef.current.uid === message.getReceiverId() && message.getSender().uid === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current13 = chatWithRef.current) === null || _chatWithRef$current13 === void 0 ? void 0 : _chatWithRef$current13.uid)) {\n      updateMessage(message);\n    } else if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.user && message.getReceiverType() === _2.ReceiverTypeConstants.user && loggedInUserRef.current.uid === message.getSender().uid && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current14 = chatWithRef.current) === null || _chatWithRef$current14 === void 0 ? void 0 : _chatWithRef$current14.uid)) {\n      updateMessage(message);\n    }\n  };\n  var handleNewGroupActionMessage = function handleNewGroupActionMessage(message) {\n    var _chatWithRef$current15;\n    if ((chatWithTypeRef === null || chatWithTypeRef === void 0 ? void 0 : chatWithTypeRef.current) === _2.ReceiverTypeConstants.group && message.getReceiverType() === _2.ReceiverTypeConstants.group && message.getReceiverId() === (chatWithRef === null || chatWithRef === void 0 ? void 0 : (_chatWithRef$current15 = chatWithRef.current) === null || _chatWithRef$current15 === void 0 ? void 0 : _chatWithRef$current15.guid)) {\n      playNotificationSound(message);\n      addMessage(message);\n      // scrollToBottom();\n      markMessageAsRead(message);\n      _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n    }\n  };\n\n  /**\n   * update message list\n   */\n  var prependMessages = function prependMessages(messages) {\n    var messagelist = [].concat((0, _toConsumableArray2.default)(messages), (0, _toConsumableArray2.default)(messageList));\n    setMessageList(messagelist);\n    setMessageCount(messagelist.length);\n  };\n  var messageHandler = function messageHandler(messagelist, scroll, val) {\n    messagelist.forEach(function (message) {\n      var _message$getSender, _loggedInUserRef$curr5;\n      //if the sender of the message is not the loggedin user, mark the message as read.\n      if ((message === null || message === void 0 ? void 0 : (_message$getSender = message.getSender()) === null || _message$getSender === void 0 ? void 0 : _message$getSender.getUid()) !== ((_loggedInUserRef$curr5 = loggedInUserRef.current) === null || _loggedInUserRef$curr5 === void 0 ? void 0 : _loggedInUserRef$curr5.uid) && !(message !== null && message !== void 0 && message.readAt)) {\n        if (message.getReceiverType() === _2.ReceiverTypeConstants.user) {\n          markMessageAsRead(message);\n          _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n        } else if (message.getReceiverType() === _2.ReceiverTypeConstants.group) {\n          markMessageAsRead(message);\n          _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n        }\n      }\n    });\n    if (scroll) {\n      var lastScrollPoint = val || 0;\n      scrollToBottom(lastScrollPoint);\n    }\n  };\n  var scrollToBottom = function scrollToBottom() {\n    var scrollHeight = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    setTimeout(function () {\n      if (messageListEndRef && messageListEndRef.current) {\n        messageListEndRef.current.scrollTop = messageListEndRef.current.scrollHeight - scrollHeight;\n      }\n    }, 10);\n  };\n  var handleScroll = function handleScroll(event) {\n    var scrollTop = event.currentTarget.scrollTop;\n    var scrollHeight = event.currentTarget.scrollHeight;\n    var clientHeight = event.currentTarget.clientHeight;\n    lastScrollTop = scrollHeight - scrollTop;\n    if (lastScrollTop - clientHeight <= 1) {\n      scrolledToBottom();\n    }\n    var top = Math.round(scrollTop) === 0;\n    if (top && messageList.length) {\n      (0, _hooks.fetchMessages)(messageListManagerRef === null || messageListManagerRef === void 0 ? void 0 : messageListManagerRef.current).then(function (messageList) {\n        messageHandler(messageList, false);\n      }).catch(function (error) {\n        errorHandler(error);\n        setDecoratorMessage((0, _2.localize)(\"SOMETHING_WRONG\"));\n      });\n    }\n  };\n\n  /**\n   * Update message as delivered; show double grey tick\n   */\n  var updateMessageAsDelivered = function updateMessageAsDelivered(message) {\n    var messagelist = (0, _toConsumableArray2.default)(messageList);\n    var messageKey = messagelist.findIndex(function (m) {\n      return m.id === message.messageId;\n    });\n    if (messageKey > -1) {\n      var messageObject = _objectSpread({}, messageList[messageKey]);\n      messageObject.deliveredAt = message.getDeliveredAt();\n      messagelist === null || messagelist === void 0 ? void 0 : messagelist.splice(messageKey, 1, messageObject);\n      setMessageList(messagelist);\n    }\n    markAllMessageAsDelivered(message, messageKey);\n  };\n\n  /**\n   * Upon scrolling to bottom, reload the chat if messages cross the maximum count,\n   * or else render and update (mark them as read) the stored messages\n   */\n  var scrolledToBottom = function scrolledToBottom() {\n    if (unreadMessageCount <= 0) {\n      return false;\n    }\n    var totalMessageCount = messageList.length + unreadMessageCount;\n    var message = messageList[messageList.length - 1];\n    var messageKey = messageList[messageList.length - 1];\n    if (totalMessageCount > _.messageConstants.maximumNumOfMessages) {\n      reInitializeMessageBuilder();\n    } else {\n      setUnreadMessageCount(0);\n      scrollToBottom();\n      markMessageAsRead(message);\n      markAllMessageAsRead(message, messageKey);\n      _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageRead, message);\n    }\n  };\n\n  /**\n   * upon scrolling to the bottom, update the unread messagess\n   */\n\n  /**\n   * reset message list\n   */\n  var resetChatWindow = function resetChatWindow() {\n    setMessageList([]);\n    setUnreadMessageCount(0);\n    setMessageCount(0);\n    setnewMessage({});\n  };\n  var handlers = {\n    onTextMessageReceived: handleNewMessages,\n    onMediaMessageReceived: handleNewMessages,\n    onCustomMessageReceived: handleNewCustomMessages,\n    onMessagesDelivered: handleMessageDeliveryAndReadReceipt,\n    onMessagesRead: handleMessageDeliveryAndReadReceipt,\n    onMessageDeleted: handleMessageDelete,\n    onMessageEdited: handleMessageEdit,\n    onGroupMemberScopeChanged: handleNewGroupActionMessage,\n    onGroupMemberKicked: handleNewGroupActionMessage,\n    onGroupMemberBanned: handleNewGroupActionMessage,\n    onGroupMemberUnbanned: handleNewGroupActionMessage,\n    onMemberAddedToGroup: handleNewGroupActionMessage,\n    onGroupMemberLeft: handleNewGroupActionMessage,\n    onGroupMemberJoined: handleNewGroupActionMessage\n  };\n  (0, _hooks.Hooks)(limit, user, group, excludeMessageTypes, onlyUnread, hideDeletedMessages, hideMessagesFromBlockedUsers, tags, messageTypes, loggedInUserRef, messageList, setMessageList, setDecoratorMessage, messageHandler, messageListCallback, messageTypesRef, messageCategoryRef, messageListManagerRef, _2.localize, errorHandler, chatWithRef, chatWithTypeRef, setMessageCount, setnewMessage);\n\n  /**\n   *\n   * @param {*} message\n   * returns translated text and push it into metadata of message Object\n   */\n  var translateMessage = function translateMessage(message) {\n    var messageId = message.id;\n    var messageText = message.text;\n    var translateToLanguage = _2.CometChatLocalize.getLocale();\n    var translateMessage = \"\";\n    _chat.CometChat.callExtension(_2.ExtensionConstants.messageTranslation, \"POST\", _2.ExtensionURLs.translate, {\n      msgId: messageId,\n      text: messageText,\n      languages: [translateToLanguage]\n    }).then(function (result) {\n      if (result !== null && result !== void 0 && result.hasOwnProperty(\"translations\") && result.translations.length) {\n        var messageTranslation = result.translations[0];\n        translateMessage = \"\".concat(messageTranslation[\"message_translated\"]);\n        if (message.hasOwnProperty(\"metadata\")) {\n          Object.assign(message.metadata, {\n            translatedText: translateMessage\n          });\n        } else {\n          Object.assign(message, {\n            metadata: {\n              translatedText: translateMessage\n            }\n          });\n        }\n        updateMessage(message);\n      }\n    }).catch(function (error) {\n      errorHandler(error);\n    });\n  };\n\n  /**\n   *\n   * @param {*} message\n   * emits edit Message event\n   */\n  var editMessage = function editMessage(message) {\n    _.CometChatMessageEvents.emit(_.CometChatMessageEvents.onMessageEdit, {\n      message: message,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n  };\n\n  /**\n   *\n   * @param {*} message\n   * copies message text to the clipboard\n   */\n  var copyMessage = function copyMessage(message) {\n    navigator.clipboard.writeText(message.text);\n  };\n\n  /**\n   *\n   * @param {*} message\n   * Deletes the selected message\n   */\n  var deleteMessage = function deleteMessage(message) {\n    _chat.CometChat.deleteMessage(message.id).then(function (deletedMessage) {\n      removeMessage(deletedMessage);\n    }).catch(function (error) {\n      errorHandler(error);\n    });\n  };\n\n  /**\n   *\n   * @param {*} message\n   * @param {*} event\n   * set visibility of Emoji Tray to true\n   */\n  var onReactToMessages = function onReactToMessages(message, event, emoji) {\n    // To remove reaction by clicking on the reacted emoji\n    if (emoji) {\n      reactToMessages(message, emoji);\n    }\n    // Open EmojiTray When clicked on Reaction messageOption or Add Reaction button\n    else {\n      setMessageToReact(message);\n      setViewEmojiTray(function (old) {\n        return {\n          emojiTrayPreview: !old.emojiTrayPreview,\n          event: event\n        };\n      });\n    }\n  };\n\n  /**\n   *\n   * @param {*} emojiObject\n   * triggers reactToMessages function after closing the emojiKeyboard\n   */\n  var onReactionSelected = function onReactionSelected(emojiObject) {\n    setViewEmojiTray(function (old) {\n      return {\n        emojiTrayPreview: !old.emojiTrayPreview\n      };\n    });\n    reactToMessages(messageToReact, emojiObject);\n  };\n\n  /**\n   *\n   * @returns EmojiKeyboard inside tooltip\n   */\n  var emojiBoard = function emojiBoard() {\n    if (viewEmojiTray.emojiTrayPreview) {\n      var _viewEmojiTray$event, _viewEmojiTray$event2;\n      return /*#__PURE__*/_react.default.createElement(_2.CometChatPopover, {\n        position: \"top\",\n        x: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event = viewEmojiTray.event) === null || _viewEmojiTray$event === void 0 ? void 0 : _viewEmojiTray$event.clientX,\n        y: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event2 = viewEmojiTray.event) === null || _viewEmojiTray$event2 === void 0 ? void 0 : _viewEmojiTray$event2.clientY,\n        style: (0, _style.emojiBoardToolTipStyle)(_theme)\n      }, /*#__PURE__*/_react.default.createElement(_2.CometChatEmojiKeyboard, {\n        style: (0, _style.emojiKeyBoardStyle)(_theme),\n        hideSearch: _emojiKeyboardConfiguration.hideSearch,\n        theme: _theme,\n        onClick: onReactionSelected.bind(_this) || _emojiKeyboardConfiguration.onClick\n      }));\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   *\n   * @param {*} message\n   * @param {*} emoji\n   * Calls extension reaction to Messages\n   */\n  var reactToMessages = function reactToMessages(message, emoji) {\n    var _loggedInUserRef$curr6, _loggedInUserRef$curr7, _loggedInUserRef$curr8, _loggedInUserRef$curr9;\n    var reactionObject = {};\n    var newMessageObject = {};\n    var messageObject = _objectSpread({}, message);\n    var userObject = {};\n    if (loggedInUserRef !== null && loggedInUserRef !== void 0 && (_loggedInUserRef$curr6 = loggedInUserRef.current) !== null && _loggedInUserRef$curr6 !== void 0 && (_loggedInUserRef$curr7 = _loggedInUserRef$curr6.avatar) !== null && _loggedInUserRef$curr7 !== void 0 && _loggedInUserRef$curr7.length) {\n      userObject[\"avatar\"] = loggedInUserRef.current.avatar;\n    }\n    if (loggedInUserRef !== null && loggedInUserRef !== void 0 && (_loggedInUserRef$curr8 = loggedInUserRef.current) !== null && _loggedInUserRef$curr8 !== void 0 && (_loggedInUserRef$curr9 = _loggedInUserRef$curr8.name) !== null && _loggedInUserRef$curr9 !== void 0 && _loggedInUserRef$curr9.length) {\n      userObject[\"name\"] = loggedInUserRef.current.name;\n    }\n    var emojiObject = (0, _defineProperty2.default)({}, emoji, (0, _defineProperty2.default)({}, loggedInUserRef.current.uid, userObject));\n    var reactionExtensionsData = (0, _2.getExtensionsData)(messageObject, _2.ExtensionConstants.reactions);\n    if (reactionExtensionsData) {\n      if (reactionExtensionsData[emoji]) {\n        //if the reactions metadata has the selected emoji/reaction for the loggedin user\n        if (reactionExtensionsData[emoji][loggedInUserRef.current.uid]) {\n          reactionObject = _objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"]);\n          delete reactionObject[emoji][loggedInUserRef.current.uid];\n        } else {\n          reactionObject = _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"]), {}, (0, _defineProperty2.default)({}, emoji, _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"][emoji]), {}, (0, _defineProperty2.default)({}, loggedInUserRef.current.uid, userObject))));\n        }\n      } else {\n        reactionObject = _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"]), emojiObject);\n      }\n    } else {\n      if (!messageObject.hasOwnProperty(\"metadata\")) {\n        messageObject[\"metadata\"] = {};\n      }\n      if (!messageObject[\"metadata\"].hasOwnProperty(\"@injected\")) {\n        messageObject[\"metadata\"][\"@injected\"] = {};\n      }\n      if (!messageObject[\"metadata\"][\"@injected\"].hasOwnProperty(\"extensions\")) {\n        messageObject[\"metadata\"][\"@injected\"][\"extensions\"] = {};\n      }\n      if (!messageObject[\"metadata\"][\"@injected\"][\"extensions\"].hasOwnProperty(\"reactions\")) {\n        messageObject[\"metadata\"][\"@injected\"][\"extensions\"][\"reactions\"] = {};\n      }\n      reactionObject = _objectSpread({}, emojiObject);\n    }\n    var metadataObject = {\n      metadata: _objectSpread(_objectSpread({}, messageObject[\"metadata\"]), {}, {\n        \"@injected\": _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"]), {}, {\n          extensions: _objectSpread(_objectSpread({}, messageObject[\"metadata\"][\"@injected\"][\"extensions\"]), {}, {\n            reactions: _objectSpread({}, reactionObject)\n          })\n        })\n      })\n    };\n    newMessageObject = _objectSpread(_objectSpread({}, messageObject), {}, {\n      data: _objectSpread(_objectSpread({}, messageObject), metadataObject)\n    }, metadataObject);\n    updateMessage(newMessageObject);\n    _chat.CometChat.callExtension(_2.ExtensionConstants.reactions, \"POST\", _2.ExtensionURLs.reaction, {\n      msgId: message.id,\n      emoji: emoji\n    }).catch(function (error) {\n      errorHandler(error);\n      updateMessage(message);\n    });\n  };\n\n  /**\n   *\n   * @param {*} messageOptions\n   * Sets MessageOptions Onclick function\n   */\n  var setOptionsCallbackData = function setOptionsCallbackData(messageOptions) {\n    var optionsList = (0, _toConsumableArray2.default)(messageOptions);\n    optionsList.forEach(function (eachMessageOption) {\n      switch (eachMessageOption.id) {\n        case _2.MessageOptionConstants.deleteMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = deleteMessage.bind(_this);\n          }\n          break;\n        case _2.MessageOptionConstants.editMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = editMessage.bind(_this);\n          }\n          break;\n        case _2.MessageOptionConstants.copyMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = copyMessage.bind(_this);\n          }\n          break;\n        case _2.MessageOptionConstants.reactToMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = onReactToMessages.bind(_this);\n          }\n          break;\n        case _2.MessageOptionConstants.translateMessage:\n          if (eachMessageOption.onClick === null) {\n            eachMessageOption.onClick = translateMessage.bind(_this);\n          }\n          break;\n        default:\n          break;\n      }\n    });\n    return optionsList;\n  };\n\n  /**\n   *\n   * @param {*} messageObject\n   * @returns messageOptions according to the type of message and sender's identity\n   */\n  var filterMessageOptions = function filterMessageOptions(messageObject) {\n    var _messageTypes = messageTypes && messageTypes.length ? messageTypes : (0, _.getDefaultTypes)();\n    var messageOptions = [];\n    // If User sends messageTypes as\n    _messageTypes.forEach(function (messageTemplateObject) {\n      // Checking Message types for Template object and message object to set options\n      if (messageTemplateObject.type === messageObject.type) {\n        messageOptions = messageTemplateObject.options.filter(function (option) {\n          var _loggedInUserRef$curr10, _messageObject$sender, _loggedInUserRef$curr11, _messageObject$sender2;\n          return (\n            // Segregating Sender and receiver options.\n\n            ((_loggedInUserRef$curr10 = loggedInUserRef.current) === null || _loggedInUserRef$curr10 === void 0 ? void 0 : _loggedInUserRef$curr10.uid) === (messageObject === null || messageObject === void 0 ? void 0 : (_messageObject$sender = messageObject.sender) === null || _messageObject$sender === void 0 ? void 0 : _messageObject$sender.uid) && option.optionFor === _2.MessageOptionForConstants.sender || option.optionFor === _2.MessageOptionForConstants.both || ((_loggedInUserRef$curr11 = loggedInUserRef.current) === null || _loggedInUserRef$curr11 === void 0 ? void 0 : _loggedInUserRef$curr11.uid) !== (messageObject === null || messageObject === void 0 ? void 0 : (_messageObject$sender2 = messageObject.sender) === null || _messageObject$sender2 === void 0 ? void 0 : _messageObject$sender2.uid) && option.optionFor === _2.MessageOptionForConstants.receiver || option.optionFor === _2.MessageOptionForConstants.both\n          );\n        });\n      }\n    });\n\n    // If user exclude's an option from options list\n    if (excludeMessageOptions && excludeMessageOptions.length) {\n      excludeMessageOptions.forEach(function (excludeOption) {\n        messageOptions.forEach(function (option) {\n          if (option.id === excludeOption) {\n            var index = messageOptions.indexOf(option);\n            if (index > -1) {\n              messageOptions.splice(index, 1); // 2nd parameter means remove one item only\n            }\n          }\n        });\n      });\n    }\n\n    // If user sends in customMessageOptions\n    if (customMessageOptions !== null && customMessageOptions !== void 0 && customMessageOptions.length) {\n      customMessageOptions.forEach(function (option) {\n        messageOptions.push(option);\n      });\n    }\n\n    // Setting callback data for Message Option's onClick\n    return setOptionsCallbackData(messageOptions);\n  };\n\n  /**\n   *\n   * @param {*} message\n   * @returns filtering custom View from message Types sent in by the user\n   */\n  var filterCustomView = function filterCustomView(message) {\n    if (messageTypes !== null && messageTypes !== void 0 && messageTypes.length) {\n      var _templateObject$;\n      var templateObject = messageTypes.filter(function (messageTemplateObject) {\n        return messageTemplateObject.type === message.type && messageTemplateObject.customView;\n      });\n      if ((_templateObject$ = templateObject[0]) !== null && _templateObject$ !== void 0 && _templateObject$.customView) {\n        return templateObject[0].customView;\n      }\n      return null;\n    }\n  };\n\n  /**\n   *\n   * @param {*} customView\n   * @returns customView for handling empty,error and loading states\n   */\n  var getCustomView = function getCustomView(customView) {\n    return /*#__PURE__*/_react.default.createElement(customView, props);\n  };\n  var getMessageContainer = function getMessageContainer() {\n    var _localize;\n    var messageContainer = null;\n    if (messageList.length === 0 && (decoratorMessage === null || decoratorMessage === void 0 ? void 0 : decoratorMessage.toLowerCase()) === (0, _2.localize)(\"LOADING\").toLowerCase()) {\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgStyle)(style),\n        className: \"messagelist__decorator-message\"\n      }, customView !== null && customView !== void 0 && customView.loading ? getCustomView(customView === null || customView === void 0 ? void 0 : customView.loading, props) : /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgImgStyle)(style, loadingIconURL, _theme),\n        className: \"decorator-message\"\n      }));\n    } else if (messageList.length === 0 && (decoratorMessage === null || decoratorMessage === void 0 ? void 0 : decoratorMessage.toLowerCase()) === (0, _2.localize)(\"NO_MESSAGES_FOUND\").toLowerCase()) {\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgStyle)(style),\n        className: \"messagelist__decorator-message\"\n      }, customView !== null && customView !== void 0 && customView.empty ? getCustomView(customView === null || customView === void 0 ? void 0 : customView.empty, props) : /*#__PURE__*/_react.default.createElement(\"p\", {\n        style: (0, _style.decoratorMsgTxtStyle)(style, _2.fontHelper, _theme, decoratorMessage, _2.localize),\n        className: \"decorator-message\"\n      }, emptyText));\n    } else if ((decoratorMessage === null || decoratorMessage === void 0 ? void 0 : decoratorMessage.toLowerCase()) === ((_localize = (0, _2.localize)(\"NO_MESSAGE_TYPE_SET\")) === null || _localize === void 0 ? void 0 : _localize.toLowerCase())) {\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgStyle)(style),\n        className: \"messagelist__decorator-message\"\n      }, customView !== null && customView !== void 0 && customView.empty ? getCustomView(customView === null || customView === void 0 ? void 0 : customView.empty, props) : /*#__PURE__*/_react.default.createElement(\"p\", {\n        style: (0, _style.decoratorMsgTxtStyle)(style, _2.fontHelper, _theme, decoratorMessage, _2.localize),\n        className: \"decorator-message\"\n      }, decoratorMessage));\n    } else if (!hideError && (decoratorMessage === null || decoratorMessage === void 0 ? void 0 : decoratorMessage.toLowerCase()) === (0, _2.localize)(\"SOMETHING_WRONG\").toLowerCase()) {\n      messageContainer = /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.decoratorMsgStyle)(style),\n        className: \"messagelist__decorator-message\"\n      }, customView !== null && customView !== void 0 && customView.error ? getCustomView(customView === null || customView === void 0 ? void 0 : customView.error, props) : /*#__PURE__*/_react.default.createElement(\"p\", {\n        style: (0, _style.decoratorMsgTxtStyle)(style, _2.fontHelper, _theme, decoratorMessage, _2.localize),\n        className: \"decorator-message\"\n      }, errorText));\n    }\n    return messageContainer;\n  };\n\n  /**\n   * Empty new Message Received State to close Smart reply Preview\n   */\n  var onClose = function onClose() {\n    setnewMessage({});\n  };\n  var _smartRepliesConfiguration = smartRepliesConfiguration || new _SmartRepliesConfiguration.SmartRepliesConfiguration({\n    onClose: onClose\n  });\n  /**\n   *\n   * @returns smart suggestions to the user as per the message received\n   */\n  var getSmartReplies = function getSmartReplies() {\n    if (Object.keys(newMessage).length) {\n      return /*#__PURE__*/_react.default.createElement(_.CometChatSmartReplies, {\n        messageObject: newMessage,\n        customOutgoingMessageSound: _smartRepliesConfiguration.customOutgoingMessageSound,\n        enableSoundForMessages: _smartRepliesConfiguration.enableSoundForMessages,\n        loggedInUser: loggedInUserRef.current,\n        onClick: _smartRepliesConfiguration.onClick,\n        style: (0, _style.smartReplyStyle)(_theme),\n        onClose: onClose.bind(_this)\n      });\n    }\n  };\n\n  /**\n   *\n   * @returns new Message Indicator banner\n   */\n  var newMessageIndicator = function newMessageIndicator() {\n    if (unreadMessageCount >= 1) {\n      var text = unreadMessageCount > 1 ? \"\".concat(unreadMessageCount, \" \").concat((0, _2.localize)(\"NEW_MESSAGES\")) : \"\".concat(unreadMessageCount, \" \").concat((0, _2.localize)(\"NEW_MESSAGE\"));\n      return /*#__PURE__*/_react.default.createElement(_.CometChatNewMessageIndicator, {\n        text: text,\n        onClick: scrolledToBottom.bind(_this) || _newMessageIndicatorConfiguration.onClick,\n        Icon: _newMessageIndicatorConfiguration.Icon,\n        style: (0, _style.messageIndicatorStyle)(_theme)\n      });\n    }\n    return null;\n  };\n\n  /**\n   *\n   * @returns Items to render in Message List Component\n   */\n  var renderItems = function renderItems() {\n    // to hold date value for first message\n    var previousMessageDate = null;\n    return messageList.map(function (eachMessage) {\n      var _previousMessageDate, _previousMessageDate2, _previousMessageDate3, _dateConfiguration$st, _theme$palette, _theme$palette2, _dateConfiguration$st2, _theme$typography, _loggedInUserRef$curr12, _eachMessage$sender, _loggedInUserRef$curr13, _eachMessage$sender2;\n      // date label component\n      var dateSeparator = null;\n\n      // Converting Unix  timeStamp to readable date format\n      var currentMessageDate = new Date(eachMessage.sentAt * 1000);\n      var currentDate = currentMessageDate.getDate() + \"-\" + currentMessageDate.getMonth + \"-\" + currentMessageDate.getFullYear();\n      var previousDate = ((_previousMessageDate = previousMessageDate) === null || _previousMessageDate === void 0 ? void 0 : _previousMessageDate.getDate()) + \"-\" + ((_previousMessageDate2 = previousMessageDate) === null || _previousMessageDate2 === void 0 ? void 0 : _previousMessageDate2.getMonth) + \"-\" + ((_previousMessageDate3 = previousMessageDate) === null || _previousMessageDate3 === void 0 ? void 0 : _previousMessageDate3.getFullYear());\n      var pattern = _dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : _dateConfiguration.pattern;\n      var customPattern = _dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : _dateConfiguration.customPattern;\n      var dateStyle = new _Shared.DateStyles(_objectSpread(_objectSpread({}, _dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : _dateConfiguration.style), {}, {\n        textColor: (_dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : (_dateConfiguration$st = _dateConfiguration.style) === null || _dateConfiguration$st === void 0 ? void 0 : _dateConfiguration$st.textColor) || (_theme === null || _theme === void 0 ? void 0 : (_theme$palette = _theme.palette) === null || _theme$palette === void 0 ? void 0 : _theme$palette.accent500[_theme === null || _theme === void 0 ? void 0 : (_theme$palette2 = _theme.palette) === null || _theme$palette2 === void 0 ? void 0 : _theme$palette2.mode]),\n        textFont: (_dateConfiguration === null || _dateConfiguration === void 0 ? void 0 : (_dateConfiguration$st2 = _dateConfiguration.style) === null || _dateConfiguration$st2 === void 0 ? void 0 : _dateConfiguration$st2.textFont) || (0, _2.fontHelper)(_theme === null || _theme === void 0 ? void 0 : (_theme$typography = _theme.typography) === null || _theme$typography === void 0 ? void 0 : _theme$typography.caption2)\n      }));\n\n      // Comparing Date, Month, Year of the two dates\n      if (previousDate !== currentDate) {\n        dateSeparator = /*#__PURE__*/_react.default.createElement(\"div\", {\n          style: (0, _style.messageDateContainerStyle)(_theme)\n        }, /*#__PURE__*/_react.default.createElement(\"div\", {\n          style: (0, _style.messageDateStyle)(_theme)\n        }, /*#__PURE__*/_react.default.createElement(_Shared.CometChatDate, {\n          timestamp: eachMessage === null || eachMessage === void 0 ? void 0 : eachMessage.sentAt,\n          pattern: pattern,\n          customPattern: customPattern,\n          style: dateStyle\n        })));\n      }\n      previousMessageDate = currentMessageDate;\n      var messageKey = eachMessage.id || eachMessage.muid;\n      var className = \"message__\".concat(eachMessage.type, \" message__kit__background\");\n      var alignmentValue = _2.MessageBubbleAlignmentConstants.left;\n      var background;\n      var messageBubbleData = {};\n      if (alignment === (_2.MessageListAlignmentConstants === null || _2.MessageListAlignmentConstants === void 0 ? void 0 : _2.MessageListAlignmentConstants.standard) && ((_loggedInUserRef$curr12 = loggedInUserRef.current) === null || _loggedInUserRef$curr12 === void 0 ? void 0 : _loggedInUserRef$curr12.uid) === (eachMessage === null || eachMessage === void 0 ? void 0 : (_eachMessage$sender = eachMessage.sender) === null || _eachMessage$sender === void 0 ? void 0 : _eachMessage$sender.uid)) {\n        alignmentValue = _2.MessageBubbleAlignmentConstants.right;\n        background = {\n          background: _theme.palette.primary[_theme.palette.mode]\n        };\n        messageBubbleData = sentMessageInputData;\n      } else if (alignment === (_2.MessageListAlignmentConstants === null || _2.MessageListAlignmentConstants === void 0 ? void 0 : _2.MessageListAlignmentConstants.left) && ((_loggedInUserRef$curr13 = loggedInUserRef.current) === null || _loggedInUserRef$curr13 === void 0 ? void 0 : _loggedInUserRef$curr13.uid) === (eachMessage === null || eachMessage === void 0 ? void 0 : (_eachMessage$sender2 = eachMessage.sender) === null || _eachMessage$sender2 === void 0 ? void 0 : _eachMessage$sender2.uid)) {\n        alignmentValue = _2.MessageBubbleAlignmentConstants.left;\n        background = {\n          background: _theme.palette.secondary[_theme.palette.mode]\n        };\n        messageBubbleData = sentMessageInputData;\n      } else {\n        alignmentValue = _2.MessageBubbleAlignmentConstants.left;\n        background = {\n          background: _theme.palette.secondary[_theme.palette.mode]\n        };\n        messageBubbleData = receivedMessageInputData;\n      }\n      var style = _objectSpread(_objectSpread({\n        width: \"100%\",\n        height: \"100%\",\n        border: \"0 none\",\n        borderRadius: \"12px\",\n        nameTextFont: (0, _2.fontHelper)(_theme.typography.caption1),\n        timestampFont: (0, _2.fontHelper)(_theme.typography.caption2)\n      }, background), {}, {\n        nameTextColor: _theme.palette.accent500[_theme.palette.mode],\n        timestampColor: _theme.palette.accent[_theme.palette.mode]\n      });\n      return !eachMessage.action ? /*#__PURE__*/_react.default.createElement(_react.default.Fragment, {\n        key: messageKey\n      }, dateSeparator, /*#__PURE__*/_react.default.createElement(\"div\", {\n        key: messageKey,\n        className: className,\n        style: (0, _style.messageBubbleStyle)(alignment, loggedInUserRef.current, eachMessage)\n      }, /*#__PURE__*/_react.default.createElement(_.CometChatMessageBubble, {\n        key: messageKey,\n        messageBubbleData: messageBubbleData || _messageBubbleConfiguration.messageBubbleData,\n        alignment: alignmentValue,\n        timeAlignment: _messageBubbleConfiguration.timeAlignment,\n        messageObject: eachMessage,\n        messageOptions: filterMessageOptions(eachMessage),\n        loggedInUser: loggedInUserRef.current,\n        customView: filterCustomView(eachMessage),\n        style: _objectSpread({}, style),\n        theme: _theme,\n        updateReaction: onReactToMessages.bind(_this)\n      }))) : null;\n    });\n  };\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"message__list\",\n    style: (0, _style.chatListStyle)(style, _theme)\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"list__wrapper\",\n    style: (0, _style.listWrapperStyle)(style, _theme),\n    ref: messageListEndRef,\n    onScroll: handleScroll\n  }, getMessageContainer(), newMessageIndicator(), emojiBoard(), renderItems()), getSmartReplies());\n});\nexports.CometChatMessageList = CometChatMessageList;\nCometChatMessageList.defaultProps = {\n  limit: 30,\n  user: null,\n  group: null,\n  alignment: \"standard\",\n  messageTypes: null,\n  excludeMessageTypes: null,\n  excludeMessageOptions: null,\n  customMessageOptions: null,\n  onlyUnread: false,\n  hideMessagesFromBlockedUsers: false,\n  hideDeletedMessages: false,\n  tags: null,\n  loadingIconURL: _spinner.default,\n  customView: {\n    loading: \"\",\n    empty: \"\",\n    error: \"\"\n  },\n  emptyText: \"No messages here yet...\",\n  errorText: \"Something went wrong\",\n  hideError: false,\n  customIncomingMessageSound: \"\",\n  enableSoundForMessages: true,\n  sentMessageInputData: {\n    thumbnail: true,\n    title: true,\n    timestamp: true,\n    readReceipt: true\n  },\n  receivedMessageInputData: {\n    thumbnail: true,\n    title: true,\n    timestamp: true,\n    readReceipt: false\n  },\n  style: {\n    width: \"100%\",\n    height: \"100%\",\n    border: \"\",\n    borderRadius: \"8px\",\n    background: \"\",\n    textFont: \"400 12px Inter, sans-serif\",\n    textColor: \"rgb(20,20,20)\"\n  },\n  messageBubbleConfiguration: null,\n  emojiKeyboardConfiguration: null,\n  smartRepliesConfiguration: null,\n  newMessageIndicatorConfiguration: null,\n  dateConfiguration: null\n};\nCometChatMessageList.propTypes = {\n  limit: _propTypes.default.number,\n  user: _propTypes.default.object,\n  group: _propTypes.default.object,\n  alignment: _propTypes.default.string,\n  messageTypes: _propTypes.default.array,\n  excludeMessageTypes: _propTypes.default.array,\n  excludeMessageOptions: _propTypes.default.array,\n  customMessageOptions: _propTypes.default.array,\n  onlyUnread: _propTypes.default.bool,\n  hideMessagesFromBlockedUsers: _propTypes.default.bool,\n  hideDeletedMessages: _propTypes.default.bool,\n  tags: _propTypes.default.array,\n  loadingIconURL: _propTypes.default.string,\n  customView: _propTypes.default.object,\n  emptyText: _propTypes.default.string,\n  errorText: _propTypes.default.string,\n  hideError: _propTypes.default.bool,\n  customIncomingMessageSound: _propTypes.default.string,\n  enableSoundForMessages: _propTypes.default.bool,\n  sentMessageInputData: _propTypes.default.object,\n  receivedMessageInputData: _propTypes.default.object,\n  style: _propTypes.default.object,\n  messageBubbleConfiguration: _propTypes.default.object,\n  emojiKeyboardConfiguration: _propTypes.default.object,\n  smartRepliesConfiguration: _propTypes.default.object,\n  newMessageIndicatorConfiguration: _propTypes.default.object,\n  dateConfiguration: _propTypes.default.object\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}