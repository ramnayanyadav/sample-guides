{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatMessageComposer = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _ = require(\"../..\");\nvar _2 = require(\"..\");\nvar _CometChatMessageHelper = require(\"../CometChatMessageHelper\");\nvar _CometChatMessageConstants = require(\"../CometChatMessageConstants\");\nvar _hooks = require(\"./hooks\");\nvar _style = require(\"./style\");\nvar _MessagePreviewConfiguration = require(\"../CometChatMessagePreview/MessagePreviewConfiguration\");\nvar _EmojiKeyboardConfiguration = require(\"../CometChatEmojiKeyboard/EmojiKeyboardConfiguration\");\nvar _CreatePollConfiguration = require(\"../CometChatCreatePoll/CreatePollConfiguration\");\nvar _StickerKeyboardConfiguration = require(\"../CometChatStickerKeyboard/StickerKeyboardConfiguration\");\nvar _Shared = require(\"../../Shared\");\nvar _addCircleFilled = _interopRequireDefault(require(\"./resources/add-circle-filled.svg\"));\nvar _emoji = _interopRequireDefault(require(\"./resources/emoji.svg\"));\nvar _sendMessage = _interopRequireDefault(require(\"./resources/send-message.svg\"));\nvar _closeCircle = _interopRequireDefault(require(\"./resources/close-circle.svg\"));\nvar _heart = _interopRequireDefault(require(\"./resources/heart.png\"));\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2[\"default\"])(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n/**\n *\n * CometChatMessageComposer component part of messages component it's takes user input text,image,video etc,after pressing send button\n * it's append messages in message list, with additonal CometChat SDK conversation object.\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @copyright © 2022 CometChat Inc.\n *\n */\nvar CometChatMessageComposer = /*#__PURE__*/_react[\"default\"].forwardRef(function (props, ref) {\n  var _React$useState = _react[\"default\"].useState(null),\n    _React$useState2 = (0, _slicedToArray2[\"default\"])(_React$useState, 2),\n    chatWith = _React$useState2[0],\n    setChatWith = _React$useState2[1];\n  var _React$useState3 = _react[\"default\"].useState(null),\n    _React$useState4 = (0, _slicedToArray2[\"default\"])(_React$useState3, 2),\n    chatWithId = _React$useState4[0],\n    setChatWithId = _React$useState4[1];\n  var _React$useState5 = _react[\"default\"].useState(\"\"),\n    _React$useState6 = (0, _slicedToArray2[\"default\"])(_React$useState5, 2),\n    messageInput = _React$useState6[0],\n    setMessageInput = _React$useState6[1];\n  var _React$useState7 = _react[\"default\"].useState(false),\n    _React$useState8 = (0, _slicedToArray2[\"default\"])(_React$useState7, 2),\n    viewAttachButton = _React$useState8[0],\n    setViewAttachButton = _React$useState8[1];\n  var _React$useState9 = _react[\"default\"].useState(false),\n    _React$useState10 = (0, _slicedToArray2[\"default\"])(_React$useState9, 2),\n    viewSticker = _React$useState10[0],\n    setViewSticker = _React$useState10[1];\n  var _React$useState11 = _react[\"default\"].useState(null),\n    _React$useState12 = (0, _slicedToArray2[\"default\"])(_React$useState11, 2),\n    viewStickerTray = _React$useState12[0],\n    setViewStickerTray = _React$useState12[1];\n  var _React$useState13 = _react[\"default\"].useState({}),\n    _React$useState14 = (0, _slicedToArray2[\"default\"])(_React$useState13, 2),\n    viewActionSheet = _React$useState14[0],\n    setViewActionSheet = _React$useState14[1];\n  var _React$useState15 = _react[\"default\"].useState([]),\n    _React$useState16 = (0, _slicedToArray2[\"default\"])(_React$useState15, 2),\n    actionSheetItems = _React$useState16[0],\n    setActionSheetItems = _React$useState16[1];\n  var _React$useState17 = _react[\"default\"].useState(false),\n    _React$useState18 = (0, _slicedToArray2[\"default\"])(_React$useState17, 2),\n    viewCreatePoll = _React$useState18[0],\n    setViewCreatePoll = _React$useState18[1];\n  var _React$useState19 = _react[\"default\"].useState({}),\n    _React$useState20 = (0, _slicedToArray2[\"default\"])(_React$useState19, 2),\n    viewEmojiTray = _React$useState20[0],\n    setViewEmojiTray = _React$useState20[1];\n  var _React$useState21 = _react[\"default\"].useState(null),\n    _React$useState22 = (0, _slicedToArray2[\"default\"])(_React$useState21, 2),\n    messagePreview = _React$useState22[0],\n    setMessagePreview = _React$useState22[1];\n  var _React$useState23 = _react[\"default\"].useState(true),\n    _React$useState24 = (0, _slicedToArray2[\"default\"])(_React$useState23, 2),\n    viewInputField = _React$useState24[0],\n    setViewInputField = _React$useState24[1];\n  var stickerTemplate = _react[\"default\"].useRef(null);\n  var loggedInUser = _react[\"default\"].useRef(null);\n  var isTyping = null;\n  var liveReactionTimeout = 0;\n  var disabledState = false;\n  var messageInputRef = _react[\"default\"].useRef(null);\n  var fileInputRef = _react[\"default\"].useRef(null);\n  var chatRef = _react[\"default\"].useRef(chatWith);\n  var user = props.user,\n    group = props.group,\n    hideAttachment = props.hideAttachment,\n    attachmentIconURL = props.attachmentIconURL,\n    stickerCloseIconURL = props.stickerCloseIconURL,\n    placeholderText = props.placeholderText,\n    hideLiveReaction = props.hideLiveReaction,\n    liveReactionIconURL = props.liveReactionIconURL,\n    hideEmoji = props.hideEmoji,\n    emojiIconURL = props.emojiIconURL,\n    showSendButton = props.showSendButton,\n    sendButtonIconURL = props.sendButtonIconURL,\n    onSendButtonClick = props.onSendButtonClick,\n    messageTypes = props.messageTypes,\n    excludeMessageTypes = props.excludeMessageTypes,\n    enableTypingIndicator = props.enableTypingIndicator,\n    enableSoundForMessages = props.enableSoundForMessages,\n    customOutgoingMessageSound = props.customOutgoingMessageSound,\n    style = props.style,\n    messagePreviewConfiguration = props.messagePreviewConfiguration,\n    emojiKeyboardConfiguration = props.emojiKeyboardConfiguration,\n    stickerKeyboardConfiguration = props.stickerKeyboardConfiguration,\n    createPollConfiguration = props.createPollConfiguration,\n    actionSheetConfiguration = props.actionSheetConfiguration,\n    theme = props.theme;\n  var _theme = new _.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n\n  /**,\n   * Event callbacks\n   */\n  _react[\"default\"].useImperativeHandle(ref, function () {\n    return {\n      previewMessageForEdit: previewMessage\n    };\n  });\n  var draftMessage = function draftMessage() {};\n  var previewMessage = function previewMessage(message) {\n    setMessagePreview({\n      message: message,\n      mode: _.ConversationOptionConstants.edit\n    });\n    setMessageInput(message.text);\n    var element = messageInputRef.current;\n    var messageText = message.text;\n\n    //xss extensions data\n    var xssData = (0, _2.getExtensionsData)(message, _.MetadataConstants.extensions.xssFilter);\n    if (xssData && xssData.hasOwnProperty(_.ExtensionConstants.sanitizedText) && xssData.hasOwnProperty(_.ExtensionConstants.hasXSS) && xssData.hasXSS === _.ExtensionConstants.yes) {\n      messageText = xssData.sanitized_text;\n    }\n    element.focus();\n    element.textContent = \"\";\n    pasteHtmlAtCaret(messageText, false);\n  };\n  var playAudio = function playAudio() {\n    if (customOutgoingMessageSound) {\n      _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage, customOutgoingMessageSound);\n    } else {\n      _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n    }\n  };\n  var closeMessagePreview = function closeMessagePreview() {\n    setMessagePreview(null);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n  };\n  var sendMessageOnEnter = function sendMessageOnEnter(event) {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      sendTextMessage();\n    }\n  };\n\n  /** send text message */\n  var sendTextMessage = function sendTextMessage() {\n    setViewEmojiTray(false);\n    if (!messageInput.trim().length) {\n      return false;\n    }\n    if (messagePreview && messagePreview.mode === _.ConversationOptionConstants.edit) {\n      editMessage(messagePreview.message);\n      return false;\n    }\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageInput, chatWith);\n    textMessage.setSender(loggedInUser.current);\n    textMessage.setReceiver(chatWith);\n    textMessage.setText(messageInput);\n    textMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    textMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: textMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n    _chat.CometChat.sendMessage(textMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n    if (onSendButtonClick) {\n      onSendButtonClick();\n    }\n  };\n\n  /** send media message */\n  var sendMediaMessage = function sendMediaMessage(messageInput, messageType) {\n    setViewActionSheet(false);\n    var mediaMessage = new _chat.CometChat.MediaMessage(chatWithId, messageInput, messageType, chatWith);\n    mediaMessage.setSender(loggedInUser.current);\n    mediaMessage.setReceiver(chatWith);\n    mediaMessage.setType(messageType);\n    mediaMessage.setMetadata((0, _defineProperty2[\"default\"])({}, _.MetadataConstants.file, messageInput));\n    mediaMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    mediaMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: mediaMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    _chat.CometChat.sendMessage(mediaMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: mediaMessage,\n        error: error\n      });\n    });\n  };\n\n  /** send sticker */\n  var sendSticker = function sendSticker(stickerMessage) {\n    var customData = {\n      sticker_url: stickerMessage.stickerUrl,\n      sticker_name: stickerMessage.stickerName\n    };\n    var customMessage = new _chat.CometChat.CustomMessage(chatWithId, chatWith, _2.CometChatCustomMessageTypes.sticker, customData);\n    customMessage.setSender(loggedInUser.current);\n    customMessage.setReceiver(chatWith);\n    customMessage.setMetadata({\n      incrementUnreadCount: true\n    });\n    customMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    customMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: customMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    _chat.CometChat.sendCustomMessage(customMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: customMessage,\n        error: error\n      });\n    });\n  };\n\n  /** edit message */\n  var editMessage = function editMessage(message) {\n    endTyping(null, null);\n    var messageText = messageInput.trim();\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageText, chatWith);\n    textMessage.setId(messagePreview.message.id);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n    if (enableSoundForMessages) playAudio();\n    setMessagePreview(null);\n    _chat.CometChat.editMessage(textMessage).then(function (editedMessage) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageEdit, {\n        message: editedMessage,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n  };\n  var startTyping = function startTyping(endTypingTimeout, typingMetadata) {\n    //if typing is disabled\n    if (!enableTypingIndicator) {\n      return false;\n    }\n\n    //if typing is in progress\n    if (isTyping) {\n      return false;\n    }\n    var typingInterval = endTypingTimeout || 5000;\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.startTyping(typingNotification);\n    isTyping = setTimeout(function () {\n      endTyping(null, typingMetadata);\n    }, typingInterval);\n  };\n  var endTyping = function endTyping(event, typingMetadata) {\n    if (event) {\n      event.persist();\n    }\n    if (!enableTypingIndicator) {\n      return false;\n    }\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.endTyping(typingNotification);\n    clearTimeout(isTyping);\n    isTyping = null;\n  };\n  var fileInputHandler = function fileInputHandler(event) {\n    setViewActionSheet(false);\n    if (!fileInputRef.current) {\n      return false;\n    }\n    fileInputRef.current.click();\n  };\n\n  /** fileInputChangeHandler */\n  var fileInputChangeHandler = function fileInputChangeHandler(event) {\n    setViewActionSheet(false);\n    var uploadedFile = event.target.files[\"0\"];\n    var fileNameType = uploadedFile.type.split(\"/\");\n    var reader = new FileReader();\n    reader.addEventListener(\"load\", function (event) {\n      var newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n      switch (fileNameType[0]) {\n        case \"image\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.image);\n          break;\n        case \"video\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.video);\n          break;\n        case \"audio\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.audio);\n          break;\n        case \"file\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n        default:\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n      }\n      fileInputRef.current.value = \"\";\n    }, false);\n    reader.readAsArrayBuffer(uploadedFile);\n  };\n\n  /** closeCreatePoll */\n  var closeCreatePoll = function closeCreatePoll() {\n    setViewCreatePoll(false);\n  };\n\n  /** onPollSubmit */\n  var onPollSubmit = function onPollSubmit() {\n    setViewCreatePoll(false);\n  };\n\n  /** openCreatePoll  */\n  var openCreatePoll = function openCreatePoll() {\n    setViewActionSheet(false);\n    setViewCreatePoll(true);\n  };\n\n  /** share collaborative document */\n  var shareCollaborativeDocument = function shareCollaborativeDocument() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.document, _.ExtensionConstants.post, _.ExtensionURLs.document, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, error);\n    });\n  };\n\n  /** share collaborative whitevoard */\n  var shareCollaborativeWhiteboard = function shareCollaborativeWhiteboard() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.whiteboard, _.ExtensionConstants.post, _.ExtensionURLs.whiteboard, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, error);\n    });\n  };\n\n  /** handleInputEvent */\n  var handleInputEvent = function handleInputEvent(event) {\n    startTyping();\n    var elem = event.currentTarget;\n    var messageInput = elem.textContent.trim();\n    if (!messageInput.length) {\n      event.currentTarget.textContent = messageInput;\n    }\n    setMessageInput(elem.innerText);\n  };\n\n  /** inputChangeHandler */\n  var inputChangeHandler = function inputChangeHandler(event) {\n    setTimeout(handleInputEvent(event), 500);\n  };\n\n  /** composer sticker iconClickHandler */\n  var toggleStickersTray = function toggleStickersTray() {\n    setViewStickerTray(function (prevViewStickerOption) {\n      return !prevViewStickerOption;\n    });\n  };\n  var pasteHtmlAtCaret = function pasteHtmlAtCaret(html, selectPastedContent) {\n    var sel, range;\n    var chatWindow = window;\n    if (chatWindow.getSelection) {\n      // IE9 and non-IE\n      sel = chatWindow.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        range = sel.getRangeAt(0);\n        range.deleteContents();\n        // Range.createContextualFragment() would be useful here but is\n        // only relatively recently standardized and is not supported in\n        // some browsers (IE9, for one)\n        var el = document.createElement(\"div\");\n        el.innerText = html;\n        var frag = document.createDocumentFragment(),\n          node,\n          lastNode;\n        while (node = el.firstChild) {\n          lastNode = frag.appendChild(node);\n        }\n        var firstNode = frag.firstChild;\n        range.insertNode(frag);\n        if (lastNode) {\n          range = range.cloneRange();\n          range.setStartAfter(lastNode);\n          if (selectPastedContent) {\n            range.setStartBefore(firstNode);\n          } else {\n            range.collapse(true);\n          }\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }\n      }\n    } else if ((sel = document.selection) && sel.type !== \"Control\") {\n      // IE < 9\n      var originalRange = sel.createRange();\n      originalRange.collapse(true);\n      sel.createRange().pasteHTML(html);\n      if (selectPastedContent) {\n        range = sel.createRange();\n        range.setEndPoint(\"StartToStart\", originalRange);\n        range.select();\n      }\n    }\n  };\n\n  /** select emoji from emojikeyboard */\n  var onEmojiSelect = function onEmojiSelect(emojiObject) {\n    var element = messageInputRef.current;\n    element.focus();\n    element.innerText = \"\";\n    pasteHtmlAtCaret(messageInput + emojiObject, false);\n    setMessageInput(element.innerText);\n  };\n\n  /** composer pluse button  onClickHandler */\n  var attachmentClickHandler = function attachmentClickHandler(event) {\n    setViewActionSheet(function (old) {\n      return {\n        actionSheet: !old.actionSheet,\n        event: event\n      };\n    });\n  };\n\n  /** composer  emoji onClickHandler  */\n  var emojiClickHandler = function emojiClickHandler(event) {\n    setViewEmojiTray(function (old) {\n      return {\n        emojiTrayPreview: !old.emojiTrayPreview,\n        event: event\n      };\n    });\n  };\n\n  /** composer  sticker onClickHandler  */\n  var stickerClickHandler = function stickerClickHandler() {\n    if (stickerTemplate.current.actionCallback) {\n      stickerTemplate.current.actionCallback();\n    } else {\n      toggleStickersTray();\n    }\n  };\n\n  /** if already live reaction in progress */\n  var shareLiveReaction = function shareLiveReaction() {\n    if (liveReactionTimeout) {\n      return false;\n    }\n\n    /** fetching the metadata type from constants */\n    var data = {\n      type: _.MetadataConstants.liveReaction,\n      reaction: liveReactionIconURL || _heart[\"default\"]\n    };\n\n    /*** send transient message */\n    var transientMessage = new _chat.CometChat.TransientMessage(chatWithId, chatWith, data);\n    _chat.CometChat.sendTransientMessage(transientMessage);\n\n    /** set timeout till the next share */\n    liveReactionTimeout = setTimeout(clearTimeout(liveReactionTimeout), _2.messageConstants.liveReactionTimeout);\n\n    /** emit event to share live reaction */\n    var payload = {\n      reaction: liveReactionIconURL || _heart[\"default\"]\n    };\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onLiveReaction, payload);\n  };\n\n  /** attach/composr pluse icon */\n  var attachOption = function attachOption() {\n    return viewAttachButton ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      style: (0, _style.stickyAttachButtonStyle)(),\n      className: \"attachment__icon\",\n      onClick: attachmentClickHandler.bind(_this),\n      title: (0, _.localize)(\"ATTACH\")\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: (0, _style.attchButtonIconStyle)(style, attachmentIconURL, _theme)\n    })) : null;\n  };\n\n  /**CreatePollConfiguration */\n  var _actionSheetConfiguration = actionSheetConfiguration !== null && actionSheetConfiguration !== void 0 ? actionSheetConfiguration : new _Shared.ActionSheetConfiguration({});\n\n  /**  action sheet render under tooltip */\n  var actionSheetBoard = function actionSheetBoard() {\n    var _viewActionSheet$even, _viewActionSheet$even2, _actionSheetConfigura;\n    return viewActionSheet.actionSheet ? /*#__PURE__*/_react[\"default\"].createElement(_.CometChatPopover, {\n      position: \"top\",\n      x: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even = viewActionSheet.event) === null || _viewActionSheet$even === void 0 ? void 0 : _viewActionSheet$even.clientX,\n      y: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even2 = viewActionSheet.event) === null || _viewActionSheet$even2 === void 0 ? void 0 : _viewActionSheet$even2.clientY,\n      style: (0, _style.actionSheetPopoverStyle)(_theme)\n    }, /*#__PURE__*/_react[\"default\"].createElement(_.CometChatActionSheet, {\n      title: (0, _.localize)(\"ADD_TO_CHAT\"),\n      layoutModeIconURL: (_actionSheetConfigura = _actionSheetConfiguration === null || _actionSheetConfiguration === void 0 ? void 0 : _actionSheetConfiguration.roundedPlus) !== null && _actionSheetConfigura !== void 0 ? _actionSheetConfigura : _addCircleFilled[\"default\"],\n      theme: _theme,\n      style: (0, _style.actionSheetStyle)(_theme),\n      actions: actionSheetItems\n    })) : null;\n  };\n\n  /**CreatePollConfiguration */\n  var _createPollConfiguration = createPollConfiguration !== null && createPollConfiguration !== void 0 ? createPollConfiguration : new _CreatePollConfiguration.CreatePollConfiguration({});\n  var title = (0, _.localize)(\"CREATE_POLL\");\n  var questionPlaceholderText = (0, _.localize)(\"QUESTION\");\n  var answerPlaceholderText = (0, _.localize)(\"ANSWER\");\n  var addAnswerText = (0, _.localize)(\"ADD_ANSWER\");\n  var answerHelpText = (0, _.localize)(\"SET_THE_ANSWERS\");\n\n  /** createpoll */\n  var createPoll = function createPoll() {\n    return viewCreatePoll ? /*#__PURE__*/_react[\"default\"].createElement(_.CometChatPopover, {\n      withBackDrop: viewCreatePoll ? true : false,\n      style: (0, _style.popoverForCreatePollStyle)(_theme, _createPollConfiguration)\n    }, /*#__PURE__*/_react[\"default\"].createElement(_2.CometChatCreatePoll, {\n      closeIconURL: _createPollConfiguration.closeIconURL || _closeCircle[\"default\"],\n      title: title,\n      addAnswerIconURL: _createPollConfiguration.addAnswerIconURL || _addCircleFilled[\"default\"],\n      createPollButtonText: (0, _.localize)(\"SEND\"),\n      deleteIconURL: _createPollConfiguration.deleteIconURL || _delete[\"default\"],\n      defaultAnswers: 2,\n      theme: _theme,\n      style: (0, _style.createPollStyle)(_theme, _createPollConfiguration),\n      questionPlaceholderText: questionPlaceholderText,\n      addAnswerText: addAnswerText,\n      answerPlaceholderText: answerPlaceholderText,\n      answerHelpText: answerHelpText,\n      user: user,\n      group: group,\n      onClose: _createPollConfiguration.onClose || closeCreatePoll,\n      onCreatePoll: _createPollConfiguration.onCreatePoll || onPollSubmit\n    })) : null;\n  };\n\n  /** sticker button */\n  var stickerButton = function stickerButton() {\n    var _stickerTemplate$curr;\n    return viewSticker ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      title: (0, _.localize)(\"STICKER\"),\n      style: (0, _style.stickerBtnStyle)(),\n      className: \"button__sticker\",\n      onClick: stickerClickHandler\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: (0, _style.stickerBtnIconStyle)(style, viewStickerTray ? stickerCloseIconURL : stickerTemplate === null || stickerTemplate === void 0 ? void 0 : (_stickerTemplate$curr = stickerTemplate.current) === null || _stickerTemplate$curr === void 0 ? void 0 : _stickerTemplate$curr.icon, _theme)\n    })) : null;\n  };\n\n  /** messagePreviewConfiguration */\n\n  var _messagePreviewConfiguration = messagePreviewConfiguration || new _MessagePreviewConfiguration.MessagePreviewConfiguration({});\n\n  /** message preview  */\n  var previewTray = function previewTray() {\n    var _messagePreview$messa;\n    return messagePreview ? /*#__PURE__*/_react[\"default\"].createElement(_2.CometChatMessagePreview, {\n      messagePreviewTitle: _messagePreviewConfiguration.messagePreviewTitle || (0, _.localize)(\"MESSAGE_EDIT\"),\n      messagePreviewSubtitle: _messagePreviewConfiguration.messagePreviewSubtitle || (messagePreview === null || messagePreview === void 0 ? void 0 : (_messagePreview$messa = messagePreview.message) === null || _messagePreview$messa === void 0 ? void 0 : _messagePreview$messa.text),\n      closeIconURL: _messagePreviewConfiguration.closeIconURL || _closeCircle[\"default\"],\n      onCloseClick: _messagePreviewConfiguration.onCloseClick || closeMessagePreview.bind(_this),\n      theme: _theme,\n      style: (0, _style.messagePreviewStyle)(_theme, _messagePreviewConfiguration)\n    }) : null;\n  };\n\n  /**StickerKeyboardConfiguration */\n  var _stickerKeyboardConfiguration = stickerKeyboardConfiguration !== null && stickerKeyboardConfiguration !== void 0 ? stickerKeyboardConfiguration : new _StickerKeyboardConfiguration.StickerKeyboardConfiguration({});\n\n  /** sticker board */\n  var stickerTray = function stickerTray() {\n    return viewStickerTray ? /*#__PURE__*/_react[\"default\"].createElement(_2.CometChatStickerKeyboard, {\n      onClick: sendSticker.bind(_this),\n      onClose: _stickerKeyboardConfiguration.onClose || toggleStickersTray,\n      emptyText: (0, _.localize)(\"NO_STICKERS_FOUND\"),\n      errorText: (0, _.localize)(\"SOMETHING_WRONG\"),\n      loadingText: (0, _.localize)(\"LOADING\"),\n      theme: _theme,\n      style: (0, _style.stickerKeyboardStyle)(_theme, _stickerKeyboardConfiguration)\n    }) : null;\n  };\n\n  /** emoji icon */\n  var emojiButton = function emojiButton() {\n    return !hideEmoji ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      title: (0, _.localize)(\"EMOJI\"),\n      style: (0, _style.emojiButtonStyle)(),\n      className: \"button__emoji\",\n      onClick: emojiClickHandler.bind(_this)\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: (0, _style.emojiBtnIconStyle)(style, emojiIconURL, _theme)\n    })) : null;\n  };\n\n  /** EmojiKeyboardConfiguration */\n  var _emojiKeyboardConfiguration = emojiKeyboardConfiguration || new _EmojiKeyboardConfiguration.EmojiKeyboardConfiguration({});\n\n  /** emoji board */\n  var emojiBoard = function emojiBoard() {\n    if (viewEmojiTray.emojiTrayPreview) {\n      var _viewEmojiTray$event, _viewEmojiTray$event2;\n      return /*#__PURE__*/_react[\"default\"].createElement(_.CometChatPopover, {\n        position: \"top\",\n        x: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event = viewEmojiTray.event) === null || _viewEmojiTray$event === void 0 ? void 0 : _viewEmojiTray$event.clientX,\n        y: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event2 = viewEmojiTray.event) === null || _viewEmojiTray$event2 === void 0 ? void 0 : _viewEmojiTray$event2.clientY,\n        style: (0, _style.emojiBoardPopoverStyle)(_theme, _emojiKeyboardConfiguration)\n      }, /*#__PURE__*/_react[\"default\"].createElement(_2.CometChatEmojiKeyboard, {\n        theme: _theme,\n        style: (0, _style.emojiKeyBoardStyle)(_theme, _emojiKeyboardConfiguration),\n        onClick: (_emojiKeyboardConfiguration === null || _emojiKeyboardConfiguration === void 0 ? void 0 : _emojiKeyboardConfiguration.onClick) || onEmojiSelect.bind(_this)\n      }));\n    } else {\n      return null;\n    }\n  };\n\n  /** live reaction button */\n  var liveReactionButton = function liveReactionButton() {\n    var _messageInputRef$curr;\n    if (!hideLiveReaction && !(messageInputRef !== null && messageInputRef !== void 0 && (_messageInputRef$curr = messageInputRef.current) !== null && _messageInputRef$curr !== void 0 && _messageInputRef$curr.innerText)) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: (0, _style.reactionBtnStyle)(),\n        className: \"button__reactions\",\n        onClick: shareLiveReaction.bind(_this)\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n        src: liveReactionIconURL,\n        alt: liveReactionIconURL,\n        title: (0, _.localize)(\"LIVE_REACTION\"),\n        style: (0, _style.reactionBtnIconStyle)()\n      }));\n    }\n    return null;\n  };\n\n  /** send button */\n  var sendButton = function sendButton() {\n    return messageInput !== null && messageInput !== void 0 && messageInput.length && showSendButton ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      title: (0, _.localize)(\"SEND_MESSAGE\"),\n      style: (0, _style.sendButtonStyle)(),\n      className: \"button__send\",\n      onClick: sendTextMessage\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: (0, _style.sendBtnIconStyle)(style, sendButtonIconURL, _theme)\n    })) : null;\n  };\n\n  /**message input field*/\n  var inputField = function inputField() {\n    return viewInputField ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      style: (0, _style.messageInputStyle)(style, disabledState, _theme),\n      className: \"input__message-input\",\n      contentEditable: \"true\",\n      placeholder: placeholderText,\n      dir: _.CometChatLocalize.getDir(),\n      onInput: inputChangeHandler,\n      onBlur: endTyping.bind(_this),\n      onKeyDown: sendMessageOnEnter,\n      ref: messageInputRef\n    }) : null;\n  };\n  (0, _hooks.Hooks)(props, loggedInUser, setChatWith, setChatWithId, chatRef, setViewSticker, stickerTemplate, setActionSheetItems, setViewInputField, setViewAttachButton, openCreatePoll, fileInputHandler, shareCollaborativeDocument, shareCollaborativeWhiteboard, sendSticker);\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: (0, _style.chatComposerStyle)(style, _theme),\n    className: \"chat__composer\"\n  }, previewTray(), stickerTray(), emojiBoard(), actionSheetBoard(), /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n    type: \"file\",\n    ref: fileInputRef,\n    style: (0, _style.fileInputStyle)(),\n    onChange: fileInputChangeHandler\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: (0, _style.composerInputStyle)(style),\n    className: \"composer__input\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    tabIndex: \"-1\",\n    style: (0, _style.inputInnerStyle)(style, _theme),\n    className: \"input__inner\"\n  }, inputField(), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: (0, _style.inputStickyStyle)(disabledState, attachOption(), _theme),\n    className: \"input__sticky\"\n  }, attachOption(), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"input__sticky__buttons\",\n    style: (0, _style.stickyButtonStyle)()\n  }, stickerButton(), emojiButton(), liveReactionButton(), sendButton())))), createPoll());\n});\nexports.CometChatMessageComposer = CometChatMessageComposer;\nCometChatMessageComposer.defaultProps = {\n  user: null,\n  group: null,\n  style: _objectSpread(_objectSpread({}, new _Shared.BaseStyles({\n    width: \"100%\",\n    height: \"auto\",\n    background: \"rgb(255, 255, 255)\",\n    border: \"1px solid rgb(234, 234, 234)\",\n    borderRadius: \"8px\",\n    activeBackground: \"\"\n  })), {}, {\n    placeholderTextFont: \"400 15px Inter, sans-serif\",\n    placeholderTextColor: \"rgba(20, 20, 20,0.6)\",\n    attachmentIconTint: \"rgba(20, 20, 20, 0.46)\",\n    sendButtonIconTint: \"#39f\",\n    inputBackground: \"\",\n    inputTextFont: \"\",\n    inputTextColor: \"\",\n    emojiIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerCloseIconTint: \"\"\n  }),\n  attachmentIconURL: _addCircleFilled[\"default\"],\n  stickerCloseIconURL: \"\",\n  placeholderText: (0, _.localize)(\"ENTER_YOUR_MESSAGE_HERE\"),\n  hideAttachment: false,\n  liveReactionIconURL: _heart[\"default\"],\n  hideLiveReaction: false,\n  hideEmoji: false,\n  emojiIconURL: _emoji[\"default\"],\n  showSendButton: true,\n  sendButtonIconURL: _sendMessage[\"default\"],\n  messageTypes: null,\n  excludeMessageTypes: null,\n  onSendButtonClick: null,\n  enableTypingIndicator: true,\n  enableSoundForMessages: true,\n  customOutgoingMessageSound: null,\n  messagePreviewConfiguration: null,\n  emojiKeyboardConfiguration: null,\n  stickerKeyboardConfiguration: null,\n  createPollConfiguration: null,\n  actionSheetConfiguration: null\n};\nCometChatMessageComposer.propTypes = {\n  user: _propTypes[\"default\"].object,\n  group: _propTypes[\"default\"].object,\n  hideAttachment: _propTypes[\"default\"].bool,\n  attachmentIconURL: _propTypes[\"default\"].string,\n  stickerCloseIconURL: _propTypes[\"default\"].string,\n  placeholderText: _propTypes[\"default\"].string,\n  hideLiveReaction: _propTypes[\"default\"].bool,\n  liveReactionIconURL: _propTypes[\"default\"].string,\n  hideEmoji: _propTypes[\"default\"].bool,\n  emojiIconURL: _propTypes[\"default\"].string,\n  showSendButton: _propTypes[\"default\"].bool,\n  sendButtonIconURL: _propTypes[\"default\"].string,\n  onSendButtonClick: _propTypes[\"default\"].func,\n  messageTypes: _propTypes[\"default\"].array,\n  excludeMessageTypes: _propTypes[\"default\"].array,\n  enableTypingIndicator: _propTypes[\"default\"].bool,\n  enableSoundForMessages: _propTypes[\"default\"].bool,\n  customOutgoingMessageSound: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  messagePreviewConfiguration: _propTypes[\"default\"].object,\n  emojiKeyboardConfiguration: _propTypes[\"default\"].object,\n  stickerKeyboardConfiguration: _propTypes[\"default\"].object,\n  createPollConfiguration: _propTypes[\"default\"].object,\n  actionSheetConfiguration: _propTypes[\"default\"].object,\n  theme: _propTypes[\"default\"].object\n};","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","CometChatMessageComposer","_defineProperty2","_slicedToArray2","_react","_propTypes","_chat","_","_2","_CometChatMessageHelper","_CometChatMessageConstants","_hooks","_style","_MessagePreviewConfiguration","_EmojiKeyboardConfiguration","_CreatePollConfiguration","_StickerKeyboardConfiguration","_Shared","_addCircleFilled","_emoji","_sendMessage","_closeCircle","_heart","_delete","_this","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","forwardRef","props","ref","_React$useState","useState","_React$useState2","chatWith","setChatWith","_React$useState3","_React$useState4","chatWithId","setChatWithId","_React$useState5","_React$useState6","messageInput","setMessageInput","_React$useState7","_React$useState8","viewAttachButton","setViewAttachButton","_React$useState9","_React$useState10","viewSticker","setViewSticker","_React$useState11","_React$useState12","viewStickerTray","setViewStickerTray","_React$useState13","_React$useState14","viewActionSheet","setViewActionSheet","_React$useState15","_React$useState16","actionSheetItems","setActionSheetItems","_React$useState17","_React$useState18","viewCreatePoll","setViewCreatePoll","_React$useState19","_React$useState20","viewEmojiTray","setViewEmojiTray","_React$useState21","_React$useState22","messagePreview","setMessagePreview","_React$useState23","_React$useState24","viewInputField","setViewInputField","stickerTemplate","useRef","loggedInUser","isTyping","liveReactionTimeout","disabledState","messageInputRef","fileInputRef","chatRef","user","group","hideAttachment","attachmentIconURL","stickerCloseIconURL","placeholderText","hideLiveReaction","liveReactionIconURL","hideEmoji","emojiIconURL","showSendButton","sendButtonIconURL","onSendButtonClick","messageTypes","excludeMessageTypes","enableTypingIndicator","enableSoundForMessages","customOutgoingMessageSound","style","messagePreviewConfiguration","emojiKeyboardConfiguration","stickerKeyboardConfiguration","createPollConfiguration","actionSheetConfiguration","theme","_theme","CometChatTheme","useImperativeHandle","previewMessageForEdit","previewMessage","draftMessage","message","mode","ConversationOptionConstants","edit","text","element","current","messageText","xssData","getExtensionsData","MetadataConstants","extensions","xssFilter","hasOwnProperty","ExtensionConstants","sanitizedText","hasXSS","yes","sanitized_text","focus","textContent","pasteHtmlAtCaret","playAudio","CometChatSoundManager","play","Sound","outgoingMessage","closeMessagePreview","sendMessageOnEnter","event","keyCode","shiftKey","preventDefault","sendTextMessage","trim","editMessage","textMessage","CometChat","TextMessage","setSender","setReceiver","setText","setSentAt","getUnixTimestamp","setMuid","String","CometChatMessageEvents","emit","onMessageSent","status","messageStatus","inprogress","sendMessage","then","messageObject","success","error","onMessageError","sendMediaMessage","messageType","mediaMessage","MediaMessage","setType","setMetadata","file","sendSticker","stickerMessage","customData","sticker_url","stickerUrl","sticker_name","stickerName","customMessage","CustomMessage","CometChatCustomMessageTypes","sticker","incrementUnreadCount","sendCustomMessage","endTyping","setId","id","editedMessage","onMessageEdit","startTyping","endTypingTimeout","typingMetadata","typingInterval","metadata","undefined","typingNotification","TypingIndicator","setTimeout","persist","clearTimeout","fileInputHandler","click","fileInputChangeHandler","uploadedFile","files","fileNameType","type","split","reader","FileReader","addEventListener","newFile","File","result","name","MessageTypeConstants","image","video","audio","readAsArrayBuffer","closeCreatePoll","onPollSubmit","openCreatePoll","shareCollaborativeDocument","callExtension","document","post","ExtensionURLs","receiver","receiverType","shareCollaborativeWhiteboard","whiteboard","handleInputEvent","elem","currentTarget","innerText","inputChangeHandler","toggleStickersTray","prevViewStickerOption","html","selectPastedContent","sel","range","chatWindow","window","getSelection","getRangeAt","rangeCount","deleteContents","el","createElement","frag","createDocumentFragment","node","lastNode","firstChild","appendChild","firstNode","insertNode","cloneRange","setStartAfter","setStartBefore","collapse","removeAllRanges","addRange","selection","originalRange","createRange","pasteHTML","setEndPoint","select","onEmojiSelect","emojiObject","attachmentClickHandler","old","actionSheet","emojiClickHandler","emojiTrayPreview","stickerClickHandler","actionCallback","shareLiveReaction","data","liveReaction","reaction","transientMessage","TransientMessage","sendTransientMessage","messageConstants","payload","onLiveReaction","attachOption","stickyAttachButtonStyle","className","onClick","bind","title","localize","attchButtonIconStyle","_actionSheetConfiguration","ActionSheetConfiguration","actionSheetBoard","_viewActionSheet$even","_viewActionSheet$even2","_actionSheetConfigura","CometChatPopover","position","x","clientX","y","clientY","actionSheetPopoverStyle","CometChatActionSheet","layoutModeIconURL","roundedPlus","actionSheetStyle","actions","_createPollConfiguration","CreatePollConfiguration","questionPlaceholderText","answerPlaceholderText","addAnswerText","answerHelpText","createPoll","withBackDrop","popoverForCreatePollStyle","CometChatCreatePoll","closeIconURL","addAnswerIconURL","createPollButtonText","deleteIconURL","defaultAnswers","createPollStyle","onClose","onCreatePoll","stickerButton","_stickerTemplate$curr","stickerBtnStyle","stickerBtnIconStyle","icon","_messagePreviewConfiguration","MessagePreviewConfiguration","previewTray","_messagePreview$messa","CometChatMessagePreview","messagePreviewTitle","messagePreviewSubtitle","onCloseClick","messagePreviewStyle","_stickerKeyboardConfiguration","StickerKeyboardConfiguration","stickerTray","CometChatStickerKeyboard","emptyText","errorText","loadingText","stickerKeyboardStyle","emojiButton","emojiButtonStyle","emojiBtnIconStyle","_emojiKeyboardConfiguration","EmojiKeyboardConfiguration","emojiBoard","_viewEmojiTray$event","_viewEmojiTray$event2","emojiBoardPopoverStyle","CometChatEmojiKeyboard","emojiKeyBoardStyle","liveReactionButton","_messageInputRef$curr","reactionBtnStyle","src","alt","reactionBtnIconStyle","sendButton","sendButtonStyle","sendBtnIconStyle","inputField","messageInputStyle","contentEditable","placeholder","dir","CometChatLocalize","getDir","onInput","onBlur","onKeyDown","Hooks","chatComposerStyle","fileInputStyle","onChange","composerInputStyle","tabIndex","inputInnerStyle","inputStickyStyle","stickyButtonStyle","defaultProps","BaseStyles","width","height","background","border","borderRadius","activeBackground","placeholderTextFont","placeholderTextColor","attachmentIconTint","sendButtonIconTint","inputBackground","inputTextFont","inputTextColor","emojiIconTint","stickerIconTint","stickerCloseIconTint","propTypes","bool","string","func","array"],"sources":["/home/admin1/dev/react/sample-react-guides/node_modules/@cometchat-pro/react-ui-kit/dist/Messages/CometChatMessageComposer/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatMessageComposer = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _ = require(\"../..\");\nvar _2 = require(\"..\");\nvar _CometChatMessageHelper = require(\"../CometChatMessageHelper\");\nvar _CometChatMessageConstants = require(\"../CometChatMessageConstants\");\nvar _hooks = require(\"./hooks\");\nvar _style = require(\"./style\");\nvar _MessagePreviewConfiguration = require(\"../CometChatMessagePreview/MessagePreviewConfiguration\");\nvar _EmojiKeyboardConfiguration = require(\"../CometChatEmojiKeyboard/EmojiKeyboardConfiguration\");\nvar _CreatePollConfiguration = require(\"../CometChatCreatePoll/CreatePollConfiguration\");\nvar _StickerKeyboardConfiguration = require(\"../CometChatStickerKeyboard/StickerKeyboardConfiguration\");\nvar _Shared = require(\"../../Shared\");\nvar _addCircleFilled = _interopRequireDefault(require(\"./resources/add-circle-filled.svg\"));\nvar _emoji = _interopRequireDefault(require(\"./resources/emoji.svg\"));\nvar _sendMessage = _interopRequireDefault(require(\"./resources/send-message.svg\"));\nvar _closeCircle = _interopRequireDefault(require(\"./resources/close-circle.svg\"));\nvar _heart = _interopRequireDefault(require(\"./resources/heart.png\"));\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n/**\n *\n * CometChatMessageComposer component part of messages component it's takes user input text,image,video etc,after pressing send button\n * it's append messages in message list, with additonal CometChat SDK conversation object.\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @copyright © 2022 CometChat Inc.\n *\n */\nvar CometChatMessageComposer = /*#__PURE__*/_react[\"default\"].forwardRef(function (props, ref) {\n  var _React$useState = _react[\"default\"].useState(null),\n    _React$useState2 = (0, _slicedToArray2[\"default\"])(_React$useState, 2),\n    chatWith = _React$useState2[0],\n    setChatWith = _React$useState2[1];\n  var _React$useState3 = _react[\"default\"].useState(null),\n    _React$useState4 = (0, _slicedToArray2[\"default\"])(_React$useState3, 2),\n    chatWithId = _React$useState4[0],\n    setChatWithId = _React$useState4[1];\n  var _React$useState5 = _react[\"default\"].useState(\"\"),\n    _React$useState6 = (0, _slicedToArray2[\"default\"])(_React$useState5, 2),\n    messageInput = _React$useState6[0],\n    setMessageInput = _React$useState6[1];\n  var _React$useState7 = _react[\"default\"].useState(false),\n    _React$useState8 = (0, _slicedToArray2[\"default\"])(_React$useState7, 2),\n    viewAttachButton = _React$useState8[0],\n    setViewAttachButton = _React$useState8[1];\n  var _React$useState9 = _react[\"default\"].useState(false),\n    _React$useState10 = (0, _slicedToArray2[\"default\"])(_React$useState9, 2),\n    viewSticker = _React$useState10[0],\n    setViewSticker = _React$useState10[1];\n  var _React$useState11 = _react[\"default\"].useState(null),\n    _React$useState12 = (0, _slicedToArray2[\"default\"])(_React$useState11, 2),\n    viewStickerTray = _React$useState12[0],\n    setViewStickerTray = _React$useState12[1];\n  var _React$useState13 = _react[\"default\"].useState({}),\n    _React$useState14 = (0, _slicedToArray2[\"default\"])(_React$useState13, 2),\n    viewActionSheet = _React$useState14[0],\n    setViewActionSheet = _React$useState14[1];\n  var _React$useState15 = _react[\"default\"].useState([]),\n    _React$useState16 = (0, _slicedToArray2[\"default\"])(_React$useState15, 2),\n    actionSheetItems = _React$useState16[0],\n    setActionSheetItems = _React$useState16[1];\n  var _React$useState17 = _react[\"default\"].useState(false),\n    _React$useState18 = (0, _slicedToArray2[\"default\"])(_React$useState17, 2),\n    viewCreatePoll = _React$useState18[0],\n    setViewCreatePoll = _React$useState18[1];\n  var _React$useState19 = _react[\"default\"].useState({}),\n    _React$useState20 = (0, _slicedToArray2[\"default\"])(_React$useState19, 2),\n    viewEmojiTray = _React$useState20[0],\n    setViewEmojiTray = _React$useState20[1];\n  var _React$useState21 = _react[\"default\"].useState(null),\n    _React$useState22 = (0, _slicedToArray2[\"default\"])(_React$useState21, 2),\n    messagePreview = _React$useState22[0],\n    setMessagePreview = _React$useState22[1];\n  var _React$useState23 = _react[\"default\"].useState(true),\n    _React$useState24 = (0, _slicedToArray2[\"default\"])(_React$useState23, 2),\n    viewInputField = _React$useState24[0],\n    setViewInputField = _React$useState24[1];\n  var stickerTemplate = _react[\"default\"].useRef(null);\n  var loggedInUser = _react[\"default\"].useRef(null);\n  var isTyping = null;\n  var liveReactionTimeout = 0;\n  var disabledState = false;\n  var messageInputRef = _react[\"default\"].useRef(null);\n  var fileInputRef = _react[\"default\"].useRef(null);\n  var chatRef = _react[\"default\"].useRef(chatWith);\n  var user = props.user,\n    group = props.group,\n    hideAttachment = props.hideAttachment,\n    attachmentIconURL = props.attachmentIconURL,\n    stickerCloseIconURL = props.stickerCloseIconURL,\n    placeholderText = props.placeholderText,\n    hideLiveReaction = props.hideLiveReaction,\n    liveReactionIconURL = props.liveReactionIconURL,\n    hideEmoji = props.hideEmoji,\n    emojiIconURL = props.emojiIconURL,\n    showSendButton = props.showSendButton,\n    sendButtonIconURL = props.sendButtonIconURL,\n    onSendButtonClick = props.onSendButtonClick,\n    messageTypes = props.messageTypes,\n    excludeMessageTypes = props.excludeMessageTypes,\n    enableTypingIndicator = props.enableTypingIndicator,\n    enableSoundForMessages = props.enableSoundForMessages,\n    customOutgoingMessageSound = props.customOutgoingMessageSound,\n    style = props.style,\n    messagePreviewConfiguration = props.messagePreviewConfiguration,\n    emojiKeyboardConfiguration = props.emojiKeyboardConfiguration,\n    stickerKeyboardConfiguration = props.stickerKeyboardConfiguration,\n    createPollConfiguration = props.createPollConfiguration,\n    actionSheetConfiguration = props.actionSheetConfiguration,\n    theme = props.theme;\n  var _theme = new _.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n\n  /**,\n   * Event callbacks\n   */\n  _react[\"default\"].useImperativeHandle(ref, function () {\n    return {\n      previewMessageForEdit: previewMessage\n    };\n  });\n  var draftMessage = function draftMessage() {};\n  var previewMessage = function previewMessage(message) {\n    setMessagePreview({\n      message: message,\n      mode: _.ConversationOptionConstants.edit\n    });\n    setMessageInput(message.text);\n    var element = messageInputRef.current;\n    var messageText = message.text;\n\n    //xss extensions data\n    var xssData = (0, _2.getExtensionsData)(message, _.MetadataConstants.extensions.xssFilter);\n    if (xssData && xssData.hasOwnProperty(_.ExtensionConstants.sanitizedText) && xssData.hasOwnProperty(_.ExtensionConstants.hasXSS) && xssData.hasXSS === _.ExtensionConstants.yes) {\n      messageText = xssData.sanitized_text;\n    }\n    element.focus();\n    element.textContent = \"\";\n    pasteHtmlAtCaret(messageText, false);\n  };\n  var playAudio = function playAudio() {\n    if (customOutgoingMessageSound) {\n      _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage, customOutgoingMessageSound);\n    } else {\n      _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n    }\n  };\n  var closeMessagePreview = function closeMessagePreview() {\n    setMessagePreview(null);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n  };\n  var sendMessageOnEnter = function sendMessageOnEnter(event) {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      sendTextMessage();\n    }\n  };\n\n  /** send text message */\n  var sendTextMessage = function sendTextMessage() {\n    setViewEmojiTray(false);\n    if (!messageInput.trim().length) {\n      return false;\n    }\n    if (messagePreview && messagePreview.mode === _.ConversationOptionConstants.edit) {\n      editMessage(messagePreview.message);\n      return false;\n    }\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageInput, chatWith);\n    textMessage.setSender(loggedInUser.current);\n    textMessage.setReceiver(chatWith);\n    textMessage.setText(messageInput);\n    textMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    textMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: textMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n    _chat.CometChat.sendMessage(textMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n    if (onSendButtonClick) {\n      onSendButtonClick();\n    }\n  };\n\n  /** send media message */\n  var sendMediaMessage = function sendMediaMessage(messageInput, messageType) {\n    setViewActionSheet(false);\n    var mediaMessage = new _chat.CometChat.MediaMessage(chatWithId, messageInput, messageType, chatWith);\n    mediaMessage.setSender(loggedInUser.current);\n    mediaMessage.setReceiver(chatWith);\n    mediaMessage.setType(messageType);\n    mediaMessage.setMetadata((0, _defineProperty2[\"default\"])({}, _.MetadataConstants.file, messageInput));\n    mediaMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    mediaMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: mediaMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    _chat.CometChat.sendMessage(mediaMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: mediaMessage,\n        error: error\n      });\n    });\n  };\n\n  /** send sticker */\n  var sendSticker = function sendSticker(stickerMessage) {\n    var customData = {\n      sticker_url: stickerMessage.stickerUrl,\n      sticker_name: stickerMessage.stickerName\n    };\n    var customMessage = new _chat.CometChat.CustomMessage(chatWithId, chatWith, _2.CometChatCustomMessageTypes.sticker, customData);\n    customMessage.setSender(loggedInUser.current);\n    customMessage.setReceiver(chatWith);\n    customMessage.setMetadata({\n      incrementUnreadCount: true\n    });\n    customMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    customMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: customMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    _chat.CometChat.sendCustomMessage(customMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: customMessage,\n        error: error\n      });\n    });\n  };\n\n  /** edit message */\n  var editMessage = function editMessage(message) {\n    endTyping(null, null);\n    var messageText = messageInput.trim();\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageText, chatWith);\n    textMessage.setId(messagePreview.message.id);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n    if (enableSoundForMessages) playAudio();\n    setMessagePreview(null);\n    _chat.CometChat.editMessage(textMessage).then(function (editedMessage) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageEdit, {\n        message: editedMessage,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n  };\n  var startTyping = function startTyping(endTypingTimeout, typingMetadata) {\n    //if typing is disabled\n    if (!enableTypingIndicator) {\n      return false;\n    }\n\n    //if typing is in progress\n    if (isTyping) {\n      return false;\n    }\n    var typingInterval = endTypingTimeout || 5000;\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.startTyping(typingNotification);\n    isTyping = setTimeout(function () {\n      endTyping(null, typingMetadata);\n    }, typingInterval);\n  };\n  var endTyping = function endTyping(event, typingMetadata) {\n    if (event) {\n      event.persist();\n    }\n    if (!enableTypingIndicator) {\n      return false;\n    }\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.endTyping(typingNotification);\n    clearTimeout(isTyping);\n    isTyping = null;\n  };\n  var fileInputHandler = function fileInputHandler(event) {\n    setViewActionSheet(false);\n    if (!fileInputRef.current) {\n      return false;\n    }\n    fileInputRef.current.click();\n  };\n\n  /** fileInputChangeHandler */\n  var fileInputChangeHandler = function fileInputChangeHandler(event) {\n    setViewActionSheet(false);\n    var uploadedFile = event.target.files[\"0\"];\n    var fileNameType = uploadedFile.type.split(\"/\");\n    var reader = new FileReader();\n    reader.addEventListener(\"load\", function (event) {\n      var newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n      switch (fileNameType[0]) {\n        case \"image\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.image);\n          break;\n        case \"video\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.video);\n          break;\n        case \"audio\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.audio);\n          break;\n        case \"file\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n        default:\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n      }\n      fileInputRef.current.value = \"\";\n    }, false);\n    reader.readAsArrayBuffer(uploadedFile);\n  };\n\n  /** closeCreatePoll */\n  var closeCreatePoll = function closeCreatePoll() {\n    setViewCreatePoll(false);\n  };\n\n  /** onPollSubmit */\n  var onPollSubmit = function onPollSubmit() {\n    setViewCreatePoll(false);\n  };\n\n  /** openCreatePoll  */\n  var openCreatePoll = function openCreatePoll() {\n    setViewActionSheet(false);\n    setViewCreatePoll(true);\n  };\n\n  /** share collaborative document */\n  var shareCollaborativeDocument = function shareCollaborativeDocument() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.document, _.ExtensionConstants.post, _.ExtensionURLs.document, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, error);\n    });\n  };\n\n  /** share collaborative whitevoard */\n  var shareCollaborativeWhiteboard = function shareCollaborativeWhiteboard() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.whiteboard, _.ExtensionConstants.post, _.ExtensionURLs.whiteboard, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    })[\"catch\"](function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, error);\n    });\n  };\n\n  /** handleInputEvent */\n  var handleInputEvent = function handleInputEvent(event) {\n    startTyping();\n    var elem = event.currentTarget;\n    var messageInput = elem.textContent.trim();\n    if (!messageInput.length) {\n      event.currentTarget.textContent = messageInput;\n    }\n    setMessageInput(elem.innerText);\n  };\n\n  /** inputChangeHandler */\n  var inputChangeHandler = function inputChangeHandler(event) {\n    setTimeout(handleInputEvent(event), 500);\n  };\n\n  /** composer sticker iconClickHandler */\n  var toggleStickersTray = function toggleStickersTray() {\n    setViewStickerTray(function (prevViewStickerOption) {\n      return !prevViewStickerOption;\n    });\n  };\n  var pasteHtmlAtCaret = function pasteHtmlAtCaret(html, selectPastedContent) {\n    var sel, range;\n    var chatWindow = window;\n    if (chatWindow.getSelection) {\n      // IE9 and non-IE\n      sel = chatWindow.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        range = sel.getRangeAt(0);\n        range.deleteContents();\n        // Range.createContextualFragment() would be useful here but is\n        // only relatively recently standardized and is not supported in\n        // some browsers (IE9, for one)\n        var el = document.createElement(\"div\");\n        el.innerText = html;\n        var frag = document.createDocumentFragment(),\n          node,\n          lastNode;\n        while (node = el.firstChild) {\n          lastNode = frag.appendChild(node);\n        }\n        var firstNode = frag.firstChild;\n        range.insertNode(frag);\n        if (lastNode) {\n          range = range.cloneRange();\n          range.setStartAfter(lastNode);\n          if (selectPastedContent) {\n            range.setStartBefore(firstNode);\n          } else {\n            range.collapse(true);\n          }\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }\n      }\n    } else if ((sel = document.selection) && sel.type !== \"Control\") {\n      // IE < 9\n      var originalRange = sel.createRange();\n      originalRange.collapse(true);\n      sel.createRange().pasteHTML(html);\n      if (selectPastedContent) {\n        range = sel.createRange();\n        range.setEndPoint(\"StartToStart\", originalRange);\n        range.select();\n      }\n    }\n  };\n\n  /** select emoji from emojikeyboard */\n  var onEmojiSelect = function onEmojiSelect(emojiObject) {\n    var element = messageInputRef.current;\n    element.focus();\n    element.innerText = \"\";\n    pasteHtmlAtCaret(messageInput + emojiObject, false);\n    setMessageInput(element.innerText);\n  };\n\n  /** composer pluse button  onClickHandler */\n  var attachmentClickHandler = function attachmentClickHandler(event) {\n    setViewActionSheet(function (old) {\n      return {\n        actionSheet: !old.actionSheet,\n        event: event\n      };\n    });\n  };\n\n  /** composer  emoji onClickHandler  */\n  var emojiClickHandler = function emojiClickHandler(event) {\n    setViewEmojiTray(function (old) {\n      return {\n        emojiTrayPreview: !old.emojiTrayPreview,\n        event: event\n      };\n    });\n  };\n\n  /** composer  sticker onClickHandler  */\n  var stickerClickHandler = function stickerClickHandler() {\n    if (stickerTemplate.current.actionCallback) {\n      stickerTemplate.current.actionCallback();\n    } else {\n      toggleStickersTray();\n    }\n  };\n\n  /** if already live reaction in progress */\n  var shareLiveReaction = function shareLiveReaction() {\n    if (liveReactionTimeout) {\n      return false;\n    }\n\n    /** fetching the metadata type from constants */\n    var data = {\n      type: _.MetadataConstants.liveReaction,\n      reaction: liveReactionIconURL || _heart[\"default\"]\n    };\n\n    /*** send transient message */\n    var transientMessage = new _chat.CometChat.TransientMessage(chatWithId, chatWith, data);\n    _chat.CometChat.sendTransientMessage(transientMessage);\n\n    /** set timeout till the next share */\n    liveReactionTimeout = setTimeout(clearTimeout(liveReactionTimeout), _2.messageConstants.liveReactionTimeout);\n\n    /** emit event to share live reaction */\n    var payload = {\n      reaction: liveReactionIconURL || _heart[\"default\"]\n    };\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onLiveReaction, payload);\n  };\n\n  /** attach/composr pluse icon */\n  var attachOption = function attachOption() {\n    return viewAttachButton ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      style: (0, _style.stickyAttachButtonStyle)(),\n      className: \"attachment__icon\",\n      onClick: attachmentClickHandler.bind(_this),\n      title: (0, _.localize)(\"ATTACH\")\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: (0, _style.attchButtonIconStyle)(style, attachmentIconURL, _theme)\n    })) : null;\n  };\n\n  /**CreatePollConfiguration */\n  var _actionSheetConfiguration = actionSheetConfiguration !== null && actionSheetConfiguration !== void 0 ? actionSheetConfiguration : new _Shared.ActionSheetConfiguration({});\n\n  /**  action sheet render under tooltip */\n  var actionSheetBoard = function actionSheetBoard() {\n    var _viewActionSheet$even, _viewActionSheet$even2, _actionSheetConfigura;\n    return viewActionSheet.actionSheet ? /*#__PURE__*/_react[\"default\"].createElement(_.CometChatPopover, {\n      position: \"top\",\n      x: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even = viewActionSheet.event) === null || _viewActionSheet$even === void 0 ? void 0 : _viewActionSheet$even.clientX,\n      y: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even2 = viewActionSheet.event) === null || _viewActionSheet$even2 === void 0 ? void 0 : _viewActionSheet$even2.clientY,\n      style: (0, _style.actionSheetPopoverStyle)(_theme)\n    }, /*#__PURE__*/_react[\"default\"].createElement(_.CometChatActionSheet, {\n      title: (0, _.localize)(\"ADD_TO_CHAT\"),\n      layoutModeIconURL: (_actionSheetConfigura = _actionSheetConfiguration === null || _actionSheetConfiguration === void 0 ? void 0 : _actionSheetConfiguration.roundedPlus) !== null && _actionSheetConfigura !== void 0 ? _actionSheetConfigura : _addCircleFilled[\"default\"],\n      theme: _theme,\n      style: (0, _style.actionSheetStyle)(_theme),\n      actions: actionSheetItems\n    })) : null;\n  };\n\n  /**CreatePollConfiguration */\n  var _createPollConfiguration = createPollConfiguration !== null && createPollConfiguration !== void 0 ? createPollConfiguration : new _CreatePollConfiguration.CreatePollConfiguration({});\n  var title = (0, _.localize)(\"CREATE_POLL\");\n  var questionPlaceholderText = (0, _.localize)(\"QUESTION\");\n  var answerPlaceholderText = (0, _.localize)(\"ANSWER\");\n  var addAnswerText = (0, _.localize)(\"ADD_ANSWER\");\n  var answerHelpText = (0, _.localize)(\"SET_THE_ANSWERS\");\n\n  /** createpoll */\n  var createPoll = function createPoll() {\n    return viewCreatePoll ? /*#__PURE__*/_react[\"default\"].createElement(_.CometChatPopover, {\n      withBackDrop: viewCreatePoll ? true : false,\n      style: (0, _style.popoverForCreatePollStyle)(_theme, _createPollConfiguration)\n    }, /*#__PURE__*/_react[\"default\"].createElement(_2.CometChatCreatePoll, {\n      closeIconURL: _createPollConfiguration.closeIconURL || _closeCircle[\"default\"],\n      title: title,\n      addAnswerIconURL: _createPollConfiguration.addAnswerIconURL || _addCircleFilled[\"default\"],\n      createPollButtonText: (0, _.localize)(\"SEND\"),\n      deleteIconURL: _createPollConfiguration.deleteIconURL || _delete[\"default\"],\n      defaultAnswers: 2,\n      theme: _theme,\n      style: (0, _style.createPollStyle)(_theme, _createPollConfiguration),\n      questionPlaceholderText: questionPlaceholderText,\n      addAnswerText: addAnswerText,\n      answerPlaceholderText: answerPlaceholderText,\n      answerHelpText: answerHelpText,\n      user: user,\n      group: group,\n      onClose: _createPollConfiguration.onClose || closeCreatePoll,\n      onCreatePoll: _createPollConfiguration.onCreatePoll || onPollSubmit\n    })) : null;\n  };\n\n  /** sticker button */\n  var stickerButton = function stickerButton() {\n    var _stickerTemplate$curr;\n    return viewSticker ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      title: (0, _.localize)(\"STICKER\"),\n      style: (0, _style.stickerBtnStyle)(),\n      className: \"button__sticker\",\n      onClick: stickerClickHandler\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: (0, _style.stickerBtnIconStyle)(style, viewStickerTray ? stickerCloseIconURL : stickerTemplate === null || stickerTemplate === void 0 ? void 0 : (_stickerTemplate$curr = stickerTemplate.current) === null || _stickerTemplate$curr === void 0 ? void 0 : _stickerTemplate$curr.icon, _theme)\n    })) : null;\n  };\n\n  /** messagePreviewConfiguration */\n\n  var _messagePreviewConfiguration = messagePreviewConfiguration || new _MessagePreviewConfiguration.MessagePreviewConfiguration({});\n\n  /** message preview  */\n  var previewTray = function previewTray() {\n    var _messagePreview$messa;\n    return messagePreview ? /*#__PURE__*/_react[\"default\"].createElement(_2.CometChatMessagePreview, {\n      messagePreviewTitle: _messagePreviewConfiguration.messagePreviewTitle || (0, _.localize)(\"MESSAGE_EDIT\"),\n      messagePreviewSubtitle: _messagePreviewConfiguration.messagePreviewSubtitle || (messagePreview === null || messagePreview === void 0 ? void 0 : (_messagePreview$messa = messagePreview.message) === null || _messagePreview$messa === void 0 ? void 0 : _messagePreview$messa.text),\n      closeIconURL: _messagePreviewConfiguration.closeIconURL || _closeCircle[\"default\"],\n      onCloseClick: _messagePreviewConfiguration.onCloseClick || closeMessagePreview.bind(_this),\n      theme: _theme,\n      style: (0, _style.messagePreviewStyle)(_theme, _messagePreviewConfiguration)\n    }) : null;\n  };\n\n  /**StickerKeyboardConfiguration */\n  var _stickerKeyboardConfiguration = stickerKeyboardConfiguration !== null && stickerKeyboardConfiguration !== void 0 ? stickerKeyboardConfiguration : new _StickerKeyboardConfiguration.StickerKeyboardConfiguration({});\n\n  /** sticker board */\n  var stickerTray = function stickerTray() {\n    return viewStickerTray ? /*#__PURE__*/_react[\"default\"].createElement(_2.CometChatStickerKeyboard, {\n      onClick: sendSticker.bind(_this),\n      onClose: _stickerKeyboardConfiguration.onClose || toggleStickersTray,\n      emptyText: (0, _.localize)(\"NO_STICKERS_FOUND\"),\n      errorText: (0, _.localize)(\"SOMETHING_WRONG\"),\n      loadingText: (0, _.localize)(\"LOADING\"),\n      theme: _theme,\n      style: (0, _style.stickerKeyboardStyle)(_theme, _stickerKeyboardConfiguration)\n    }) : null;\n  };\n\n  /** emoji icon */\n  var emojiButton = function emojiButton() {\n    return !hideEmoji ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      title: (0, _.localize)(\"EMOJI\"),\n      style: (0, _style.emojiButtonStyle)(),\n      className: \"button__emoji\",\n      onClick: emojiClickHandler.bind(_this)\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: (0, _style.emojiBtnIconStyle)(style, emojiIconURL, _theme)\n    })) : null;\n  };\n\n  /** EmojiKeyboardConfiguration */\n  var _emojiKeyboardConfiguration = emojiKeyboardConfiguration || new _EmojiKeyboardConfiguration.EmojiKeyboardConfiguration({});\n\n  /** emoji board */\n  var emojiBoard = function emojiBoard() {\n    if (viewEmojiTray.emojiTrayPreview) {\n      var _viewEmojiTray$event, _viewEmojiTray$event2;\n      return /*#__PURE__*/_react[\"default\"].createElement(_.CometChatPopover, {\n        position: \"top\",\n        x: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event = viewEmojiTray.event) === null || _viewEmojiTray$event === void 0 ? void 0 : _viewEmojiTray$event.clientX,\n        y: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event2 = viewEmojiTray.event) === null || _viewEmojiTray$event2 === void 0 ? void 0 : _viewEmojiTray$event2.clientY,\n        style: (0, _style.emojiBoardPopoverStyle)(_theme, _emojiKeyboardConfiguration)\n      }, /*#__PURE__*/_react[\"default\"].createElement(_2.CometChatEmojiKeyboard, {\n        theme: _theme,\n        style: (0, _style.emojiKeyBoardStyle)(_theme, _emojiKeyboardConfiguration),\n        onClick: (_emojiKeyboardConfiguration === null || _emojiKeyboardConfiguration === void 0 ? void 0 : _emojiKeyboardConfiguration.onClick) || onEmojiSelect.bind(_this)\n      }));\n    } else {\n      return null;\n    }\n  };\n\n  /** live reaction button */\n  var liveReactionButton = function liveReactionButton() {\n    var _messageInputRef$curr;\n    if (!hideLiveReaction && !(messageInputRef !== null && messageInputRef !== void 0 && (_messageInputRef$curr = messageInputRef.current) !== null && _messageInputRef$curr !== void 0 && _messageInputRef$curr.innerText)) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: (0, _style.reactionBtnStyle)(),\n        className: \"button__reactions\",\n        onClick: shareLiveReaction.bind(_this)\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n        src: liveReactionIconURL,\n        alt: liveReactionIconURL,\n        title: (0, _.localize)(\"LIVE_REACTION\"),\n        style: (0, _style.reactionBtnIconStyle)()\n      }));\n    }\n    return null;\n  };\n\n  /** send button */\n  var sendButton = function sendButton() {\n    return messageInput !== null && messageInput !== void 0 && messageInput.length && showSendButton ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      title: (0, _.localize)(\"SEND_MESSAGE\"),\n      style: (0, _style.sendButtonStyle)(),\n      className: \"button__send\",\n      onClick: sendTextMessage\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: (0, _style.sendBtnIconStyle)(style, sendButtonIconURL, _theme)\n    })) : null;\n  };\n\n  /**message input field*/\n  var inputField = function inputField() {\n    return viewInputField ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      style: (0, _style.messageInputStyle)(style, disabledState, _theme),\n      className: \"input__message-input\",\n      contentEditable: \"true\",\n      placeholder: placeholderText,\n      dir: _.CometChatLocalize.getDir(),\n      onInput: inputChangeHandler,\n      onBlur: endTyping.bind(_this),\n      onKeyDown: sendMessageOnEnter,\n      ref: messageInputRef\n    }) : null;\n  };\n  (0, _hooks.Hooks)(props, loggedInUser, setChatWith, setChatWithId, chatRef, setViewSticker, stickerTemplate, setActionSheetItems, setViewInputField, setViewAttachButton, openCreatePoll, fileInputHandler, shareCollaborativeDocument, shareCollaborativeWhiteboard, sendSticker);\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: (0, _style.chatComposerStyle)(style, _theme),\n    className: \"chat__composer\"\n  }, previewTray(), stickerTray(), emojiBoard(), actionSheetBoard(), /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n    type: \"file\",\n    ref: fileInputRef,\n    style: (0, _style.fileInputStyle)(),\n    onChange: fileInputChangeHandler\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: (0, _style.composerInputStyle)(style),\n    className: \"composer__input\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    tabIndex: \"-1\",\n    style: (0, _style.inputInnerStyle)(style, _theme),\n    className: \"input__inner\"\n  }, inputField(), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: (0, _style.inputStickyStyle)(disabledState, attachOption(), _theme),\n    className: \"input__sticky\"\n  }, attachOption(), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"input__sticky__buttons\",\n    style: (0, _style.stickyButtonStyle)()\n  }, stickerButton(), emojiButton(), liveReactionButton(), sendButton())))), createPoll());\n});\nexports.CometChatMessageComposer = CometChatMessageComposer;\nCometChatMessageComposer.defaultProps = {\n  user: null,\n  group: null,\n  style: _objectSpread(_objectSpread({}, new _Shared.BaseStyles({\n    width: \"100%\",\n    height: \"auto\",\n    background: \"rgb(255, 255, 255)\",\n    border: \"1px solid rgb(234, 234, 234)\",\n    borderRadius: \"8px\",\n    activeBackground: \"\"\n  })), {}, {\n    placeholderTextFont: \"400 15px Inter, sans-serif\",\n    placeholderTextColor: \"rgba(20, 20, 20,0.6)\",\n    attachmentIconTint: \"rgba(20, 20, 20, 0.46)\",\n    sendButtonIconTint: \"#39f\",\n    inputBackground: \"\",\n    inputTextFont: \"\",\n    inputTextColor: \"\",\n    emojiIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerCloseIconTint: \"\"\n  }),\n  attachmentIconURL: _addCircleFilled[\"default\"],\n  stickerCloseIconURL: \"\",\n  placeholderText: (0, _.localize)(\"ENTER_YOUR_MESSAGE_HERE\"),\n  hideAttachment: false,\n  liveReactionIconURL: _heart[\"default\"],\n  hideLiveReaction: false,\n  hideEmoji: false,\n  emojiIconURL: _emoji[\"default\"],\n  showSendButton: true,\n  sendButtonIconURL: _sendMessage[\"default\"],\n  messageTypes: null,\n  excludeMessageTypes: null,\n  onSendButtonClick: null,\n  enableTypingIndicator: true,\n  enableSoundForMessages: true,\n  customOutgoingMessageSound: null,\n  messagePreviewConfiguration: null,\n  emojiKeyboardConfiguration: null,\n  stickerKeyboardConfiguration: null,\n  createPollConfiguration: null,\n  actionSheetConfiguration: null\n};\nCometChatMessageComposer.propTypes = {\n  user: _propTypes[\"default\"].object,\n  group: _propTypes[\"default\"].object,\n  hideAttachment: _propTypes[\"default\"].bool,\n  attachmentIconURL: _propTypes[\"default\"].string,\n  stickerCloseIconURL: _propTypes[\"default\"].string,\n  placeholderText: _propTypes[\"default\"].string,\n  hideLiveReaction: _propTypes[\"default\"].bool,\n  liveReactionIconURL: _propTypes[\"default\"].string,\n  hideEmoji: _propTypes[\"default\"].bool,\n  emojiIconURL: _propTypes[\"default\"].string,\n  showSendButton: _propTypes[\"default\"].bool,\n  sendButtonIconURL: _propTypes[\"default\"].string,\n  onSendButtonClick: _propTypes[\"default\"].func,\n  messageTypes: _propTypes[\"default\"].array,\n  excludeMessageTypes: _propTypes[\"default\"].array,\n  enableTypingIndicator: _propTypes[\"default\"].bool,\n  enableSoundForMessages: _propTypes[\"default\"].bool,\n  customOutgoingMessageSound: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  messagePreviewConfiguration: _propTypes[\"default\"].object,\n  emojiKeyboardConfiguration: _propTypes[\"default\"].object,\n  stickerKeyboardConfiguration: _propTypes[\"default\"].object,\n  createPollConfiguration: _propTypes[\"default\"].object,\n  actionSheetConfiguration: _propTypes[\"default\"].object,\n  theme: _propTypes[\"default\"].object\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}