{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatMessageComposer = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _ = require(\"../..\");\nvar _2 = require(\"..\");\nvar _CometChatMessageHelper = require(\"../CometChatMessageHelper\");\nvar _CometChatMessageConstants = require(\"../CometChatMessageConstants\");\nvar _hooks = require(\"./hooks\");\nvar _style = require(\"./style\");\nvar _MessagePreviewConfiguration = require(\"../CometChatMessagePreview/MessagePreviewConfiguration\");\nvar _EmojiKeyboardConfiguration = require(\"../CometChatEmojiKeyboard/EmojiKeyboardConfiguration\");\nvar _CreatePollConfiguration = require(\"../CometChatCreatePoll/CreatePollConfiguration\");\nvar _StickerKeyboardConfiguration = require(\"../CometChatStickerKeyboard/StickerKeyboardConfiguration\");\nvar _Shared = require(\"../../Shared\");\nvar _addCircleFilled = _interopRequireDefault(require(\"./resources/add-circle-filled.svg\"));\nvar _emoji = _interopRequireDefault(require(\"./resources/emoji.svg\"));\nvar _sendMessage = _interopRequireDefault(require(\"./resources/send-message.svg\"));\nvar _closeCircle = _interopRequireDefault(require(\"./resources/close-circle.svg\"));\nvar _heart = _interopRequireDefault(require(\"./resources/heart.png\"));\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n/**\n *\n * CometChatMessageComposer component part of messages component it's takes user input text,image,video etc,after pressing send button\n * it's append messages in message list, with additonal CometChat SDK conversation object.\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @copyright Â© 2022 CometChat Inc.\n *\n */\nvar CometChatMessageComposer = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  var _React$useState = _react.default.useState(null),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    chatWith = _React$useState2[0],\n    setChatWith = _React$useState2[1];\n  var _React$useState3 = _react.default.useState(null),\n    _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n    chatWithId = _React$useState4[0],\n    setChatWithId = _React$useState4[1];\n  var _React$useState5 = _react.default.useState(\"\"),\n    _React$useState6 = (0, _slicedToArray2.default)(_React$useState5, 2),\n    messageInput = _React$useState6[0],\n    setMessageInput = _React$useState6[1];\n  var _React$useState7 = _react.default.useState(false),\n    _React$useState8 = (0, _slicedToArray2.default)(_React$useState7, 2),\n    viewAttachButton = _React$useState8[0],\n    setViewAttachButton = _React$useState8[1];\n  var _React$useState9 = _react.default.useState(false),\n    _React$useState10 = (0, _slicedToArray2.default)(_React$useState9, 2),\n    viewSticker = _React$useState10[0],\n    setViewSticker = _React$useState10[1];\n  var _React$useState11 = _react.default.useState(null),\n    _React$useState12 = (0, _slicedToArray2.default)(_React$useState11, 2),\n    viewStickerTray = _React$useState12[0],\n    setViewStickerTray = _React$useState12[1];\n  var _React$useState13 = _react.default.useState({}),\n    _React$useState14 = (0, _slicedToArray2.default)(_React$useState13, 2),\n    viewActionSheet = _React$useState14[0],\n    setViewActionSheet = _React$useState14[1];\n  var _React$useState15 = _react.default.useState([]),\n    _React$useState16 = (0, _slicedToArray2.default)(_React$useState15, 2),\n    actionSheetItems = _React$useState16[0],\n    setActionSheetItems = _React$useState16[1];\n  var _React$useState17 = _react.default.useState(false),\n    _React$useState18 = (0, _slicedToArray2.default)(_React$useState17, 2),\n    viewCreatePoll = _React$useState18[0],\n    setViewCreatePoll = _React$useState18[1];\n  var _React$useState19 = _react.default.useState({}),\n    _React$useState20 = (0, _slicedToArray2.default)(_React$useState19, 2),\n    viewEmojiTray = _React$useState20[0],\n    setViewEmojiTray = _React$useState20[1];\n  var _React$useState21 = _react.default.useState(null),\n    _React$useState22 = (0, _slicedToArray2.default)(_React$useState21, 2),\n    messagePreview = _React$useState22[0],\n    setMessagePreview = _React$useState22[1];\n  var _React$useState23 = _react.default.useState(true),\n    _React$useState24 = (0, _slicedToArray2.default)(_React$useState23, 2),\n    viewInputField = _React$useState24[0],\n    setViewInputField = _React$useState24[1];\n  var stickerTemplate = _react.default.useRef(null);\n  var loggedInUser = _react.default.useRef(null);\n  var isTyping = _react.default.useRef(null);\n  var liveReactionTimeout = 0;\n  var disabledState = false;\n  var messageInputRef = _react.default.useRef(null);\n  var fileInputRef = _react.default.useRef(null);\n  var chatRef = _react.default.useRef(chatWith);\n  var user = props.user,\n    group = props.group,\n    hideAttachment = props.hideAttachment,\n    attachmentIconURL = props.attachmentIconURL,\n    stickerCloseIconURL = props.stickerCloseIconURL,\n    placeholderText = props.placeholderText,\n    hideLiveReaction = props.hideLiveReaction,\n    liveReactionIconURL = props.liveReactionIconURL,\n    hideEmoji = props.hideEmoji,\n    emojiIconURL = props.emojiIconURL,\n    showSendButton = props.showSendButton,\n    sendButtonIconURL = props.sendButtonIconURL,\n    onSendButtonClick = props.onSendButtonClick,\n    messageTypes = props.messageTypes,\n    excludeMessageTypes = props.excludeMessageTypes,\n    enableTypingIndicator = props.enableTypingIndicator,\n    enableSoundForMessages = props.enableSoundForMessages,\n    customOutgoingMessageSound = props.customOutgoingMessageSound,\n    style = props.style,\n    messagePreviewConfiguration = props.messagePreviewConfiguration,\n    emojiKeyboardConfiguration = props.emojiKeyboardConfiguration,\n    stickerKeyboardConfiguration = props.stickerKeyboardConfiguration,\n    createPollConfiguration = props.createPollConfiguration,\n    actionSheetConfiguration = props.actionSheetConfiguration,\n    theme = props.theme;\n  var _theme = new _.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n\n  /**,\n   * Event callbacks\n   */\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      previewMessageForEdit: previewMessage\n    };\n  });\n  var draftMessage = function draftMessage() {};\n  var previewMessage = function previewMessage(message) {\n    setMessagePreview({\n      message: message,\n      mode: _.ConversationOptionConstants.edit\n    });\n    setMessageInput(message.text);\n    var element = messageInputRef.current;\n    var messageText = message.text;\n\n    //xss extensions data\n    var xssData = (0, _2.getExtensionsData)(message, _.MetadataConstants.extensions.xssFilter);\n    if (xssData && xssData.hasOwnProperty(_.ExtensionConstants.sanitizedText) && xssData.hasOwnProperty(_.ExtensionConstants.hasXSS) && xssData.hasXSS === _.ExtensionConstants.yes) {\n      messageText = xssData.sanitized_text;\n    }\n    element.focus();\n    element.textContent = \"\";\n    pasteHtmlAtCaret(messageText, false);\n  };\n  var playAudio = function playAudio() {\n    if (customOutgoingMessageSound) {\n      _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage, customOutgoingMessageSound);\n    } else {\n      _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n    }\n  };\n  var closeMessagePreview = function closeMessagePreview() {\n    setMessagePreview(null);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n  };\n  var sendMessageOnEnter = function sendMessageOnEnter(event) {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      sendTextMessage();\n    }\n  };\n\n  /** send text message */\n  var sendTextMessage = function sendTextMessage() {\n    setViewEmojiTray(false);\n    if (!messageInput.trim().length) {\n      return false;\n    }\n    if (messagePreview && messagePreview.mode === _.ConversationOptionConstants.edit) {\n      editMessage(messagePreview.message);\n      return false;\n    }\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageInput, chatWith);\n    textMessage.setSender(loggedInUser.current);\n    textMessage.setReceiver(chatWith);\n    textMessage.setText(messageInput);\n    textMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    textMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: textMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n    _chat.CometChat.sendMessage(textMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n    if (onSendButtonClick) {\n      onSendButtonClick();\n    }\n  };\n\n  /** send media message */\n  var sendMediaMessage = function sendMediaMessage(messageInput, messageType) {\n    setViewActionSheet(false);\n    var mediaMessage = new _chat.CometChat.MediaMessage(chatWithId, messageInput, messageType, chatWith);\n    mediaMessage.setSender(loggedInUser.current);\n    mediaMessage.setReceiver(chatWith);\n    mediaMessage.setType(messageType);\n    mediaMessage.setMetadata((0, _defineProperty2.default)({}, _.MetadataConstants.file, messageInput));\n    mediaMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    mediaMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: mediaMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    _chat.CometChat.sendMessage(mediaMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: mediaMessage,\n        error: error\n      });\n    });\n  };\n\n  /** send sticker */\n  var sendSticker = function sendSticker(stickerMessage) {\n    var customData = {\n      sticker_url: stickerMessage.stickerUrl,\n      sticker_name: stickerMessage.stickerName\n    };\n    var customMessage = new _chat.CometChat.CustomMessage(chatWithId, chatWith, _2.CometChatCustomMessageTypes.sticker, customData);\n    customMessage.setSender(loggedInUser.current);\n    customMessage.setReceiver(chatWith);\n    customMessage.setMetadata({\n      incrementUnreadCount: true\n    });\n    customMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    customMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: customMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    _chat.CometChat.sendCustomMessage(customMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: customMessage,\n        error: error\n      });\n    });\n  };\n\n  /** edit message */\n  var editMessage = function editMessage(message) {\n    endTyping(null, null);\n    var messageText = messageInput.trim();\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageText, chatWith);\n    textMessage.setId(messagePreview.message.id);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n    if (enableSoundForMessages) playAudio();\n    setMessagePreview(null);\n    _chat.CometChat.editMessage(textMessage).then(function (editedMessage) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageEdit, {\n        message: editedMessage,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n  };\n  var startTyping = function startTyping(endTypingTimeout, typingMetadata) {\n    //if typing is disabled\n    if (!enableTypingIndicator) {\n      return false;\n    }\n\n    //if typing is in progress\n    if (isTyping.current) {\n      return false;\n    }\n    var typingInterval = endTypingTimeout || 5000;\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.startTyping(typingNotification);\n    isTyping.current = setTimeout(function () {\n      endTyping(null, typingMetadata);\n    }, typingInterval);\n  };\n  var endTyping = function endTyping(event, typingMetadata) {\n    if (event) {\n      event.persist();\n    }\n    if (!enableTypingIndicator) {\n      return false;\n    }\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.endTyping(typingNotification);\n    clearTimeout(isTyping.current);\n    isTyping.current = null;\n  };\n  var fileInputHandler = function fileInputHandler(event) {\n    setViewActionSheet(false);\n    if (!fileInputRef.current) {\n      return false;\n    }\n    fileInputRef.current.click();\n  };\n\n  /** fileInputChangeHandler */\n  var fileInputChangeHandler = function fileInputChangeHandler(event) {\n    setViewActionSheet(false);\n    var uploadedFile = event.target.files[\"0\"];\n    var fileNameType = uploadedFile.type.split(\"/\");\n    var reader = new FileReader();\n    reader.addEventListener(\"load\", function (event) {\n      var newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n      switch (fileNameType[0]) {\n        case \"image\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.image);\n          break;\n        case \"video\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.video);\n          break;\n        case \"audio\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.audio);\n          break;\n        case \"file\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n        default:\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n      }\n      fileInputRef.current.value = \"\";\n    }, false);\n    reader.readAsArrayBuffer(uploadedFile);\n  };\n\n  /** closeCreatePoll */\n  var closeCreatePoll = function closeCreatePoll() {\n    setViewCreatePoll(false);\n  };\n\n  /** onPollSubmit */\n  var onPollSubmit = function onPollSubmit() {\n    setViewCreatePoll(false);\n  };\n\n  /** openCreatePoll  */\n  var openCreatePoll = function openCreatePoll() {\n    setViewActionSheet(false);\n    setViewCreatePoll(true);\n  };\n\n  /** share collaborative document */\n  var shareCollaborativeDocument = function shareCollaborativeDocument() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.document, _.ExtensionConstants.post, _.ExtensionURLs.document, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, error);\n    });\n  };\n\n  /** share collaborative whitevoard */\n  var shareCollaborativeWhiteboard = function shareCollaborativeWhiteboard() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.whiteboard, _.ExtensionConstants.post, _.ExtensionURLs.whiteboard, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, error);\n    });\n  };\n\n  /** handleInputEvent */\n  var handleInputEvent = function handleInputEvent(event) {\n    startTyping();\n    var elem = event.currentTarget;\n    var messageInput = elem.textContent.trim();\n    if (!messageInput.length) {\n      event.currentTarget.textContent = messageInput;\n    }\n    setMessageInput(elem.innerText);\n  };\n\n  /** inputChangeHandler */\n  var inputChangeHandler = function inputChangeHandler(event) {\n    setTimeout(handleInputEvent(event), 500);\n  };\n\n  /** composer sticker iconClickHandler */\n  var toggleStickersTray = function toggleStickersTray() {\n    setViewStickerTray(function (prevViewStickerOption) {\n      return !prevViewStickerOption;\n    });\n  };\n  var pasteHtmlAtCaret = function pasteHtmlAtCaret(html, selectPastedContent) {\n    var sel, range;\n    var chatWindow = window;\n    if (chatWindow.getSelection) {\n      // IE9 and non-IE\n      sel = chatWindow.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        range = sel.getRangeAt(0);\n        range.deleteContents();\n        // Range.createContextualFragment() would be useful here but is\n        // only relatively recently standardized and is not supported in\n        // some browsers (IE9, for one)\n        var el = document.createElement(\"div\");\n        el.innerText = html;\n        var frag = document.createDocumentFragment(),\n          node,\n          lastNode;\n        while (node = el.firstChild) {\n          lastNode = frag.appendChild(node);\n        }\n        var firstNode = frag.firstChild;\n        range.insertNode(frag);\n        if (lastNode) {\n          range = range.cloneRange();\n          range.setStartAfter(lastNode);\n          if (selectPastedContent) {\n            range.setStartBefore(firstNode);\n          } else {\n            range.collapse(true);\n          }\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }\n      }\n    } else if ((sel = document.selection) && sel.type !== \"Control\") {\n      // IE < 9\n      var originalRange = sel.createRange();\n      originalRange.collapse(true);\n      sel.createRange().pasteHTML(html);\n      if (selectPastedContent) {\n        range = sel.createRange();\n        range.setEndPoint(\"StartToStart\", originalRange);\n        range.select();\n      }\n    }\n  };\n\n  /** select emoji from emojikeyboard */\n  var onEmojiSelect = function onEmojiSelect(emojiObject) {\n    var element = messageInputRef.current;\n    element.focus();\n    element.innerText = \"\";\n    pasteHtmlAtCaret(messageInput + emojiObject, false);\n    setMessageInput(element.innerText);\n  };\n\n  /** composer pluse button  onClickHandler */\n  var attachmentClickHandler = function attachmentClickHandler(event) {\n    setViewActionSheet(function (old) {\n      return {\n        actionSheet: !old.actionSheet,\n        event: event\n      };\n    });\n  };\n\n  /** composer  emoji onClickHandler  */\n  var emojiClickHandler = function emojiClickHandler(event) {\n    setViewEmojiTray(function (old) {\n      return {\n        emojiTrayPreview: !old.emojiTrayPreview,\n        event: event\n      };\n    });\n  };\n\n  /** composer  sticker onClickHandler  */\n  var stickerClickHandler = function stickerClickHandler() {\n    if (stickerTemplate.current.actionCallback) {\n      stickerTemplate.current.actionCallback();\n    } else {\n      toggleStickersTray();\n    }\n  };\n\n  /** if already live reaction in progress */\n  var shareLiveReaction = function shareLiveReaction() {\n    if (liveReactionTimeout) {\n      return false;\n    }\n\n    /** fetching the metadata type from constants */\n    var data = {\n      type: _.MetadataConstants.liveReaction,\n      reaction: liveReactionIconURL || _heart.default\n    };\n\n    /*** send transient message */\n    var transientMessage = new _chat.CometChat.TransientMessage(chatWithId, chatWith, data);\n    _chat.CometChat.sendTransientMessage(transientMessage);\n\n    /** set timeout till the next share */\n    liveReactionTimeout = setTimeout(clearTimeout(liveReactionTimeout), _2.messageConstants.liveReactionTimeout);\n\n    /** emit event to share live reaction */\n    var payload = {\n      reaction: liveReactionIconURL || _heart.default\n    };\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onLiveReaction, payload);\n  };\n\n  /** attach/composr pluse icon */\n  var attachOption = function attachOption() {\n    return viewAttachButton ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      style: (0, _style.stickyAttachButtonStyle)(),\n      className: \"attachment__icon\",\n      onClick: attachmentClickHandler.bind(_this),\n      title: (0, _.localize)(\"ATTACH\")\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.attchButtonIconStyle)(style, attachmentIconURL, _theme)\n    })) : null;\n  };\n\n  /**CreatePollConfiguration */\n  var _actionSheetConfiguration = actionSheetConfiguration !== null && actionSheetConfiguration !== void 0 ? actionSheetConfiguration : new _Shared.ActionSheetConfiguration({});\n\n  /**  action sheet render under tooltip */\n  var actionSheetBoard = function actionSheetBoard() {\n    var _viewActionSheet$even, _viewActionSheet$even2, _actionSheetConfigura;\n    return viewActionSheet.actionSheet ? /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n      position: \"top\",\n      x: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even = viewActionSheet.event) === null || _viewActionSheet$even === void 0 ? void 0 : _viewActionSheet$even.clientX,\n      y: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even2 = viewActionSheet.event) === null || _viewActionSheet$even2 === void 0 ? void 0 : _viewActionSheet$even2.clientY,\n      style: (0, _style.actionSheetPopoverStyle)(_theme)\n    }, /*#__PURE__*/_react.default.createElement(_.CometChatActionSheet, {\n      title: (0, _.localize)(\"ADD_TO_CHAT\"),\n      layoutModeIconURL: (_actionSheetConfigura = _actionSheetConfiguration === null || _actionSheetConfiguration === void 0 ? void 0 : _actionSheetConfiguration.roundedPlus) !== null && _actionSheetConfigura !== void 0 ? _actionSheetConfigura : _addCircleFilled.default,\n      theme: _theme,\n      style: (0, _style.actionSheetStyle)(_theme),\n      actions: actionSheetItems\n    })) : null;\n  };\n\n  /**CreatePollConfiguration */\n  var _createPollConfiguration = createPollConfiguration !== null && createPollConfiguration !== void 0 ? createPollConfiguration : new _CreatePollConfiguration.CreatePollConfiguration({});\n  var title = (0, _.localize)(\"CREATE_POLL\");\n  var questionPlaceholderText = (0, _.localize)(\"QUESTION\");\n  var answerPlaceholderText = (0, _.localize)(\"ANSWER\");\n  var addAnswerText = (0, _.localize)(\"ADD_ANSWER\");\n  var answerHelpText = (0, _.localize)(\"SET_THE_ANSWERS\");\n\n  /** createpoll */\n  var createPoll = function createPoll() {\n    return viewCreatePoll ? /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n      withBackDrop: viewCreatePoll ? true : false,\n      style: (0, _style.popoverForCreatePollStyle)(_theme, _createPollConfiguration)\n    }, /*#__PURE__*/_react.default.createElement(_2.CometChatCreatePoll, {\n      closeIconURL: _createPollConfiguration.closeIconURL || _closeCircle.default,\n      title: title,\n      addAnswerIconURL: _createPollConfiguration.addAnswerIconURL || _addCircleFilled.default,\n      createPollButtonText: (0, _.localize)(\"SEND\"),\n      deleteIconURL: _createPollConfiguration.deleteIconURL || _delete.default,\n      defaultAnswers: 2,\n      theme: _theme,\n      style: (0, _style.createPollStyle)(_theme, _createPollConfiguration),\n      questionPlaceholderText: questionPlaceholderText,\n      addAnswerText: addAnswerText,\n      answerPlaceholderText: answerPlaceholderText,\n      answerHelpText: answerHelpText,\n      user: user,\n      group: group,\n      onClose: _createPollConfiguration.onClose || closeCreatePoll,\n      onCreatePoll: _createPollConfiguration.onCreatePoll || onPollSubmit\n    })) : null;\n  };\n\n  /** sticker button */\n  var stickerButton = function stickerButton() {\n    var _stickerTemplate$curr;\n    return viewSticker ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"STICKER\"),\n      style: (0, _style.stickerBtnStyle)(),\n      className: \"button__sticker\",\n      onClick: stickerClickHandler\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.stickerBtnIconStyle)(style, viewStickerTray ? stickerCloseIconURL : stickerTemplate === null || stickerTemplate === void 0 ? void 0 : (_stickerTemplate$curr = stickerTemplate.current) === null || _stickerTemplate$curr === void 0 ? void 0 : _stickerTemplate$curr.icon, _theme)\n    })) : null;\n  };\n\n  /** messagePreviewConfiguration */\n\n  var _messagePreviewConfiguration = messagePreviewConfiguration || new _MessagePreviewConfiguration.MessagePreviewConfiguration({});\n\n  /** message preview  */\n  var previewTray = function previewTray() {\n    var _messagePreview$messa;\n    return messagePreview ? /*#__PURE__*/_react.default.createElement(_2.CometChatMessagePreview, {\n      messagePreviewTitle: _messagePreviewConfiguration.messagePreviewTitle || (0, _.localize)(\"MESSAGE_EDIT\"),\n      messagePreviewSubtitle: _messagePreviewConfiguration.messagePreviewSubtitle || (messagePreview === null || messagePreview === void 0 ? void 0 : (_messagePreview$messa = messagePreview.message) === null || _messagePreview$messa === void 0 ? void 0 : _messagePreview$messa.text),\n      closeIconURL: _messagePreviewConfiguration.closeIconURL || _closeCircle.default,\n      onCloseClick: _messagePreviewConfiguration.onCloseClick || closeMessagePreview.bind(_this),\n      theme: _theme,\n      style: (0, _style.messagePreviewStyle)(_theme, _messagePreviewConfiguration)\n    }) : null;\n  };\n\n  /**StickerKeyboardConfiguration */\n  var _stickerKeyboardConfiguration = stickerKeyboardConfiguration !== null && stickerKeyboardConfiguration !== void 0 ? stickerKeyboardConfiguration : new _StickerKeyboardConfiguration.StickerKeyboardConfiguration({});\n\n  /** sticker board */\n  var stickerTray = function stickerTray() {\n    return viewStickerTray ? /*#__PURE__*/_react.default.createElement(_2.CometChatStickerKeyboard, {\n      onClick: sendSticker.bind(_this),\n      onClose: _stickerKeyboardConfiguration.onClose || toggleStickersTray,\n      emptyText: (0, _.localize)(\"NO_STICKERS_FOUND\"),\n      errorText: (0, _.localize)(\"SOMETHING_WRONG\"),\n      loadingText: (0, _.localize)(\"LOADING\"),\n      theme: _theme,\n      style: (0, _style.stickerKeyboardStyle)(_theme, _stickerKeyboardConfiguration)\n    }) : null;\n  };\n\n  /** emoji icon */\n  var emojiButton = function emojiButton() {\n    return !hideEmoji ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"EMOJI\"),\n      style: (0, _style.emojiButtonStyle)(),\n      className: \"button__emoji\",\n      onClick: emojiClickHandler.bind(_this)\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.emojiBtnIconStyle)(style, emojiIconURL, _theme)\n    })) : null;\n  };\n\n  /** EmojiKeyboardConfiguration */\n  var _emojiKeyboardConfiguration = emojiKeyboardConfiguration || new _EmojiKeyboardConfiguration.EmojiKeyboardConfiguration({});\n\n  /** emoji board */\n  var emojiBoard = function emojiBoard() {\n    if (viewEmojiTray.emojiTrayPreview) {\n      var _viewEmojiTray$event, _viewEmojiTray$event2;\n      return /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n        position: \"top\",\n        x: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event = viewEmojiTray.event) === null || _viewEmojiTray$event === void 0 ? void 0 : _viewEmojiTray$event.clientX,\n        y: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event2 = viewEmojiTray.event) === null || _viewEmojiTray$event2 === void 0 ? void 0 : _viewEmojiTray$event2.clientY,\n        style: (0, _style.emojiBoardPopoverStyle)(_theme, _emojiKeyboardConfiguration)\n      }, /*#__PURE__*/_react.default.createElement(_2.CometChatEmojiKeyboard, {\n        theme: _theme,\n        style: (0, _style.emojiKeyBoardStyle)(_theme, _emojiKeyboardConfiguration),\n        onClick: (_emojiKeyboardConfiguration === null || _emojiKeyboardConfiguration === void 0 ? void 0 : _emojiKeyboardConfiguration.onClick) || onEmojiSelect.bind(_this)\n      }));\n    } else {\n      return null;\n    }\n  };\n\n  /** live reaction button */\n  var liveReactionButton = function liveReactionButton() {\n    var _messageInputRef$curr;\n    if (!hideLiveReaction && !(messageInputRef !== null && messageInputRef !== void 0 && (_messageInputRef$curr = messageInputRef.current) !== null && _messageInputRef$curr !== void 0 && _messageInputRef$curr.innerText)) {\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.reactionBtnStyle)(),\n        className: \"button__reactions\",\n        onClick: shareLiveReaction.bind(_this)\n      }, /*#__PURE__*/_react.default.createElement(\"img\", {\n        src: liveReactionIconURL,\n        alt: liveReactionIconURL,\n        title: (0, _.localize)(\"LIVE_REACTION\"),\n        style: (0, _style.reactionBtnIconStyle)()\n      }));\n    }\n    return null;\n  };\n\n  /** send button */\n  var sendButton = function sendButton() {\n    return messageInput !== null && messageInput !== void 0 && messageInput.length && showSendButton || hideLiveReaction ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"SEND_MESSAGE\"),\n      style: (0, _style.sendButtonStyle)(),\n      className: \"button__send\",\n      onClick: sendTextMessage\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.sendBtnIconStyle)(style, sendButtonIconURL, _theme, messageInput, isTyping)\n    })) : null;\n  };\n\n  /**message input field*/\n  var inputField = function inputField() {\n    return viewInputField ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      style: (0, _style.messageInputStyle)(style, disabledState, _theme),\n      className: \"input__message-input\",\n      contentEditable: \"true\",\n      placeholder: placeholderText,\n      dir: _.CometChatLocalize.getDir(),\n      onInput: inputChangeHandler,\n      onBlur: endTyping.bind(_this),\n      onKeyDown: sendMessageOnEnter,\n      ref: messageInputRef\n    }) : null;\n  };\n  (0, _hooks.Hooks)(props, loggedInUser, setChatWith, setChatWithId, chatRef, setViewSticker, stickerTemplate, setActionSheetItems, setViewInputField, setViewAttachButton, openCreatePoll, fileInputHandler, shareCollaborativeDocument, shareCollaborativeWhiteboard, sendSticker);\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.chatComposerStyle)(style, _theme),\n    className: \"chat__composer\"\n  }, previewTray(), stickerTray(), emojiBoard(), actionSheetBoard(), /*#__PURE__*/_react.default.createElement(\"input\", {\n    type: \"file\",\n    ref: fileInputRef,\n    style: (0, _style.fileInputStyle)(),\n    onChange: fileInputChangeHandler\n  }), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.composerInputStyle)(style),\n    className: \"composer__input\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    tabIndex: \"-1\",\n    style: (0, _style.inputInnerStyle)(style, _theme),\n    className: \"input__inner\"\n  }, inputField(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.inputStickyStyle)(disabledState, attachOption(), _theme),\n    className: \"input__sticky\"\n  }, attachOption(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"input__sticky__buttons\",\n    style: (0, _style.stickyButtonStyle)()\n  }, stickerButton(), emojiButton(), liveReactionButton(), sendButton())))), createPoll());\n});\nexports.CometChatMessageComposer = CometChatMessageComposer;\nCometChatMessageComposer.defaultProps = {\n  user: null,\n  group: null,\n  style: _objectSpread(_objectSpread({}, new _Shared.BaseStyles({\n    width: \"100%\",\n    height: \"auto\",\n    background: \"rgb(255, 255, 255)\",\n    border: \"1px solid rgb(234, 234, 234)\",\n    borderRadius: \"8px\",\n    activeBackground: \"\"\n  })), {}, {\n    placeholderTextFont: \"400 15px Inter, sans-serif\",\n    placeholderTextColor: \"rgba(20, 20, 20,0.6)\",\n    attachmentIconTint: \"rgba(20, 20, 20, 0.46)\",\n    sendButtonIconTint: \"#39f\",\n    inputBackground: \"\",\n    inputTextFont: \"\",\n    inputTextColor: \"\",\n    emojiIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerCloseIconTint: \"\"\n  }),\n  attachmentIconURL: _addCircleFilled.default,\n  stickerCloseIconURL: \"\",\n  placeholderText: (0, _.localize)(\"ENTER_YOUR_MESSAGE_HERE\"),\n  hideAttachment: false,\n  liveReactionIconURL: _heart.default,\n  hideLiveReaction: false,\n  hideEmoji: false,\n  emojiIconURL: _emoji.default,\n  showSendButton: true,\n  sendButtonIconURL: _sendMessage.default,\n  messageTypes: null,\n  excludeMessageTypes: null,\n  onSendButtonClick: null,\n  enableTypingIndicator: true,\n  enableSoundForMessages: true,\n  customOutgoingMessageSound: null,\n  messagePreviewConfiguration: null,\n  emojiKeyboardConfiguration: null,\n  stickerKeyboardConfiguration: null,\n  createPollConfiguration: null,\n  actionSheetConfiguration: null\n};\nCometChatMessageComposer.propTypes = {\n  user: _propTypes.default.object,\n  group: _propTypes.default.object,\n  hideAttachment: _propTypes.default.bool,\n  attachmentIconURL: _propTypes.default.string,\n  stickerCloseIconURL: _propTypes.default.string,\n  placeholderText: _propTypes.default.string,\n  hideLiveReaction: _propTypes.default.bool,\n  liveReactionIconURL: _propTypes.default.string,\n  hideEmoji: _propTypes.default.bool,\n  emojiIconURL: _propTypes.default.string,\n  showSendButton: _propTypes.default.bool,\n  sendButtonIconURL: _propTypes.default.string,\n  onSendButtonClick: _propTypes.default.func,\n  messageTypes: _propTypes.default.array,\n  excludeMessageTypes: _propTypes.default.array,\n  enableTypingIndicator: _propTypes.default.bool,\n  enableSoundForMessages: _propTypes.default.bool,\n  customOutgoingMessageSound: _propTypes.default.string,\n  style: _propTypes.default.object,\n  messagePreviewConfiguration: _propTypes.default.object,\n  emojiKeyboardConfiguration: _propTypes.default.object,\n  stickerKeyboardConfiguration: _propTypes.default.object,\n  createPollConfiguration: _propTypes.default.object,\n  actionSheetConfiguration: _propTypes.default.object,\n  theme: _propTypes.default.object\n};","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","CometChatMessageComposer","_defineProperty2","_slicedToArray2","_react","_propTypes","_chat","_","_2","_CometChatMessageHelper","_CometChatMessageConstants","_hooks","_style","_MessagePreviewConfiguration","_EmojiKeyboardConfiguration","_CreatePollConfiguration","_StickerKeyboardConfiguration","_Shared","_addCircleFilled","_emoji","_sendMessage","_closeCircle","_heart","_delete","_this","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","default","getOwnPropertyDescriptors","defineProperties","forwardRef","props","ref","_React$useState","useState","_React$useState2","chatWith","setChatWith","_React$useState3","_React$useState4","chatWithId","setChatWithId","_React$useState5","_React$useState6","messageInput","setMessageInput","_React$useState7","_React$useState8","viewAttachButton","setViewAttachButton","_React$useState9","_React$useState10","viewSticker","setViewSticker","_React$useState11","_React$useState12","viewStickerTray","setViewStickerTray","_React$useState13","_React$useState14","viewActionSheet","setViewActionSheet","_React$useState15","_React$useState16","actionSheetItems","setActionSheetItems","_React$useState17","_React$useState18","viewCreatePoll","setViewCreatePoll","_React$useState19","_React$useState20","viewEmojiTray","setViewEmojiTray","_React$useState21","_React$useState22","messagePreview","setMessagePreview","_React$useState23","_React$useState24","viewInputField","setViewInputField","stickerTemplate","useRef","loggedInUser","isTyping","liveReactionTimeout","disabledState","messageInputRef","fileInputRef","chatRef","user","group","hideAttachment","attachmentIconURL","stickerCloseIconURL","placeholderText","hideLiveReaction","liveReactionIconURL","hideEmoji","emojiIconURL","showSendButton","sendButtonIconURL","onSendButtonClick","messageTypes","excludeMessageTypes","enableTypingIndicator","enableSoundForMessages","customOutgoingMessageSound","style","messagePreviewConfiguration","emojiKeyboardConfiguration","stickerKeyboardConfiguration","createPollConfiguration","actionSheetConfiguration","theme","_theme","CometChatTheme","useImperativeHandle","previewMessageForEdit","previewMessage","draftMessage","message","mode","ConversationOptionConstants","edit","text","element","current","messageText","xssData","getExtensionsData","MetadataConstants","extensions","xssFilter","hasOwnProperty","ExtensionConstants","sanitizedText","hasXSS","yes","sanitized_text","focus","textContent","pasteHtmlAtCaret","playAudio","CometChatSoundManager","play","Sound","outgoingMessage","closeMessagePreview","sendMessageOnEnter","event","keyCode","shiftKey","preventDefault","sendTextMessage","trim","editMessage","textMessage","CometChat","TextMessage","setSender","setReceiver","setText","setSentAt","getUnixTimestamp","setMuid","String","CometChatMessageEvents","emit","onMessageSent","status","messageStatus","inprogress","sendMessage","then","messageObject","success","catch","error","onMessageError","sendMediaMessage","messageType","mediaMessage","MediaMessage","setType","setMetadata","file","sendSticker","stickerMessage","customData","sticker_url","stickerUrl","sticker_name","stickerName","customMessage","CustomMessage","CometChatCustomMessageTypes","sticker","incrementUnreadCount","sendCustomMessage","endTyping","setId","id","editedMessage","onMessageEdit","startTyping","endTypingTimeout","typingMetadata","typingInterval","metadata","undefined","typingNotification","TypingIndicator","setTimeout","persist","clearTimeout","fileInputHandler","click","fileInputChangeHandler","uploadedFile","files","fileNameType","type","split","reader","FileReader","addEventListener","newFile","File","result","name","MessageTypeConstants","image","video","audio","readAsArrayBuffer","closeCreatePoll","onPollSubmit","openCreatePoll","shareCollaborativeDocument","callExtension","document","post","ExtensionURLs","receiver","receiverType","shareCollaborativeWhiteboard","whiteboard","handleInputEvent","elem","currentTarget","innerText","inputChangeHandler","toggleStickersTray","prevViewStickerOption","html","selectPastedContent","sel","range","chatWindow","window","getSelection","getRangeAt","rangeCount","deleteContents","el","createElement","frag","createDocumentFragment","node","lastNode","firstChild","appendChild","firstNode","insertNode","cloneRange","setStartAfter","setStartBefore","collapse","removeAllRanges","addRange","selection","originalRange","createRange","pasteHTML","setEndPoint","select","onEmojiSelect","emojiObject","attachmentClickHandler","old","actionSheet","emojiClickHandler","emojiTrayPreview","stickerClickHandler","actionCallback","shareLiveReaction","data","liveReaction","reaction","transientMessage","TransientMessage","sendTransientMessage","messageConstants","payload","onLiveReaction","attachOption","stickyAttachButtonStyle","className","onClick","bind","title","localize","attchButtonIconStyle","_actionSheetConfiguration","ActionSheetConfiguration","actionSheetBoard","_viewActionSheet$even","_viewActionSheet$even2","_actionSheetConfigura","CometChatPopover","position","x","clientX","y","clientY","actionSheetPopoverStyle","CometChatActionSheet","layoutModeIconURL","roundedPlus","actionSheetStyle","actions","_createPollConfiguration","CreatePollConfiguration","questionPlaceholderText","answerPlaceholderText","addAnswerText","answerHelpText","createPoll","withBackDrop","popoverForCreatePollStyle","CometChatCreatePoll","closeIconURL","addAnswerIconURL","createPollButtonText","deleteIconURL","defaultAnswers","createPollStyle","onClose","onCreatePoll","stickerButton","_stickerTemplate$curr","stickerBtnStyle","stickerBtnIconStyle","icon","_messagePreviewConfiguration","MessagePreviewConfiguration","previewTray","_messagePreview$messa","CometChatMessagePreview","messagePreviewTitle","messagePreviewSubtitle","onCloseClick","messagePreviewStyle","_stickerKeyboardConfiguration","StickerKeyboardConfiguration","stickerTray","CometChatStickerKeyboard","emptyText","errorText","loadingText","stickerKeyboardStyle","emojiButton","emojiButtonStyle","emojiBtnIconStyle","_emojiKeyboardConfiguration","EmojiKeyboardConfiguration","emojiBoard","_viewEmojiTray$event","_viewEmojiTray$event2","emojiBoardPopoverStyle","CometChatEmojiKeyboard","emojiKeyBoardStyle","liveReactionButton","_messageInputRef$curr","reactionBtnStyle","src","alt","reactionBtnIconStyle","sendButton","sendButtonStyle","sendBtnIconStyle","inputField","messageInputStyle","contentEditable","placeholder","dir","CometChatLocalize","getDir","onInput","onBlur","onKeyDown","Hooks","chatComposerStyle","fileInputStyle","onChange","composerInputStyle","tabIndex","inputInnerStyle","inputStickyStyle","stickyButtonStyle","defaultProps","BaseStyles","width","height","background","border","borderRadius","activeBackground","placeholderTextFont","placeholderTextColor","attachmentIconTint","sendButtonIconTint","inputBackground","inputTextFont","inputTextColor","emojiIconTint","stickerIconTint","stickerCloseIconTint","propTypes","bool","string","func","array"],"sources":["/home/admin1/dev/react/react-sample-guide/sample-react-guides/node_modules/react-ui-kit-testing/dist/Messages/CometChatMessageComposer/index.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CometChatMessageComposer = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _ = require(\"../..\");\nvar _2 = require(\"..\");\nvar _CometChatMessageHelper = require(\"../CometChatMessageHelper\");\nvar _CometChatMessageConstants = require(\"../CometChatMessageConstants\");\nvar _hooks = require(\"./hooks\");\nvar _style = require(\"./style\");\nvar _MessagePreviewConfiguration = require(\"../CometChatMessagePreview/MessagePreviewConfiguration\");\nvar _EmojiKeyboardConfiguration = require(\"../CometChatEmojiKeyboard/EmojiKeyboardConfiguration\");\nvar _CreatePollConfiguration = require(\"../CometChatCreatePoll/CreatePollConfiguration\");\nvar _StickerKeyboardConfiguration = require(\"../CometChatStickerKeyboard/StickerKeyboardConfiguration\");\nvar _Shared = require(\"../../Shared\");\nvar _addCircleFilled = _interopRequireDefault(require(\"./resources/add-circle-filled.svg\"));\nvar _emoji = _interopRequireDefault(require(\"./resources/emoji.svg\"));\nvar _sendMessage = _interopRequireDefault(require(\"./resources/send-message.svg\"));\nvar _closeCircle = _interopRequireDefault(require(\"./resources/close-circle.svg\"));\nvar _heart = _interopRequireDefault(require(\"./resources/heart.png\"));\nvar _delete = _interopRequireDefault(require(\"./resources/delete.svg\"));\nvar _this = void 0;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n/**\n *\n * CometChatMessageComposer component part of messages component it's takes user input text,image,video etc,after pressing send button\n * it's append messages in message list, with additonal CometChat SDK conversation object.\n *\n * @version 1.0.0\n * @author CometChatTeam\n * @copyright Â© 2022 CometChat Inc.\n *\n */\nvar CometChatMessageComposer = /*#__PURE__*/_react.default.forwardRef(function (props, ref) {\n  var _React$useState = _react.default.useState(null),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    chatWith = _React$useState2[0],\n    setChatWith = _React$useState2[1];\n  var _React$useState3 = _react.default.useState(null),\n    _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n    chatWithId = _React$useState4[0],\n    setChatWithId = _React$useState4[1];\n  var _React$useState5 = _react.default.useState(\"\"),\n    _React$useState6 = (0, _slicedToArray2.default)(_React$useState5, 2),\n    messageInput = _React$useState6[0],\n    setMessageInput = _React$useState6[1];\n  var _React$useState7 = _react.default.useState(false),\n    _React$useState8 = (0, _slicedToArray2.default)(_React$useState7, 2),\n    viewAttachButton = _React$useState8[0],\n    setViewAttachButton = _React$useState8[1];\n  var _React$useState9 = _react.default.useState(false),\n    _React$useState10 = (0, _slicedToArray2.default)(_React$useState9, 2),\n    viewSticker = _React$useState10[0],\n    setViewSticker = _React$useState10[1];\n  var _React$useState11 = _react.default.useState(null),\n    _React$useState12 = (0, _slicedToArray2.default)(_React$useState11, 2),\n    viewStickerTray = _React$useState12[0],\n    setViewStickerTray = _React$useState12[1];\n  var _React$useState13 = _react.default.useState({}),\n    _React$useState14 = (0, _slicedToArray2.default)(_React$useState13, 2),\n    viewActionSheet = _React$useState14[0],\n    setViewActionSheet = _React$useState14[1];\n  var _React$useState15 = _react.default.useState([]),\n    _React$useState16 = (0, _slicedToArray2.default)(_React$useState15, 2),\n    actionSheetItems = _React$useState16[0],\n    setActionSheetItems = _React$useState16[1];\n  var _React$useState17 = _react.default.useState(false),\n    _React$useState18 = (0, _slicedToArray2.default)(_React$useState17, 2),\n    viewCreatePoll = _React$useState18[0],\n    setViewCreatePoll = _React$useState18[1];\n  var _React$useState19 = _react.default.useState({}),\n    _React$useState20 = (0, _slicedToArray2.default)(_React$useState19, 2),\n    viewEmojiTray = _React$useState20[0],\n    setViewEmojiTray = _React$useState20[1];\n  var _React$useState21 = _react.default.useState(null),\n    _React$useState22 = (0, _slicedToArray2.default)(_React$useState21, 2),\n    messagePreview = _React$useState22[0],\n    setMessagePreview = _React$useState22[1];\n  var _React$useState23 = _react.default.useState(true),\n    _React$useState24 = (0, _slicedToArray2.default)(_React$useState23, 2),\n    viewInputField = _React$useState24[0],\n    setViewInputField = _React$useState24[1];\n  var stickerTemplate = _react.default.useRef(null);\n  var loggedInUser = _react.default.useRef(null);\n  var isTyping = _react.default.useRef(null);\n  var liveReactionTimeout = 0;\n  var disabledState = false;\n  var messageInputRef = _react.default.useRef(null);\n  var fileInputRef = _react.default.useRef(null);\n  var chatRef = _react.default.useRef(chatWith);\n  var user = props.user,\n    group = props.group,\n    hideAttachment = props.hideAttachment,\n    attachmentIconURL = props.attachmentIconURL,\n    stickerCloseIconURL = props.stickerCloseIconURL,\n    placeholderText = props.placeholderText,\n    hideLiveReaction = props.hideLiveReaction,\n    liveReactionIconURL = props.liveReactionIconURL,\n    hideEmoji = props.hideEmoji,\n    emojiIconURL = props.emojiIconURL,\n    showSendButton = props.showSendButton,\n    sendButtonIconURL = props.sendButtonIconURL,\n    onSendButtonClick = props.onSendButtonClick,\n    messageTypes = props.messageTypes,\n    excludeMessageTypes = props.excludeMessageTypes,\n    enableTypingIndicator = props.enableTypingIndicator,\n    enableSoundForMessages = props.enableSoundForMessages,\n    customOutgoingMessageSound = props.customOutgoingMessageSound,\n    style = props.style,\n    messagePreviewConfiguration = props.messagePreviewConfiguration,\n    emojiKeyboardConfiguration = props.emojiKeyboardConfiguration,\n    stickerKeyboardConfiguration = props.stickerKeyboardConfiguration,\n    createPollConfiguration = props.createPollConfiguration,\n    actionSheetConfiguration = props.actionSheetConfiguration,\n    theme = props.theme;\n  var _theme = new _.CometChatTheme(theme !== null && theme !== void 0 ? theme : {});\n\n  /**,\n   * Event callbacks\n   */\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      previewMessageForEdit: previewMessage\n    };\n  });\n  var draftMessage = function draftMessage() {};\n  var previewMessage = function previewMessage(message) {\n    setMessagePreview({\n      message: message,\n      mode: _.ConversationOptionConstants.edit\n    });\n    setMessageInput(message.text);\n    var element = messageInputRef.current;\n    var messageText = message.text;\n\n    //xss extensions data\n    var xssData = (0, _2.getExtensionsData)(message, _.MetadataConstants.extensions.xssFilter);\n    if (xssData && xssData.hasOwnProperty(_.ExtensionConstants.sanitizedText) && xssData.hasOwnProperty(_.ExtensionConstants.hasXSS) && xssData.hasXSS === _.ExtensionConstants.yes) {\n      messageText = xssData.sanitized_text;\n    }\n    element.focus();\n    element.textContent = \"\";\n    pasteHtmlAtCaret(messageText, false);\n  };\n  var playAudio = function playAudio() {\n    if (customOutgoingMessageSound) {\n      _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage, customOutgoingMessageSound);\n    } else {\n      _.CometChatSoundManager.play(_.CometChatSoundManager.Sound.outgoingMessage);\n    }\n  };\n  var closeMessagePreview = function closeMessagePreview() {\n    setMessagePreview(null);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n  };\n  var sendMessageOnEnter = function sendMessageOnEnter(event) {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      sendTextMessage();\n    }\n  };\n\n  /** send text message */\n  var sendTextMessage = function sendTextMessage() {\n    setViewEmojiTray(false);\n    if (!messageInput.trim().length) {\n      return false;\n    }\n    if (messagePreview && messagePreview.mode === _.ConversationOptionConstants.edit) {\n      editMessage(messagePreview.message);\n      return false;\n    }\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageInput, chatWith);\n    textMessage.setSender(loggedInUser.current);\n    textMessage.setReceiver(chatWith);\n    textMessage.setText(messageInput);\n    textMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    textMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: textMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n    _chat.CometChat.sendMessage(textMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n    if (onSendButtonClick) {\n      onSendButtonClick();\n    }\n  };\n\n  /** send media message */\n  var sendMediaMessage = function sendMediaMessage(messageInput, messageType) {\n    setViewActionSheet(false);\n    var mediaMessage = new _chat.CometChat.MediaMessage(chatWithId, messageInput, messageType, chatWith);\n    mediaMessage.setSender(loggedInUser.current);\n    mediaMessage.setReceiver(chatWith);\n    mediaMessage.setType(messageType);\n    mediaMessage.setMetadata((0, _defineProperty2.default)({}, _.MetadataConstants.file, messageInput));\n    mediaMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    mediaMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: mediaMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    _chat.CometChat.sendMessage(mediaMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: mediaMessage,\n        error: error\n      });\n    });\n  };\n\n  /** send sticker */\n  var sendSticker = function sendSticker(stickerMessage) {\n    var customData = {\n      sticker_url: stickerMessage.stickerUrl,\n      sticker_name: stickerMessage.stickerName\n    };\n    var customMessage = new _chat.CometChat.CustomMessage(chatWithId, chatWith, _2.CometChatCustomMessageTypes.sticker, customData);\n    customMessage.setSender(loggedInUser.current);\n    customMessage.setReceiver(chatWith);\n    customMessage.setMetadata({\n      incrementUnreadCount: true\n    });\n    customMessage.setSentAt((0, _CometChatMessageHelper.getUnixTimestamp)());\n    customMessage.setMuid(String((0, _CometChatMessageHelper.getUnixTimestamp)()));\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n      message: customMessage,\n      status: _CometChatMessageConstants.messageStatus.inprogress\n    });\n    if (enableSoundForMessages) playAudio();\n    _chat.CometChat.sendCustomMessage(customMessage).then(function (message) {\n      var messageObject = _objectSpread({}, message);\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageSent, {\n        message: messageObject,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: customMessage,\n        error: error\n      });\n    });\n  };\n\n  /** edit message */\n  var editMessage = function editMessage(message) {\n    endTyping(null, null);\n    var messageText = messageInput.trim();\n    var textMessage = new _chat.CometChat.TextMessage(chatWithId, messageText, chatWith);\n    textMessage.setId(messagePreview.message.id);\n    setMessageInput(\"\");\n    messageInputRef.current.textContent = \"\";\n    if (enableSoundForMessages) playAudio();\n    setMessagePreview(null);\n    _chat.CometChat.editMessage(textMessage).then(function (editedMessage) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageEdit, {\n        message: editedMessage,\n        status: _CometChatMessageConstants.messageStatus.success\n      });\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, {\n        message: textMessage,\n        error: error\n      });\n    });\n  };\n  var startTyping = function startTyping(endTypingTimeout, typingMetadata) {\n    //if typing is disabled\n    if (!enableTypingIndicator) {\n      return false;\n    }\n\n    //if typing is in progress\n    if (isTyping.current) {\n      return false;\n    }\n    var typingInterval = endTypingTimeout || 5000;\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.startTyping(typingNotification);\n    isTyping.current = setTimeout(function () {\n      endTyping(null, typingMetadata);\n    }, typingInterval);\n  };\n  var endTyping = function endTyping(event, typingMetadata) {\n    if (event) {\n      event.persist();\n    }\n    if (!enableTypingIndicator) {\n      return false;\n    }\n    var metadata = typingMetadata || undefined;\n    var typingNotification = new _chat.CometChat.TypingIndicator(chatWithId, chatWith, metadata);\n    _chat.CometChat.endTyping(typingNotification);\n    clearTimeout(isTyping.current);\n    isTyping.current = null;\n  };\n  var fileInputHandler = function fileInputHandler(event) {\n    setViewActionSheet(false);\n    if (!fileInputRef.current) {\n      return false;\n    }\n    fileInputRef.current.click();\n  };\n\n  /** fileInputChangeHandler */\n  var fileInputChangeHandler = function fileInputChangeHandler(event) {\n    setViewActionSheet(false);\n    var uploadedFile = event.target.files[\"0\"];\n    var fileNameType = uploadedFile.type.split(\"/\");\n    var reader = new FileReader();\n    reader.addEventListener(\"load\", function (event) {\n      var newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n      switch (fileNameType[0]) {\n        case \"image\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.image);\n          break;\n        case \"video\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.video);\n          break;\n        case \"audio\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.audio);\n          break;\n        case \"file\":\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n        default:\n          sendMediaMessage(newFile, _.MessageTypeConstants.file);\n          break;\n      }\n      fileInputRef.current.value = \"\";\n    }, false);\n    reader.readAsArrayBuffer(uploadedFile);\n  };\n\n  /** closeCreatePoll */\n  var closeCreatePoll = function closeCreatePoll() {\n    setViewCreatePoll(false);\n  };\n\n  /** onPollSubmit */\n  var onPollSubmit = function onPollSubmit() {\n    setViewCreatePoll(false);\n  };\n\n  /** openCreatePoll  */\n  var openCreatePoll = function openCreatePoll() {\n    setViewActionSheet(false);\n    setViewCreatePoll(true);\n  };\n\n  /** share collaborative document */\n  var shareCollaborativeDocument = function shareCollaborativeDocument() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.document, _.ExtensionConstants.post, _.ExtensionURLs.document, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, error);\n    });\n  };\n\n  /** share collaborative whitevoard */\n  var shareCollaborativeWhiteboard = function shareCollaborativeWhiteboard() {\n    setViewActionSheet(false);\n    _chat.CometChat.callExtension(_.ExtensionConstants.whiteboard, _.ExtensionConstants.post, _.ExtensionURLs.whiteboard, {\n      receiver: chatRef.current.chatWithId,\n      receiverType: chatRef.current.chatWith\n    }).catch(function (error) {\n      _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onMessageError, error);\n    });\n  };\n\n  /** handleInputEvent */\n  var handleInputEvent = function handleInputEvent(event) {\n    startTyping();\n    var elem = event.currentTarget;\n    var messageInput = elem.textContent.trim();\n    if (!messageInput.length) {\n      event.currentTarget.textContent = messageInput;\n    }\n    setMessageInput(elem.innerText);\n  };\n\n  /** inputChangeHandler */\n  var inputChangeHandler = function inputChangeHandler(event) {\n    setTimeout(handleInputEvent(event), 500);\n  };\n\n  /** composer sticker iconClickHandler */\n  var toggleStickersTray = function toggleStickersTray() {\n    setViewStickerTray(function (prevViewStickerOption) {\n      return !prevViewStickerOption;\n    });\n  };\n  var pasteHtmlAtCaret = function pasteHtmlAtCaret(html, selectPastedContent) {\n    var sel, range;\n    var chatWindow = window;\n    if (chatWindow.getSelection) {\n      // IE9 and non-IE\n      sel = chatWindow.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        range = sel.getRangeAt(0);\n        range.deleteContents();\n        // Range.createContextualFragment() would be useful here but is\n        // only relatively recently standardized and is not supported in\n        // some browsers (IE9, for one)\n        var el = document.createElement(\"div\");\n        el.innerText = html;\n        var frag = document.createDocumentFragment(),\n          node,\n          lastNode;\n        while (node = el.firstChild) {\n          lastNode = frag.appendChild(node);\n        }\n        var firstNode = frag.firstChild;\n        range.insertNode(frag);\n        if (lastNode) {\n          range = range.cloneRange();\n          range.setStartAfter(lastNode);\n          if (selectPastedContent) {\n            range.setStartBefore(firstNode);\n          } else {\n            range.collapse(true);\n          }\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }\n      }\n    } else if ((sel = document.selection) && sel.type !== \"Control\") {\n      // IE < 9\n      var originalRange = sel.createRange();\n      originalRange.collapse(true);\n      sel.createRange().pasteHTML(html);\n      if (selectPastedContent) {\n        range = sel.createRange();\n        range.setEndPoint(\"StartToStart\", originalRange);\n        range.select();\n      }\n    }\n  };\n\n  /** select emoji from emojikeyboard */\n  var onEmojiSelect = function onEmojiSelect(emojiObject) {\n    var element = messageInputRef.current;\n    element.focus();\n    element.innerText = \"\";\n    pasteHtmlAtCaret(messageInput + emojiObject, false);\n    setMessageInput(element.innerText);\n  };\n\n  /** composer pluse button  onClickHandler */\n  var attachmentClickHandler = function attachmentClickHandler(event) {\n    setViewActionSheet(function (old) {\n      return {\n        actionSheet: !old.actionSheet,\n        event: event\n      };\n    });\n  };\n\n  /** composer  emoji onClickHandler  */\n  var emojiClickHandler = function emojiClickHandler(event) {\n    setViewEmojiTray(function (old) {\n      return {\n        emojiTrayPreview: !old.emojiTrayPreview,\n        event: event\n      };\n    });\n  };\n\n  /** composer  sticker onClickHandler  */\n  var stickerClickHandler = function stickerClickHandler() {\n    if (stickerTemplate.current.actionCallback) {\n      stickerTemplate.current.actionCallback();\n    } else {\n      toggleStickersTray();\n    }\n  };\n\n  /** if already live reaction in progress */\n  var shareLiveReaction = function shareLiveReaction() {\n    if (liveReactionTimeout) {\n      return false;\n    }\n\n    /** fetching the metadata type from constants */\n    var data = {\n      type: _.MetadataConstants.liveReaction,\n      reaction: liveReactionIconURL || _heart.default\n    };\n\n    /*** send transient message */\n    var transientMessage = new _chat.CometChat.TransientMessage(chatWithId, chatWith, data);\n    _chat.CometChat.sendTransientMessage(transientMessage);\n\n    /** set timeout till the next share */\n    liveReactionTimeout = setTimeout(clearTimeout(liveReactionTimeout), _2.messageConstants.liveReactionTimeout);\n\n    /** emit event to share live reaction */\n    var payload = {\n      reaction: liveReactionIconURL || _heart.default\n    };\n    _2.CometChatMessageEvents.emit(_2.CometChatMessageEvents.onLiveReaction, payload);\n  };\n\n  /** attach/composr pluse icon */\n  var attachOption = function attachOption() {\n    return viewAttachButton ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      style: (0, _style.stickyAttachButtonStyle)(),\n      className: \"attachment__icon\",\n      onClick: attachmentClickHandler.bind(_this),\n      title: (0, _.localize)(\"ATTACH\")\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.attchButtonIconStyle)(style, attachmentIconURL, _theme)\n    })) : null;\n  };\n\n  /**CreatePollConfiguration */\n  var _actionSheetConfiguration = actionSheetConfiguration !== null && actionSheetConfiguration !== void 0 ? actionSheetConfiguration : new _Shared.ActionSheetConfiguration({});\n\n  /**  action sheet render under tooltip */\n  var actionSheetBoard = function actionSheetBoard() {\n    var _viewActionSheet$even, _viewActionSheet$even2, _actionSheetConfigura;\n    return viewActionSheet.actionSheet ? /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n      position: \"top\",\n      x: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even = viewActionSheet.event) === null || _viewActionSheet$even === void 0 ? void 0 : _viewActionSheet$even.clientX,\n      y: viewActionSheet === null || viewActionSheet === void 0 ? void 0 : (_viewActionSheet$even2 = viewActionSheet.event) === null || _viewActionSheet$even2 === void 0 ? void 0 : _viewActionSheet$even2.clientY,\n      style: (0, _style.actionSheetPopoverStyle)(_theme)\n    }, /*#__PURE__*/_react.default.createElement(_.CometChatActionSheet, {\n      title: (0, _.localize)(\"ADD_TO_CHAT\"),\n      layoutModeIconURL: (_actionSheetConfigura = _actionSheetConfiguration === null || _actionSheetConfiguration === void 0 ? void 0 : _actionSheetConfiguration.roundedPlus) !== null && _actionSheetConfigura !== void 0 ? _actionSheetConfigura : _addCircleFilled.default,\n      theme: _theme,\n      style: (0, _style.actionSheetStyle)(_theme),\n      actions: actionSheetItems\n    })) : null;\n  };\n\n  /**CreatePollConfiguration */\n  var _createPollConfiguration = createPollConfiguration !== null && createPollConfiguration !== void 0 ? createPollConfiguration : new _CreatePollConfiguration.CreatePollConfiguration({});\n  var title = (0, _.localize)(\"CREATE_POLL\");\n  var questionPlaceholderText = (0, _.localize)(\"QUESTION\");\n  var answerPlaceholderText = (0, _.localize)(\"ANSWER\");\n  var addAnswerText = (0, _.localize)(\"ADD_ANSWER\");\n  var answerHelpText = (0, _.localize)(\"SET_THE_ANSWERS\");\n\n  /** createpoll */\n  var createPoll = function createPoll() {\n    return viewCreatePoll ? /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n      withBackDrop: viewCreatePoll ? true : false,\n      style: (0, _style.popoverForCreatePollStyle)(_theme, _createPollConfiguration)\n    }, /*#__PURE__*/_react.default.createElement(_2.CometChatCreatePoll, {\n      closeIconURL: _createPollConfiguration.closeIconURL || _closeCircle.default,\n      title: title,\n      addAnswerIconURL: _createPollConfiguration.addAnswerIconURL || _addCircleFilled.default,\n      createPollButtonText: (0, _.localize)(\"SEND\"),\n      deleteIconURL: _createPollConfiguration.deleteIconURL || _delete.default,\n      defaultAnswers: 2,\n      theme: _theme,\n      style: (0, _style.createPollStyle)(_theme, _createPollConfiguration),\n      questionPlaceholderText: questionPlaceholderText,\n      addAnswerText: addAnswerText,\n      answerPlaceholderText: answerPlaceholderText,\n      answerHelpText: answerHelpText,\n      user: user,\n      group: group,\n      onClose: _createPollConfiguration.onClose || closeCreatePoll,\n      onCreatePoll: _createPollConfiguration.onCreatePoll || onPollSubmit\n    })) : null;\n  };\n\n  /** sticker button */\n  var stickerButton = function stickerButton() {\n    var _stickerTemplate$curr;\n    return viewSticker ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"STICKER\"),\n      style: (0, _style.stickerBtnStyle)(),\n      className: \"button__sticker\",\n      onClick: stickerClickHandler\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.stickerBtnIconStyle)(style, viewStickerTray ? stickerCloseIconURL : stickerTemplate === null || stickerTemplate === void 0 ? void 0 : (_stickerTemplate$curr = stickerTemplate.current) === null || _stickerTemplate$curr === void 0 ? void 0 : _stickerTemplate$curr.icon, _theme)\n    })) : null;\n  };\n\n  /** messagePreviewConfiguration */\n\n  var _messagePreviewConfiguration = messagePreviewConfiguration || new _MessagePreviewConfiguration.MessagePreviewConfiguration({});\n\n  /** message preview  */\n  var previewTray = function previewTray() {\n    var _messagePreview$messa;\n    return messagePreview ? /*#__PURE__*/_react.default.createElement(_2.CometChatMessagePreview, {\n      messagePreviewTitle: _messagePreviewConfiguration.messagePreviewTitle || (0, _.localize)(\"MESSAGE_EDIT\"),\n      messagePreviewSubtitle: _messagePreviewConfiguration.messagePreviewSubtitle || (messagePreview === null || messagePreview === void 0 ? void 0 : (_messagePreview$messa = messagePreview.message) === null || _messagePreview$messa === void 0 ? void 0 : _messagePreview$messa.text),\n      closeIconURL: _messagePreviewConfiguration.closeIconURL || _closeCircle.default,\n      onCloseClick: _messagePreviewConfiguration.onCloseClick || closeMessagePreview.bind(_this),\n      theme: _theme,\n      style: (0, _style.messagePreviewStyle)(_theme, _messagePreviewConfiguration)\n    }) : null;\n  };\n\n  /**StickerKeyboardConfiguration */\n  var _stickerKeyboardConfiguration = stickerKeyboardConfiguration !== null && stickerKeyboardConfiguration !== void 0 ? stickerKeyboardConfiguration : new _StickerKeyboardConfiguration.StickerKeyboardConfiguration({});\n\n  /** sticker board */\n  var stickerTray = function stickerTray() {\n    return viewStickerTray ? /*#__PURE__*/_react.default.createElement(_2.CometChatStickerKeyboard, {\n      onClick: sendSticker.bind(_this),\n      onClose: _stickerKeyboardConfiguration.onClose || toggleStickersTray,\n      emptyText: (0, _.localize)(\"NO_STICKERS_FOUND\"),\n      errorText: (0, _.localize)(\"SOMETHING_WRONG\"),\n      loadingText: (0, _.localize)(\"LOADING\"),\n      theme: _theme,\n      style: (0, _style.stickerKeyboardStyle)(_theme, _stickerKeyboardConfiguration)\n    }) : null;\n  };\n\n  /** emoji icon */\n  var emojiButton = function emojiButton() {\n    return !hideEmoji ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"EMOJI\"),\n      style: (0, _style.emojiButtonStyle)(),\n      className: \"button__emoji\",\n      onClick: emojiClickHandler.bind(_this)\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.emojiBtnIconStyle)(style, emojiIconURL, _theme)\n    })) : null;\n  };\n\n  /** EmojiKeyboardConfiguration */\n  var _emojiKeyboardConfiguration = emojiKeyboardConfiguration || new _EmojiKeyboardConfiguration.EmojiKeyboardConfiguration({});\n\n  /** emoji board */\n  var emojiBoard = function emojiBoard() {\n    if (viewEmojiTray.emojiTrayPreview) {\n      var _viewEmojiTray$event, _viewEmojiTray$event2;\n      return /*#__PURE__*/_react.default.createElement(_.CometChatPopover, {\n        position: \"top\",\n        x: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event = viewEmojiTray.event) === null || _viewEmojiTray$event === void 0 ? void 0 : _viewEmojiTray$event.clientX,\n        y: viewEmojiTray === null || viewEmojiTray === void 0 ? void 0 : (_viewEmojiTray$event2 = viewEmojiTray.event) === null || _viewEmojiTray$event2 === void 0 ? void 0 : _viewEmojiTray$event2.clientY,\n        style: (0, _style.emojiBoardPopoverStyle)(_theme, _emojiKeyboardConfiguration)\n      }, /*#__PURE__*/_react.default.createElement(_2.CometChatEmojiKeyboard, {\n        theme: _theme,\n        style: (0, _style.emojiKeyBoardStyle)(_theme, _emojiKeyboardConfiguration),\n        onClick: (_emojiKeyboardConfiguration === null || _emojiKeyboardConfiguration === void 0 ? void 0 : _emojiKeyboardConfiguration.onClick) || onEmojiSelect.bind(_this)\n      }));\n    } else {\n      return null;\n    }\n  };\n\n  /** live reaction button */\n  var liveReactionButton = function liveReactionButton() {\n    var _messageInputRef$curr;\n    if (!hideLiveReaction && !(messageInputRef !== null && messageInputRef !== void 0 && (_messageInputRef$curr = messageInputRef.current) !== null && _messageInputRef$curr !== void 0 && _messageInputRef$curr.innerText)) {\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        style: (0, _style.reactionBtnStyle)(),\n        className: \"button__reactions\",\n        onClick: shareLiveReaction.bind(_this)\n      }, /*#__PURE__*/_react.default.createElement(\"img\", {\n        src: liveReactionIconURL,\n        alt: liveReactionIconURL,\n        title: (0, _.localize)(\"LIVE_REACTION\"),\n        style: (0, _style.reactionBtnIconStyle)()\n      }));\n    }\n    return null;\n  };\n\n  /** send button */\n  var sendButton = function sendButton() {\n    return messageInput !== null && messageInput !== void 0 && messageInput.length && showSendButton || hideLiveReaction ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      title: (0, _.localize)(\"SEND_MESSAGE\"),\n      style: (0, _style.sendButtonStyle)(),\n      className: \"button__send\",\n      onClick: sendTextMessage\n    }, /*#__PURE__*/_react.default.createElement(\"i\", {\n      style: (0, _style.sendBtnIconStyle)(style, sendButtonIconURL, _theme, messageInput, isTyping)\n    })) : null;\n  };\n\n  /**message input field*/\n  var inputField = function inputField() {\n    return viewInputField ? /*#__PURE__*/_react.default.createElement(\"div\", {\n      style: (0, _style.messageInputStyle)(style, disabledState, _theme),\n      className: \"input__message-input\",\n      contentEditable: \"true\",\n      placeholder: placeholderText,\n      dir: _.CometChatLocalize.getDir(),\n      onInput: inputChangeHandler,\n      onBlur: endTyping.bind(_this),\n      onKeyDown: sendMessageOnEnter,\n      ref: messageInputRef\n    }) : null;\n  };\n  (0, _hooks.Hooks)(props, loggedInUser, setChatWith, setChatWithId, chatRef, setViewSticker, stickerTemplate, setActionSheetItems, setViewInputField, setViewAttachButton, openCreatePoll, fileInputHandler, shareCollaborativeDocument, shareCollaborativeWhiteboard, sendSticker);\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.chatComposerStyle)(style, _theme),\n    className: \"chat__composer\"\n  }, previewTray(), stickerTray(), emojiBoard(), actionSheetBoard(), /*#__PURE__*/_react.default.createElement(\"input\", {\n    type: \"file\",\n    ref: fileInputRef,\n    style: (0, _style.fileInputStyle)(),\n    onChange: fileInputChangeHandler\n  }), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.composerInputStyle)(style),\n    className: \"composer__input\"\n  }, /*#__PURE__*/_react.default.createElement(\"div\", {\n    tabIndex: \"-1\",\n    style: (0, _style.inputInnerStyle)(style, _theme),\n    className: \"input__inner\"\n  }, inputField(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    style: (0, _style.inputStickyStyle)(disabledState, attachOption(), _theme),\n    className: \"input__sticky\"\n  }, attachOption(), /*#__PURE__*/_react.default.createElement(\"div\", {\n    className: \"input__sticky__buttons\",\n    style: (0, _style.stickyButtonStyle)()\n  }, stickerButton(), emojiButton(), liveReactionButton(), sendButton())))), createPoll());\n});\nexports.CometChatMessageComposer = CometChatMessageComposer;\nCometChatMessageComposer.defaultProps = {\n  user: null,\n  group: null,\n  style: _objectSpread(_objectSpread({}, new _Shared.BaseStyles({\n    width: \"100%\",\n    height: \"auto\",\n    background: \"rgb(255, 255, 255)\",\n    border: \"1px solid rgb(234, 234, 234)\",\n    borderRadius: \"8px\",\n    activeBackground: \"\"\n  })), {}, {\n    placeholderTextFont: \"400 15px Inter, sans-serif\",\n    placeholderTextColor: \"rgba(20, 20, 20,0.6)\",\n    attachmentIconTint: \"rgba(20, 20, 20, 0.46)\",\n    sendButtonIconTint: \"#39f\",\n    inputBackground: \"\",\n    inputTextFont: \"\",\n    inputTextColor: \"\",\n    emojiIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerIconTint: \"rgba(20, 20, 20, 0.46)\",\n    stickerCloseIconTint: \"\"\n  }),\n  attachmentIconURL: _addCircleFilled.default,\n  stickerCloseIconURL: \"\",\n  placeholderText: (0, _.localize)(\"ENTER_YOUR_MESSAGE_HERE\"),\n  hideAttachment: false,\n  liveReactionIconURL: _heart.default,\n  hideLiveReaction: false,\n  hideEmoji: false,\n  emojiIconURL: _emoji.default,\n  showSendButton: true,\n  sendButtonIconURL: _sendMessage.default,\n  messageTypes: null,\n  excludeMessageTypes: null,\n  onSendButtonClick: null,\n  enableTypingIndicator: true,\n  enableSoundForMessages: true,\n  customOutgoingMessageSound: null,\n  messagePreviewConfiguration: null,\n  emojiKeyboardConfiguration: null,\n  stickerKeyboardConfiguration: null,\n  createPollConfiguration: null,\n  actionSheetConfiguration: null\n};\nCometChatMessageComposer.propTypes = {\n  user: _propTypes.default.object,\n  group: _propTypes.default.object,\n  hideAttachment: _propTypes.default.bool,\n  attachmentIconURL: _propTypes.default.string,\n  stickerCloseIconURL: _propTypes.default.string,\n  placeholderText: _propTypes.default.string,\n  hideLiveReaction: _propTypes.default.bool,\n  liveReactionIconURL: _propTypes.default.string,\n  hideEmoji: _propTypes.default.bool,\n  emojiIconURL: _propTypes.default.string,\n  showSendButton: _propTypes.default.bool,\n  sendButtonIconURL: _propTypes.default.string,\n  onSendButtonClick: _propTypes.default.func,\n  messageTypes: _propTypes.default.array,\n  excludeMessageTypes: _propTypes.default.array,\n  enableTypingIndicator: _propTypes.default.bool,\n  enableSoundForMessages: _propTypes.default.bool,\n  customOutgoingMessageSound: _propTypes.default.string,\n  style: _propTypes.default.object,\n  messagePreviewConfiguration: _propTypes.default.object,\n  emojiKeyboardConfiguration: _propTypes.default.object,\n  stickerKeyboardConfiguration: _propTypes.default.object,\n  createPollConfiguration: _propTypes.default.object,\n  actionSheetConfiguration: _propTypes.default.object,\n  theme: _propTypes.default.object\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}