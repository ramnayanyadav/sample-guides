{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Hooks = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _ = require(\"..\");\nvar _2 = require(\"../..\");\nvar getUser = function getUser(uid) {\n  return new Promise(function (resolve, reject) {\n    _chat.CometChat.getUser(uid).then(function (user) {\n      return resolve(user);\n    })[\"catch\"](function (error) {\n      return reject(error);\n    });\n  });\n};\nvar getGroup = function getGroup(guid) {\n  return new Promise(function (resolve, reject) {\n    _chat.CometChat.getGroup(guid).then(function (group) {\n      return resolve(group);\n    })[\"catch\"](function (error) {\n      return reject(error);\n    });\n  });\n};\nvar Hooks = function Hooks(props, loggedInUser, setChatWith, setChatWithType, setMessageHeaderStatus, setUserPresence, messageHeaderManager, messageHeaderCallback, handlers, callbackData, errorHandler) {\n  //fetch logged in user\n  _react[\"default\"].useEffect(function () {\n    _chat.CometChat.getLoggedinUser().then(function (user) {\n      var _messageHeaderManager;\n      loggedInUser.current = user;\n      (_messageHeaderManager = messageHeaderManager.current) === null || _messageHeaderManager === void 0 ? void 0 : _messageHeaderManager.attachListeners(messageHeaderCallback);\n    })[\"catch\"](function (error) {\n      return errorHandler(error);\n    });\n  }, []);\n  var updateMessageHeaderStatusForUser = _react[\"default\"].useCallback(function (user) {\n    if (user.status === _2.UserStatusConstants.offline) {\n      setMessageHeaderStatus((0, _2.localize)(\"OFFLINE\"));\n      setUserPresence(_2.UserStatusConstants.offline);\n    } else if (user.status === _2.UserStatusConstants.online) {\n      setMessageHeaderStatus((0, _2.localize)(\"ONLINE\"));\n      setUserPresence(_2.UserStatusConstants.online);\n    }\n  }, [setMessageHeaderStatus, setUserPresence]);\n  var updateMessageHeaderStatusForGroup = _react[\"default\"].useCallback(function (group) {\n    var status = \"\".concat(group.membersCount, \" \").concat((0, _2.localize)(\"MEMBERS\"));\n    setMessageHeaderStatus(status);\n    //setUserPresence(CometChat.USER_STATUS.OFFLINE);\n  }, [setMessageHeaderStatus]);\n\n  //update receiver user\n  _react[\"default\"].useEffect(function () {\n    if (props.user && props.user.uid) {\n      if (props.user.name) {\n        setChatWithType(_.CometChatMessageReceiverType.user);\n        setChatWith(props.user);\n        updateMessageHeaderStatusForUser(props.user);\n      } else {\n        getUser(props.user.uid).then(function (user) {\n          setChatWithType(_.CometChatMessageReceiverType.user);\n          setChatWith(user);\n          updateMessageHeaderStatusForUser(user);\n        })[\"catch\"](function (error) {\n          return errorHandler(error);\n        });\n      }\n    } else if (props.group && props.group.guid) {\n      if (props.group.name) {\n        setChatWithType(_.CometChatMessageReceiverType.group);\n        setChatWith(props.group);\n        updateMessageHeaderStatusForGroup(props.group);\n      } else {\n        getGroup(props.group.guid).then(function (group) {\n          setChatWithType(_.CometChatMessageReceiverType.group);\n          setChatWith(group);\n          updateMessageHeaderStatusForGroup(group);\n        })[\"catch\"](function (error) {\n          return errorHandler(error);\n        });\n      }\n    }\n  }, [props.user, props.group, setChatWith, setChatWithType, updateMessageHeaderStatusForUser, updateMessageHeaderStatusForGroup]);\n  _react[\"default\"].useEffect(function () {\n    var handler = handlers[callbackData === null || callbackData === void 0 ? void 0 : callbackData.name];\n    if (handler) return handler.apply(void 0, (0, _toConsumableArray2[\"default\"])(callbackData === null || callbackData === void 0 ? void 0 : callbackData.args));\n  }, [callbackData, handlers]);\n};\nexports.Hooks = Hooks;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","Hooks","_toConsumableArray2","_react","_chat","_","_2","getUser","uid","Promise","resolve","reject","CometChat","then","user","error","getGroup","guid","group","props","loggedInUser","setChatWith","setChatWithType","setMessageHeaderStatus","setUserPresence","messageHeaderManager","messageHeaderCallback","handlers","callbackData","errorHandler","useEffect","getLoggedinUser","_messageHeaderManager","current","attachListeners","updateMessageHeaderStatusForUser","useCallback","status","UserStatusConstants","offline","localize","online","updateMessageHeaderStatusForGroup","concat","membersCount","name","CometChatMessageReceiverType","handler","apply","args"],"sources":["/home/admin1/dev/react/sample-react-guides/node_modules/@cometchat-pro/react-ui-kit/dist/Messages/CometChatMessageHeader/hooks.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Hooks = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _chat = require(\"@cometchat-pro/chat\");\nvar _ = require(\"..\");\nvar _2 = require(\"../..\");\nvar getUser = function getUser(uid) {\n  return new Promise(function (resolve, reject) {\n    _chat.CometChat.getUser(uid).then(function (user) {\n      return resolve(user);\n    })[\"catch\"](function (error) {\n      return reject(error);\n    });\n  });\n};\nvar getGroup = function getGroup(guid) {\n  return new Promise(function (resolve, reject) {\n    _chat.CometChat.getGroup(guid).then(function (group) {\n      return resolve(group);\n    })[\"catch\"](function (error) {\n      return reject(error);\n    });\n  });\n};\nvar Hooks = function Hooks(props, loggedInUser, setChatWith, setChatWithType, setMessageHeaderStatus, setUserPresence, messageHeaderManager, messageHeaderCallback, handlers, callbackData, errorHandler) {\n  //fetch logged in user\n  _react[\"default\"].useEffect(function () {\n    _chat.CometChat.getLoggedinUser().then(function (user) {\n      var _messageHeaderManager;\n      loggedInUser.current = user;\n      (_messageHeaderManager = messageHeaderManager.current) === null || _messageHeaderManager === void 0 ? void 0 : _messageHeaderManager.attachListeners(messageHeaderCallback);\n    })[\"catch\"](function (error) {\n      return errorHandler(error);\n    });\n  }, []);\n  var updateMessageHeaderStatusForUser = _react[\"default\"].useCallback(function (user) {\n    if (user.status === _2.UserStatusConstants.offline) {\n      setMessageHeaderStatus((0, _2.localize)(\"OFFLINE\"));\n      setUserPresence(_2.UserStatusConstants.offline);\n    } else if (user.status === _2.UserStatusConstants.online) {\n      setMessageHeaderStatus((0, _2.localize)(\"ONLINE\"));\n      setUserPresence(_2.UserStatusConstants.online);\n    }\n  }, [setMessageHeaderStatus, setUserPresence]);\n  var updateMessageHeaderStatusForGroup = _react[\"default\"].useCallback(function (group) {\n    var status = \"\".concat(group.membersCount, \" \").concat((0, _2.localize)(\"MEMBERS\"));\n    setMessageHeaderStatus(status);\n    //setUserPresence(CometChat.USER_STATUS.OFFLINE);\n  }, [setMessageHeaderStatus]);\n\n  //update receiver user\n  _react[\"default\"].useEffect(function () {\n    if (props.user && props.user.uid) {\n      if (props.user.name) {\n        setChatWithType(_.CometChatMessageReceiverType.user);\n        setChatWith(props.user);\n        updateMessageHeaderStatusForUser(props.user);\n      } else {\n        getUser(props.user.uid).then(function (user) {\n          setChatWithType(_.CometChatMessageReceiverType.user);\n          setChatWith(user);\n          updateMessageHeaderStatusForUser(user);\n        })[\"catch\"](function (error) {\n          return errorHandler(error);\n        });\n      }\n    } else if (props.group && props.group.guid) {\n      if (props.group.name) {\n        setChatWithType(_.CometChatMessageReceiverType.group);\n        setChatWith(props.group);\n        updateMessageHeaderStatusForGroup(props.group);\n      } else {\n        getGroup(props.group.guid).then(function (group) {\n          setChatWithType(_.CometChatMessageReceiverType.group);\n          setChatWith(group);\n          updateMessageHeaderStatusForGroup(group);\n        })[\"catch\"](function (error) {\n          return errorHandler(error);\n        });\n      }\n    }\n  }, [props.user, props.group, setChatWith, setChatWithType, updateMessageHeaderStatusForUser, updateMessageHeaderStatusForGroup]);\n  _react[\"default\"].useEffect(function () {\n    var handler = handlers[callbackData === null || callbackData === void 0 ? void 0 : callbackData.name];\n    if (handler) return handler.apply(void 0, (0, _toConsumableArray2[\"default\"])(callbackData === null || callbackData === void 0 ? void 0 : callbackData.args));\n  }, [callbackData, handlers]);\n};\nexports.Hooks = Hooks;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}