"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Hooks = void 0;

var _react = _interopRequireDefault(require("react"));

var _ = require("../../..");

var Hooks = function Hooks(props, setWhiteboardURL) {
  _react.default.useEffect(function () {
    var _props$whiteboardURL;

    if (props !== null && props !== void 0 && props.whiteboardURL && (_props$whiteboardURL = props.whiteboardURL) !== null && _props$whiteboardURL !== void 0 && _props$whiteboardURL.length) {
      setWhiteboardURL(props === null || props === void 0 ? void 0 : props.whiteboardURL);
    } else if (props !== null && props !== void 0 && props.messageObject) {
      var _MetadataConstants$ex;

      var whiteboardData = (0, _.getExtensionsData)(props === null || props === void 0 ? void 0 : props.messageObject, (_MetadataConstants$ex = _.MetadataConstants.extensions) === null || _MetadataConstants$ex === void 0 ? void 0 : _MetadataConstants$ex.whiteboard);

      if (whiteboardData && whiteboardData.board_url && whiteboardData.board_url.trim().length) {
        var _props$loggedInUser;

        // Appending the username to the board_url
        var username = (_props$loggedInUser = props.loggedInUser) === null || _props$loggedInUser === void 0 ? void 0 : _props$loggedInUser.name.split(" ").join("_");
        setWhiteboardURL(whiteboardData.board_url + "&username=" + username);
      }
    }
  }, [props.whiteboardURL, props.messageObject, props.loggedInUser, setWhiteboardURL]);
};

exports.Hooks = Hooks;